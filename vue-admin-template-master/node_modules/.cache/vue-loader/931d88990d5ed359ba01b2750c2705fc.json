{"remainingRequest":"E:\\vue\\vue-admin-template-master\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\vue\\vue-admin-template-master\\src\\views\\Editor\\Edit.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\vue\\vue-admin-template-master\\src\\views\\Editor\\Edit.vue","mtime":1651916305979},{"path":"E:\\vue\\vue-admin-template-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\vue\\vue-admin-template-master\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"E:\\vue\\vue-admin-template-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\vue\\vue-admin-template-master\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgKiBhcyBUSFJFRSBmcm9tICd0aHJlZS9idWlsZC90aHJlZS5tb2R1bGUuanMnDQppbXBvcnQgU3RhdHMgZnJvbSAnLi4vLi4vc3RvcmUvU3RhdHMvc3RhdHMubWluLmpzJw0KaW1wb3J0IFdpZGdldCBmcm9tICcuLi9FZGl0b3IvV2lkZ2V0L1dpZGdldC52dWUnDQppbXBvcnQgQXR0cmlidXRlIGZyb20gJy4uL0VkaXRvci9BdHRyaWJ1dGUvaW5kZXgudnVlJw0KaW1wb3J0IEZvb3RlciBmcm9tICcuLi9FZGl0b3IvRm9vdGVyL2luZGV4LnZ1ZScNCmltcG9ydCB7VHJhbnNmb3JtQ29udHJvbHN9IGZyb20gJ3RocmVlL2V4YW1wbGVzL2pzbS9jb250cm9scy9UcmFuc2Zvcm1Db250cm9scycNCmltcG9ydCB7RHJhZ0NvbnRyb2xzfSBmcm9tICd0aHJlZS9leGFtcGxlcy9qc20vY29udHJvbHMvRHJhZ0NvbnRyb2xzJw0KaW1wb3J0IHtUcmFja2JhbGxDb250cm9sc30gZnJvbSAndGhyZWUvZXhhbXBsZXMvanNtL2NvbnRyb2xzL1RyYWNrYmFsbENvbnRyb2xzJw0KaW1wb3J0IHtPcmJpdENvbnRyb2xzfSBmcm9tICd0aHJlZS9leGFtcGxlcy9qc20vY29udHJvbHMvT3JiaXRDb250cm9scycNCmltcG9ydCB7IENvbG9yLCBHcm91cCwgT2JqZWN0M0R9IGZyb20gJy4uLy4uL2xpYi90aHJlZS5tb2R1bGUuanMnDQppbXBvcnQge01PVVNFfSBmcm9tICd0aHJlZS9zcmMvY29uc3RhbnRzJw0KaW1wb3J0IHtBeGVzSGVscGVyfSBmcm9tICd0aHJlZS9zcmMvaGVscGVycy9BeGVzSGVscGVyJw0KaW1wb3J0IHtHcmlkSGVscGVyfSBmcm9tICd0aHJlZS9zcmMvaGVscGVycy9HcmlkSGVscGVyLmpzJw0KaW1wb3J0IHtFdmVudE1hbmFnZXJ9IGZyb20gJy4uLy4uL2xpYi9FdmVudE1hbmFnZXInDQppbXBvcnQge0RpcmVjdGlvbmFsTGlnaHRIZWxwZXJ9IGZyb20gJ3RocmVlL3NyYy9oZWxwZXJzL0RpcmVjdGlvbmFsTGlnaHRIZWxwZXInDQppbXBvcnQgeyByYW5nZSB9IGZyb20gIi4uLy4uL2NvbXBvbmVudHMvbW9kZS9yYW5nZSI7DQppbXBvcnQgeyBub2RlIH0gZnJvbSAiLi4vLi4vY29tcG9uZW50cy9tb2RlL25vZGUiOw0KLy/liJ3lp4vmlbDmja4NCmxldCByZW5kZXJlcixjYW1lcmEsc2NlbmUsZ2VvbWV0cnksbWF0ZXJpYWwsbWVzaCxzdGF0cyxvYmpzOw0KLy8gIGxldCBjb250YWluZXI9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3dlYmdsJyk7DQogICB2YXIgY29udHJvbHM9ew0KICAgICAgICAgICAgcG9zaXRpb25YOjAsDQogICAgICAgICAgICBwb3NpdGlvblk6MCwNCiAgICAgICAgICAgIHBvc2l0aW9uWjowDQogICAgICAgIH0NCmxldCBjYW1lcmFDb250cm9sczsNCmxldCB0cmFuc2Zvcm1Db250cm9sOw0KbGV0IGV2ZW50TWFuYWdlcjsNCmxldCBkaXJlY3Rpb25hbExpZ2h0LGFtYmllbnRMaWdodDsNCi8vIGxldCBtb3VzZTsNCi8vIGxldCByYXljYXN0ZXI7DQovKui/memHjOiusOW9leS4gOS4quWwj2J1Zw0K5b2T5ouW5ou954mp5L2T55Wl6L+H5YW25LuW54mp5L2T5LiK5pe25Lya6YCg5oiQ54mp5L2T5YWo6buRDQrlupTor6XmmK/mnZDotKjpl67popjkvb/nlKjkuobms5Xnur/lj5jmjaLpopzoibLmnZDotKjvvIzmjaLmiJDmraPluLjpopzoibLlupTor6XmmK/msqHmnInpl67popgNCg0KKi8NCmxldCB0cmFuc2luZz1mYWxzZTsNCmxldCBheGVzSGVscGVyLGdyaWRIZWxwZXIsZGlyZWN0TGlnaHRIZWxwZXI7DQpsZXQgY2FjaGVvYmplY3RzOw0KZXhwb3J0IGRlZmF1bHQgew0KICAgIG5hbWU6J0VkaXRvcicsDQogICAgY29tcG9uZW50czp7DQogICAgICAgIFdpZGdldCwNCiAgICAgICAgQXR0cmlidXRlLA0KICAgICAgICBGb290ZXINCiAgICB9LA0KICAgIGRhdGEoKSB7DQogICAgICAgIHJldHVybiB7DQogICAgICAgICAgICAgc3RhdGU6ew0KICAgICAgICAgICAgICAgIEdyaWRIZWxwZXI6dHJ1ZSwNCiAgICAgICAgICAgICAgICBBeGVzSGVscGVyOnRydWUsDQogICAgICAgICAgICAgICAgTGlnaHRIZWxwZXI6dHJ1ZSwNCiAgICAgICAgICAgICAgICBQbGFuZUhlbHBlcjpmYWxzZSwNCiAgICAgICAgICAgICAgICBCb3hIZWxwZXI6ZmFsc2UsDQogICAgICAgICAgICAgICAgQ29udHJvbDp0cnVlDQogICAgICAgICAgICB9LA0KICAgICAgICAgICAgY29uZmlndXJhdGlvbjp7fSwNCiAgICAgICAgfQ0KICAgIH0sDQogICAgd2F0Y2g6ew0KICAgICAgICAnc3RhdGUuR3JpZEhlbHBlcic6ew0KICAgICAgICAgICAgLy8gaW1tZWRpYXRlOnRydWUsDQogICAgICAgICAgICBkZWVwOnRydWUsDQogICAgICAgICAgICBoYW5kbGVyKG5ld1ZhbHVlKXsNCiAgICAgICAgICAgICAgICBpZihuZXdWYWx1ZSl7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuQWRkR3JpZCgpOw0KICAgICAgICAgICAgICAgIH1lbHNlew0KICAgICAgICAgICAgICAgICAgICB0aGlzLlJlbW92ZUdyaWQoKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgICAnc3RhdGUuQXhlc0hlbHBlcic6ew0KICAgICAgICAgICAgLy8gaW1tZWRpYXRlOnRydWUsDQogICAgICAgICAgICBkZWVwOnRydWUsDQogICAgICAgICAgICBoYW5kbGVyKG5ld1ZhbHVlKXsNCiAgICAgICAgICAgICAgICBpZihuZXdWYWx1ZSl7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuQWRkQXhlcygpOw0KICAgICAgICAgICAgICAgIH1lbHNlew0KICAgICAgICAgICAgICAgICAgICB0aGlzLlJlbW92ZUF4ZXMoKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgICdzdGF0ZS5MaWdodEhlbHBlcic6ew0KICAgICAgICAgICAgLy8gaW1tZWRpYXRlOnRydWUsDQogICAgICAgICAgICBkZWVwOnRydWUsDQogICAgICAgICAgICBoYW5kbGVyKG5ld1ZhbHVlKXsNCiAgICAgICAgICAgICAgICBpZihuZXdWYWx1ZSl7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuQWRkTGlnaHQoKTsNCiAgICAgICAgICAgICAgICB9ZWxzZXsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5SZW1vdmVMaWdodCgpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgJ3N0YXRlLkNvbnRyb2wnOnsNCiAgICAgICAgICAgIC8vIGltbWVkaWF0ZTp0cnVlLA0KICAgICAgICAgICAgZGVlcDp0cnVlLA0KICAgICAgICAgICAgaGFuZGxlcihuZXdWYWx1ZSl7DQogICAgICAgICAgICAgICAgaWYobmV3VmFsdWUpew0KICAgICAgICAgICAgICAgICAgICB0aGlzLkFkZENvbnRyb2woKTsNCiAgICAgICAgICAgICAgICB9ZWxzZXsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5SZW1vdmVDb250cm9sKCk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgfSwNCiAgICBtZXRob2RzOiB7DQogICAgICAgIGluaXRzdGF0ZSgpew0KICAgICAgICAgICAgdGhpcy5zdGF0ZT17DQogICAgICAgICAgICAgICAgR3JpZEhlbHBlcjp0cnVlLA0KICAgICAgICAgICAgICAgIEF4ZXNIZWxwZXI6dHJ1ZSwNCiAgICAgICAgICAgICAgICBMaWdodEhlbHBlcjp0cnVlLA0KICAgICAgICAgICAgICAgIFBsYW5lSGVscGVyOmZhbHNlLA0KICAgICAgICAgICAgICAgIEJveEhlbHBlcjpmYWxzZSwNCiAgICAgICAgICAgICAgICBDb250cm9sOnRydWUNCiAgICAgICAgICAgIH07DQogICAgICAgIH0sDQogICAgICAgIEFkZE1vZGVsKCl7DQogICAgICAgICAgICB0aGlzLiRidXMuJG9uKCdBZGRPYmplY3RzJywoZW0saXRlbSk9PnsNCiAgICAgICAgICAgICAgICBpZihpdGVtLm5hbWU9PScyROaooeWeiyd8fGl0ZW0ubmFtZT09JzNE5qih5Z6LJyl7DQogICAgICAgICAgICAgIHRoaXMuQWRkRWxlbWVudChlbS50eXBlKTsNCiAgICAgICAgICB9DQogICAgICAgICAgZWxzZXsNCiAgICAgICAgICAgICAgdGhpcy5Mb2FkRWxlbWVudChlbS50eXBlKTsNCiAgICAgICAgICB9DQogICAgICAgICAgICB9KQ0KICAgICAgICB9LA0KICAgICAgICBmaW5kY3VycmVudE9iaigpeyANCiAgICAgICAgICAgIGxldCB0aGF0PXRoaXM7DQogICAgICAgICAgICAvL+mHjeWumuWQkXRoaXMs5aW95Yip55So5oC757q/DQogICAgICAgICAgICB0aGlzLiRidXMuJG9uKCdyZXF1ZXN0T2JqJywodGFyZ2V0KT0+ew0KICAgICAgICAgICAgICAgIGxldCBvYmplY3Q9c2NlbmUuZ2V0T2JqZWN0QnlQcm9wZXJ0eSgndXVpZCcsdGFyZ2V0LnV1aWQpOw0KICAgICAgICAgICAgICAgIHRoYXQuJGJ1cy4kZW1pdCgncmVzcG9uc2VPYmonLG9iamVjdCk7DQogICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIA0KICAgICAgICB9LA0KICAgICAgICBDaGVja0Zyb21UcmVlKCl7DQogICAgICAgICAgICB0aGlzLiRidXMuJG9uKCdjaGVja0V2ZW50JywodGFyZ2V0KT0+ew0KICAgICAgICAgICAgICAgIGlmKHRoaXMuc3RhdGUuQ29udHJvbD09dHJ1ZSl7DQogICAgICAgICAgICAgICAgaWYoIXRhcmdldCl7DQogICAgICAgICAgICAgICAgICAgIC8v5aSE55CG5a+55LqO5Lyg6L+H5p2l5piv56m655uu5qCH55qE5oOF5Ya177yM55u05o6l56e76Zmk5o6n5Lu2DQogICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm1Db250cm9sLmRldGFjaCgpOw0KICAgICAgICAgICAgICAgICAgICBzY2VuZS5yZW1vdmUodHJhbnNmb3JtQ29udHJvbCk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICBpZih0cmFuc2Zvcm1Db250cm9sLm9iamVjdCYmdGFyZ2V0LnV1aWQhPXRyYW5zZm9ybUNvbnRyb2wub2JqZWN0LnV1aWQpew0KICAgICAgICAgICAgICAgICAgICAvL+WmguaenOS7juWcuuaZr+e7k+aehOagkeS4reW+l+WIsOeahOeJqeS9k+S4juebruWJjeeahOS4jeWQjOaJjei/m+ihjOS6i+S7tuWkhOeQhg0KICAgICAgICAgICAgICAgICAgICAvL+WNs+abtOaNouWwhOe6v+aLvuWPlg0KICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtQ29udHJvbC5kZXRhY2goKTsNCiAgICAgICAgICAgICAgICAgICAgc2NlbmUucmVtb3ZlKHRyYW5zZm9ybUNvbnRyb2wpOw0KICAgICAgICAgICAgICAgICAgICAvL+WFiOWIoOmZpOW9k+WJjeaOp+S7tuWvueixoQ0KICAgICAgICAgICAgICAgICAgICBzY2VuZS50cmF2ZXJzZShmdW5jdGlvbihvYmopew0KICAgICAgICAgICAgICAgICAgICAgICAgaWYob2JqLnV1aWQ9PXRhcmdldC51dWlkKXsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihvYmoudHlwZS5pbmRleE9mKCdIZWxwZXInKT09LTEpew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+WmguaenOS4jeaYr2hlbHBlcg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIOiDveWQpuebtOaOpeS8oHV1aWTov5vmnaXmn6XnhLblkI7kvKDlh7rljrvvvJ8NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICDpnIDopoHph43mnoQNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqLw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY2VuZS5hZGQodHJhbnNmb3JtQ29udHJvbCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybUNvbnRyb2wuYXR0YWNoKG9iaik7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybUNvbnRyb2wuZGV0YWNoKCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY2VuZS5yZW1vdmUodHJhbnNmb3JtQ29udHJvbCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47IA0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2UgaWYoIXRyYW5zZm9ybUNvbnRyb2wub2JqZWN0KXsNCiAgICAgICAgICAgICAgICAgICAgLy/lpoLmnpzmjqfku7bmnKzouqvkuI3lrZjlnKjpgqPkuYjnm7TmjqXliqANCiAgICAgICAgICAgICAgICAgICAgc2NlbmUudHJhdmVyc2UoZnVuY3Rpb24ob2JqKXsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmKG9iai51dWlkPT10YXJnZXQudXVpZCl7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/lkIzmoLfpnIDopoHliKTmlq3mmK/lkKbmmK9oZWxwZXINCiAgICAgICAgICAgICAgICAgICAgICAgIGlmKG9iai50eXBlLmluZGV4T2YoJ0hlbHBlcicpPT0tMSl7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5aaC5p6c5LiN5pivaGVscGVyDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjZW5lLmFkZCh0cmFuc2Zvcm1Db250cm9sKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtQ29udHJvbC5hdHRhY2gob2JqKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2V7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtQ29udHJvbC5kZXRhY2goKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjZW5lLnJlbW92ZSh0cmFuc2Zvcm1Db250cm9sKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ICANCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pOw0KICAgICAgICB9LA0KICAgICAgICBSZW1vdmVHcmlkKCl7DQogICAgICAgICAgICBzY2VuZS5yZW1vdmUoZ3JpZEhlbHBlcik7DQogICAgICAgICAgICAvL2NvbnNvbGUubG9nKHNjZW5lKTsNCiAgICAgICAgfSwNCiAgICAgICAgQWRkR3JpZCgpew0KICAgICAgICAgICAgc2NlbmUuYWRkKGdyaWRIZWxwZXIpOw0KICAgICAgICB9LA0KICAgICAgICBSZW1vdmVBeGVzKCl7DQogICAgICAgICAgICBzY2VuZS5yZW1vdmUoYXhlc0hlbHBlcik7DQogICAgICAgIH0sDQogICAgICAgIEFkZEF4ZXMoKXsNCiAgICAgICAgICAgIHNjZW5lLmFkZChheGVzSGVscGVyKTsNCiAgICAgICAgfSwNCiAgICAgICAgUmVtb3ZlTGlnaHQoKXsNCiAgICAgICAgICAgIHNjZW5lLnJlbW92ZShkaXJlY3RMaWdodEhlbHBlcik7DQogICAgICAgIH0sDQogICAgICAgIEFkZExpZ2h0KCl7DQogICAgICAgICAgICBzY2VuZS5hZGQoZGlyZWN0TGlnaHRIZWxwZXIpOw0KICAgICAgICB9LA0KICAgICAgICBSZW1vdmVDb250cm9sKCl7DQogICAgICAgICAgICB0cmFuc2Zvcm1Db250cm9sLmRldGFjaCgpOw0KICAgICAgICAgICAgc2NlbmUucmVtb3ZlKHRyYW5zZm9ybUNvbnRyb2wpOw0KICAgICAgICAgICAgbGV0IG9iamVjdD1udWxsOw0KICAgICAgICAgICAgdGhpcy4kYnVzLiRlbWl0KCdnZXRFdmVudCcsb2JqZWN0KTsNCiAgICAgICAgfSwNCiAgICAgICAgQWRkQ29udHJvbCgpew0KICAgICAgICAgICAgc2NlbmUuYWRkKHRyYW5zZm9ybUNvbnRyb2wpOw0KDQogICAgICAgIH0sDQogICAgICAgIGluaXRIZWxwZXIoKXsNCiAgICAgICAgICAgIC8v5Yqg5Z2Q5qCH6L206L6F5Yqp5bel5YW3DQogICAgICAgICAgICBheGVzSGVscGVyPW5ldyBBeGVzSGVscGVyKDUwMCk7DQogICAgICAgICAgICBheGVzSGVscGVyLnJheWNhc3Q9KCk9Pnt9Ow0KICAgICAgICAgICAgYXhlc0hlbHBlci5uYW1lPSLlnZDmoIfovbQiOw0KICAgICAgICAgICAgc2NlbmUuYWRkKGF4ZXNIZWxwZXIpOw0KICAgICAgICAgICAgZ3JpZEhlbHBlcj1uZXcgR3JpZEhlbHBlcig1MDAsNDAsJ3JnYigyMDAsMjAwLDIwMCknLCdyZ2IoMTAwLDEwMCwxMDApJyk7DQogICAgICAgICAgICBncmlkSGVscGVyLnJheWNhc3Q9KCk9Pnt9Ow0KICAgICAgICAgICAgZ3JpZEhlbHBlci5uYW1lPSLnvZHmoLzmnb8iOw0KICAgICAgICAgICAgc2NlbmUuYWRkKGdyaWRIZWxwZXIpOw0KICAgICAgICAgICAgLy/lsIbkuKTkuKrovoXliqnlt6XlhbdyYXljYXN05bCE57q/5pa55rOV572u56m65L2/5b6X5YW256aB55So5Y+Y5o2i5o6n5Lu2DQogICAgICAgICAgICBkaXJlY3RMaWdodEhlbHBlcj1uZXcgRGlyZWN0aW9uYWxMaWdodEhlbHBlcihkaXJlY3Rpb25hbExpZ2h0LDcpOw0KICAgICAgICAgICAgLy9kaXJlY3RMaWdodEhlbHBlci5yYXljYXN0PSgpPT57fTsNCiAgICAgICAgICAgIGRpcmVjdExpZ2h0SGVscGVyLm5hbWU9IuWumuWQkeWFieWKqeaJiyI7DQogICAgICAgICAgICBkaXJlY3RMaWdodEhlbHBlci50eXBlPSJEaXJ0ZWN0aW9uYWxMaWdodEhlbHBlciI7DQogICAgICAgICAgICBzY2VuZS5hZGQoZGlyZWN0TGlnaHRIZWxwZXIpOw0KICAgICAgICAgICAgDQoNCg0KDQogICAgICAgIH0sDQogICAgICAgIGluaXRDYW1lcmFDb250cm9sKCl7DQogICAgICAgICAgICBjYW1lcmFDb250cm9scz1uZXcgT3JiaXRDb250cm9scyhjYW1lcmEscmVuZGVyZXIuZG9tRWxlbWVudCk7DQogICAgICAgICAgICBjYW1lcmFDb250cm9scy5lbmFibGVEYW1waW5nPXRydWU7DQogICAgICAgICAgICBjYW1lcmFDb250cm9scy5tb3VzZUJ1dHRvbnM9ew0KICAgICAgICAgICAgICAgIExFRlQ6bnVsbCwNCiAgICAgICAgICAgICAgICBNSURETEU6TU9VU0UuRE9MTFksDQogICAgICAgICAgICAgICAgUklHSFQ6TU9VU0UuUk9UQVRFDQogICAgICAgICAgICAgICAgLy/lt6bplK7kuI3mjqfliLbnm7jmnLoNCiAgICAgICAgICAgICAgICAvL+WPs+mUruaOp+WItuaXi+i9rA0KICAgICAgICAgICAgICAgIC8v5Lit6Ze06ZSu5o6n5Yi257yp5pS+DQogICAgICAgICAgICAgICAgLy9jdHJsK+WPs+mUruaOp+WItuebuOacuuW5s+enuw0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICBnZXRQYXJlbnRzKG9iail7DQogICAgICAgICAgICBpZihvYmoucGFyZW50PT1zY2VuZSl7DQogICAgICAgICAgICAgICAgcmV0dXJuIG9iajsNCiAgICAgICAgICAgIH1lbHNlew0KICAgICAgICAgICAgICAgIHdoaWxlKG9iai5wYXJlbnQhPXNjZW5lKXsNCiAgICAgICAgICAgICAgICAgICAgb2JqPW9iai5wYXJlbnQ7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHJldHVybiBvYmo7DQogICAgICAgICAgICB9DQogICAgICAgICAgICANCiAgICAgICAgfSwNCiAgICAgICAgaW5pdEV2ZW50TWFuYWdlcigpew0KICAgICAgICAgICAgZXZlbnRNYW5hZ2VyPW5ldyBFdmVudE1hbmFnZXIocmVuZGVyZXIuZG9tRWxlbWVudCxzY2VuZSxjYW1lcmEsb2Jqcyk7DQogICAgICAgICAgICBldmVudE1hbmFnZXIuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywoZXZlbnQpPT57DQogICAgICAgICAgICAgICAgLy/lhajlsYBjYW52YXPop6blj5Hmi7/liLDniankvZPmjIfpkojpmJ/liJcNCiAgICAgICAgICAgICAgICBpZihldmVudC5pbnRlcnNlY3Rpb24ubGVuZ3RoKXsNCiAgICAgICAgICAgICAgICAgICAgY29uc3Qgb2JqZWN0PWV2ZW50LmludGVyc2VjdGlvblswXS5vYmplY3Q7DQogICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgIGlmKG9iamVjdD09Y2FjaGVvYmplY3RzKXsNCiAgICAgICAgICAgICAgICAgICAgICAgIC8v5aaC5p6c5b2T5LiL6byg5qCH6L+Y5Zyo5ZCM5LiA5Liq54mp5L2T5LiL5LiN6Kem5Y+R5Lu75L2V5pON5L2cDQogICAgICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBlbHNlIGlmKG9iamVjdCE9Y2FjaGVvYmplY3RzJiZjYWNoZW9iamVjdHMpew0KICAgICAgICAgICAgICAgICAgICAgICAgLy/lpoLmnpzlvZPkuIvpvKDmoIfku47kuIDkuKrniankvZPnp7vliqjliLDlj6bkuIDkuKrniankvZPml7YNCiAgICAgICAgICAgICAgICAgICAgICAgIC8v5YWI6Kem5Y+R6aKc6Imy5oGi5aSN5YaN6Kem5Y+R5Y+Y6ImyDQogICAgICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgICAgIGNhY2hlb2JqZWN0cy5tYXRlcmlhbC5jb2xvci5tdWx0aXBseVNjYWxhcigwLjUpOw0KICAgICAgICAgICAgICAgICAgICAgICAgLy/ov5Tlm57ljp/mnaXpopzoibINCiAgICAgICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgICAgIC8v5aaC5p6c5pyJ5p2Q6LSoDQogICAgICAgICAgICAgICAgICAgIGlmKG9iamVjdC5tYXRlcmlhbCl7DQogICAgICAgICAgICAgICAgICAgICAgICBvYmplY3QubWF0ZXJpYWwuY29sb3IubXVsdGlwbHlTY2FsYXIoMik7DQogICAgICAgICAgICAgICAgICAgICAgICAvL+WPmOS6rg0KICAgICAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgICAgICBjYWNoZW9iamVjdHM9b2JqZWN0Ow0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfWVsc2V7DQogICAgICAgICAgICAgICAgICAgIC8v5aaC5p6c6byg5qCH56e75Yqo5Yiw5Zy65pmv56m655m95aSE5oGi5aSNDQogICAgICAgICAgICAgICAgICAgIGlmKGNhY2hlb2JqZWN0cyl7DQogICAgICAgICAgICAgICAgICAgICAgICBjYWNoZW9iamVjdHMubWF0ZXJpYWwuY29sb3IubXVsdGlwbHlTY2FsYXIoMC41KTsNCiAgICAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgICAgICAvL+i/lOWbnuWOn+adpeminOiJsg0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGNhY2hlb2JqZWN0cz1udWxsOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgIC8vIC8v54mp5L2T5ou+5Y+W5LqL5Lu25aSE55CGDQogICAgICAgICAgICBldmVudE1hbmFnZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLChldmVudCk9PnsNCiAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgaWYodHJhbnNpbmcpew0KICAgICAgICAgICAgICAgICAgICB0cmFuc2luZz1mYWxzZTsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpZihldmVudC5pbnRlcnNlY3Rpb24ubGVuZ3RoKXsNCiAgICAgICAgICAgICAgICAgICAgY29uc3Qgb2JqZWN0PWV2ZW50LmludGVyc2VjdGlvblswXS5vYmplY3Q7DQogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGV2ZW50LmludGVyc2VjdGlvbik7DQogICAgICAgICAgICAgICAgICAgIGlmKG9iamVjdC50eXBlPT0iVHJhbnNmb3JtQ29udHJvbHNQbGFuZSIpew0KICAgICAgICAgICAgICAgICAgICAgICAgLy/lpoLmnpzpgInlj5bliLDmjqfliLblmajmnKzouqvnm7TmjqXot7Pov4cNCiAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybUNvbnRyb2wuZGV0YWNoKCk7DQogICAgICAgICAgICAgICAgICAgICAgICBzY2VuZS5yZW1vdmUodHJhbnNmb3JtQ29udHJvbCk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgZWxzZXsNCiAgICAgICAgICAgICAgICAgICAgICAgIC8v6YCJ5Y+W5Yiw54mp5L2TDQogICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHRoaXMuc3RhdGUuQ29udHJvbD09dHJ1ZSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/lj6rmnInlvZNDb250cm9s5bGe5oCn5byA5ZCv5pe25omN5ZCv55SodHJhbnNmb3JtQ29udHJvbA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/kvYbkuI3lvbHlk43mmL7npLpUcmVl5b2T5YmN54K55LquDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NlbmUuYWRkKHRyYW5zZm9ybUNvbnRyb2wpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vdHJhbnNmb3JtQ29udHJvbC5hdHRhY2gob2JqZWN0LnBhcmVudCBpbnN0YW5jZW9mIFRIUkVFLkdyb3VwID8gb2JqZWN0LnBhcmVudCA6IG9iamVjdCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtQ29udHJvbC5hdHRhY2godGhpcy5nZXRQYXJlbnRzKG9iamVjdCkpOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgICAgICAvL2xldCB1dWlkPW9iamVjdC51dWlkOw0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2codXVpZCk7DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRidXMuJGVtaXQoJ2dldEV2ZW50Jyx0aGlzLmdldFBhcmVudHMob2JqZWN0KSk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgfWVsc2V7DQogICAgICAgICAgICAgICAgICAgIC8v5b2T54K55Ye75Yiw5Zy65pmv56m655m95aSE5pe256aB55So5Y+v5o6n5Lu2DQogICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtQ29udHJvbC5kZXRhY2goKTsNCiAgICAgICAgICAgICAgICAgICAgc2NlbmUucmVtb3ZlKHRyYW5zZm9ybUNvbnRyb2wpOw0KICAgICAgICAgICAgICAgICAgICBsZXQgb2JqZWN0PW51bGw7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuJGJ1cy4kZW1pdCgnZ2V0RXZlbnQnLG9iamVjdCk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSk7DQogICAgICAgIH0sDQogICAgICAgIC8v5bCE57q/5ou+5Y+W5ZmoDQogICAgICAgIA0KICAgICBpbml0TGlnaHQoKSB7DQogICAgICAgIGRpcmVjdGlvbmFsTGlnaHQgPSBuZXcgVEhSRUUuRGlyZWN0aW9uYWxMaWdodCgweGZmZmZmZik7IC8v5re75Yqg5LqG5LiA5Liq55m96Imy55qE5bmz6KGM5YWJDQogICAgICAgIGRpcmVjdGlvbmFsTGlnaHQucG9zaXRpb24uc2V0KDIwLCA1MCwgNTApOyAvL+iuvue9ruWFieeahOaWueWQkQ0KICAgICAgICBkaXJlY3Rpb25hbExpZ2h0Lm5hbWU9IuW5s+ihjOWFiSI7DQogICAgICAgIHNjZW5lLmFkZChkaXJlY3Rpb25hbExpZ2h0KTsgLy/mt7vliqDliLDlnLrmma8NCiAgICAgICAgb2Jqcy5wdXNoKGRpcmVjdGlvbmFsTGlnaHQpOw0KICAgICAgICBhbWJpZW50TGlnaHQ9bmV3IFRIUkVFLkFtYmllbnRMaWdodCgweDIyMjIyMik7DQogICAgICAgIGFtYmllbnRMaWdodC5uYW1lPSLlhajlsYDlhYkiOw0KICAgICAgICAvL+a3u+WKoOS4gOS4quWFqOWxgOeOr+Wig+WFiQ0KICAgICAgICBzY2VuZS5hZGQoYW1iaWVudExpZ2h0KTsNCiAgICAgICAgIG9ianMucHVzaChhbWJpZW50TGlnaHQpOw0KICAgIH0sDQogICAgICAgIC8vIGluaXRSYXljYXN0ZXIoKXsNCiAgICAgICAgLy8gICAgIC8vIHJheWNhc3Rlcj1uZXcgVEhSRUUuUmF5Y2FzdGVyKCk7DQoNCiAgICAgICAgLy8gfSwNCiAgICAgICAgLy/lr7nosaHnvJPlrZjliJ3lp4vljJYNCiAgICAgICAgaW5pdENhY2hlKCl7DQogICAgICAgICAgICBjYWNoZW9iamVjdHM9bnVsbDsNCiAgICAgICAgfSwNCiAgICAgICAgaW5pdENvbnRyb2woKXsNCiAgLy/lj6/op4bljJblj5jmjaLmjqfku7blr7nosaENCiAgICAgICAgdHJhbnNmb3JtQ29udHJvbCA9IG5ldyBUcmFuc2Zvcm1Db250cm9scyggY2FtZXJhLHJlbmRlcmVyLmRvbUVsZW1lbnQgKTsNCiAgICAgICAgdHJhbnNmb3JtQ29udHJvbC50eXBlPSJUcmFuc2Zvcm1Db250cm9sIjsNCiAgICAgICAgLy8gc2NlbmUuYWRkKCB0cmFuc2Zvcm1Db250cm9sICk7Ly/mjqfku7blr7nosaHmt7vliqDliLDlnLrmma/lr7nosaENCiAgICAgICAgdHJhbnNmb3JtQ29udHJvbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZURvd24nLChldmVudCk9PnsNCiAgICAgICAgICAgIC8v5Yqg5LiA5Liq5Y+C5pWw5o6n5Yi26Ziy5q2i54K55Ye75LqL5Lu25ZKM5ouW5ou95LqL5Lu25Yay56qBDQogICAgICAgICAgICB0cmFuc2luZz10cnVlOw0KICAgICAgICB9KTsNCiAgICAgICAgLy/plK7nm5jmjqfliLblj6/op4bljJblj5jmjaLmjqfku7blip/og70NCiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLChldmVudCk9PnsNCiAgICAgICAgICAgIGlmKGV2ZW50LmtleT09J2UnKXsNCiAgICAgICAgICAgICAgICAvL0XplK7nvKnmlL4NCiAgICAgICAgICAgICAgICB0cmFuc2Zvcm1Db250cm9sLm1vZGU9InNjYWxlIjsNCiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZihldmVudC5rZXk9PSdyJyl7DQogICAgICAgICAgICAgICAgLy9S6ZSu5peL6L2sDQogICAgICAgICAgICAgICAgdHJhbnNmb3JtQ29udHJvbC5tb2RlPSJyb3RhdGUiOw0KICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmKGV2ZW50LmtleT09J3QnKXsNCiAgICAgICAgICAgICAgICAvL1TplK7lubPnp7sNCiAgICAgICAgICAgICAgICB0cmFuc2Zvcm1Db250cm9sLm1vZGU9InRyYW5zbGF0ZSI7DQogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgDQogICAgICAgIH0pOw0KICAgICAgICB9LA0KICAgICAgICBMb2FkRWxlbWVudCh0eXBlKXsNCiAgICAgICAgICAgIGlmKHR5cGU9PSdtb2RlbC0xJyl7DQogICAgICAgICAgICAgICAgdGhpcy5pbml0TGluZSgpOw0KICAgICAgICAgICAgICAgIHRoaXMuc2NlbmVDaGFuZ2VkRXZlbnQoKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2UgaWYodHlwZT09J21vZGVsLTInKXsNCiAgICAgICAgICAgICAgICB0aGlzLmluaXRCYXJzKCk7DQogICAgICAgICAgICAgICAgdGhpcy5zY2VuZUNoYW5nZWRFdmVudCgpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgIGVsc2UgaWYodHlwZT09J21vZGVsLTMnKXsNCiAgICAgICAgICAgICAgIHNjZW5lLmJhY2tncm91bmQgPSBuZXcgVEhSRUUuQ3ViZVRleHR1cmVMb2FkZXIoKS5sb2FkKFsNCiAgICAgICAgICByZXF1aXJlKCdAL2Fzc2V0cy9za3lib3gvQmx1ZVJlZC9MZWZ0LnBuZycpLA0KICAgICAgICAgIHJlcXVpcmUoJ0AvYXNzZXRzL3NreWJveC9CbHVlUmVkL1JpZ2h0LnBuZycpLA0KICAgICAgICAgIHJlcXVpcmUoJ0AvYXNzZXRzL3NreWJveC9CbHVlUmVkL1VwLnBuZycpLA0KICAgICAgICAgIHJlcXVpcmUoJ0AvYXNzZXRzL3NreWJveC9CbHVlUmVkL0Rvd24ucG5nJyksDQogICAgICAgICAgcmVxdWlyZSgnQC9hc3NldHMvc2t5Ym94L0JsdWVSZWQvRnJvbnQucG5nJyksDQogICAgICAgICAgcmVxdWlyZSgnQC9hc3NldHMvc2t5Ym94L0JsdWVSZWQvQmFjay5wbmcnKQ0KICAgICAgICBdKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgQWRkRWxlbWVudCh0eXBlKXsNCiAgICAgICAgICAgIGlmKHR5cGU9PSdsb25lbHlQbGFuZXQnKXsNCiAgICAgICAgICAgICAgICB0aGlzLmluaXRCb3goKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2UgaWYodHlwZT09J2JlemllckN1cnZlJyl7DQogICAgICAgICAgICAgICAgdGhpcy5pbml0Q29uZSgpOw0KICAgICAgICAgICAgfWVsc2UgaWYodHlwZT09J2V0aGVyZWFUb25lJyl7DQogICAgICAgICAgICAgICAgdGhpcy5pbml0Q3lsaW5kZXIoKTsNCiAgICAgICAgICAgIH1lbHNlIGlmKHR5cGU9PSdlbGVjdHJvbmljTXVzaWMnKXsNCiAgICAgICAgICAgICAgICB0aGlzLmluaXRTcGhlcmUoKTsNCiAgICAgICAgICAgIH1lbHNlIGlmKHR5cGU9PSdibGFzdFN1Yndvb2Zlcicpew0KICAgICAgICAgICAgICAgIHRoaXMuaW5pdFRvcnVzKCk7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgfSwNCiAgICAgICAgaW5pdEJveCgpew0KICAgICAgICAgICAgdmFyIG1hdGVyaWFsPW5ldyBUSFJFRS5NZXNoU3RhbmRhcmRNYXRlcmlhbCgpOw0KICAgICAgICAgICAgbWF0ZXJpYWwuY29sb3I9bmV3IENvbG9yKDAuOCwwLjIsMC4yKTsNCiAgICAgICAgICAgIHZhciBib3g9bmV3IFRIUkVFLk1lc2gobmV3IFRIUkVFLkJveEdlb21ldHJ5KDUsNSw1KSxtYXRlcmlhbCk7DQogICAgICAgICAgICBib3gucG9zaXRpb24uc2V0KC01MCwgMjAsIDApOw0KICAgICAgICAgICAgYm94Lm5hbWU9IuebkuWtkCI7DQogICAgICAgICAgICBzY2VuZS5hZGQoYm94KTsNCiAgICAgICAgICAgIG9ianMucHVzaChib3gpOw0KICAgICAgICAgICAgdGhpcy5zY2VuZUNoYW5nZWRFdmVudCgpOw0KICAgICAgICB9LA0KICAgICAgIGluaXRDb25lKCl7DQogICAgICAgIHZhciBtYXRlcmlhbD1uZXcgVEhSRUUuTWVzaFN0YW5kYXJkTWF0ZXJpYWwoKTsNCiAgICAgICAgbWF0ZXJpYWwuY29sb3I9bmV3IENvbG9yKDAuNywwLjYsMC42KTsNCiAgICAgICAgIHZhciBjb25lPW5ldyBUSFJFRS5NZXNoKG5ldyBUSFJFRS5Db25lR2VvbWV0cnkoNSwyMCwzMiksbWF0ZXJpYWwpOw0KICAgICAgICAgIGNvbmUucG9zaXRpb24uc2V0KDIwLCAyMCwgMCk7DQogICAgICAgICAgY29uZS5uYW1lPSLlnIbplKUiOw0KICAgICAgICAgICBzY2VuZS5hZGQoY29uZSk7DQogICAgICAgICAgIG9ianMucHVzaChjb25lKTsNCiAgICAgICAgICB0aGlzLnNjZW5lQ2hhbmdlZEV2ZW50KCk7DQogICAgICAgICAgIC8vcmVuZGVyZXIucmVuZGVyKHNjZW5lLGNhbWVyYSk7Ly/muLLmn5MNCiAgICAgICAgICANCiAgICAgICAgICAgIA0KICAgICAgIH0sDQogICAgICAgaW5pdEN5bGluZGVyKCl7DQogICAgICAgICAgICB2YXIgbWF0ZXJpYWw9bmV3IFRIUkVFLk1lc2hTdGFuZGFyZE1hdGVyaWFsKCk7DQogICAgICAgICAgICBtYXRlcmlhbC5jb2xvcj1uZXcgQ29sb3IoMC44LDAuNywwLjIpOw0KICAgICAgICAgICB2YXIgY3lsaW5kZXI9bmV3IFRIUkVFLk1lc2gobmV3IFRIUkVFLkN5bGluZGVyR2VvbWV0cnkoNSwgNSwgMjAsIDMyKSxtYXRlcmlhbCk7DQogICAgICAgICAgIGN5bGluZGVyLnBvc2l0aW9uLnNldCg1MCwyMCwwKTsNCiAgICAgICAgICAgY3lsaW5kZXIubmFtZT0i5ZyG5p+xIjsNCiAgICAgICAgICAgc2NlbmUuYWRkKGN5bGluZGVyKTsNCiAgICAgICAgICAgb2Jqcy5wdXNoKGN5bGluZGVyKTsNCiAgICAgICAgICAgdGhpcy5zY2VuZUNoYW5nZWRFdmVudCgpOw0KICAgICAgICAgICAvL3JlbmRlcmVyLnJlbmRlcihzY2VuZSxjYW1lcmEpOy8v5riy5p+TDQogICAgICAgICAgIA0KICAgICAgIH0sDQogICAgICAgaW5pdFNwaGVyZSgpew0KICAgICAgICAgICB2YXIgbWF0ZXJpYWw9bmV3IFRIUkVFLk1lc2hTdGFuZGFyZE1hdGVyaWFsKCk7DQogICAgICAgICAgICBtYXRlcmlhbC5jb2xvcj1uZXcgQ29sb3IoMC4yLDAuNywwLjIpOw0KICAgICAgICAgIHZhciAgc3BoZXJlPW5ldyBUSFJFRS5NZXNoKG5ldyBUSFJFRS5TcGhlcmVHZW9tZXRyeSg1LCAzMiwgMzIpLG1hdGVyaWFsKTsNCiAgICAgICAgICAgc3BoZXJlLnBvc2l0aW9uLnNldCgtMjAsIC0yMCwgMCk7DQogICAgICAgICAgIHNwaGVyZS5uYW1lPSLnkIMiOw0KICAgICAgICAgICAgc2NlbmUuYWRkKHNwaGVyZSk7DQogICAgICAgICAgICBvYmpzLnB1c2goc3BoZXJlKTsNCiAgICAgICAgICAgIHRoaXMuc2NlbmVDaGFuZ2VkRXZlbnQoKTsNCiAgICAgICAgICAgDQogICAgICAgICAgICANCiAgICAgICAgICAgIA0KICAgICAgIH0sDQogICAgICAgaW5pdFRvcnVzKCl7DQogICAgICAgICAgIHZhciBtYXRlcmlhbD1uZXcgVEhSRUUuTWVzaFN0YW5kYXJkTWF0ZXJpYWwoKTsNCiAgICAgICAgICAgIG1hdGVyaWFsLmNvbG9yPW5ldyBDb2xvcigwLjMsMC4xLDAuOSk7DQogICAgICAgICAgIHZhciB0b3J1cyA9bmV3IFRIUkVFLk1lc2gobmV3IFRIUkVFLlRvcnVzR2VvbWV0cnkoMTAsIDMsIDE2LCAxMDApLG1hdGVyaWFsKTsNCiAgICAgICAgICAgIHRvcnVzLnBvc2l0aW9uLnNldCg1MCwgLTIwLCAwKTsNCiAgICAgICAgICAgIHRvcnVzLm5hbWU9IuWchueOryI7DQogICAgICAgICAgICBzY2VuZS5hZGQodG9ydXMpOw0KICAgICAgICAgICAgb2Jqcy5wdXNoKHRvcnVzKTsNCiAgICAgICAgICAgIHRoaXMuc2NlbmVDaGFuZ2VkRXZlbnQoKTsNCiAgICAgICAgICAgIC8vcmVuZGVyZXIucmVuZGVyKHNjZW5lLGNhbWVyYSk7Ly/muLLmn5MNCiAgICAgICAgICAgIA0KICAgICAgICAgICANCiAgICAgICB9LA0KICAgICAgICBpbml0KCl7DQogICAgICAgICAgICB0aGlzLmluaXRSZW5kZXJlcigpOw0KICAgICAgICAgICAgdGhpcy5pbml0U2NlbmUoKTsNCiAgICAgICAgICAgIHRoaXMuaW5pdENhbWVyYSgpOw0KICAgICAgICAgICAgdGhpcy5pbml0TGlnaHQoKTsNCiAgICAgICAgICAgIHRoaXMuaW5pdE1lc2goKTsNCiAgICAgICAgICAgIC8vIHRoaXMuaW5pdFJheWNhc3RlcigpOw0KICAgICAgICAgICAgdGhpcy5pbml0Q2FjaGUoKTsNCiAgICAgICAgICAgIHRoaXMuaW5pdENhbWVyYUNvbnRyb2woKTsNCiAgICAgICAgICAgIHRoaXMuaW5pdENvbnRyb2woKTsNCiAgICAgICAgICAgIHRoaXMuaW5pdEhlbHBlcigpOw0KICAgICAgICAgICAgdGhpcy53YXRjaEhlbHBlcigpOw0KICAgICAgICAgICAgLy8gdGhpcy5pbml0TW91c2VFdmVudCgpOw0KICAgICAgICAgICAgdGhpcy5pbml0RXZlbnRNYW5hZ2VyKCk7DQogICAgICAgICAgICB0aGlzLmluaXRTdGF0cygpOw0KICAgICAgICAgICAgDQogICAgICAgICAgICAvLyBpbml0RGF0R1VJKCk7DQogICAgICAgICAgICB0aGlzLnNjZW5lQ2hhbmdlZEV2ZW50KCk7DQogICAgICAgICAgICB0aGlzLmFuaW1hdGUoKTsNCiAgICAgICAgICAgIGNvbnNvbGUubG9nKHNjZW5lKTsNCiAgICAgICAgICAgIA0KICAgICAgICB9LA0KICAgICAgICB3YXRjaEhlbHBlcigpew0KICAgICAgICAgICAgbGV0IHN0YXRlPXRoaXMuc3RhdGU7DQogICAgICAgICAgICAgdGhpcy4kYnVzLiRlbWl0KCdzdGF0ZUNvbnRyb2wnLHN0YXRlKTsNCiAgICAgICAgfSwNCiAgICAgICAgc2NlbmVDaGFuZ2VkRXZlbnQoKXsNCiAgICAgICAgICAgIGxldCBzY2VuZWxpc3Q9c2NlbmUuY2hpbGRyZW47DQogICAgICAgICAgICB0aGlzLiRidXMuJGVtaXQoJ3NjZW5lQ2hhbmdlZCcsc2NlbmVsaXN0KTsNCiAgICAgICAgfSwNCiAgICAgICAgLy/pvKDmoIfkuovliqHlpITnkIbvvIjljIXmi6zngrnlh7vkuovku7bjgIHnp7vliqjkuovku7bvvIkNCiAgICAgICAgLy8gaW5pdE1vdXNlRXZlbnQoKXsNCiAgICAgICAgICAgIC8v57uZY2FudmFz5a+56LGh6L+b6KGM6byg5qCH5Z2Q5qCH6L2s5o2iDQogICAgICAgICAgICAvLyBtb3VzZT1uZXcgVmVjdG9yMigpOw0KICAgICAgICAgICAgLy8gbGV0IGRvbVg9MDsNCiAgICAgICAgICAgIC8vIGxldCBkb21ZPTA7DQogICAgICAgICAgICAvLyBsZXQgd2lkdGg9MDsNCiAgICAgICAgICAgIC8vIGxldCBoZWlnaHQ9MDsNCiAgICAgICAgICAgIC8vIHJlbmRlcmVyLmRvbUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywoZXZlbnQpPT57DQogICAgICAgICAgICAvLyAgICAgLy9jb25zb2xlLmxvZyhldmVudC5vZmZzZXRYLGV2ZW50Lm9mZnNldFkpOw0KICAgICAgICAgICAgLy8gICAgIGRvbVg9ZXZlbnQub2Zmc2V0WDsNCiAgICAgICAgICAgIC8vICAgICBkb21ZPWV2ZW50Lm9mZnNldFk7DQogICAgICAgICAgICAvLyAgICAgd2lkdGg9cmVuZGVyZXIuZG9tRWxlbWVudC5vZmZzZXRXaWR0aDsNCiAgICAgICAgICAgIC8vICAgICBoZWlnaHQ9cmVuZGVyZXIuZG9tRWxlbWVudC5vZmZzZXRIZWlnaHQ7DQogICAgICAgICAgICAvLyAgICAgbW91c2UueD1kb21YL3dpZHRoKjItMTsNCiAgICAgICAgICAgIC8vICAgICBtb3VzZS55PS1kb21ZKjIvaGVpZ2h0KzE7DQogICAgICAgICAgICAvLyAgICAgLy8gY29uc29sZS5sb2cobW91c2UueCxtb3VzZS55KTsNCiAgICAgICAgICAgIC8vICAgICByYXljYXN0ZXIuc2V0RnJvbUNhbWVyYShtb3VzZSxjYW1lcmEpOw0KICAgICAgICAgICAgLy8gICAgIC8v6Ziy5q2i5o6n5Yi25Zmo6KKr6YCJ5LitDQogICAgICAgICAgICAvLyAgICAgc2NlbmUucmVtb3ZlKHRyYW5zZm9ybUNvbnRyb2wpOw0KICAgICAgICAgICAgLy8gICAgIGNvbnN0IGludGVyc2VjdGlvbj1yYXljYXN0ZXIuaW50ZXJzZWN0T2JqZWN0cyhzY2VuZS5jaGlsZHJlbixmYWxzZSk7DQogICAgICAgICAgICAvLyAgICAgLy/miormiYDmnInmnIljaGlsZHJlbueahOWxj+iUveaOie+8jOWPr+S7pemYsuatouWvuWhlbHBlcui/m+ihjOaOp+WItg0KICAgICAgICAgICAgLy8gICAgIHNjZW5lLmFkZCh0cmFuc2Zvcm1Db250cm9sKTsNCiAgICAgICAgICAgIC8vICAgICBpZihpbnRlcnNlY3Rpb24ubGVuZ3RoKXsNCiAgICAgICAgICAgIC8vICAgICAgICAgLy/lpoLmnpzmi77lj5bliLDmnZDotKjniankvZMNCiAgICAgICAgICAgIC8vICAgICAgICAgY29uc3Qgb2JqZWN0PWludGVyc2VjdGlvblswXS5vYmplY3Q7DQogICAgICAgICAgICAvLyAgICAgICAgIC8v5aaC5p6c5b2T5LiL54mp5L2T5LiN5piv5LiK5qyh57yT5a2Y54mp5L2T77yM6K+05piO5piv5LuO5LiN5ZCM54mp5L2T5LiK56e75Yiw5b2T5YmN54mp5L2T5LiK6Kem5Y+RbW91c2VlbnRlcuS6i+S7tg0KICAgICAgICAgICAgLy8gICAgICAgICBpZihvYmplY3QhPWNhY2hlb2JqZWN0cyl7DQogICAgICAgICAgICAvLyAgICAgICAgICAgICBpZihjYWNoZW9iamVjdHMpew0KICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgIC8v5b2T6byg5qCH5LuO5LiA5Liq54mp5L2T56e75Yqo5Yiw5Y+m5LiA5Liq54mp5L2T5pe277yM5YWI6Kem5Y+R5LmL5YmN57yT5a2Y54mp5L2T55qEbW91c2VsZWF2ZeaWueazlQ0KICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgIC8v5YaN6Kem5Y+R5b2T5YmN54mp5L2T55qEbW91c2VlbnRlcuaWueazlQ0KICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgIGNhY2hlb2JqZWN0cy5kaXNwYXRjaEV2ZW50KHsNCiAgICAgICAgICAgIC8vICAgICAgICAgICAgIHR5cGU6J21vdXNlbGVhdmUnDQogICAgICAgICAgICAvLyAgICAgICAgIH0pOw0KICAgICAgICAgICAgLy8gICAgICAgICAgICAgfQ0KICAgICAgICAgICAgLy8gICAgICAgICAgICAgICBvYmplY3QuZGlzcGF0Y2hFdmVudCh7DQogICAgICAgICAgICAvLyAgICAgICAgICAgICB0eXBlOidtb3VzZWVudGVyJw0KICAgICAgICAgICAgLy8gICAgICAgICB9KTsNCiAgICAgICAgICAgIC8vICAgICAgICAgfS8v5aaC5p6c55u4562J6Kem5Y+RbW91c2Vtb3Zl5pa55rOV5b6X5Yiw54mp5L2T5Z2Q5qCHKOm8oOagh+S4gOebtOWcqOeJqeS9k+S4iuenu+WKqCkNCiAgICAgICAgICAgIC8vICAgICAgICAgZWxzZSBpZihvYmplY3Q9PWNhY2hlb2JqZWN0cyl7DQogICAgICAgICAgICAvLyAgICAgICAgICAgICBvYmplY3QuZGlzcGF0Y2hFdmVudCh7DQogICAgICAgICAgICAvLyAgICAgICAgICAgICB0eXBlOidtb3VzZW1vdmUnDQogICAgICAgICAgICAvLyAgICAgICAgIH0pOw0KICAgICAgICAgICAgLy8gICAgICAgICB9DQogICAgICAgICAgICAvLyAgICAgICAgIGNhY2hlb2JqZWN0cz1vYmplY3Q7DQogICAgICAgICAgICAvLyAgICAgfWVsc2V7DQogICAgICAgICAgICAvLyAgICAgICAgIC8v5b2T6byg5qCH5LuO5LiA5Liq54mp5L2T56e75Yqo5Yiw5bCE57q/5ou+5Y+W5Zmo5ou+5Y+W5LiN5Yiw54mp5L2T5pe25Lmf5Lya6Kem5Y+R5LmL5YmN55qE54mp5L2T55qEbW91c2VsZWF2ZeaWueazlQ0KICAgICAgICAgICAgLy8gICAgICAgICAgaWYoY2FjaGVvYmplY3RzKXsNCiAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICAvL+W9k+m8oOagh+S7juS4gOS4queJqeS9k+enu+WKqOWIsOWPpuS4gOS4queJqeS9k+aXtu+8jOWFiOinpuWPkeS5i+WJjee8k+WtmOeJqeS9k+eahG1vdXNlbGVhdmXmlrnms5UNCiAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICAvL+WGjeinpuWPkeW9k+WJjeeJqeS9k+eahG1vdXNlZW50ZXLmlrnms5UNCiAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICBjYWNoZW9iamVjdHMuZGlzcGF0Y2hFdmVudCh7DQogICAgICAgICAgICAvLyAgICAgICAgICAgICB0eXBlOidtb3VzZWxlYXZlJw0KICAgICAgICAgICAgLy8gICAgICAgICB9KTsNCiAgICAgICAgICAgIC8vICAgICB9DQogICAgICAgICAgICAvLyAgICAgICAgIGNhY2hlb2JqZWN0cz1udWxsOw0KDQoNCiAgICAgICAgICAgIC8vICAgICB9DQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICANCiAgICAgICAgICAgIC8vIH0pOw0KICAgICAgICAgICAgLy8gLy8gLy/niankvZPmi77lj5bkuovku7blpITnkIYNCiAgICAgICAgICAgIC8vIHJlbmRlcmVyLmRvbUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLChldmVudCk9PnsNCiAgICAgICAgICAgIC8vICAgICBpZih0cmFuc2luZyl7DQogICAgICAgICAgICAvLyAgICAgICAgIHRyYW5zaW5nPWZhbHNlOw0KICAgICAgICAgICAgLy8gICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgICAgICAvLyAgICAgfQ0KICAgICAgICAgICAgLy8gICAgIC8vIHJheWNhc3Rlci5zZXRGcm9tQ2FtZXJhKG1vdXNlLGNhbWVyYSk7DQogICAgICAgICAgICAvLyAgICAgLy8gLy/pmLLmraLmjqfliLblmajooqvpgInkuK0NCiAgICAgICAgICAgIC8vICAgICAvLyBzY2VuZS5yZW1vdmUodHJhbnNmb3JtQ29udHJvbCk7DQogICAgICAgICAgICAvLyAgICAgLy8gY29uc3QgaW50ZXJzZWN0aW9uPXJheWNhc3Rlci5pbnRlcnNlY3RPYmplY3RzKHNjZW5lLmNoaWxkcmVuLGZhbHNlKTsNCiAgICAgICAgICAgIC8vICAgICAvLyAvL+aKiuaJgOacieaciWNoaWxkcmVu55qE5bGP6JS95o6J77yM5Y+v5Lul6Ziy5q2i5a+5aGVscGVy6L+b6KGM5o6n5Yi2DQogICAgICAgICAgICAvLyAgICAgLy8gc2NlbmUuYWRkKHRyYW5zZm9ybUNvbnRyb2wpOw0KICAgICAgICAgICAgLy8gICAgIC8vIGlmKGludGVyc2VjdGlvbi5sZW5ndGgpew0KDQogICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgLy8gICAgIC8vICAgICBjb25zdCBvYmplY3Q9aW50ZXJzZWN0aW9uWzBdLm9iamVjdDsNCiAgICAgICAgICAgIC8vICAgICAvLyAgICAgdHJhbnNmb3JtQ29udHJvbC5hdHRhY2gob2JqZWN0KTsNCiAgICAgICAgICAgIC8vICAgICAvLyB9ZWxzZXsNCiAgICAgICAgICAgIC8vICAgICAvLyAgICAgLy/lvZPngrnlh7vliLDlnLrmma/nqbrnmb3lpITml7bnpoHnlKjlj6/mjqfku7YNCiAgICAgICAgICAgIC8vICAgICAvLyAgICB0cmFuc2Zvcm1Db250cm9sLmRldGFjaCgpOw0KICAgICAgICAgICAgLy8gICAgIC8vIH0NCiAgICAgICAgICAgIC8vIH0pOw0KDQogICAgICAgIC8vIH0sDQogICAgICAgIGluaXRTdGF0cygpew0KICAgICAgICAgICAgc3RhdHMgPSBuZXcgU3RhdHMoKTsNCiAgICAgICAgICAgICBzdGF0cy5kb21FbGVtZW50LnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJzsgLy/nu53lr7nlnZDmoIcgIA0KICAgICAgICAgICAgICAgIHN0YXRzLmRvbUVsZW1lbnQuc3R5bGUubGVmdCA9ICcwcHgnOy8vICgwLDApcHgs5bem5LiK6KeSICANCiAgICAgICAgICAgICAgICBzdGF0cy5kb21FbGVtZW50LnN0eWxlLnRvcCA9ICcwcHgnOyAgDQogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnd2ViZ2wnKS5hcHBlbmRDaGlsZChzdGF0cy5kb21FbGVtZW50KTsNCg0KICAgICAgICB9LA0KICAgICAgICB1cGRhdGVQb3NpdGlvbigpew0KICAgICAgICAgICAgbWVzaC5wb3NpdGlvbi5zZXQoY29udHJvbHMucG9zaXRpb25YLGNvbnRyb2xzLnBvc2l0aW9uWSxjb250cm9scy5wb3NpdGlvblopOw0KICAgICAgICB9LA0KICAgICAgICAvL+WIneWni+WMlua4suafk+WZqA0KICAgICAgICBpbml0UmVuZGVyZXIoKXsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgDQogICAgICAgICAgICByZW5kZXJlcj1uZXcgVEhSRUUuV2ViR0xSZW5kZXJlcih7YW50aWFsaWFzOnRydWV9KTsvL+WunuS+i+WMlua4suafk+WZqA0KICAgICAgICAgICAgLy/mipfplK/pvb/lvIDlkK8NCiAgICAgICAgICAgIHJlbmRlcmVyLnNldFNpemUod2luZG93LmlubmVyV2lkdGgqMC43LHdpbmRvdy5pbm5lckhlaWdodCowLjcpOy8v6K6+572u5a696auYDQogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnd2ViZ2wnKS5hcHBlbmRDaGlsZChyZW5kZXJlci5kb21FbGVtZW50KTsvL+a3u+WKoOWIsGRvbQ0KICAgICAgICB9LA0KICAgICAgICAvL+WIneWni+WMluWcuuaZrw0KICAgICAgICBpbml0U2NlbmUoKXsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgc2NlbmU9bmV3IFRIUkVFLlNjZW5lKCk7Ly/lrp7kvovljJblnLrmma8NCiAgICAgICAgICAgIG9ianM9W107DQogICAgICAgICAgICAgc2NlbmUuYmFja2dyb3VuZCA9IG5ldyBUSFJFRS5DdWJlVGV4dHVyZUxvYWRlcigpLmxvYWQoWw0KICAgICAgICAgIHJlcXVpcmUoJ0AvYXNzZXRzL3NreWJveC9HYWxheHkvUmlnaHQuanBnJyksDQogICAgICAgICAgcmVxdWlyZSgnQC9hc3NldHMvc2t5Ym94L0dhbGF4eS9MZWZ0LmpwZycpLA0KICAgICAgICAgIHJlcXVpcmUoJ0AvYXNzZXRzL3NreWJveC9HYWxheHkvVXAuanBnJyksDQogICAgICAgICAgcmVxdWlyZSgnQC9hc3NldHMvc2t5Ym94L0dhbGF4eS9Eb3duLmpwZycpLA0KICAgICAgICAgIHJlcXVpcmUoJ0AvYXNzZXRzL3NreWJveC9HYWxheHkvRnJvbnQuanBnJyksDQogICAgICAgICAgcmVxdWlyZSgnQC9hc3NldHMvc2t5Ym94L0dhbGF4eS9CYWNrLmpwZycpDQogICAgICAgIF0pOw0KICAgICAgICAgICAgLy8gdGhpcy4kYnVzLiRlbWl0KCdzY2VuZUNoYW5nZWQnLHNjZW5lKTsNCiAgICAgICAgfSwNCiAgICAgICAgLy/liJ3lp4vljJbnm7jmnLoNCiAgICAgICAgaW5pdENhbWVyYSgpew0KICAgICAgICAgICAgY2FtZXJhPW5ldyBUSFJFRS5QZXJzcGVjdGl2ZUNhbWVyYSg0NSx3aW5kb3cuaW5uZXJXaWR0aC93aW5kb3cuaW5uZXJIZWlnaHQsMC4xLDIwMCkNCiAgICAgICAgICAgIC8v5a6e5L6L5YyW55u45py644CRDQogICAgICAgICAgICBjYW1lcmEucG9zaXRpb24uc2V0KDAsMCwxNTApOw0KICAgICAgICB9LA0KICAgICAgICAvL+WIm+W7uuaooeWeiw0KICAgICAgICBpbml0TWVzaCgpew0KICAgICAgICAgICAgLy8gZ2VvbWV0cnkgPSBuZXcgVEhSRUUuQm94R2VvbWV0cnkoNSwgNSwgNSApOyAvL+WIm+W7uuWHoOS9leS9kw0KICAgICAgICAgICAgLy8gdmFyIG1hdGVyaWFsPW5ldyBUSFJFRS5NZXNoU3RhbmRhcmRNYXRlcmlhbCgpOw0KICAgICAgICAgICAgLy8gbWF0ZXJpYWwuY29sb3I9bmV3IENvbG9yKDAuNywwLjIsMC4yKTsgLy/liJvlu7rmnZDotKgNCg0KICAgICAgICAgICAgLy8gbWVzaCA9IG5ldyBUSFJFRS5NZXNoKCBnZW9tZXRyeSwgbWF0ZXJpYWwgKTsgLy/liJvlu7rnvZHmoLwNCiAgICAgICAgICAgIC8vIG1lc2gubmFtZT0i55uS5a2QIjsNCg0KICAgICAgICAgICAgLy8gc2NlbmUuYWRkKCBtZXNoICk7IC8v5bCG572R5qC85re75Yqg5Yiw5Zy65pmvDQogICAgICAgICAgICANCiAgICAgICAgICANCiAgICAgICAgICAgIC8vIHRoaXMuaW5pdENvbmUoKTsNCiAgICAgICAgICAgIC8vIHRoaXMuaW5pdEJveCgpOw0KICAgICAgICAgICAgdGhpcy5pbml0TGluZSgpOw0KICAgICAgICAgICAgdGhpcy5pbml0QmFycygpOw0KDQogICAgICAgIH0sDQoNCiAgICAgICAgaW5pdEJhcnMoKXsNCiAgICAgICAgICAgIHRoaXMuYXVkaW9CYXJzKDI1LDEyOCk7DQogICAgICAgIH0sDQoNCiAgICAgICAgYXVkaW9CYXJzKHJhZGl1cywgY291bnREYXRhKSB7DQogICAgICBsZXQgYmFyR3JvdXAgPSBuZXcgVEhSRUUuR3JvdXAoKTsNCiAgICAgIGxldCBSID0gcmFkaXVzOw0KICAgICAgbGV0IE4gPSBjb3VudERhdGE7DQogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IE47IGkrKykgew0KICAgICAgICBsZXQgbWluR3JvdXAgPSBuZXcgVEhSRUUuR3JvdXAoKTsNCiAgICAgICAgbGV0IGJveCA9IG5ldyBUSFJFRS5Cb3hHZW9tZXRyeSgxLCAxLCAxKTsNCiAgICAgICAgbGV0IG1hdGVyaWFsID0gbmV3IFRIUkVFLk1lc2hQaG9uZ01hdGVyaWFsKHsNCiAgICAgICAgICBjb2xvcjogMHgwMGZmZmYNCiAgICAgICAgfSk7IC8vIOadkOi0qOWvueixoQ0KICAgICAgICBsZXQgbSA9IGk7DQogICAgICAgIGxldCBtZXNoID0gbmV3IFRIUkVFLk1lc2goYm94LCBtYXRlcmlhbCk7DQoNCiAgICAgICAgbWVzaC5wb3NpdGlvbi55ID0gMC41Ow0KICAgICAgICBtaW5Hcm91cC5hZGQobWVzaCk7DQogICAgICAgIG1pbkdyb3VwLnBvc2l0aW9uLnNldCgNCiAgICAgICAgICBNYXRoLnNpbigoKG0gKiBNYXRoLlBJKSAvIE4pICogMikgKiBSLA0KICAgICAgICAgIE1hdGguY29zKCgobSAqIE1hdGguUEkpIC8gTikgKiAyKSAqIFIsDQogICAgICAgICAgMA0KICAgICAgICApOw0KICAgICAgIG1pbkdyb3VwLnJvdGF0aW9uLnogPSAoKC1tICogTWF0aC5QSSkgLyBOKSAqIDI7DQogICAgICAgIGJhckdyb3VwLmFkZChtaW5Hcm91cCk7DQogICAgICB9DQogICAgICBiYXJHcm91cC5uYW1lPSLpn7PpopHosLEiOw0KICAgICAgYmFyR3JvdXAudHlwZT0iQmFyR3JvdXAiOw0KICAgICAgc2NlbmUuYWRkKGJhckdyb3VwKTsNCiAgICAgIG9ianMucHVzaChiYXJHcm91cCk7DQogICAgfSwNCi8qIOi/memHjOacieS4quWOn+eQhu+8jOS4uuS7gOS5iOWvuemfs+mikee6v+WSjOmfs+mikee7hOi/m+ihjOenu+WKqOaXi+i9rOaTjeS9nOWQjiDkvp3nhLblj6/ku6XmoLnmja7liJ3lp4vljJbnmoTpn7PpopHmlbDmja7ov5vooYzph43nlLsNCuaMieWOn+eQhuadpeivtOW6lOivpeimgemHjeaWsOiuoeeul+WQhOS4que6v+auteeahOWdkOagh+WAvOi/m+ihjOmHjee7mO+8jOS4uuS7gOS5iOi/memHjOWvvOWHuuaVsOaNruWQjuS+neeEtuWPr+S7peWIqeeUqOWIneWni+WMlueahA0KYmFyTm9kZXPov5vooYzkuIDkuKrnur/mrrXorqHnrpfph43lm57lkKfvvIzljp/lm6DmmK/lm6DkuLrvvIzlnKjnvJbovpHlmajkuK3lr7nkuIDkuKrnu4Tlr7nosaHov5vooYzmk43kvZzml7bvvIzlhbblkITlrZDlr7nosaENCueahOWdkOagh+W5tuS4jeS8muWPmOWMlu+8jOWPquaUueWPmOi/meS4que7hOWvueixoeeahOS9jee9ruOAgeaXi+i9rOetieS/oeaBr++8jOWFtuWtkOWvueixoeeahOWdkOagh+S4gOebtOaYr+ebuOWvueS6juWFtueItuWvueixoeeahA0K5Z2Q5qCH5Y2z5pys5Zyw5Z2Q5qCH77yM6ICM6Z2e5LiW55WM5Z2Q5qCH77yM5Y+q5pyJ5b2T54i25a+56LGh5pivc2NlbmXlnLrmma/ml7bvvIzmnKzlnLDlnZDmoIfmiY3nrYnkuo7kuJbnlYzlnZDmoIcNCiAqLw0KICAgICAgICBpbml0TGluZSgpew0KICAgICAgICAgICAgdGhpcy5hdWRpb0xpbmVzKDIwLDI1Nik7DQogICAgICAgIH0sDQogICAgICAgIHJlbmRlckdlb21ldHJpZXModmVydGljZXMpIHsNCiAgICAgICAgICAgIGNvbnN0IHJlcyA9IFtdOw0KICAgICAgICAgICAgdmVydGljZXMgPSB2ZXJ0aWNlcy5jb25jYXQodmVydGljZXNbMF0pOw0KICAgICAgICAgICAgLy/lkIjlubbmlbDnu4TvvIzmiorph4zlpJbkvY3nva7lkYrnn6XopoHnlLvnmoTnur8NCiAgICAgICAgICAgIHZlcnRpY2VzLmZvckVhY2godmFsdWUgPT4gew0KICAgICAgICAgICAgcmVzLnB1c2godmFsdWUueCwgdmFsdWUueSwgMCk7DQogICAgICB9KTsNCiAgICAgICAgICAgIHJldHVybiBuZXcgVEhSRUUuQnVmZmVyQXR0cmlidXRlKG5ldyBGbG9hdDMyQXJyYXkocmVzKSwgMyk7DQogICAgfSwNCiAgICAgICAgYXVkaW9MaW5lcyhyYWRpdXMsIGNvdW50RGF0YSkgew0KICAgICAgICAgICAgdmFyIGJhck5vZGVzID0gcmFuZ2UoMCwgY291bnREYXRhKS5tYXAoaW5kZXggPT4gew0KICAgICAgICAgICAgICAgIHJldHVybiBuZXcgbm9kZSgNCiAgICAgICAgICAgICAgICByYWRpdXMsDQogICAgICAgICAgICAgICAgKChpbmRleCAvIGNvdW50RGF0YSkgKiAzNjAgKyA0NSkgJSAzNjAsDQogICAgICAgICAgICAgICAgbmV3IFRIUkVFLlZlY3RvcjIoMCwgMCkNCiAgICAgICAgICAgICAgICApOw0KICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAvL+W+l+WIsOS4gOS4quiusOW9leWchuS4ijI1NuS4queCueeahOS9jee9ruS/oeaBr+eahOaVsOe7hA0KICAgICAgICAgICAgY29uc3QgbGluZU1hdGVyaWFsID0gbmV3IFRIUkVFLkxpbmVCYXNpY01hdGVyaWFsKHsNCiAgICAgICAgICAgICAgICBjb2xvcjogMHgwMGZmZmYNCiAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgdmFyIGJhckxpbmUgPSByYW5nZSgwLCBjb3VudERhdGEpLm1hcChpbmRleCA9PiB7DQogICAgICAgICAgICByZXR1cm4gbmV3IFRIUkVFLkxpbmUoDQogICAgICAgICAgICAgICAgbmV3IFRIUkVFLkJ1ZmZlckdlb21ldHJ5KCkuc2V0QXR0cmlidXRlKA0KICAgICAgICAgICAgICAgICAgICAicG9zaXRpb24iLA0KICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyR2VvbWV0cmllcyhbDQogICAgICAgICAgICAgICAgICAgIGJhck5vZGVzW2luZGV4XS5wb3NpdGlvbkEoKSwNCiAgICAgICAgICAgICAgICAgICAgIGJhck5vZGVzW2luZGV4XS5wb3NpdGlvbkIoKQ0KICAgICAgICAgICAgXSkNCiAgICAgICAgICApLA0KICAgICAgICAgICAgbGluZU1hdGVyaWFsDQogICAgICAgICAgICApOw0KICAgICAgICB9KTsNCiAgICAgICAgdmFyIG91dExpbmUgPSBuZXcgVEhSRUUuTGluZSgNCiAgICAgICAgbmV3IFRIUkVFLkJ1ZmZlckdlb21ldHJ5KCkuc2V0QXR0cmlidXRlKA0KICAgICAgICAgICJwb3NpdGlvbiIsDQogICAgICAgICAgdGhpcy5yZW5kZXJHZW9tZXRyaWVzKGJhck5vZGVzLm1hcChub2RlID0+IG5vZGUucG9zaXRpb25BKCkpKQ0KICAgICAgICApLA0KICAgICAgICBsaW5lTWF0ZXJpYWwNCiAgICAgICk7DQoNCiAgICAgIHZhciBpbkxpbmUgPSBuZXcgVEhSRUUuTGluZSgNCiAgICAgICAgbmV3IFRIUkVFLkJ1ZmZlckdlb21ldHJ5KCkuc2V0QXR0cmlidXRlKA0KICAgICAgICAgICJwb3NpdGlvbiIsDQogICAgICAgICAgdGhpcy5yZW5kZXJHZW9tZXRyaWVzKGJhck5vZGVzLm1hcChub2RlID0+IG5vZGUucG9zaXRpb25CKCkpKQ0KICAgICAgICApLA0KICAgICAgICBsaW5lTWF0ZXJpYWwNCiAgICAgICk7DQoNCiAgICAgIHZhciBsaW5lc0dyb3VwID0gbmV3IFRIUkVFLkdyb3VwKCk7DQogICAgICBsaW5lc0dyb3VwLmFkZChvdXRMaW5lKTsNCiAgICAgIGxpbmVzR3JvdXAuYWRkKGluTGluZSk7DQogICAgICBiYXJMaW5lLmZvckVhY2gobGluZSA9PiBsaW5lc0dyb3VwLmFkZChsaW5lKSk7DQogICAgICBsaW5lc0dyb3VwLm5hbWU9Iumfs+mikee6vyI7DQogICAgICBsaW5lc0dyb3VwLnR5cGU9IkxpbmVHcm91cCI7DQogICAgICBzY2VuZS5hZGQobGluZXNHcm91cCk7DQogICAgICBvYmpzLnB1c2gobGluZXNHcm91cCk7ICAgICANCiAgICB9LA0KDQoNCg0KICAgICAgICB1cGRhdGUoKXsNCiAgICAgICAgICAgIHN0YXRzLnVwZGF0ZSgpOw0KICAgICAgICB9LA0KICAgICAgICBSZXNldCgpew0KICAgICAgICAgIA0KICAgICAgICB9LA0KICAgICAgICBSZXNldEFsbCgpew0KICAgICAgICAgICAgdGhpcy4kYnVzLiRvbigncmVzZXQnLCgpPT57DQogICAgICAgICAgICAgICAgdGhpcy5SZXNldCgpOw0KICAgICAgICAgICAgfSk7DQogICAgICAgIH0sDQogICAgICAgIEV4cG9ydCgpew0KICAgICAgICAgICAgDQogICAgICAgICAgICB0aGlzLiRidXMuJG9uKCdleHBvcnQnLCgpPT57DQogICAgICAgICAgICBpZihzY2VuZS5jaGlsZHJlbi5sZW5ndGg+MCl7DQogICAgICAgICAgICAgICAgbGV0IG9iajsNCiAgICAgICAgICAgICAgICAvL+WIoOmZpOaJgOaciWhlbHBlcu+8jOWPquS/neeVmeWFiea6kOOAgeadkOi0qA0KICAgICAgICAgICAgICAgIGZvcih2YXIgaT1zY2VuZS5jaGlsZHJlbi5sZW5ndGgtMTtpPj0wO2ktLSl7DQogICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICAgb2JqPXNjZW5lLmNoaWxkcmVuW2ldOw0KICAgICAgICAgICAgICAgICAgICBpZihvYmoudHlwZS5pbmRleE9mKCdIZWxwZXInKSE9LTF8fG9iai50eXBlLmluZGV4T2YoJ0NvbnRyb2wnKSE9LTEpew0KICAgICAgICAgICAgICAgICAgICAgICAgIHNjZW5lLnJlbW92ZShvYmopOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgLy/lm6DkuLrmr4/mrKHov63ku6PkuK0uY2hpbGRyZW4g5LiA5pemcmVtb3Zl5ZCO5LuO5aS05byA5aeL5omn6KGMDQogICAgICAgICAgICAgICAgLy/mlbDnu4TkvJrmlLnlj5jvvIzlm6DmraTkvb/nlKjpgY3ljobnmoRmb3JFYWNo5Lmf5aW977yMdHJhdmVyc2XkuZ/lpb3mlbDnu4TnmoQNCiAgICAgICAgICAgICAgICAvL+e0ouW8leWFqOmDveaUueWPmO+8jOWPquS8muWIoOmZpOS4gOS4quWvueixoQ0KICAgICAgICAgICAgICAgIC8v5L2G5aaC5p6c5LuO5ZCO5byA5aeL6YGN5Y6G5Yig6Zmk77yM5q+P5qyhcmVtb3Zl5ZCO5YmN6Z2i55qE57Si5byV5Lmf5Y2z5piv5pyq6YGN5Y6G6L+H55qE6IqC54K557Si5byV5LiN5Lya5Y+YDQogICAgICAgICAgICAgICAgLy/kvb/nlKhzdGF0ZeWAvOeEtuWQjui/m+ihjOa3seW6puebkeWQrOS+neeEtuS4jeihjO+8jOWboOS4undhdGNo5pa55rOV5q+P5qyh5ZyobW91bnRlZOS5i+WQjg0KICAgICAgICAgICAgICAgIC8v6L+Z5bCx5a+86Ie05LqG5aaC5p6cbW91bnRlZOS4reeahGRhdGHlgLzlj5jljJbvvIzmiJHpnIDopoHlr7zlh7rnmoTmlbDmja7ov5jmmK/ljp/mnaXmlbDmja7vvIx3YXRjaOWPquS8muWcqOS5i+WQjg0KICAgICAgICAgICAgICAgIC8v5Y+R55Sf5L2c55So44CCDQogICAgICAgICAgIA0KICAgICAgICAgICAgdmFyIEpTT05TdHI9SlNPTi5zdHJpbmdpZnkoc2NlbmUudG9KU09OKCkpOw0KICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhKU09OU3RyKTsNCiAgICAgICAgICAgIHRoaXMuZG93bmxvYWQoInNjZW5lLmpzb24iLEpTT05TdHIpOyAgDQogICAgICAgICAgICB0aGlzLmluaXRIZWxwZXIoKTsNCiAgICAgICAgICAgIH0pOw0KICAgICAgICB9LA0KICAgICAgICBkb3dubG9hZChmaWxlbmFtZSx0ZXh0KXsNCiAgICAgICAgICAgIHZhciBwb209ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpOw0KICAgICAgICAgICAgcG9tLnNldEF0dHJpYnV0ZSgnaHJlZicsJ2RhdGE6dGV4dC9wbGFpbjtjaGFyc2V0PXV0Zi04LCcNCiAgICAgICAgICAgICtlbmNvZGVVUklDb21wb25lbnQodGV4dCkpOw0KICAgICAgICAgICAgcG9tLnNldEF0dHJpYnV0ZSgnZG93bmxvYWQnLGZpbGVuYW1lKTsNCiAgICAgICAgICAgIGlmKGRvY3VtZW50LmNyZWF0ZUV2ZW50KXsNCiAgICAgICAgICAgICAgICB2YXIgZXZlbnQ9ZG9jdW1lbnQuY3JlYXRlRXZlbnQoJ01vdXNlRXZlbnRzJyk7DQogICAgICAgICAgICAgICAgZXZlbnQuaW5pdE1vdXNlRXZlbnQoJ2NsaWNrJyx0cnVlLCBmYWxzZSwNCiAgICAgICAgICAgICAgICB3aW5kb3csMCwwLDAsMCwwLGZhbHNlLGZhbHNlLGZhbHNlLGZhbHNlLDAsbnVsbCk7DQogICAgICAgICAgICAgICAgcG9tLmRpc3BhdGNoRXZlbnQoZXZlbnQpOw0KICAgICAgICAgICAgfWVsc2V7DQogICAgICAgICAgICAgICAgcG9tLmNsaWNrKCk7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgfSwNCiAgICAgICAgLy/ov5DooYzliqjnlLsNCiAgICAgICAgYW5pbWF0ZSgpew0KICAgICAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHRoaXMuYW5pbWF0ZSk7Ly/lvqrnjq/osIPnlKjlh73mlbANCiAgICAgICAgICAgIA0KICAgICAgICAgICAgLy8gbWVzaC5yb3RhdGlvbi54Kz0wLjAxOw0KICAgICAgICAgICAgLy8gLy8gLy/mr4/luKfnvZHmoLzmqKHlnovmsr946L205peL6L2sMC4wMeW8p+W6pg0KICAgICAgICAgICAgLy8gbWVzaC5yb3RhdGlvbi55Kz0wLjAyOw0KICAgICAgICAgICAgLy8gLy/mr4/luKfnvZHmoLzmqKHlnovmsr956L205peL6L2sMC4wMuW8p+W6pg0KICAgICAgICAgICAgLy8gLy9zdGF0cy51cGRhdGUoKTsvL+abtOaWsOaAp+iDveajgOa1i+ahhg0KDQogICAgICAgICAgICB0aGlzLnVwZGF0ZSgpOw0KICAgICAgICAgICAgcmVuZGVyZXIucmVuZGVyKHNjZW5lLGNhbWVyYSk7Ly/muLLmn5MNCiAgICAgICAgfQ0KICAgIH0sDQogICAgbW91bnRlZCgpIHsNCiAgICAgICAgdGhpcy5pbml0KCk7DQogICAgICAgIHRoaXMuQ2hlY2tGcm9tVHJlZSgpOw0KICAgICAgICB0aGlzLmZpbmRjdXJyZW50T2JqKCk7DQogICAgICAgIHRoaXMuQWRkTW9kZWwoKTsNCiAgICAgICAgdGhpcy5SZXNldEFsbCgpOw0KICAgICAgICB0aGlzLkV4cG9ydCgpOw0KICAgIH0sDQp9DQo="},{"version":3,"sources":["Edit.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Edit.vue","sourceRoot":"src/views/Editor","sourcesContent":["<template>\r\n  <div class=\"app-container\">\r\n    <div>\r\n        <el-container>\r\n           <!-- <el-header>Header</el-header> -->\r\n           <el-container>\r\n                <el-aside width=\"260px\">\r\n                       <Widget/>\r\n                </el-aside>\r\n                \r\n                <el-main >\r\n                    <el-scrollbar class=\"Scrollbar\">\r\n                        <div id=\"webgl\" style=\"position:relative\">\r\n                        </div>\r\n                    </el-scrollbar>\r\n                </el-main>\r\n                <el-aside width=\"260px\">\r\n                    <Attribute/>\r\n                </el-aside>\r\n            </el-container>\r\n            <el-footer>\r\n                <Footer/>\r\n            </el-footer>\r\n        </el-container>\r\n      <!-- <el-row :gutter=\"20\">\r\n        <el-col :span=\"3\" :xs=\"24\">\r\n          <el-card style=\"margin-bottom:20px;height: 500px;\">  \r\n              \r\n          </el-card>\r\n        </el-col>\r\n        <el-col :span=\"16\" :xs=\"24\">\r\n            <div id=\"webgl\" style=\"position:relative\">\r\n               \r\n            </div>\r\n        </el-col>\r\n        <el-col :span=\"3\" :xs=\"24\">\r\n          <el-card style=\"margin-bottom:20px;height: 500px;\">  \r\n              \r\n          </el-card>\r\n        </el-col>\r\n      </el-row> -->\r\n    </div>\r\n\r\n                \r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport * as THREE from 'three/build/three.module.js'\r\nimport Stats from '../../store/Stats/stats.min.js'\r\nimport Widget from '../Editor/Widget/Widget.vue'\r\nimport Attribute from '../Editor/Attribute/index.vue'\r\nimport Footer from '../Editor/Footer/index.vue'\r\nimport {TransformControls} from 'three/examples/jsm/controls/TransformControls'\r\nimport {DragControls} from 'three/examples/jsm/controls/DragControls'\r\nimport {TrackballControls} from 'three/examples/jsm/controls/TrackballControls'\r\nimport {OrbitControls} from 'three/examples/jsm/controls/OrbitControls'\r\nimport { Color, Group, Object3D} from '../../lib/three.module.js'\r\nimport {MOUSE} from 'three/src/constants'\r\nimport {AxesHelper} from 'three/src/helpers/AxesHelper'\r\nimport {GridHelper} from 'three/src/helpers/GridHelper.js'\r\nimport {EventManager} from '../../lib/EventManager'\r\nimport {DirectionalLightHelper} from 'three/src/helpers/DirectionalLightHelper'\r\nimport { range } from \"../../components/mode/range\";\r\nimport { node } from \"../../components/mode/node\";\r\n//初始数据\r\nlet renderer,camera,scene,geometry,material,mesh,stats,objs;\r\n//  let container=document.getElementById('webgl');\r\n   var controls={\r\n            positionX:0,\r\n            positionY:0,\r\n            positionZ:0\r\n        }\r\nlet cameraControls;\r\nlet transformControl;\r\nlet eventManager;\r\nlet directionalLight,ambientLight;\r\n// let mouse;\r\n// let raycaster;\r\n/*这里记录一个小bug\r\n当拖拽物体略过其他物体上时会造成物体全黑\r\n应该是材质问题使用了法线变换颜色材质，换成正常颜色应该是没有问题\r\n\r\n*/\r\nlet transing=false;\r\nlet axesHelper,gridHelper,directLightHelper;\r\nlet cacheobjects;\r\nexport default {\r\n    name:'Editor',\r\n    components:{\r\n        Widget,\r\n        Attribute,\r\n        Footer\r\n    },\r\n    data() {\r\n        return {\r\n             state:{\r\n                GridHelper:true,\r\n                AxesHelper:true,\r\n                LightHelper:true,\r\n                PlaneHelper:false,\r\n                BoxHelper:false,\r\n                Control:true\r\n            },\r\n            configuration:{},\r\n        }\r\n    },\r\n    watch:{\r\n        'state.GridHelper':{\r\n            // immediate:true,\r\n            deep:true,\r\n            handler(newValue){\r\n                if(newValue){\r\n                    this.AddGrid();\r\n                }else{\r\n                    this.RemoveGrid();\r\n                }\r\n            }\r\n        },\r\n         'state.AxesHelper':{\r\n            // immediate:true,\r\n            deep:true,\r\n            handler(newValue){\r\n                if(newValue){\r\n                    this.AddAxes();\r\n                }else{\r\n                    this.RemoveAxes();\r\n                }\r\n            }\r\n        },\r\n        'state.LightHelper':{\r\n            // immediate:true,\r\n            deep:true,\r\n            handler(newValue){\r\n                if(newValue){\r\n                    this.AddLight();\r\n                }else{\r\n                    this.RemoveLight();\r\n                }\r\n            }\r\n        },\r\n        'state.Control':{\r\n            // immediate:true,\r\n            deep:true,\r\n            handler(newValue){\r\n                if(newValue){\r\n                    this.AddControl();\r\n                }else{\r\n                    this.RemoveControl();\r\n                }\r\n            }\r\n        }\r\n    },\r\n    methods: {\r\n        initstate(){\r\n            this.state={\r\n                GridHelper:true,\r\n                AxesHelper:true,\r\n                LightHelper:true,\r\n                PlaneHelper:false,\r\n                BoxHelper:false,\r\n                Control:true\r\n            };\r\n        },\r\n        AddModel(){\r\n            this.$bus.$on('AddObjects',(em,item)=>{\r\n                if(item.name=='2D模型'||item.name=='3D模型'){\r\n              this.AddElement(em.type);\r\n          }\r\n          else{\r\n              this.LoadElement(em.type);\r\n          }\r\n            })\r\n        },\r\n        findcurrentObj(){ \r\n            let that=this;\r\n            //重定向this,好利用总线\r\n            this.$bus.$on('requestObj',(target)=>{\r\n                let object=scene.getObjectByProperty('uuid',target.uuid);\r\n                that.$bus.$emit('responseObj',object);\r\n            });\r\n            \r\n        },\r\n        CheckFromTree(){\r\n            this.$bus.$on('checkEvent',(target)=>{\r\n                if(this.state.Control==true){\r\n                if(!target){\r\n                    //处理对于传过来是空目标的情况，直接移除控件\r\n                     transformControl.detach();\r\n                    scene.remove(transformControl);\r\n                }\r\n                else {\r\n                    if(transformControl.object&&target.uuid!=transformControl.object.uuid){\r\n                    //如果从场景结构树中得到的物体与目前的不同才进行事件处理\r\n                    //即更换射线拾取\r\n                    \r\n                    transformControl.detach();\r\n                    scene.remove(transformControl);\r\n                    //先删除当前控件对象\r\n                    scene.traverse(function(obj){\r\n                        if(obj.uuid==target.uuid){\r\n                            if(obj.type.indexOf('Helper')==-1){\r\n                                //如果不是helper\r\n                               /* 能否直接传uuid进来查然后传出去？\r\n                               \r\n                               需要重构\r\n                               */\r\n                                scene.add(transformControl);\r\n                                transformControl.attach(obj);\r\n                                \r\n                                \r\n                            }\r\n                              else{\r\n                                  transformControl.detach();\r\n                                 scene.remove(transformControl);\r\n                                 \r\n                               \r\n                              }  \r\n                             return; \r\n                    }\r\n                    });\r\n\r\n                }\r\n                else if(!transformControl.object){\r\n                    //如果控件本身不存在那么直接加\r\n                    scene.traverse(function(obj){\r\n                        if(obj.uuid==target.uuid){\r\n                            //同样需要判断是否是helper\r\n                        if(obj.type.indexOf('Helper')==-1){\r\n                                //如果不是helper\r\n                               \r\n                                scene.add(transformControl);\r\n                                transformControl.attach(obj);\r\n                                \r\n                                \r\n                            }\r\n                              else{\r\n                                  transformControl.detach();\r\n                                 scene.remove(transformControl);\r\n                                \r\n                               \r\n                              }  \r\n                        return;\r\n                    }\r\n                    });\r\n                }\r\n                }\r\n                }\r\n            });\r\n        },\r\n        RemoveGrid(){\r\n            scene.remove(gridHelper);\r\n            //console.log(scene);\r\n        },\r\n        AddGrid(){\r\n            scene.add(gridHelper);\r\n        },\r\n        RemoveAxes(){\r\n            scene.remove(axesHelper);\r\n        },\r\n        AddAxes(){\r\n            scene.add(axesHelper);\r\n        },\r\n        RemoveLight(){\r\n            scene.remove(directLightHelper);\r\n        },\r\n        AddLight(){\r\n            scene.add(directLightHelper);\r\n        },\r\n        RemoveControl(){\r\n            transformControl.detach();\r\n            scene.remove(transformControl);\r\n            let object=null;\r\n            this.$bus.$emit('getEvent',object);\r\n        },\r\n        AddControl(){\r\n            scene.add(transformControl);\r\n\r\n        },\r\n        initHelper(){\r\n            //加坐标轴辅助工具\r\n            axesHelper=new AxesHelper(500);\r\n            axesHelper.raycast=()=>{};\r\n            axesHelper.name=\"坐标轴\";\r\n            scene.add(axesHelper);\r\n            gridHelper=new GridHelper(500,40,'rgb(200,200,200)','rgb(100,100,100)');\r\n            gridHelper.raycast=()=>{};\r\n            gridHelper.name=\"网格板\";\r\n            scene.add(gridHelper);\r\n            //将两个辅助工具raycast射线方法置空使得其禁用变换控件\r\n            directLightHelper=new DirectionalLightHelper(directionalLight,7);\r\n            //directLightHelper.raycast=()=>{};\r\n            directLightHelper.name=\"定向光助手\";\r\n            directLightHelper.type=\"DirtectionalLightHelper\";\r\n            scene.add(directLightHelper);\r\n            \r\n\r\n\r\n\r\n        },\r\n        initCameraControl(){\r\n            cameraControls=new OrbitControls(camera,renderer.domElement);\r\n            cameraControls.enableDamping=true;\r\n            cameraControls.mouseButtons={\r\n                LEFT:null,\r\n                MIDDLE:MOUSE.DOLLY,\r\n                RIGHT:MOUSE.ROTATE\r\n                //左键不控制相机\r\n                //右键控制旋转\r\n                //中间键控制缩放\r\n                //ctrl+右键控制相机平移\r\n            }\r\n        },\r\n        getParents(obj){\r\n            if(obj.parent==scene){\r\n                return obj;\r\n            }else{\r\n                while(obj.parent!=scene){\r\n                    obj=obj.parent;\r\n                }\r\n                return obj;\r\n            }\r\n            \r\n        },\r\n        initEventManager(){\r\n            eventManager=new EventManager(renderer.domElement,scene,camera,objs);\r\n            eventManager.addEventListener('mousemove',(event)=>{\r\n                //全局canvas触发拿到物体指针队列\r\n                if(event.intersection.length){\r\n                    const object=event.intersection[0].object;\r\n                   \r\n                    if(object==cacheobjects){\r\n                        //如果当下鼠标还在同一个物体下不触发任何操作\r\n                        \r\n                        return;\r\n                    }\r\n                    else if(object!=cacheobjects&&cacheobjects){\r\n                        //如果当下鼠标从一个物体移动到另一个物体时\r\n                        //先触发颜色恢复再触发变色\r\n                        \r\n                        cacheobjects.material.color.multiplyScalar(0.5);\r\n                        //返回原来颜色\r\n                    }\r\n\r\n                    //如果有材质\r\n                    if(object.material){\r\n                        object.material.color.multiplyScalar(2);\r\n                        //变亮\r\n                        \r\n                        cacheobjects=object;\r\n                    }\r\n                }else{\r\n                    //如果鼠标移动到场景空白处恢复\r\n                    if(cacheobjects){\r\n                        cacheobjects.material.color.multiplyScalar(0.5);\r\n                       \r\n                        //返回原来颜色\r\n                    }\r\n                    cacheobjects=null;\r\n                }\r\n            });\r\n             // //物体拾取事件处理\r\n            eventManager.addEventListener('click',(event)=>{\r\n              \r\n                if(transing){\r\n                    transing=false;\r\n                    return false;\r\n                }\r\n                if(event.intersection.length){\r\n                    const object=event.intersection[0].object;\r\n                    console.log(event.intersection);\r\n                    if(object.type==\"TransformControlsPlane\"){\r\n                        //如果选取到控制器本身直接跳过\r\n                        transformControl.detach();\r\n                        scene.remove(transformControl);\r\n                    }\r\n                    else{\r\n                        //选取到物体\r\n                          if(this.state.Control==true)\r\n                          {\r\n                              //只有当Control属性开启时才启用transformControl\r\n                              //但不影响显示Tree当前点亮\r\n                            scene.add(transformControl);\r\n                            \r\n                            //transformControl.attach(object.parent instanceof THREE.Group ? object.parent : object);\r\n                            transformControl.attach(this.getParents(object));\r\n                        }\r\n                        \r\n                        //let uuid=object.uuid;\r\n                        // console.log(uuid);\r\n                        this.$bus.$emit('getEvent',this.getParents(object));\r\n                    }\r\n                    \r\n                }else{\r\n                    //当点击到场景空白处时禁用可控件\r\n                   transformControl.detach();\r\n                    scene.remove(transformControl);\r\n                    let object=null;\r\n                    this.$bus.$emit('getEvent',object);\r\n                }\r\n            });\r\n        },\r\n        //射线拾取器\r\n        \r\n     initLight() {\r\n        directionalLight = new THREE.DirectionalLight(0xffffff); //添加了一个白色的平行光\r\n        directionalLight.position.set(20, 50, 50); //设置光的方向\r\n        directionalLight.name=\"平行光\";\r\n        scene.add(directionalLight); //添加到场景\r\n        objs.push(directionalLight);\r\n        ambientLight=new THREE.AmbientLight(0x222222);\r\n        ambientLight.name=\"全局光\";\r\n        //添加一个全局环境光\r\n        scene.add(ambientLight);\r\n         objs.push(ambientLight);\r\n    },\r\n        // initRaycaster(){\r\n        //     // raycaster=new THREE.Raycaster();\r\n\r\n        // },\r\n        //对象缓存初始化\r\n        initCache(){\r\n            cacheobjects=null;\r\n        },\r\n        initControl(){\r\n  //可视化变换控件对象\r\n        transformControl = new TransformControls( camera,renderer.domElement );\r\n        transformControl.type=\"TransformControl\";\r\n        // scene.add( transformControl );//控件对象添加到场景对象\r\n        transformControl.addEventListener('mouseDown',(event)=>{\r\n            //加一个参数控制防止点击事件和拖拽事件冲突\r\n            transing=true;\r\n        });\r\n        //键盘控制可视化变换控件功能\r\n        document.addEventListener('keyup',(event)=>{\r\n            if(event.key=='e'){\r\n                //E键缩放\r\n                transformControl.mode=\"scale\";\r\n                return false;\r\n            }\r\n            if(event.key=='r'){\r\n                //R键旋转\r\n                transformControl.mode=\"rotate\";\r\n                return false;\r\n            }\r\n            if(event.key=='t'){\r\n                //T键平移\r\n                transformControl.mode=\"translate\";\r\n                return false;\r\n            }\r\n            \r\n        });\r\n        },\r\n        LoadElement(type){\r\n            if(type=='model-1'){\r\n                this.initLine();\r\n                this.sceneChangedEvent();\r\n            }\r\n            else if(type=='model-2'){\r\n                this.initBars();\r\n                this.sceneChangedEvent();\r\n            }\r\n             else if(type=='model-3'){\r\n               scene.background = new THREE.CubeTextureLoader().load([\r\n          require('@/assets/skybox/BlueRed/Left.png'),\r\n          require('@/assets/skybox/BlueRed/Right.png'),\r\n          require('@/assets/skybox/BlueRed/Up.png'),\r\n          require('@/assets/skybox/BlueRed/Down.png'),\r\n          require('@/assets/skybox/BlueRed/Front.png'),\r\n          require('@/assets/skybox/BlueRed/Back.png')\r\n        ]);\r\n            }\r\n        },\r\n        AddElement(type){\r\n            if(type=='lonelyPlanet'){\r\n                this.initBox();\r\n            }\r\n            else if(type=='bezierCurve'){\r\n                this.initCone();\r\n            }else if(type=='ethereaTone'){\r\n                this.initCylinder();\r\n            }else if(type=='electronicMusic'){\r\n                this.initSphere();\r\n            }else if(type=='blastSubwoofer'){\r\n                this.initTorus();\r\n            }\r\n\r\n        },\r\n        initBox(){\r\n            var material=new THREE.MeshStandardMaterial();\r\n            material.color=new Color(0.8,0.2,0.2);\r\n            var box=new THREE.Mesh(new THREE.BoxGeometry(5,5,5),material);\r\n            box.position.set(-50, 20, 0);\r\n            box.name=\"盒子\";\r\n            scene.add(box);\r\n            objs.push(box);\r\n            this.sceneChangedEvent();\r\n        },\r\n       initCone(){\r\n        var material=new THREE.MeshStandardMaterial();\r\n        material.color=new Color(0.7,0.6,0.6);\r\n         var cone=new THREE.Mesh(new THREE.ConeGeometry(5,20,32),material);\r\n          cone.position.set(20, 20, 0);\r\n          cone.name=\"圆锥\";\r\n           scene.add(cone);\r\n           objs.push(cone);\r\n          this.sceneChangedEvent();\r\n           //renderer.render(scene,camera);//渲染\r\n          \r\n            \r\n       },\r\n       initCylinder(){\r\n            var material=new THREE.MeshStandardMaterial();\r\n            material.color=new Color(0.8,0.7,0.2);\r\n           var cylinder=new THREE.Mesh(new THREE.CylinderGeometry(5, 5, 20, 32),material);\r\n           cylinder.position.set(50,20,0);\r\n           cylinder.name=\"圆柱\";\r\n           scene.add(cylinder);\r\n           objs.push(cylinder);\r\n           this.sceneChangedEvent();\r\n           //renderer.render(scene,camera);//渲染\r\n           \r\n       },\r\n       initSphere(){\r\n           var material=new THREE.MeshStandardMaterial();\r\n            material.color=new Color(0.2,0.7,0.2);\r\n          var  sphere=new THREE.Mesh(new THREE.SphereGeometry(5, 32, 32),material);\r\n           sphere.position.set(-20, -20, 0);\r\n           sphere.name=\"球\";\r\n            scene.add(sphere);\r\n            objs.push(sphere);\r\n            this.sceneChangedEvent();\r\n           \r\n            \r\n            \r\n       },\r\n       initTorus(){\r\n           var material=new THREE.MeshStandardMaterial();\r\n            material.color=new Color(0.3,0.1,0.9);\r\n           var torus =new THREE.Mesh(new THREE.TorusGeometry(10, 3, 16, 100),material);\r\n            torus.position.set(50, -20, 0);\r\n            torus.name=\"圆环\";\r\n            scene.add(torus);\r\n            objs.push(torus);\r\n            this.sceneChangedEvent();\r\n            //renderer.render(scene,camera);//渲染\r\n            \r\n           \r\n       },\r\n        init(){\r\n            this.initRenderer();\r\n            this.initScene();\r\n            this.initCamera();\r\n            this.initLight();\r\n            this.initMesh();\r\n            // this.initRaycaster();\r\n            this.initCache();\r\n            this.initCameraControl();\r\n            this.initControl();\r\n            this.initHelper();\r\n            this.watchHelper();\r\n            // this.initMouseEvent();\r\n            this.initEventManager();\r\n            this.initStats();\r\n            \r\n            // initDatGUI();\r\n            this.sceneChangedEvent();\r\n            this.animate();\r\n            console.log(scene);\r\n            \r\n        },\r\n        watchHelper(){\r\n            let state=this.state;\r\n             this.$bus.$emit('stateControl',state);\r\n        },\r\n        sceneChangedEvent(){\r\n            let scenelist=scene.children;\r\n            this.$bus.$emit('sceneChanged',scenelist);\r\n        },\r\n        //鼠标事务处理（包括点击事件、移动事件）\r\n        // initMouseEvent(){\r\n            //给canvas对象进行鼠标坐标转换\r\n            // mouse=new Vector2();\r\n            // let domX=0;\r\n            // let domY=0;\r\n            // let width=0;\r\n            // let height=0;\r\n            // renderer.domElement.addEventListener('mousemove',(event)=>{\r\n            //     //console.log(event.offsetX,event.offsetY);\r\n            //     domX=event.offsetX;\r\n            //     domY=event.offsetY;\r\n            //     width=renderer.domElement.offsetWidth;\r\n            //     height=renderer.domElement.offsetHeight;\r\n            //     mouse.x=domX/width*2-1;\r\n            //     mouse.y=-domY*2/height+1;\r\n            //     // console.log(mouse.x,mouse.y);\r\n            //     raycaster.setFromCamera(mouse,camera);\r\n            //     //防止控制器被选中\r\n            //     scene.remove(transformControl);\r\n            //     const intersection=raycaster.intersectObjects(scene.children,false);\r\n            //     //把所有有children的屏蔽掉，可以防止对helper进行控制\r\n            //     scene.add(transformControl);\r\n            //     if(intersection.length){\r\n            //         //如果拾取到材质物体\r\n            //         const object=intersection[0].object;\r\n            //         //如果当下物体不是上次缓存物体，说明是从不同物体上移到当前物体上触发mouseenter事件\r\n            //         if(object!=cacheobjects){\r\n            //             if(cacheobjects){\r\n            //                 //当鼠标从一个物体移动到另一个物体时，先触发之前缓存物体的mouseleave方法\r\n            //                 //再触发当前物体的mouseenter方法\r\n            //                 cacheobjects.dispatchEvent({\r\n            //             type:'mouseleave'\r\n            //         });\r\n            //             }\r\n            //               object.dispatchEvent({\r\n            //             type:'mouseenter'\r\n            //         });\r\n            //         }//如果相等触发mousemove方法得到物体坐标(鼠标一直在物体上移动)\r\n            //         else if(object==cacheobjects){\r\n            //             object.dispatchEvent({\r\n            //             type:'mousemove'\r\n            //         });\r\n            //         }\r\n            //         cacheobjects=object;\r\n            //     }else{\r\n            //         //当鼠标从一个物体移动到射线拾取器拾取不到物体时也会触发之前的物体的mouseleave方法\r\n            //          if(cacheobjects){\r\n            //                 //当鼠标从一个物体移动到另一个物体时，先触发之前缓存物体的mouseleave方法\r\n            //                 //再触发当前物体的mouseenter方法\r\n            //                 cacheobjects.dispatchEvent({\r\n            //             type:'mouseleave'\r\n            //         });\r\n            //     }\r\n            //         cacheobjects=null;\r\n\r\n\r\n            //     }\r\n                \r\n               \r\n            // });\r\n            // // //物体拾取事件处理\r\n            // renderer.domElement.addEventListener('click',(event)=>{\r\n            //     if(transing){\r\n            //         transing=false;\r\n            //         return false;\r\n            //     }\r\n            //     // raycaster.setFromCamera(mouse,camera);\r\n            //     // //防止控制器被选中\r\n            //     // scene.remove(transformControl);\r\n            //     // const intersection=raycaster.intersectObjects(scene.children,false);\r\n            //     // //把所有有children的屏蔽掉，可以防止对helper进行控制\r\n            //     // scene.add(transformControl);\r\n            //     // if(intersection.length){\r\n\r\n                    \r\n            //     //     const object=intersection[0].object;\r\n            //     //     transformControl.attach(object);\r\n            //     // }else{\r\n            //     //     //当点击到场景空白处时禁用可控件\r\n            //     //    transformControl.detach();\r\n            //     // }\r\n            // });\r\n\r\n        // },\r\n        initStats(){\r\n            stats = new Stats();\r\n             stats.domElement.style.position = 'absolute'; //绝对坐标  \r\n                stats.domElement.style.left = '0px';// (0,0)px,左上角  \r\n                stats.domElement.style.top = '0px';  \r\n            document.getElementById('webgl').appendChild(stats.domElement);\r\n\r\n        },\r\n        updatePosition(){\r\n            mesh.position.set(controls.positionX,controls.positionY,controls.positionZ);\r\n        },\r\n        //初始化渲染器\r\n        initRenderer(){\r\n            \r\n            \r\n            renderer=new THREE.WebGLRenderer({antialias:true});//实例化渲染器\r\n            //抗锯齿开启\r\n            renderer.setSize(window.innerWidth*0.7,window.innerHeight*0.7);//设置宽高\r\n            document.getElementById('webgl').appendChild(renderer.domElement);//添加到dom\r\n        },\r\n        //初始化场景\r\n        initScene(){\r\n            \r\n            scene=new THREE.Scene();//实例化场景\r\n            objs=[];\r\n             scene.background = new THREE.CubeTextureLoader().load([\r\n          require('@/assets/skybox/Galaxy/Right.jpg'),\r\n          require('@/assets/skybox/Galaxy/Left.jpg'),\r\n          require('@/assets/skybox/Galaxy/Up.jpg'),\r\n          require('@/assets/skybox/Galaxy/Down.jpg'),\r\n          require('@/assets/skybox/Galaxy/Front.jpg'),\r\n          require('@/assets/skybox/Galaxy/Back.jpg')\r\n        ]);\r\n            // this.$bus.$emit('sceneChanged',scene);\r\n        },\r\n        //初始化相机\r\n        initCamera(){\r\n            camera=new THREE.PerspectiveCamera(45,window.innerWidth/window.innerHeight,0.1,200)\r\n            //实例化相机】\r\n            camera.position.set(0,0,150);\r\n        },\r\n        //创建模型\r\n        initMesh(){\r\n            // geometry = new THREE.BoxGeometry(5, 5, 5 ); //创建几何体\r\n            // var material=new THREE.MeshStandardMaterial();\r\n            // material.color=new Color(0.7,0.2,0.2); //创建材质\r\n\r\n            // mesh = new THREE.Mesh( geometry, material ); //创建网格\r\n            // mesh.name=\"盒子\";\r\n\r\n            // scene.add( mesh ); //将网格添加到场景\r\n            \r\n          \r\n            // this.initCone();\r\n            // this.initBox();\r\n            this.initLine();\r\n            this.initBars();\r\n\r\n        },\r\n\r\n        initBars(){\r\n            this.audioBars(25,128);\r\n        },\r\n\r\n        audioBars(radius, countData) {\r\n      let barGroup = new THREE.Group();\r\n      let R = radius;\r\n      let N = countData;\r\n      for (let i = 0; i < N; i++) {\r\n        let minGroup = new THREE.Group();\r\n        let box = new THREE.BoxGeometry(1, 1, 1);\r\n        let material = new THREE.MeshPhongMaterial({\r\n          color: 0x00ffff\r\n        }); // 材质对象\r\n        let m = i;\r\n        let mesh = new THREE.Mesh(box, material);\r\n\r\n        mesh.position.y = 0.5;\r\n        minGroup.add(mesh);\r\n        minGroup.position.set(\r\n          Math.sin(((m * Math.PI) / N) * 2) * R,\r\n          Math.cos(((m * Math.PI) / N) * 2) * R,\r\n          0\r\n        );\r\n       minGroup.rotation.z = ((-m * Math.PI) / N) * 2;\r\n        barGroup.add(minGroup);\r\n      }\r\n      barGroup.name=\"音频谱\";\r\n      barGroup.type=\"BarGroup\";\r\n      scene.add(barGroup);\r\n      objs.push(barGroup);\r\n    },\r\n/* 这里有个原理，为什么对音频线和音频组进行移动旋转操作后 依然可以根据初始化的音频数据进行重画\r\n按原理来说应该要重新计算各个线段的坐标值进行重绘，为什么这里导出数据后依然可以利用初始化的\r\nbarNodes进行一个线段计算重回吧，原因是因为，在编辑器中对一个组对象进行操作时，其各子对象\r\n的坐标并不会变化，只改变这个组对象的位置、旋转等信息，其子对象的坐标一直是相对于其父对象的\r\n坐标即本地坐标，而非世界坐标，只有当父对象是scene场景时，本地坐标才等于世界坐标\r\n */\r\n        initLine(){\r\n            this.audioLines(20,256);\r\n        },\r\n        renderGeometries(vertices) {\r\n            const res = [];\r\n            vertices = vertices.concat(vertices[0]);\r\n            //合并数组，把里外位置告知要画的线\r\n            vertices.forEach(value => {\r\n            res.push(value.x, value.y, 0);\r\n      });\r\n            return new THREE.BufferAttribute(new Float32Array(res), 3);\r\n    },\r\n        audioLines(radius, countData) {\r\n            var barNodes = range(0, countData).map(index => {\r\n                return new node(\r\n                radius,\r\n                ((index / countData) * 360 + 45) % 360,\r\n                new THREE.Vector2(0, 0)\r\n                );\r\n            });\r\n            //得到一个记录圆上256个点的位置信息的数组\r\n            const lineMaterial = new THREE.LineBasicMaterial({\r\n                color: 0x00ffff\r\n            });\r\n            var barLine = range(0, countData).map(index => {\r\n            return new THREE.Line(\r\n                new THREE.BufferGeometry().setAttribute(\r\n                    \"position\",\r\n                this.renderGeometries([\r\n                    barNodes[index].positionA(),\r\n                     barNodes[index].positionB()\r\n            ])\r\n          ),\r\n            lineMaterial\r\n            );\r\n        });\r\n        var outLine = new THREE.Line(\r\n        new THREE.BufferGeometry().setAttribute(\r\n          \"position\",\r\n          this.renderGeometries(barNodes.map(node => node.positionA()))\r\n        ),\r\n        lineMaterial\r\n      );\r\n\r\n      var inLine = new THREE.Line(\r\n        new THREE.BufferGeometry().setAttribute(\r\n          \"position\",\r\n          this.renderGeometries(barNodes.map(node => node.positionB()))\r\n        ),\r\n        lineMaterial\r\n      );\r\n\r\n      var linesGroup = new THREE.Group();\r\n      linesGroup.add(outLine);\r\n      linesGroup.add(inLine);\r\n      barLine.forEach(line => linesGroup.add(line));\r\n      linesGroup.name=\"音频线\";\r\n      linesGroup.type=\"LineGroup\";\r\n      scene.add(linesGroup);\r\n      objs.push(linesGroup);     \r\n    },\r\n\r\n\r\n\r\n        update(){\r\n            stats.update();\r\n        },\r\n        Reset(){\r\n          \r\n        },\r\n        ResetAll(){\r\n            this.$bus.$on('reset',()=>{\r\n                this.Reset();\r\n            });\r\n        },\r\n        Export(){\r\n            \r\n            this.$bus.$on('export',()=>{\r\n            if(scene.children.length>0){\r\n                let obj;\r\n                //删除所有helper，只保留光源、材质\r\n                for(var i=scene.children.length-1;i>=0;i--){\r\n                    \r\n                     obj=scene.children[i];\r\n                    if(obj.type.indexOf('Helper')!=-1||obj.type.indexOf('Control')!=-1){\r\n                         scene.remove(obj);\r\n                    }\r\n                }\r\n            }\r\n\r\n                //因为每次迭代中.children 一旦remove后从头开始执行\r\n                //数组会改变，因此使用遍历的forEach也好，traverse也好数组的\r\n                //索引全都改变，只会删除一个对象\r\n                //但如果从后开始遍历删除，每次remove后前面的索引也即是未遍历过的节点索引不会变\r\n                //使用state值然后进行深度监听依然不行，因为watch方法每次在mounted之后\r\n                //这就导致了如果mounted中的data值变化，我需要导出的数据还是原来数据，watch只会在之后\r\n                //发生作用。\r\n           \r\n            var JSONStr=JSON.stringify(scene.toJSON());\r\n            //console.log(JSONStr);\r\n            this.download(\"scene.json\",JSONStr);  \r\n            this.initHelper();\r\n            });\r\n        },\r\n        download(filename,text){\r\n            var pom=document.createElement('a');\r\n            pom.setAttribute('href','data:text/plain;charset=utf-8,'\r\n            +encodeURIComponent(text));\r\n            pom.setAttribute('download',filename);\r\n            if(document.createEvent){\r\n                var event=document.createEvent('MouseEvents');\r\n                event.initMouseEvent('click',true, false,\r\n                window,0,0,0,0,0,false,false,false,false,0,null);\r\n                pom.dispatchEvent(event);\r\n            }else{\r\n                pom.click();\r\n            }\r\n\r\n        },\r\n        //运行动画\r\n        animate(){\r\n            requestAnimationFrame(this.animate);//循环调用函数\r\n            \r\n            // mesh.rotation.x+=0.01;\r\n            // // //每帧网格模型沿x轴旋转0.01弧度\r\n            // mesh.rotation.y+=0.02;\r\n            // //每帧网格模型沿y轴旋转0.02弧度\r\n            // //stats.update();//更新性能检测框\r\n\r\n            this.update();\r\n            renderer.render(scene,camera);//渲染\r\n        }\r\n    },\r\n    mounted() {\r\n        this.init();\r\n        this.CheckFromTree();\r\n        this.findcurrentObj();\r\n        this.AddModel();\r\n        this.ResetAll();\r\n        this.Export();\r\n    },\r\n}\r\n</script>\r\n<style>\r\n #webgl {\r\n    height: 500px;\r\n  }\r\n.app-container{\r\n    background-color: #432d43;\r\n}\r\n</style>"]}]}