{"remainingRequest":"E:\\wuhanligong-java\\music\\vue-admin-template-master\\node_modules\\babel-loader\\lib\\index.js!E:\\wuhanligong-java\\music\\vue-admin-template-master\\node_modules\\eslint-loader\\index.js??ref--13-0!E:\\wuhanligong-java\\music\\vue-admin-template-master\\src\\lib\\OrbitControls.js","dependencies":[{"path":"E:\\wuhanligong-java\\music\\vue-admin-template-master\\src\\lib\\OrbitControls.js","mtime":1625070368000},{"path":"E:\\wuhanligong-java\\music\\vue-admin-template-master\\babel.config.js","mtime":1637248914000},{"path":"E:\\wuhanligong-java\\music\\vue-admin-template-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\wuhanligong-java\\music\\vue-admin-template-master\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"E:\\wuhanligong-java\\music\\vue-admin-template-master\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc3ViLmpzIjsKCi8qKgogKiBAYXV0aG9yIHFpYW8gLyBodHRwczovL2dpdGh1Yi5jb20vcWlhbwogKiBAYXV0aG9yIG1yZG9vYiAvIGh0dHA6Ly9tcmRvb2IuY29tCiAqIEBhdXRob3IgYWx0ZXJlZHEgLyBodHRwOi8vYWx0ZXJlZHF1YWxpYS5jb20vCiAqIEBhdXRob3IgV2VzdExhbmdsZXkgLyBodHRwOi8vZ2l0aHViLmNvbS9XZXN0TGFuZ2xleQogKiBAYXV0aG9yIGVyaWNoNjY2IC8gaHR0cDovL2VyaWNoYWluZXMuY29tCiAqIEBhdXRob3IgU2NpZUNvZGUgLyBodHRwOi8vZ2l0aHViLmNvbS9zY2llY29kZQogKi8KLy8gaW1wb3J0IHsKLy8gICBFdmVudERpc3BhdGNoZXIsCi8vICAgTU9VU0UsCi8vICAgUXVhdGVybmlvbiwKLy8gICBTcGhlcmljYWwsCi8vICAgVE9VQ0gsCi8vICAgVmVjdG9yMiwKLy8gICBWZWN0b3IzLAovLyB9IGZyb20gIi4vdGhyZWUubW9kdWxlLmpzIjsKaW1wb3J0IHsgRXZlbnREaXNwYXRjaGVyLCBNT1VTRSwgUXVhdGVybmlvbiwgU3BoZXJpY2FsLCBUT1VDSCwgVmVjdG9yMiwgVmVjdG9yMyB9IGZyb20gInRocmVlIjsgLy8gVGhpcyBzZXQgb2YgY29udHJvbHMgcGVyZm9ybXMgb3JiaXRpbmcsIGRvbGx5aW5nICh6b29taW5nKSwgYW5kIHBhbm5pbmcuCi8vIFVubGlrZSBUcmFja2JhbGxDb250cm9scywgaXQgbWFpbnRhaW5zIHRoZSAidXAiIGRpcmVjdGlvbiBvYmplY3QudXAgKCtZIGJ5IGRlZmF1bHQpLgovLwovLyAgICBPcmJpdCAtIGxlZnQgbW91c2UgLyB0b3VjaDogb25lLWZpbmdlciBtb3ZlCi8vICAgIFpvb20gLSBtaWRkbGUgbW91c2UsIG9yIG1vdXNld2hlZWwgLyB0b3VjaDogdHdvLWZpbmdlciBzcHJlYWQgb3Igc3F1aXNoCi8vICAgIFBhbiAtIHJpZ2h0IG1vdXNlLCBvciBsZWZ0IG1vdXNlICsgY3RybC9tZXRhL3NoaWZ0S2V5LCBvciBhcnJvdyBrZXlzIC8gdG91Y2g6IHR3by1maW5nZXIgbW92ZQoKdmFyIE9yYml0Q29udHJvbHMgPSBmdW5jdGlvbiBPcmJpdENvbnRyb2xzKG9iamVjdCwgZG9tRWxlbWVudCkgewogIGlmIChkb21FbGVtZW50ID09PSB1bmRlZmluZWQpIGNvbnNvbGUud2FybignVEhSRUUuT3JiaXRDb250cm9sczogVGhlIHNlY29uZCBwYXJhbWV0ZXIgImRvbUVsZW1lbnQiIGlzIG5vdyBtYW5kYXRvcnkuJyk7CiAgaWYgKGRvbUVsZW1lbnQgPT09IGRvY3VtZW50KSBjb25zb2xlLmVycm9yKCdUSFJFRS5PcmJpdENvbnRyb2xzOiAiZG9jdW1lbnQiIHNob3VsZCBub3QgYmUgdXNlZCBhcyB0aGUgdGFyZ2V0ICJkb21FbGVtZW50Ii4gUGxlYXNlIHVzZSAicmVuZGVyZXIuZG9tRWxlbWVudCIgaW5zdGVhZC4nKTsKICB0aGlzLm9iamVjdCA9IG9iamVjdDsKICB0aGlzLmRvbUVsZW1lbnQgPSBkb21FbGVtZW50OyAvLyBTZXQgdG8gZmFsc2UgdG8gZGlzYWJsZSB0aGlzIGNvbnRyb2wKCiAgdGhpcy5lbmFibGVkID0gdHJ1ZTsgLy8gInRhcmdldCIgc2V0cyB0aGUgbG9jYXRpb24gb2YgZm9jdXMsIHdoZXJlIHRoZSBvYmplY3Qgb3JiaXRzIGFyb3VuZAoKICB0aGlzLnRhcmdldCA9IG5ldyBWZWN0b3IzKCk7IC8vIEhvdyBmYXIgeW91IGNhbiBkb2xseSBpbiBhbmQgb3V0ICggUGVyc3BlY3RpdmVDYW1lcmEgb25seSApCgogIHRoaXMubWluRGlzdGFuY2UgPSAwOwogIHRoaXMubWF4RGlzdGFuY2UgPSBJbmZpbml0eTsgLy8gSG93IGZhciB5b3UgY2FuIHpvb20gaW4gYW5kIG91dCAoIE9ydGhvZ3JhcGhpY0NhbWVyYSBvbmx5ICkKCiAgdGhpcy5taW5ab29tID0gMDsKICB0aGlzLm1heFpvb20gPSBJbmZpbml0eTsgLy8gSG93IGZhciB5b3UgY2FuIG9yYml0IHZlcnRpY2FsbHksIHVwcGVyIGFuZCBsb3dlciBsaW1pdHMuCiAgLy8gUmFuZ2UgaXMgMCB0byBNYXRoLlBJIHJhZGlhbnMuCgogIHRoaXMubWluUG9sYXJBbmdsZSA9IDA7IC8vIHJhZGlhbnMKCiAgdGhpcy5tYXhQb2xhckFuZ2xlID0gTWF0aC5QSTsgLy8gcmFkaWFucwogIC8vIEhvdyBmYXIgeW91IGNhbiBvcmJpdCBob3Jpem9udGFsbHksIHVwcGVyIGFuZCBsb3dlciBsaW1pdHMuCiAgLy8gSWYgc2V0LCBtdXN0IGJlIGEgc3ViLWludGVydmFsIG9mIHRoZSBpbnRlcnZhbCBbIC0gTWF0aC5QSSwgTWF0aC5QSSBdLgoKICB0aGlzLm1pbkF6aW11dGhBbmdsZSA9IC1JbmZpbml0eTsgLy8gcmFkaWFucwoKICB0aGlzLm1heEF6aW11dGhBbmdsZSA9IEluZmluaXR5OyAvLyByYWRpYW5zCiAgLy8gU2V0IHRvIHRydWUgdG8gZW5hYmxlIGRhbXBpbmcgKGluZXJ0aWEpCiAgLy8gSWYgZGFtcGluZyBpcyBlbmFibGVkLCB5b3UgbXVzdCBjYWxsIGNvbnRyb2xzLnVwZGF0ZSgpIGluIHlvdXIgYW5pbWF0aW9uIGxvb3AKCiAgdGhpcy5lbmFibGVEYW1waW5nID0gZmFsc2U7CiAgdGhpcy5kYW1waW5nRmFjdG9yID0gMC4wNTsgLy8gVGhpcyBvcHRpb24gYWN0dWFsbHkgZW5hYmxlcyBkb2xseWluZyBpbiBhbmQgb3V0OyBsZWZ0IGFzICJ6b29tIiBmb3IgYmFja3dhcmRzIGNvbXBhdGliaWxpdHkuCiAgLy8gU2V0IHRvIGZhbHNlIHRvIGRpc2FibGUgem9vbWluZwoKICB0aGlzLmVuYWJsZVpvb20gPSB0cnVlOwogIHRoaXMuem9vbVNwZWVkID0gMS4wOyAvLyBTZXQgdG8gZmFsc2UgdG8gZGlzYWJsZSByb3RhdGluZwoKICB0aGlzLmVuYWJsZVJvdGF0ZSA9IHRydWU7CiAgdGhpcy5yb3RhdGVTcGVlZCA9IDEuMDsgLy8gU2V0IHRvIGZhbHNlIHRvIGRpc2FibGUgcGFubmluZwoKICB0aGlzLmVuYWJsZVBhbiA9IHRydWU7CiAgdGhpcy5wYW5TcGVlZCA9IDEuMDsKICB0aGlzLnNjcmVlblNwYWNlUGFubmluZyA9IGZhbHNlOyAvLyBpZiB0cnVlLCBwYW4gaW4gc2NyZWVuLXNwYWNlCgogIHRoaXMua2V5UGFuU3BlZWQgPSA3LjA7IC8vIHBpeGVscyBtb3ZlZCBwZXIgYXJyb3cga2V5IHB1c2gKICAvLyBTZXQgdG8gdHJ1ZSB0byBhdXRvbWF0aWNhbGx5IHJvdGF0ZSBhcm91bmQgdGhlIHRhcmdldAogIC8vIElmIGF1dG8tcm90YXRlIGlzIGVuYWJsZWQsIHlvdSBtdXN0IGNhbGwgY29udHJvbHMudXBkYXRlKCkgaW4geW91ciBhbmltYXRpb24gbG9vcAoKICB0aGlzLmF1dG9Sb3RhdGUgPSBmYWxzZTsKICB0aGlzLmF1dG9Sb3RhdGVTcGVlZCA9IDIuMDsgLy8gMzAgc2Vjb25kcyBwZXIgcm91bmQgd2hlbiBmcHMgaXMgNjAKICAvLyBTZXQgdG8gZmFsc2UgdG8gZGlzYWJsZSB1c2Ugb2YgdGhlIGtleXMKCiAgdGhpcy5lbmFibGVLZXlzID0gdHJ1ZTsgLy8gVGhlIGZvdXIgYXJyb3cga2V5cwoKICB0aGlzLmtleXMgPSB7CiAgICBMRUZUOiAzNywKICAgIFVQOiAzOCwKICAgIFJJR0hUOiAzOSwKICAgIEJPVFRPTTogNDAKICB9OyAvLyBNb3VzZSBidXR0b25zCgogIHRoaXMubW91c2VCdXR0b25zID0gewogICAgTEVGVDogTU9VU0UuUk9UQVRFLAogICAgTUlERExFOiBNT1VTRS5ET0xMWSwKICAgIFJJR0hUOiBNT1VTRS5QQU4KICB9OyAvLyBUb3VjaCBmaW5nZXJzCgogIHRoaXMudG91Y2hlcyA9IHsKICAgIE9ORTogVE9VQ0guUk9UQVRFLAogICAgVFdPOiBUT1VDSC5ET0xMWV9QQU4KICB9OyAvLyBmb3IgcmVzZXQKCiAgdGhpcy50YXJnZXQwID0gdGhpcy50YXJnZXQuY2xvbmUoKTsKICB0aGlzLnBvc2l0aW9uMCA9IHRoaXMub2JqZWN0LnBvc2l0aW9uLmNsb25lKCk7CiAgdGhpcy56b29tMCA9IHRoaXMub2JqZWN0Lnpvb207IC8vCiAgLy8gcHVibGljIG1ldGhvZHMKICAvLwoKICB0aGlzLmdldFBvbGFyQW5nbGUgPSBmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gc3BoZXJpY2FsLnBoaTsKICB9OwoKICB0aGlzLmdldEF6aW11dGhhbEFuZ2xlID0gZnVuY3Rpb24gKCkgewogICAgcmV0dXJuIHNwaGVyaWNhbC50aGV0YTsKICB9OwoKICB0aGlzLnNhdmVTdGF0ZSA9IGZ1bmN0aW9uICgpIHsKICAgIHNjb3BlLnRhcmdldDAuY29weShzY29wZS50YXJnZXQpOwogICAgc2NvcGUucG9zaXRpb24wLmNvcHkoc2NvcGUub2JqZWN0LnBvc2l0aW9uKTsKICAgIHNjb3BlLnpvb20wID0gc2NvcGUub2JqZWN0Lnpvb207CiAgfTsKCiAgdGhpcy5yZXNldCA9IGZ1bmN0aW9uICgpIHsKICAgIHNjb3BlLnRhcmdldC5jb3B5KHNjb3BlLnRhcmdldDApOwogICAgc2NvcGUub2JqZWN0LnBvc2l0aW9uLmNvcHkoc2NvcGUucG9zaXRpb24wKTsKICAgIHNjb3BlLm9iamVjdC56b29tID0gc2NvcGUuem9vbTA7CiAgICBzY29wZS5vYmplY3QudXBkYXRlUHJvamVjdGlvbk1hdHJpeCgpOwogICAgc2NvcGUuZGlzcGF0Y2hFdmVudChjaGFuZ2VFdmVudCk7CiAgICBzY29wZS51cGRhdGUoKTsKICAgIHN0YXRlID0gU1RBVEUuTk9ORTsKICB9OyAvLyB0aGlzIG1ldGhvZCBpcyBleHBvc2VkLCBidXQgcGVyaGFwcyBpdCB3b3VsZCBiZSBiZXR0ZXIgaWYgd2UgY2FuIG1ha2UgaXQgcHJpdmF0ZS4uLgoKCiAgdGhpcy51cGRhdGUgPSBmdW5jdGlvbiAoKSB7CiAgICB2YXIgb2Zmc2V0ID0gbmV3IFZlY3RvcjMoKTsgLy8gc28gY2FtZXJhLnVwIGlzIHRoZSBvcmJpdCBheGlzCgogICAgdmFyIHF1YXQgPSBuZXcgUXVhdGVybmlvbigpLnNldEZyb21Vbml0VmVjdG9ycyhvYmplY3QudXAsIG5ldyBWZWN0b3IzKDAsIDEsIDApKTsKICAgIHZhciBxdWF0SW52ZXJzZSA9IHF1YXQuY2xvbmUoKS5pbnZlcnNlKCk7CiAgICB2YXIgbGFzdFBvc2l0aW9uID0gbmV3IFZlY3RvcjMoKTsKICAgIHZhciBsYXN0UXVhdGVybmlvbiA9IG5ldyBRdWF0ZXJuaW9uKCk7CiAgICByZXR1cm4gZnVuY3Rpb24gdXBkYXRlKCkgewogICAgICB2YXIgcG9zaXRpb24gPSBzY29wZS5vYmplY3QucG9zaXRpb247CiAgICAgIG9mZnNldC5jb3B5KHBvc2l0aW9uKS5zdWIoc2NvcGUudGFyZ2V0KTsgLy8gcm90YXRlIG9mZnNldCB0byAieS1heGlzLWlzLXVwIiBzcGFjZQoKICAgICAgb2Zmc2V0LmFwcGx5UXVhdGVybmlvbihxdWF0KTsgLy8gYW5nbGUgZnJvbSB6LWF4aXMgYXJvdW5kIHktYXhpcwoKICAgICAgc3BoZXJpY2FsLnNldEZyb21WZWN0b3IzKG9mZnNldCk7CgogICAgICBpZiAoc2NvcGUuYXV0b1JvdGF0ZSAmJiBzdGF0ZSA9PT0gU1RBVEUuTk9ORSkgewogICAgICAgIHJvdGF0ZUxlZnQoZ2V0QXV0b1JvdGF0aW9uQW5nbGUoKSk7CiAgICAgIH0KCiAgICAgIGlmIChzY29wZS5lbmFibGVEYW1waW5nKSB7CiAgICAgICAgc3BoZXJpY2FsLnRoZXRhICs9IHNwaGVyaWNhbERlbHRhLnRoZXRhICogc2NvcGUuZGFtcGluZ0ZhY3RvcjsKICAgICAgICBzcGhlcmljYWwucGhpICs9IHNwaGVyaWNhbERlbHRhLnBoaSAqIHNjb3BlLmRhbXBpbmdGYWN0b3I7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgc3BoZXJpY2FsLnRoZXRhICs9IHNwaGVyaWNhbERlbHRhLnRoZXRhOwogICAgICAgIHNwaGVyaWNhbC5waGkgKz0gc3BoZXJpY2FsRGVsdGEucGhpOwogICAgICB9IC8vIHJlc3RyaWN0IHRoZXRhIHRvIGJlIGJldHdlZW4gZGVzaXJlZCBsaW1pdHMKCgogICAgICBzcGhlcmljYWwudGhldGEgPSBNYXRoLm1heChzY29wZS5taW5BemltdXRoQW5nbGUsIE1hdGgubWluKHNjb3BlLm1heEF6aW11dGhBbmdsZSwgc3BoZXJpY2FsLnRoZXRhKSk7IC8vIHJlc3RyaWN0IHBoaSB0byBiZSBiZXR3ZWVuIGRlc2lyZWQgbGltaXRzCgogICAgICBzcGhlcmljYWwucGhpID0gTWF0aC5tYXgoc2NvcGUubWluUG9sYXJBbmdsZSwgTWF0aC5taW4oc2NvcGUubWF4UG9sYXJBbmdsZSwgc3BoZXJpY2FsLnBoaSkpOwogICAgICBzcGhlcmljYWwubWFrZVNhZmUoKTsKICAgICAgc3BoZXJpY2FsLnJhZGl1cyAqPSBzY2FsZTsgLy8gcmVzdHJpY3QgcmFkaXVzIHRvIGJlIGJldHdlZW4gZGVzaXJlZCBsaW1pdHMKCiAgICAgIHNwaGVyaWNhbC5yYWRpdXMgPSBNYXRoLm1heChzY29wZS5taW5EaXN0YW5jZSwgTWF0aC5taW4oc2NvcGUubWF4RGlzdGFuY2UsIHNwaGVyaWNhbC5yYWRpdXMpKTsgLy8gbW92ZSB0YXJnZXQgdG8gcGFubmVkIGxvY2F0aW9uCgogICAgICBpZiAoc2NvcGUuZW5hYmxlRGFtcGluZyA9PT0gdHJ1ZSkgewogICAgICAgIHNjb3BlLnRhcmdldC5hZGRTY2FsZWRWZWN0b3IocGFuT2Zmc2V0LCBzY29wZS5kYW1waW5nRmFjdG9yKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBzY29wZS50YXJnZXQuYWRkKHBhbk9mZnNldCk7CiAgICAgIH0KCiAgICAgIG9mZnNldC5zZXRGcm9tU3BoZXJpY2FsKHNwaGVyaWNhbCk7IC8vIHJvdGF0ZSBvZmZzZXQgYmFjayB0byAiY2FtZXJhLXVwLXZlY3Rvci1pcy11cCIgc3BhY2UKCiAgICAgIG9mZnNldC5hcHBseVF1YXRlcm5pb24ocXVhdEludmVyc2UpOwogICAgICBwb3NpdGlvbi5jb3B5KHNjb3BlLnRhcmdldCkuYWRkKG9mZnNldCk7CiAgICAgIHNjb3BlLm9iamVjdC5sb29rQXQoc2NvcGUudGFyZ2V0KTsKCiAgICAgIGlmIChzY29wZS5lbmFibGVEYW1waW5nID09PSB0cnVlKSB7CiAgICAgICAgc3BoZXJpY2FsRGVsdGEudGhldGEgKj0gMSAtIHNjb3BlLmRhbXBpbmdGYWN0b3I7CiAgICAgICAgc3BoZXJpY2FsRGVsdGEucGhpICo9IDEgLSBzY29wZS5kYW1waW5nRmFjdG9yOwogICAgICAgIHBhbk9mZnNldC5tdWx0aXBseVNjYWxhcigxIC0gc2NvcGUuZGFtcGluZ0ZhY3Rvcik7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgc3BoZXJpY2FsRGVsdGEuc2V0KDAsIDAsIDApOwogICAgICAgIHBhbk9mZnNldC5zZXQoMCwgMCwgMCk7CiAgICAgIH0KCiAgICAgIHNjYWxlID0gMTsgLy8gdXBkYXRlIGNvbmRpdGlvbiBpczoKICAgICAgLy8gbWluKGNhbWVyYSBkaXNwbGFjZW1lbnQsIGNhbWVyYSByb3RhdGlvbiBpbiByYWRpYW5zKV4yID4gRVBTCiAgICAgIC8vIHVzaW5nIHNtYWxsLWFuZ2xlIGFwcHJveGltYXRpb24gY29zKHgvMikgPSAxIC0geF4yIC8gOAoKICAgICAgaWYgKHpvb21DaGFuZ2VkIHx8IGxhc3RQb3NpdGlvbi5kaXN0YW5jZVRvU3F1YXJlZChzY29wZS5vYmplY3QucG9zaXRpb24pID4gRVBTIHx8IDggKiAoMSAtIGxhc3RRdWF0ZXJuaW9uLmRvdChzY29wZS5vYmplY3QucXVhdGVybmlvbikpID4gRVBTKSB7CiAgICAgICAgc2NvcGUuZGlzcGF0Y2hFdmVudChjaGFuZ2VFdmVudCk7CiAgICAgICAgbGFzdFBvc2l0aW9uLmNvcHkoc2NvcGUub2JqZWN0LnBvc2l0aW9uKTsKICAgICAgICBsYXN0UXVhdGVybmlvbi5jb3B5KHNjb3BlLm9iamVjdC5xdWF0ZXJuaW9uKTsKICAgICAgICB6b29tQ2hhbmdlZCA9IGZhbHNlOwogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9CgogICAgICByZXR1cm4gZmFsc2U7CiAgICB9OwogIH0oKTsKCiAgdGhpcy5kaXNwb3NlID0gZnVuY3Rpb24gKCkgewogICAgc2NvcGUuZG9tRWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCJjb250ZXh0bWVudSIsIG9uQ29udGV4dE1lbnUsIGZhbHNlKTsKICAgIHNjb3BlLmRvbUVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigibW91c2Vkb3duIiwgb25Nb3VzZURvd24sIGZhbHNlKTsKICAgIHNjb3BlLmRvbUVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigid2hlZWwiLCBvbk1vdXNlV2hlZWwsIGZhbHNlKTsKICAgIHNjb3BlLmRvbUVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigidG91Y2hzdGFydCIsIG9uVG91Y2hTdGFydCwgZmFsc2UpOwogICAgc2NvcGUuZG9tRWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCJ0b3VjaGVuZCIsIG9uVG91Y2hFbmQsIGZhbHNlKTsKICAgIHNjb3BlLmRvbUVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigidG91Y2htb3ZlIiwgb25Ub3VjaE1vdmUsIGZhbHNlKTsKICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoIm1vdXNlbW92ZSIsIG9uTW91c2VNb3ZlLCBmYWxzZSk7CiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCJtb3VzZXVwIiwgb25Nb3VzZVVwLCBmYWxzZSk7CiAgICBzY29wZS5kb21FbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoImtleWRvd24iLCBvbktleURvd24sIGZhbHNlKTsgLy9zY29wZS5kaXNwYXRjaEV2ZW50KCB7IHR5cGU6ICdkaXNwb3NlJyB9ICk7IC8vIHNob3VsZCB0aGlzIGJlIGFkZGVkIGhlcmU/CiAgfTsgLy8KICAvLyBpbnRlcm5hbHMKICAvLwoKCiAgdmFyIHNjb3BlID0gdGhpczsKICB2YXIgY2hhbmdlRXZlbnQgPSB7CiAgICB0eXBlOiAiY2hhbmdlIgogIH07CiAgdmFyIHN0YXJ0RXZlbnQgPSB7CiAgICB0eXBlOiAic3RhcnQiCiAgfTsKICB2YXIgZW5kRXZlbnQgPSB7CiAgICB0eXBlOiAiZW5kIgogIH07CiAgdmFyIFNUQVRFID0gewogICAgTk9ORTogLTEsCiAgICBST1RBVEU6IDAsCiAgICBET0xMWTogMSwKICAgIFBBTjogMiwKICAgIFRPVUNIX1JPVEFURTogMywKICAgIFRPVUNIX1BBTjogNCwKICAgIFRPVUNIX0RPTExZX1BBTjogNSwKICAgIFRPVUNIX0RPTExZX1JPVEFURTogNgogIH07CiAgdmFyIHN0YXRlID0gU1RBVEUuTk9ORTsKICB2YXIgRVBTID0gMC4wMDAwMDE7IC8vIGN1cnJlbnQgcG9zaXRpb24gaW4gc3BoZXJpY2FsIGNvb3JkaW5hdGVzCgogIHZhciBzcGhlcmljYWwgPSBuZXcgU3BoZXJpY2FsKCk7CiAgdmFyIHNwaGVyaWNhbERlbHRhID0gbmV3IFNwaGVyaWNhbCgpOwogIHZhciBzY2FsZSA9IDE7CiAgdmFyIHBhbk9mZnNldCA9IG5ldyBWZWN0b3IzKCk7CiAgdmFyIHpvb21DaGFuZ2VkID0gZmFsc2U7CiAgdmFyIHJvdGF0ZVN0YXJ0ID0gbmV3IFZlY3RvcjIoKTsKICB2YXIgcm90YXRlRW5kID0gbmV3IFZlY3RvcjIoKTsKICB2YXIgcm90YXRlRGVsdGEgPSBuZXcgVmVjdG9yMigpOwogIHZhciBwYW5TdGFydCA9IG5ldyBWZWN0b3IyKCk7CiAgdmFyIHBhbkVuZCA9IG5ldyBWZWN0b3IyKCk7CiAgdmFyIHBhbkRlbHRhID0gbmV3IFZlY3RvcjIoKTsKICB2YXIgZG9sbHlTdGFydCA9IG5ldyBWZWN0b3IyKCk7CiAgdmFyIGRvbGx5RW5kID0gbmV3IFZlY3RvcjIoKTsKICB2YXIgZG9sbHlEZWx0YSA9IG5ldyBWZWN0b3IyKCk7CgogIGZ1bmN0aW9uIGdldEF1dG9Sb3RhdGlvbkFuZ2xlKCkgewogICAgcmV0dXJuIDIgKiBNYXRoLlBJIC8gNjAgLyA2MCAqIHNjb3BlLmF1dG9Sb3RhdGVTcGVlZDsKICB9CgogIGZ1bmN0aW9uIGdldFpvb21TY2FsZSgpIHsKICAgIHJldHVybiBNYXRoLnBvdygwLjk1LCBzY29wZS56b29tU3BlZWQpOwogIH0KCiAgZnVuY3Rpb24gcm90YXRlTGVmdChhbmdsZSkgewogICAgc3BoZXJpY2FsRGVsdGEudGhldGEgLT0gYW5nbGU7CiAgfQoKICBmdW5jdGlvbiByb3RhdGVVcChhbmdsZSkgewogICAgc3BoZXJpY2FsRGVsdGEucGhpIC09IGFuZ2xlOwogIH0KCiAgdmFyIHBhbkxlZnQgPSBmdW5jdGlvbiAoKSB7CiAgICB2YXIgdiA9IG5ldyBWZWN0b3IzKCk7CiAgICByZXR1cm4gZnVuY3Rpb24gcGFuTGVmdChkaXN0YW5jZSwgb2JqZWN0TWF0cml4KSB7CiAgICAgIHYuc2V0RnJvbU1hdHJpeENvbHVtbihvYmplY3RNYXRyaXgsIDApOyAvLyBnZXQgWCBjb2x1bW4gb2Ygb2JqZWN0TWF0cml4CgogICAgICB2Lm11bHRpcGx5U2NhbGFyKC1kaXN0YW5jZSk7CiAgICAgIHBhbk9mZnNldC5hZGQodik7CiAgICB9OwogIH0oKTsKCiAgdmFyIHBhblVwID0gZnVuY3Rpb24gKCkgewogICAgdmFyIHYgPSBuZXcgVmVjdG9yMygpOwogICAgcmV0dXJuIGZ1bmN0aW9uIHBhblVwKGRpc3RhbmNlLCBvYmplY3RNYXRyaXgpIHsKICAgICAgaWYgKHNjb3BlLnNjcmVlblNwYWNlUGFubmluZyA9PT0gdHJ1ZSkgewogICAgICAgIHYuc2V0RnJvbU1hdHJpeENvbHVtbihvYmplY3RNYXRyaXgsIDEpOwogICAgICB9IGVsc2UgewogICAgICAgIHYuc2V0RnJvbU1hdHJpeENvbHVtbihvYmplY3RNYXRyaXgsIDApOwogICAgICAgIHYuY3Jvc3NWZWN0b3JzKHNjb3BlLm9iamVjdC51cCwgdik7CiAgICAgIH0KCiAgICAgIHYubXVsdGlwbHlTY2FsYXIoZGlzdGFuY2UpOwogICAgICBwYW5PZmZzZXQuYWRkKHYpOwogICAgfTsKICB9KCk7IC8vIGRlbHRhWCBhbmQgZGVsdGFZIGFyZSBpbiBwaXhlbHM7IHJpZ2h0IGFuZCBkb3duIGFyZSBwb3NpdGl2ZQoKCiAgdmFyIHBhbiA9IGZ1bmN0aW9uICgpIHsKICAgIHZhciBvZmZzZXQgPSBuZXcgVmVjdG9yMygpOwogICAgcmV0dXJuIGZ1bmN0aW9uIHBhbihkZWx0YVgsIGRlbHRhWSkgewogICAgICB2YXIgZWxlbWVudCA9IHNjb3BlLmRvbUVsZW1lbnQ7CgogICAgICBpZiAoc2NvcGUub2JqZWN0LmlzUGVyc3BlY3RpdmVDYW1lcmEpIHsKICAgICAgICAvLyBwZXJzcGVjdGl2ZQogICAgICAgIHZhciBwb3NpdGlvbiA9IHNjb3BlLm9iamVjdC5wb3NpdGlvbjsKICAgICAgICBvZmZzZXQuY29weShwb3NpdGlvbikuc3ViKHNjb3BlLnRhcmdldCk7CiAgICAgICAgdmFyIHRhcmdldERpc3RhbmNlID0gb2Zmc2V0Lmxlbmd0aCgpOyAvLyBoYWxmIG9mIHRoZSBmb3YgaXMgY2VudGVyIHRvIHRvcCBvZiBzY3JlZW4KCiAgICAgICAgdGFyZ2V0RGlzdGFuY2UgKj0gTWF0aC50YW4oc2NvcGUub2JqZWN0LmZvdiAvIDIgKiBNYXRoLlBJIC8gMTgwLjApOyAvLyB3ZSB1c2Ugb25seSBjbGllbnRIZWlnaHQgaGVyZSBzbyBhc3BlY3QgcmF0aW8gZG9lcyBub3QgZGlzdG9ydCBzcGVlZAoKICAgICAgICBwYW5MZWZ0KDIgKiBkZWx0YVggKiB0YXJnZXREaXN0YW5jZSAvIGVsZW1lbnQuY2xpZW50SGVpZ2h0LCBzY29wZS5vYmplY3QubWF0cml4KTsKICAgICAgICBwYW5VcCgyICogZGVsdGFZICogdGFyZ2V0RGlzdGFuY2UgLyBlbGVtZW50LmNsaWVudEhlaWdodCwgc2NvcGUub2JqZWN0Lm1hdHJpeCk7CiAgICAgIH0gZWxzZSBpZiAoc2NvcGUub2JqZWN0LmlzT3J0aG9ncmFwaGljQ2FtZXJhKSB7CiAgICAgICAgLy8gb3J0aG9ncmFwaGljCiAgICAgICAgcGFuTGVmdChkZWx0YVggKiAoc2NvcGUub2JqZWN0LnJpZ2h0IC0gc2NvcGUub2JqZWN0LmxlZnQpIC8gc2NvcGUub2JqZWN0Lnpvb20gLyBlbGVtZW50LmNsaWVudFdpZHRoLCBzY29wZS5vYmplY3QubWF0cml4KTsKICAgICAgICBwYW5VcChkZWx0YVkgKiAoc2NvcGUub2JqZWN0LnRvcCAtIHNjb3BlLm9iamVjdC5ib3R0b20pIC8gc2NvcGUub2JqZWN0Lnpvb20gLyBlbGVtZW50LmNsaWVudEhlaWdodCwgc2NvcGUub2JqZWN0Lm1hdHJpeCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8gY2FtZXJhIG5laXRoZXIgb3J0aG9ncmFwaGljIG5vciBwZXJzcGVjdGl2ZQogICAgICAgIGNvbnNvbGUud2FybigiV0FSTklORzogT3JiaXRDb250cm9scy5qcyBlbmNvdW50ZXJlZCBhbiB1bmtub3duIGNhbWVyYSB0eXBlIC0gcGFuIGRpc2FibGVkLiIpOwogICAgICAgIHNjb3BlLmVuYWJsZVBhbiA9IGZhbHNlOwogICAgICB9CiAgICB9OwogIH0oKTsKCiAgZnVuY3Rpb24gZG9sbHlPdXQoZG9sbHlTY2FsZSkgewogICAgaWYgKHNjb3BlLm9iamVjdC5pc1BlcnNwZWN0aXZlQ2FtZXJhKSB7CiAgICAgIHNjYWxlIC89IGRvbGx5U2NhbGU7CiAgICB9IGVsc2UgaWYgKHNjb3BlLm9iamVjdC5pc09ydGhvZ3JhcGhpY0NhbWVyYSkgewogICAgICBzY29wZS5vYmplY3Quem9vbSA9IE1hdGgubWF4KHNjb3BlLm1pblpvb20sIE1hdGgubWluKHNjb3BlLm1heFpvb20sIHNjb3BlLm9iamVjdC56b29tICogZG9sbHlTY2FsZSkpOwogICAgICBzY29wZS5vYmplY3QudXBkYXRlUHJvamVjdGlvbk1hdHJpeCgpOwogICAgICB6b29tQ2hhbmdlZCA9IHRydWU7CiAgICB9IGVsc2UgewogICAgICBjb25zb2xlLndhcm4oIldBUk5JTkc6IE9yYml0Q29udHJvbHMuanMgZW5jb3VudGVyZWQgYW4gdW5rbm93biBjYW1lcmEgdHlwZSAtIGRvbGx5L3pvb20gZGlzYWJsZWQuIik7CiAgICAgIHNjb3BlLmVuYWJsZVpvb20gPSBmYWxzZTsKICAgIH0KICB9CgogIGZ1bmN0aW9uIGRvbGx5SW4oZG9sbHlTY2FsZSkgewogICAgaWYgKHNjb3BlLm9iamVjdC5pc1BlcnNwZWN0aXZlQ2FtZXJhKSB7CiAgICAgIHNjYWxlICo9IGRvbGx5U2NhbGU7CiAgICB9IGVsc2UgaWYgKHNjb3BlLm9iamVjdC5pc09ydGhvZ3JhcGhpY0NhbWVyYSkgewogICAgICBzY29wZS5vYmplY3Quem9vbSA9IE1hdGgubWF4KHNjb3BlLm1pblpvb20sIE1hdGgubWluKHNjb3BlLm1heFpvb20sIHNjb3BlLm9iamVjdC56b29tIC8gZG9sbHlTY2FsZSkpOwogICAgICBzY29wZS5vYmplY3QudXBkYXRlUHJvamVjdGlvbk1hdHJpeCgpOwogICAgICB6b29tQ2hhbmdlZCA9IHRydWU7CiAgICB9IGVsc2UgewogICAgICBjb25zb2xlLndhcm4oIldBUk5JTkc6IE9yYml0Q29udHJvbHMuanMgZW5jb3VudGVyZWQgYW4gdW5rbm93biBjYW1lcmEgdHlwZSAtIGRvbGx5L3pvb20gZGlzYWJsZWQuIik7CiAgICAgIHNjb3BlLmVuYWJsZVpvb20gPSBmYWxzZTsKICAgIH0KICB9IC8vCiAgLy8gZXZlbnQgY2FsbGJhY2tzIC0gdXBkYXRlIHRoZSBvYmplY3Qgc3RhdGUKICAvLwoKCiAgZnVuY3Rpb24gaGFuZGxlTW91c2VEb3duUm90YXRlKGV2ZW50KSB7CiAgICByb3RhdGVTdGFydC5zZXQoZXZlbnQuY2xpZW50WCwgZXZlbnQuY2xpZW50WSk7CiAgfQoKICBmdW5jdGlvbiBoYW5kbGVNb3VzZURvd25Eb2xseShldmVudCkgewogICAgZG9sbHlTdGFydC5zZXQoZXZlbnQuY2xpZW50WCwgZXZlbnQuY2xpZW50WSk7CiAgfQoKICBmdW5jdGlvbiBoYW5kbGVNb3VzZURvd25QYW4oZXZlbnQpIHsKICAgIHBhblN0YXJ0LnNldChldmVudC5jbGllbnRYLCBldmVudC5jbGllbnRZKTsKICB9CgogIGZ1bmN0aW9uIGhhbmRsZU1vdXNlTW92ZVJvdGF0ZShldmVudCkgewogICAgcm90YXRlRW5kLnNldChldmVudC5jbGllbnRYLCBldmVudC5jbGllbnRZKTsKICAgIHJvdGF0ZURlbHRhLnN1YlZlY3RvcnMocm90YXRlRW5kLCByb3RhdGVTdGFydCkubXVsdGlwbHlTY2FsYXIoc2NvcGUucm90YXRlU3BlZWQpOwogICAgdmFyIGVsZW1lbnQgPSBzY29wZS5kb21FbGVtZW50OwogICAgcm90YXRlTGVmdCgyICogTWF0aC5QSSAqIHJvdGF0ZURlbHRhLnggLyBlbGVtZW50LmNsaWVudEhlaWdodCk7IC8vIHllcywgaGVpZ2h0CgogICAgcm90YXRlVXAoMiAqIE1hdGguUEkgKiByb3RhdGVEZWx0YS55IC8gZWxlbWVudC5jbGllbnRIZWlnaHQpOwogICAgcm90YXRlU3RhcnQuY29weShyb3RhdGVFbmQpOwogICAgc2NvcGUudXBkYXRlKCk7CiAgfQoKICBmdW5jdGlvbiBoYW5kbGVNb3VzZU1vdmVEb2xseShldmVudCkgewogICAgZG9sbHlFbmQuc2V0KGV2ZW50LmNsaWVudFgsIGV2ZW50LmNsaWVudFkpOwogICAgZG9sbHlEZWx0YS5zdWJWZWN0b3JzKGRvbGx5RW5kLCBkb2xseVN0YXJ0KTsKCiAgICBpZiAoZG9sbHlEZWx0YS55ID4gMCkgewogICAgICBkb2xseU91dChnZXRab29tU2NhbGUoKSk7CiAgICB9IGVsc2UgaWYgKGRvbGx5RGVsdGEueSA8IDApIHsKICAgICAgZG9sbHlJbihnZXRab29tU2NhbGUoKSk7CiAgICB9CgogICAgZG9sbHlTdGFydC5jb3B5KGRvbGx5RW5kKTsKICAgIHNjb3BlLnVwZGF0ZSgpOwogIH0KCiAgZnVuY3Rpb24gaGFuZGxlTW91c2VNb3ZlUGFuKGV2ZW50KSB7CiAgICBwYW5FbmQuc2V0KGV2ZW50LmNsaWVudFgsIGV2ZW50LmNsaWVudFkpOwogICAgcGFuRGVsdGEuc3ViVmVjdG9ycyhwYW5FbmQsIHBhblN0YXJ0KS5tdWx0aXBseVNjYWxhcihzY29wZS5wYW5TcGVlZCk7CiAgICBwYW4ocGFuRGVsdGEueCwgcGFuRGVsdGEueSk7CiAgICBwYW5TdGFydC5jb3B5KHBhbkVuZCk7CiAgICBzY29wZS51cGRhdGUoKTsKICB9CgogIGZ1bmN0aW9uCiAgICAvKmV2ZW50Ki8KICBoYW5kbGVNb3VzZVVwKCkgey8vIG5vLW9wCiAgfQoKICBmdW5jdGlvbiBoYW5kbGVNb3VzZVdoZWVsKGV2ZW50KSB7CiAgICBpZiAoZXZlbnQuZGVsdGFZIDwgMCkgewogICAgICBkb2xseUluKGdldFpvb21TY2FsZSgpKTsKICAgIH0gZWxzZSBpZiAoZXZlbnQuZGVsdGFZID4gMCkgewogICAgICBkb2xseU91dChnZXRab29tU2NhbGUoKSk7CiAgICB9CgogICAgc2NvcGUudXBkYXRlKCk7CiAgfQoKICBmdW5jdGlvbiBoYW5kbGVLZXlEb3duKGV2ZW50KSB7CiAgICB2YXIgbmVlZHNVcGRhdGUgPSBmYWxzZTsKCiAgICBzd2l0Y2ggKGV2ZW50LmtleUNvZGUpIHsKICAgICAgY2FzZSBzY29wZS5rZXlzLlVQOgogICAgICAgIHBhbigwLCBzY29wZS5rZXlQYW5TcGVlZCk7CiAgICAgICAgbmVlZHNVcGRhdGUgPSB0cnVlOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSBzY29wZS5rZXlzLkJPVFRPTToKICAgICAgICBwYW4oMCwgLXNjb3BlLmtleVBhblNwZWVkKTsKICAgICAgICBuZWVkc1VwZGF0ZSA9IHRydWU7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlIHNjb3BlLmtleXMuTEVGVDoKICAgICAgICBwYW4oc2NvcGUua2V5UGFuU3BlZWQsIDApOwogICAgICAgIG5lZWRzVXBkYXRlID0gdHJ1ZTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2Ugc2NvcGUua2V5cy5SSUdIVDoKICAgICAgICBwYW4oLXNjb3BlLmtleVBhblNwZWVkLCAwKTsKICAgICAgICBuZWVkc1VwZGF0ZSA9IHRydWU7CiAgICAgICAgYnJlYWs7CiAgICB9CgogICAgaWYgKG5lZWRzVXBkYXRlKSB7CiAgICAgIC8vIHByZXZlbnQgdGhlIGJyb3dzZXIgZnJvbSBzY3JvbGxpbmcgb24gY3Vyc29yIGtleXMKICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgICAgc2NvcGUudXBkYXRlKCk7CiAgICB9CiAgfQoKICBmdW5jdGlvbiBoYW5kbGVUb3VjaFN0YXJ0Um90YXRlKGV2ZW50KSB7CiAgICBpZiAoZXZlbnQudG91Y2hlcy5sZW5ndGggPT0gMSkgewogICAgICByb3RhdGVTdGFydC5zZXQoZXZlbnQudG91Y2hlc1swXS5wYWdlWCwgZXZlbnQudG91Y2hlc1swXS5wYWdlWSk7CiAgICB9IGVsc2UgewogICAgICB2YXIgeCA9IDAuNSAqIChldmVudC50b3VjaGVzWzBdLnBhZ2VYICsgZXZlbnQudG91Y2hlc1sxXS5wYWdlWCk7CiAgICAgIHZhciB5ID0gMC41ICogKGV2ZW50LnRvdWNoZXNbMF0ucGFnZVkgKyBldmVudC50b3VjaGVzWzFdLnBhZ2VZKTsKICAgICAgcm90YXRlU3RhcnQuc2V0KHgsIHkpOwogICAgfQogIH0KCiAgZnVuY3Rpb24gaGFuZGxlVG91Y2hTdGFydFBhbihldmVudCkgewogICAgaWYgKGV2ZW50LnRvdWNoZXMubGVuZ3RoID09IDEpIHsKICAgICAgcGFuU3RhcnQuc2V0KGV2ZW50LnRvdWNoZXNbMF0ucGFnZVgsIGV2ZW50LnRvdWNoZXNbMF0ucGFnZVkpOwogICAgfSBlbHNlIHsKICAgICAgdmFyIHggPSAwLjUgKiAoZXZlbnQudG91Y2hlc1swXS5wYWdlWCArIGV2ZW50LnRvdWNoZXNbMV0ucGFnZVgpOwogICAgICB2YXIgeSA9IDAuNSAqIChldmVudC50b3VjaGVzWzBdLnBhZ2VZICsgZXZlbnQudG91Y2hlc1sxXS5wYWdlWSk7CiAgICAgIHBhblN0YXJ0LnNldCh4LCB5KTsKICAgIH0KICB9CgogIGZ1bmN0aW9uIGhhbmRsZVRvdWNoU3RhcnREb2xseShldmVudCkgewogICAgdmFyIGR4ID0gZXZlbnQudG91Y2hlc1swXS5wYWdlWCAtIGV2ZW50LnRvdWNoZXNbMV0ucGFnZVg7CiAgICB2YXIgZHkgPSBldmVudC50b3VjaGVzWzBdLnBhZ2VZIC0gZXZlbnQudG91Y2hlc1sxXS5wYWdlWTsKICAgIHZhciBkaXN0YW5jZSA9IE1hdGguc3FydChkeCAqIGR4ICsgZHkgKiBkeSk7CiAgICBkb2xseVN0YXJ0LnNldCgwLCBkaXN0YW5jZSk7CiAgfQoKICBmdW5jdGlvbiBoYW5kbGVUb3VjaFN0YXJ0RG9sbHlQYW4oZXZlbnQpIHsKICAgIGlmIChzY29wZS5lbmFibGVab29tKSBoYW5kbGVUb3VjaFN0YXJ0RG9sbHkoZXZlbnQpOwogICAgaWYgKHNjb3BlLmVuYWJsZVBhbikgaGFuZGxlVG91Y2hTdGFydFBhbihldmVudCk7CiAgfQoKICBmdW5jdGlvbiBoYW5kbGVUb3VjaFN0YXJ0RG9sbHlSb3RhdGUoZXZlbnQpIHsKICAgIGlmIChzY29wZS5lbmFibGVab29tKSBoYW5kbGVUb3VjaFN0YXJ0RG9sbHkoZXZlbnQpOwogICAgaWYgKHNjb3BlLmVuYWJsZVJvdGF0ZSkgaGFuZGxlVG91Y2hTdGFydFJvdGF0ZShldmVudCk7CiAgfQoKICBmdW5jdGlvbiBoYW5kbGVUb3VjaE1vdmVSb3RhdGUoZXZlbnQpIHsKICAgIGlmIChldmVudC50b3VjaGVzLmxlbmd0aCA9PSAxKSB7CiAgICAgIHJvdGF0ZUVuZC5zZXQoZXZlbnQudG91Y2hlc1swXS5wYWdlWCwgZXZlbnQudG91Y2hlc1swXS5wYWdlWSk7CiAgICB9IGVsc2UgewogICAgICB2YXIgeCA9IDAuNSAqIChldmVudC50b3VjaGVzWzBdLnBhZ2VYICsgZXZlbnQudG91Y2hlc1sxXS5wYWdlWCk7CiAgICAgIHZhciB5ID0gMC41ICogKGV2ZW50LnRvdWNoZXNbMF0ucGFnZVkgKyBldmVudC50b3VjaGVzWzFdLnBhZ2VZKTsKICAgICAgcm90YXRlRW5kLnNldCh4LCB5KTsKICAgIH0KCiAgICByb3RhdGVEZWx0YS5zdWJWZWN0b3JzKHJvdGF0ZUVuZCwgcm90YXRlU3RhcnQpLm11bHRpcGx5U2NhbGFyKHNjb3BlLnJvdGF0ZVNwZWVkKTsKICAgIHZhciBlbGVtZW50ID0gc2NvcGUuZG9tRWxlbWVudDsKICAgIHJvdGF0ZUxlZnQoMiAqIE1hdGguUEkgKiByb3RhdGVEZWx0YS54IC8gZWxlbWVudC5jbGllbnRIZWlnaHQpOyAvLyB5ZXMsIGhlaWdodAoKICAgIHJvdGF0ZVVwKDIgKiBNYXRoLlBJICogcm90YXRlRGVsdGEueSAvIGVsZW1lbnQuY2xpZW50SGVpZ2h0KTsKICAgIHJvdGF0ZVN0YXJ0LmNvcHkocm90YXRlRW5kKTsKICB9CgogIGZ1bmN0aW9uIGhhbmRsZVRvdWNoTW92ZVBhbihldmVudCkgewogICAgaWYgKGV2ZW50LnRvdWNoZXMubGVuZ3RoID09IDEpIHsKICAgICAgcGFuRW5kLnNldChldmVudC50b3VjaGVzWzBdLnBhZ2VYLCBldmVudC50b3VjaGVzWzBdLnBhZ2VZKTsKICAgIH0gZWxzZSB7CiAgICAgIHZhciB4ID0gMC41ICogKGV2ZW50LnRvdWNoZXNbMF0ucGFnZVggKyBldmVudC50b3VjaGVzWzFdLnBhZ2VYKTsKICAgICAgdmFyIHkgPSAwLjUgKiAoZXZlbnQudG91Y2hlc1swXS5wYWdlWSArIGV2ZW50LnRvdWNoZXNbMV0ucGFnZVkpOwogICAgICBwYW5FbmQuc2V0KHgsIHkpOwogICAgfQoKICAgIHBhbkRlbHRhLnN1YlZlY3RvcnMocGFuRW5kLCBwYW5TdGFydCkubXVsdGlwbHlTY2FsYXIoc2NvcGUucGFuU3BlZWQpOwogICAgcGFuKHBhbkRlbHRhLngsIHBhbkRlbHRhLnkpOwogICAgcGFuU3RhcnQuY29weShwYW5FbmQpOwogIH0KCiAgZnVuY3Rpb24gaGFuZGxlVG91Y2hNb3ZlRG9sbHkoZXZlbnQpIHsKICAgIHZhciBkeCA9IGV2ZW50LnRvdWNoZXNbMF0ucGFnZVggLSBldmVudC50b3VjaGVzWzFdLnBhZ2VYOwogICAgdmFyIGR5ID0gZXZlbnQudG91Y2hlc1swXS5wYWdlWSAtIGV2ZW50LnRvdWNoZXNbMV0ucGFnZVk7CiAgICB2YXIgZGlzdGFuY2UgPSBNYXRoLnNxcnQoZHggKiBkeCArIGR5ICogZHkpOwogICAgZG9sbHlFbmQuc2V0KDAsIGRpc3RhbmNlKTsKICAgIGRvbGx5RGVsdGEuc2V0KDAsIE1hdGgucG93KGRvbGx5RW5kLnkgLyBkb2xseVN0YXJ0LnksIHNjb3BlLnpvb21TcGVlZCkpOwogICAgZG9sbHlPdXQoZG9sbHlEZWx0YS55KTsKICAgIGRvbGx5U3RhcnQuY29weShkb2xseUVuZCk7CiAgfQoKICBmdW5jdGlvbiBoYW5kbGVUb3VjaE1vdmVEb2xseVBhbihldmVudCkgewogICAgaWYgKHNjb3BlLmVuYWJsZVpvb20pIGhhbmRsZVRvdWNoTW92ZURvbGx5KGV2ZW50KTsKICAgIGlmIChzY29wZS5lbmFibGVQYW4pIGhhbmRsZVRvdWNoTW92ZVBhbihldmVudCk7CiAgfQoKICBmdW5jdGlvbiBoYW5kbGVUb3VjaE1vdmVEb2xseVJvdGF0ZShldmVudCkgewogICAgaWYgKHNjb3BlLmVuYWJsZVpvb20pIGhhbmRsZVRvdWNoTW92ZURvbGx5KGV2ZW50KTsKICAgIGlmIChzY29wZS5lbmFibGVSb3RhdGUpIGhhbmRsZVRvdWNoTW92ZVJvdGF0ZShldmVudCk7CiAgfQoKICBmdW5jdGlvbgogICAgLypldmVudCovCiAgaGFuZGxlVG91Y2hFbmQoKSB7Ly8gbm8tb3AKICB9IC8vCiAgLy8gZXZlbnQgaGFuZGxlcnMgLSBGU006IGxpc3RlbiBmb3IgZXZlbnRzIGFuZCByZXNldCBzdGF0ZQogIC8vCgoKICBmdW5jdGlvbiBvbk1vdXNlRG93bihldmVudCkgewogICAgaWYgKHNjb3BlLmVuYWJsZWQgPT09IGZhbHNlKSByZXR1cm47IC8vIFByZXZlbnQgdGhlIGJyb3dzZXIgZnJvbSBzY3JvbGxpbmcuCgogICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsgLy8gTWFudWFsbHkgc2V0IHRoZSBmb2N1cyBzaW5jZSBjYWxsaW5nIHByZXZlbnREZWZhdWx0IGFib3ZlCiAgICAvLyBwcmV2ZW50cyB0aGUgYnJvd3NlciBmcm9tIHNldHRpbmcgaXQgYXV0b21hdGljYWxseS4KCiAgICBzY29wZS5kb21FbGVtZW50LmZvY3VzID8gc2NvcGUuZG9tRWxlbWVudC5mb2N1cygpIDogd2luZG93LmZvY3VzKCk7CiAgICB2YXIgbW91c2VBY3Rpb247CgogICAgc3dpdGNoIChldmVudC5idXR0b24pIHsKICAgICAgY2FzZSAwOgogICAgICAgIG1vdXNlQWN0aW9uID0gc2NvcGUubW91c2VCdXR0b25zLkxFRlQ7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlIDE6CiAgICAgICAgbW91c2VBY3Rpb24gPSBzY29wZS5tb3VzZUJ1dHRvbnMuTUlERExFOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAyOgogICAgICAgIG1vdXNlQWN0aW9uID0gc2NvcGUubW91c2VCdXR0b25zLlJJR0hUOwogICAgICAgIGJyZWFrOwoKICAgICAgZGVmYXVsdDoKICAgICAgICBtb3VzZUFjdGlvbiA9IC0xOwogICAgfQoKICAgIHN3aXRjaCAobW91c2VBY3Rpb24pIHsKICAgICAgY2FzZSBNT1VTRS5ET0xMWToKICAgICAgICBpZiAoc2NvcGUuZW5hYmxlWm9vbSA9PT0gZmFsc2UpIHJldHVybjsKICAgICAgICBoYW5kbGVNb3VzZURvd25Eb2xseShldmVudCk7CiAgICAgICAgc3RhdGUgPSBTVEFURS5ET0xMWTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgTU9VU0UuUk9UQVRFOgogICAgICAgIGlmIChldmVudC5jdHJsS2V5IHx8IGV2ZW50Lm1ldGFLZXkgfHwgZXZlbnQuc2hpZnRLZXkpIHsKICAgICAgICAgIGlmIChzY29wZS5lbmFibGVQYW4gPT09IGZhbHNlKSByZXR1cm47CiAgICAgICAgICBoYW5kbGVNb3VzZURvd25QYW4oZXZlbnQpOwogICAgICAgICAgc3RhdGUgPSBTVEFURS5QQU47CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGlmIChzY29wZS5lbmFibGVSb3RhdGUgPT09IGZhbHNlKSByZXR1cm47CiAgICAgICAgICBoYW5kbGVNb3VzZURvd25Sb3RhdGUoZXZlbnQpOwogICAgICAgICAgc3RhdGUgPSBTVEFURS5ST1RBVEU7CiAgICAgICAgfQoKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgTU9VU0UuUEFOOgogICAgICAgIGlmIChldmVudC5jdHJsS2V5IHx8IGV2ZW50Lm1ldGFLZXkgfHwgZXZlbnQuc2hpZnRLZXkpIHsKICAgICAgICAgIGlmIChzY29wZS5lbmFibGVSb3RhdGUgPT09IGZhbHNlKSByZXR1cm47CiAgICAgICAgICBoYW5kbGVNb3VzZURvd25Sb3RhdGUoZXZlbnQpOwogICAgICAgICAgc3RhdGUgPSBTVEFURS5ST1RBVEU7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGlmIChzY29wZS5lbmFibGVQYW4gPT09IGZhbHNlKSByZXR1cm47CiAgICAgICAgICBoYW5kbGVNb3VzZURvd25QYW4oZXZlbnQpOwogICAgICAgICAgc3RhdGUgPSBTVEFURS5QQU47CiAgICAgICAgfQoKICAgICAgICBicmVhazsKCiAgICAgIGRlZmF1bHQ6CiAgICAgICAgc3RhdGUgPSBTVEFURS5OT05FOwogICAgfQoKICAgIGlmIChzdGF0ZSAhPT0gU1RBVEUuTk9ORSkgewogICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCJtb3VzZW1vdmUiLCBvbk1vdXNlTW92ZSwgZmFsc2UpOwogICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCJtb3VzZXVwIiwgb25Nb3VzZVVwLCBmYWxzZSk7CiAgICAgIHNjb3BlLmRpc3BhdGNoRXZlbnQoc3RhcnRFdmVudCk7CiAgICB9CiAgfQoKICBmdW5jdGlvbiBvbk1vdXNlTW92ZShldmVudCkgewogICAgaWYgKHNjb3BlLmVuYWJsZWQgPT09IGZhbHNlKSByZXR1cm47CiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwoKICAgIHN3aXRjaCAoc3RhdGUpIHsKICAgICAgY2FzZSBTVEFURS5ST1RBVEU6CiAgICAgICAgaWYgKHNjb3BlLmVuYWJsZVJvdGF0ZSA9PT0gZmFsc2UpIHJldHVybjsKICAgICAgICBoYW5kbGVNb3VzZU1vdmVSb3RhdGUoZXZlbnQpOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSBTVEFURS5ET0xMWToKICAgICAgICBpZiAoc2NvcGUuZW5hYmxlWm9vbSA9PT0gZmFsc2UpIHJldHVybjsKICAgICAgICBoYW5kbGVNb3VzZU1vdmVEb2xseShldmVudCk7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlIFNUQVRFLlBBTjoKICAgICAgICBpZiAoc2NvcGUuZW5hYmxlUGFuID09PSBmYWxzZSkgcmV0dXJuOwogICAgICAgIGhhbmRsZU1vdXNlTW92ZVBhbihldmVudCk7CiAgICAgICAgYnJlYWs7CiAgICB9CiAgfQoKICBmdW5jdGlvbiBvbk1vdXNlVXAoZXZlbnQpIHsKICAgIGlmIChzY29wZS5lbmFibGVkID09PSBmYWxzZSkgcmV0dXJuOwogICAgaGFuZGxlTW91c2VVcChldmVudCk7CiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCJtb3VzZW1vdmUiLCBvbk1vdXNlTW92ZSwgZmFsc2UpOwogICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigibW91c2V1cCIsIG9uTW91c2VVcCwgZmFsc2UpOwogICAgc2NvcGUuZGlzcGF0Y2hFdmVudChlbmRFdmVudCk7CiAgICBzdGF0ZSA9IFNUQVRFLk5PTkU7CiAgfQoKICBmdW5jdGlvbiBvbk1vdXNlV2hlZWwoZXZlbnQpIHsKICAgIGlmIChzY29wZS5lbmFibGVkID09PSBmYWxzZSB8fCBzY29wZS5lbmFibGVab29tID09PSBmYWxzZSB8fCBzdGF0ZSAhPT0gU1RBVEUuTk9ORSAmJiBzdGF0ZSAhPT0gU1RBVEUuUk9UQVRFKSByZXR1cm47CiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICBzY29wZS5kaXNwYXRjaEV2ZW50KHN0YXJ0RXZlbnQpOwogICAgaGFuZGxlTW91c2VXaGVlbChldmVudCk7CiAgICBzY29wZS5kaXNwYXRjaEV2ZW50KGVuZEV2ZW50KTsKICB9CgogIGZ1bmN0aW9uIG9uS2V5RG93bihldmVudCkgewogICAgaWYgKHNjb3BlLmVuYWJsZWQgPT09IGZhbHNlIHx8IHNjb3BlLmVuYWJsZUtleXMgPT09IGZhbHNlIHx8IHNjb3BlLmVuYWJsZVBhbiA9PT0gZmFsc2UpIHJldHVybjsKICAgIGhhbmRsZUtleURvd24oZXZlbnQpOwogIH0KCiAgZnVuY3Rpb24gb25Ub3VjaFN0YXJ0KGV2ZW50KSB7CiAgICBpZiAoc2NvcGUuZW5hYmxlZCA9PT0gZmFsc2UpIHJldHVybjsKICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7IC8vIHByZXZlbnQgc2Nyb2xsaW5nCgogICAgc3dpdGNoIChldmVudC50b3VjaGVzLmxlbmd0aCkgewogICAgICBjYXNlIDE6CiAgICAgICAgc3dpdGNoIChzY29wZS50b3VjaGVzLk9ORSkgewogICAgICAgICAgY2FzZSBUT1VDSC5ST1RBVEU6CiAgICAgICAgICAgIGlmIChzY29wZS5lbmFibGVSb3RhdGUgPT09IGZhbHNlKSByZXR1cm47CiAgICAgICAgICAgIGhhbmRsZVRvdWNoU3RhcnRSb3RhdGUoZXZlbnQpOwogICAgICAgICAgICBzdGF0ZSA9IFNUQVRFLlRPVUNIX1JPVEFURTsKICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgY2FzZSBUT1VDSC5QQU46CiAgICAgICAgICAgIGlmIChzY29wZS5lbmFibGVQYW4gPT09IGZhbHNlKSByZXR1cm47CiAgICAgICAgICAgIGhhbmRsZVRvdWNoU3RhcnRQYW4oZXZlbnQpOwogICAgICAgICAgICBzdGF0ZSA9IFNUQVRFLlRPVUNIX1BBTjsKICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgc3RhdGUgPSBTVEFURS5OT05FOwogICAgICAgIH0KCiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlIDI6CiAgICAgICAgc3dpdGNoIChzY29wZS50b3VjaGVzLlRXTykgewogICAgICAgICAgY2FzZSBUT1VDSC5ET0xMWV9QQU46CiAgICAgICAgICAgIGlmIChzY29wZS5lbmFibGVab29tID09PSBmYWxzZSAmJiBzY29wZS5lbmFibGVQYW4gPT09IGZhbHNlKSByZXR1cm47CiAgICAgICAgICAgIGhhbmRsZVRvdWNoU3RhcnREb2xseVBhbihldmVudCk7CiAgICAgICAgICAgIHN0YXRlID0gU1RBVEUuVE9VQ0hfRE9MTFlfUEFOOwogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBjYXNlIFRPVUNILkRPTExZX1JPVEFURToKICAgICAgICAgICAgaWYgKHNjb3BlLmVuYWJsZVpvb20gPT09IGZhbHNlICYmIHNjb3BlLmVuYWJsZVJvdGF0ZSA9PT0gZmFsc2UpIHJldHVybjsKICAgICAgICAgICAgaGFuZGxlVG91Y2hTdGFydERvbGx5Um90YXRlKGV2ZW50KTsKICAgICAgICAgICAgc3RhdGUgPSBTVEFURS5UT1VDSF9ET0xMWV9ST1RBVEU7CiAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgIHN0YXRlID0gU1RBVEUuTk9ORTsKICAgICAgICB9CgogICAgICAgIGJyZWFrOwoKICAgICAgZGVmYXVsdDoKICAgICAgICBzdGF0ZSA9IFNUQVRFLk5PTkU7CiAgICB9CgogICAgaWYgKHN0YXRlICE9PSBTVEFURS5OT05FKSB7CiAgICAgIHNjb3BlLmRpc3BhdGNoRXZlbnQoc3RhcnRFdmVudCk7CiAgICB9CiAgfQoKICBmdW5jdGlvbiBvblRvdWNoTW92ZShldmVudCkgewogICAgaWYgKHNjb3BlLmVuYWJsZWQgPT09IGZhbHNlKSByZXR1cm47CiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOyAvLyBwcmV2ZW50IHNjcm9sbGluZwoKICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpOwoKICAgIHN3aXRjaCAoc3RhdGUpIHsKICAgICAgY2FzZSBTVEFURS5UT1VDSF9ST1RBVEU6CiAgICAgICAgaWYgKHNjb3BlLmVuYWJsZVJvdGF0ZSA9PT0gZmFsc2UpIHJldHVybjsKICAgICAgICBoYW5kbGVUb3VjaE1vdmVSb3RhdGUoZXZlbnQpOwogICAgICAgIHNjb3BlLnVwZGF0ZSgpOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSBTVEFURS5UT1VDSF9QQU46CiAgICAgICAgaWYgKHNjb3BlLmVuYWJsZVBhbiA9PT0gZmFsc2UpIHJldHVybjsKICAgICAgICBoYW5kbGVUb3VjaE1vdmVQYW4oZXZlbnQpOwogICAgICAgIHNjb3BlLnVwZGF0ZSgpOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSBTVEFURS5UT1VDSF9ET0xMWV9QQU46CiAgICAgICAgaWYgKHNjb3BlLmVuYWJsZVpvb20gPT09IGZhbHNlICYmIHNjb3BlLmVuYWJsZVBhbiA9PT0gZmFsc2UpIHJldHVybjsKICAgICAgICBoYW5kbGVUb3VjaE1vdmVEb2xseVBhbihldmVudCk7CiAgICAgICAgc2NvcGUudXBkYXRlKCk7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlIFNUQVRFLlRPVUNIX0RPTExZX1JPVEFURToKICAgICAgICBpZiAoc2NvcGUuZW5hYmxlWm9vbSA9PT0gZmFsc2UgJiYgc2NvcGUuZW5hYmxlUm90YXRlID09PSBmYWxzZSkgcmV0dXJuOwogICAgICAgIGhhbmRsZVRvdWNoTW92ZURvbGx5Um90YXRlKGV2ZW50KTsKICAgICAgICBzY29wZS51cGRhdGUoKTsKICAgICAgICBicmVhazsKCiAgICAgIGRlZmF1bHQ6CiAgICAgICAgc3RhdGUgPSBTVEFURS5OT05FOwogICAgfQogIH0KCiAgZnVuY3Rpb24gb25Ub3VjaEVuZChldmVudCkgewogICAgaWYgKHNjb3BlLmVuYWJsZWQgPT09IGZhbHNlKSByZXR1cm47CiAgICBoYW5kbGVUb3VjaEVuZChldmVudCk7CiAgICBzY29wZS5kaXNwYXRjaEV2ZW50KGVuZEV2ZW50KTsKICAgIHN0YXRlID0gU1RBVEUuTk9ORTsKICB9CgogIGZ1bmN0aW9uIG9uQ29udGV4dE1lbnUoZXZlbnQpIHsKICAgIGlmIChzY29wZS5lbmFibGVkID09PSBmYWxzZSkgcmV0dXJuOwogICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICB9IC8vCgoKICBzY29wZS5kb21FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoImNvbnRleHRtZW51Iiwgb25Db250ZXh0TWVudSwgZmFsc2UpOwogIHNjb3BlLmRvbUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigibW91c2Vkb3duIiwgb25Nb3VzZURvd24sIGZhbHNlKTsKICBzY29wZS5kb21FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoIndoZWVsIiwgb25Nb3VzZVdoZWVsLCBmYWxzZSk7CiAgc2NvcGUuZG9tRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCJ0b3VjaHN0YXJ0Iiwgb25Ub3VjaFN0YXJ0LCBmYWxzZSk7CiAgc2NvcGUuZG9tRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCJ0b3VjaGVuZCIsIG9uVG91Y2hFbmQsIGZhbHNlKTsKICBzY29wZS5kb21FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoInRvdWNobW92ZSIsIG9uVG91Y2hNb3ZlLCBmYWxzZSk7CiAgc2NvcGUuZG9tRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCJrZXlkb3duIiwgb25LZXlEb3duLCBmYWxzZSk7IC8vIG1ha2Ugc3VyZSBlbGVtZW50IGNhbiByZWNlaXZlIGtleXMuCgogIGlmIChzY29wZS5kb21FbGVtZW50LnRhYkluZGV4ID09PSAtMSkgewogICAgc2NvcGUuZG9tRWxlbWVudC50YWJJbmRleCA9IDA7CiAgfSAvLyBmb3JjZSBhbiB1cGRhdGUgYXQgc3RhcnQKCgogIHRoaXMudXBkYXRlKCk7Cn07CgpPcmJpdENvbnRyb2xzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoRXZlbnREaXNwYXRjaGVyLnByb3RvdHlwZSk7Ck9yYml0Q29udHJvbHMucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gT3JiaXRDb250cm9sczsgLy8gVGhpcyBzZXQgb2YgY29udHJvbHMgcGVyZm9ybXMgb3JiaXRpbmcsIGRvbGx5aW5nICh6b29taW5nKSwgYW5kIHBhbm5pbmcuCi8vIFVubGlrZSBUcmFja2JhbGxDb250cm9scywgaXQgbWFpbnRhaW5zIHRoZSAidXAiIGRpcmVjdGlvbiBvYmplY3QudXAgKCtZIGJ5IGRlZmF1bHQpLgovLyBUaGlzIGlzIHZlcnkgc2ltaWxhciB0byBPcmJpdENvbnRyb2xzLCBhbm90aGVyIHNldCBvZiB0b3VjaCBiZWhhdmlvcgovLwovLyAgICBPcmJpdCAtIHJpZ2h0IG1vdXNlLCBvciBsZWZ0IG1vdXNlICsgY3RybC9tZXRhL3NoaWZ0S2V5IC8gdG91Y2g6IHR3by1maW5nZXIgcm90YXRlCi8vICAgIFpvb20gLSBtaWRkbGUgbW91c2UsIG9yIG1vdXNld2hlZWwgLyB0b3VjaDogdHdvLWZpbmdlciBzcHJlYWQgb3Igc3F1aXNoCi8vICAgIFBhbiAtIGxlZnQgbW91c2UsIG9yIGFycm93IGtleXMgLyB0b3VjaDogb25lLWZpbmdlciBtb3ZlCgp2YXIgTWFwQ29udHJvbHMgPSBmdW5jdGlvbiBNYXBDb250cm9scyhvYmplY3QsIGRvbUVsZW1lbnQpIHsKICBPcmJpdENvbnRyb2xzLmNhbGwodGhpcywgb2JqZWN0LCBkb21FbGVtZW50KTsKICB0aGlzLm1vdXNlQnV0dG9ucy5MRUZUID0gTU9VU0UuUEFOOwogIHRoaXMubW91c2VCdXR0b25zLlJJR0hUID0gTU9VU0UuUk9UQVRFOwogIHRoaXMudG91Y2hlcy5PTkUgPSBUT1VDSC5QQU47CiAgdGhpcy50b3VjaGVzLlRXTyA9IFRPVUNILkRPTExZX1JPVEFURTsKfTsKCk1hcENvbnRyb2xzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoRXZlbnREaXNwYXRjaGVyLnByb3RvdHlwZSk7Ck1hcENvbnRyb2xzLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IE1hcENvbnRyb2xzOwpleHBvcnQgeyBPcmJpdENvbnRyb2xzLCBNYXBDb250cm9scyB9Ow=="},{"version":3,"sources":["E:/wuhanligong-java/music/vue-admin-template-master/src/lib/OrbitControls.js"],"names":["EventDispatcher","MOUSE","Quaternion","Spherical","TOUCH","Vector2","Vector3","OrbitControls","object","domElement","undefined","console","warn","document","error","enabled","target","minDistance","maxDistance","Infinity","minZoom","maxZoom","minPolarAngle","maxPolarAngle","Math","PI","minAzimuthAngle","maxAzimuthAngle","enableDamping","dampingFactor","enableZoom","zoomSpeed","enableRotate","rotateSpeed","enablePan","panSpeed","screenSpacePanning","keyPanSpeed","autoRotate","autoRotateSpeed","enableKeys","keys","LEFT","UP","RIGHT","BOTTOM","mouseButtons","ROTATE","MIDDLE","DOLLY","PAN","touches","ONE","TWO","DOLLY_PAN","target0","clone","position0","position","zoom0","zoom","getPolarAngle","spherical","phi","getAzimuthalAngle","theta","saveState","scope","copy","reset","updateProjectionMatrix","dispatchEvent","changeEvent","update","state","STATE","NONE","offset","quat","setFromUnitVectors","up","quatInverse","inverse","lastPosition","lastQuaternion","sub","applyQuaternion","setFromVector3","rotateLeft","getAutoRotationAngle","sphericalDelta","max","min","makeSafe","radius","scale","addScaledVector","panOffset","add","setFromSpherical","lookAt","multiplyScalar","set","zoomChanged","distanceToSquared","EPS","dot","quaternion","dispose","removeEventListener","onContextMenu","onMouseDown","onMouseWheel","onTouchStart","onTouchEnd","onTouchMove","onMouseMove","onMouseUp","onKeyDown","type","startEvent","endEvent","TOUCH_ROTATE","TOUCH_PAN","TOUCH_DOLLY_PAN","TOUCH_DOLLY_ROTATE","rotateStart","rotateEnd","rotateDelta","panStart","panEnd","panDelta","dollyStart","dollyEnd","dollyDelta","getZoomScale","pow","angle","rotateUp","panLeft","v","distance","objectMatrix","setFromMatrixColumn","panUp","crossVectors","pan","deltaX","deltaY","element","isPerspectiveCamera","targetDistance","length","tan","fov","clientHeight","matrix","isOrthographicCamera","right","left","clientWidth","top","bottom","dollyOut","dollyScale","dollyIn","handleMouseDownRotate","event","clientX","clientY","handleMouseDownDolly","handleMouseDownPan","handleMouseMoveRotate","subVectors","x","y","handleMouseMoveDolly","handleMouseMovePan","handleMouseUp","handleMouseWheel","handleKeyDown","needsUpdate","keyCode","preventDefault","handleTouchStartRotate","pageX","pageY","handleTouchStartPan","handleTouchStartDolly","dx","dy","sqrt","handleTouchStartDollyPan","handleTouchStartDollyRotate","handleTouchMoveRotate","handleTouchMovePan","handleTouchMoveDolly","handleTouchMoveDollyPan","handleTouchMoveDollyRotate","handleTouchEnd","focus","window","mouseAction","button","ctrlKey","metaKey","shiftKey","addEventListener","stopPropagation","DOLLY_ROTATE","tabIndex","prototype","Object","create","constructor","MapControls","call"],"mappings":"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","sourcesContent":["/**\n * @author qiao / https://github.com/qiao\n * @author mrdoob / http://mrdoob.com\n * @author alteredq / http://alteredqualia.com/\n * @author WestLangley / http://github.com/WestLangley\n * @author erich666 / http://erichaines.com\n * @author ScieCode / http://github.com/sciecode\n */\n\n// import {\n//   EventDispatcher,\n//   MOUSE,\n//   Quaternion,\n//   Spherical,\n//   TOUCH,\n//   Vector2,\n//   Vector3,\n// } from \"./three.module.js\";\nimport {\n  EventDispatcher,\n  MOUSE,\n  Quaternion,\n  Spherical,\n  TOUCH,\n  Vector2,\n  Vector3,\n} from \"three\";\n\n// This set of controls performs orbiting, dollying (zooming), and panning.\n// Unlike TrackballControls, it maintains the \"up\" direction object.up (+Y by default).\n//\n//    Orbit - left mouse / touch: one-finger move\n//    Zoom - middle mouse, or mousewheel / touch: two-finger spread or squish\n//    Pan - right mouse, or left mouse + ctrl/meta/shiftKey, or arrow keys / touch: two-finger move\n\nvar OrbitControls = function (object, domElement) {\n  if (domElement === undefined)\n    console.warn(\n      'THREE.OrbitControls: The second parameter \"domElement\" is now mandatory.'\n    );\n  if (domElement === document)\n    console.error(\n      'THREE.OrbitControls: \"document\" should not be used as the target \"domElement\". Please use \"renderer.domElement\" instead.'\n    );\n\n  this.object = object;\n  this.domElement = domElement;\n\n  // Set to false to disable this control\n  this.enabled = true;\n\n  // \"target\" sets the location of focus, where the object orbits around\n  this.target = new Vector3();\n\n  // How far you can dolly in and out ( PerspectiveCamera only )\n  this.minDistance = 0;\n  this.maxDistance = Infinity;\n\n  // How far you can zoom in and out ( OrthographicCamera only )\n  this.minZoom = 0;\n  this.maxZoom = Infinity;\n\n  // How far you can orbit vertically, upper and lower limits.\n  // Range is 0 to Math.PI radians.\n  this.minPolarAngle = 0; // radians\n  this.maxPolarAngle = Math.PI; // radians\n\n  // How far you can orbit horizontally, upper and lower limits.\n  // If set, must be a sub-interval of the interval [ - Math.PI, Math.PI ].\n  this.minAzimuthAngle = -Infinity; // radians\n  this.maxAzimuthAngle = Infinity; // radians\n\n  // Set to true to enable damping (inertia)\n  // If damping is enabled, you must call controls.update() in your animation loop\n  this.enableDamping = false;\n  this.dampingFactor = 0.05;\n\n  // This option actually enables dollying in and out; left as \"zoom\" for backwards compatibility.\n  // Set to false to disable zooming\n  this.enableZoom = true;\n  this.zoomSpeed = 1.0;\n\n  // Set to false to disable rotating\n  this.enableRotate = true;\n  this.rotateSpeed = 1.0;\n\n  // Set to false to disable panning\n  this.enablePan = true;\n  this.panSpeed = 1.0;\n  this.screenSpacePanning = false; // if true, pan in screen-space\n  this.keyPanSpeed = 7.0; // pixels moved per arrow key push\n\n  // Set to true to automatically rotate around the target\n  // If auto-rotate is enabled, you must call controls.update() in your animation loop\n  this.autoRotate = false;\n  this.autoRotateSpeed = 2.0; // 30 seconds per round when fps is 60\n\n  // Set to false to disable use of the keys\n  this.enableKeys = true;\n\n  // The four arrow keys\n  this.keys = { LEFT: 37, UP: 38, RIGHT: 39, BOTTOM: 40 };\n\n  // Mouse buttons\n  this.mouseButtons = {\n    LEFT: MOUSE.ROTATE,\n    MIDDLE: MOUSE.DOLLY,\n    RIGHT: MOUSE.PAN,\n  };\n\n  // Touch fingers\n  this.touches = { ONE: TOUCH.ROTATE, TWO: TOUCH.DOLLY_PAN };\n\n  // for reset\n  this.target0 = this.target.clone();\n  this.position0 = this.object.position.clone();\n  this.zoom0 = this.object.zoom;\n\n  //\n  // public methods\n  //\n\n  this.getPolarAngle = function () {\n    return spherical.phi;\n  };\n\n  this.getAzimuthalAngle = function () {\n    return spherical.theta;\n  };\n\n  this.saveState = function () {\n    scope.target0.copy(scope.target);\n    scope.position0.copy(scope.object.position);\n    scope.zoom0 = scope.object.zoom;\n  };\n\n  this.reset = function () {\n    scope.target.copy(scope.target0);\n    scope.object.position.copy(scope.position0);\n    scope.object.zoom = scope.zoom0;\n\n    scope.object.updateProjectionMatrix();\n    scope.dispatchEvent(changeEvent);\n\n    scope.update();\n\n    state = STATE.NONE;\n  };\n\n  // this method is exposed, but perhaps it would be better if we can make it private...\n  this.update = (function () {\n    var offset = new Vector3();\n\n    // so camera.up is the orbit axis\n    var quat = new Quaternion().setFromUnitVectors(\n      object.up,\n      new Vector3(0, 1, 0)\n    );\n    var quatInverse = quat.clone().inverse();\n\n    var lastPosition = new Vector3();\n    var lastQuaternion = new Quaternion();\n\n    return function update() {\n      var position = scope.object.position;\n\n      offset.copy(position).sub(scope.target);\n\n      // rotate offset to \"y-axis-is-up\" space\n      offset.applyQuaternion(quat);\n\n      // angle from z-axis around y-axis\n      spherical.setFromVector3(offset);\n\n      if (scope.autoRotate && state === STATE.NONE) {\n        rotateLeft(getAutoRotationAngle());\n      }\n\n      if (scope.enableDamping) {\n        spherical.theta += sphericalDelta.theta * scope.dampingFactor;\n        spherical.phi += sphericalDelta.phi * scope.dampingFactor;\n      } else {\n        spherical.theta += sphericalDelta.theta;\n        spherical.phi += sphericalDelta.phi;\n      }\n\n      // restrict theta to be between desired limits\n      spherical.theta = Math.max(\n        scope.minAzimuthAngle,\n        Math.min(scope.maxAzimuthAngle, spherical.theta)\n      );\n\n      // restrict phi to be between desired limits\n      spherical.phi = Math.max(\n        scope.minPolarAngle,\n        Math.min(scope.maxPolarAngle, spherical.phi)\n      );\n\n      spherical.makeSafe();\n\n      spherical.radius *= scale;\n\n      // restrict radius to be between desired limits\n      spherical.radius = Math.max(\n        scope.minDistance,\n        Math.min(scope.maxDistance, spherical.radius)\n      );\n\n      // move target to panned location\n\n      if (scope.enableDamping === true) {\n        scope.target.addScaledVector(panOffset, scope.dampingFactor);\n      } else {\n        scope.target.add(panOffset);\n      }\n\n      offset.setFromSpherical(spherical);\n\n      // rotate offset back to \"camera-up-vector-is-up\" space\n      offset.applyQuaternion(quatInverse);\n\n      position.copy(scope.target).add(offset);\n\n      scope.object.lookAt(scope.target);\n\n      if (scope.enableDamping === true) {\n        sphericalDelta.theta *= 1 - scope.dampingFactor;\n        sphericalDelta.phi *= 1 - scope.dampingFactor;\n\n        panOffset.multiplyScalar(1 - scope.dampingFactor);\n      } else {\n        sphericalDelta.set(0, 0, 0);\n\n        panOffset.set(0, 0, 0);\n      }\n\n      scale = 1;\n\n      // update condition is:\n      // min(camera displacement, camera rotation in radians)^2 > EPS\n      // using small-angle approximation cos(x/2) = 1 - x^2 / 8\n\n      if (\n        zoomChanged ||\n        lastPosition.distanceToSquared(scope.object.position) > EPS ||\n        8 * (1 - lastQuaternion.dot(scope.object.quaternion)) > EPS\n      ) {\n        scope.dispatchEvent(changeEvent);\n\n        lastPosition.copy(scope.object.position);\n        lastQuaternion.copy(scope.object.quaternion);\n        zoomChanged = false;\n\n        return true;\n      }\n\n      return false;\n    };\n  })();\n\n  this.dispose = function () {\n    scope.domElement.removeEventListener(\"contextmenu\", onContextMenu, false);\n    scope.domElement.removeEventListener(\"mousedown\", onMouseDown, false);\n    scope.domElement.removeEventListener(\"wheel\", onMouseWheel, false);\n\n    scope.domElement.removeEventListener(\"touchstart\", onTouchStart, false);\n    scope.domElement.removeEventListener(\"touchend\", onTouchEnd, false);\n    scope.domElement.removeEventListener(\"touchmove\", onTouchMove, false);\n\n    document.removeEventListener(\"mousemove\", onMouseMove, false);\n    document.removeEventListener(\"mouseup\", onMouseUp, false);\n\n    scope.domElement.removeEventListener(\"keydown\", onKeyDown, false);\n\n    //scope.dispatchEvent( { type: 'dispose' } ); // should this be added here?\n  };\n\n  //\n  // internals\n  //\n\n  var scope = this;\n\n  var changeEvent = { type: \"change\" };\n  var startEvent = { type: \"start\" };\n  var endEvent = { type: \"end\" };\n\n  var STATE = {\n    NONE: -1,\n    ROTATE: 0,\n    DOLLY: 1,\n    PAN: 2,\n    TOUCH_ROTATE: 3,\n    TOUCH_PAN: 4,\n    TOUCH_DOLLY_PAN: 5,\n    TOUCH_DOLLY_ROTATE: 6,\n  };\n\n  var state = STATE.NONE;\n\n  var EPS = 0.000001;\n\n  // current position in spherical coordinates\n  var spherical = new Spherical();\n  var sphericalDelta = new Spherical();\n\n  var scale = 1;\n  var panOffset = new Vector3();\n  var zoomChanged = false;\n\n  var rotateStart = new Vector2();\n  var rotateEnd = new Vector2();\n  var rotateDelta = new Vector2();\n\n  var panStart = new Vector2();\n  var panEnd = new Vector2();\n  var panDelta = new Vector2();\n\n  var dollyStart = new Vector2();\n  var dollyEnd = new Vector2();\n  var dollyDelta = new Vector2();\n\n  function getAutoRotationAngle() {\n    return ((2 * Math.PI) / 60 / 60) * scope.autoRotateSpeed;\n  }\n\n  function getZoomScale() {\n    return Math.pow(0.95, scope.zoomSpeed);\n  }\n\n  function rotateLeft(angle) {\n    sphericalDelta.theta -= angle;\n  }\n\n  function rotateUp(angle) {\n    sphericalDelta.phi -= angle;\n  }\n\n  var panLeft = (function () {\n    var v = new Vector3();\n\n    return function panLeft(distance, objectMatrix) {\n      v.setFromMatrixColumn(objectMatrix, 0); // get X column of objectMatrix\n      v.multiplyScalar(-distance);\n\n      panOffset.add(v);\n    };\n  })();\n\n  var panUp = (function () {\n    var v = new Vector3();\n\n    return function panUp(distance, objectMatrix) {\n      if (scope.screenSpacePanning === true) {\n        v.setFromMatrixColumn(objectMatrix, 1);\n      } else {\n        v.setFromMatrixColumn(objectMatrix, 0);\n        v.crossVectors(scope.object.up, v);\n      }\n\n      v.multiplyScalar(distance);\n\n      panOffset.add(v);\n    };\n  })();\n\n  // deltaX and deltaY are in pixels; right and down are positive\n  var pan = (function () {\n    var offset = new Vector3();\n\n    return function pan(deltaX, deltaY) {\n      var element = scope.domElement;\n\n      if (scope.object.isPerspectiveCamera) {\n        // perspective\n        var position = scope.object.position;\n        offset.copy(position).sub(scope.target);\n        var targetDistance = offset.length();\n\n        // half of the fov is center to top of screen\n        targetDistance *= Math.tan(((scope.object.fov / 2) * Math.PI) / 180.0);\n\n        // we use only clientHeight here so aspect ratio does not distort speed\n        panLeft(\n          (2 * deltaX * targetDistance) / element.clientHeight,\n          scope.object.matrix\n        );\n        panUp(\n          (2 * deltaY * targetDistance) / element.clientHeight,\n          scope.object.matrix\n        );\n      } else if (scope.object.isOrthographicCamera) {\n        // orthographic\n        panLeft(\n          (deltaX * (scope.object.right - scope.object.left)) /\n            scope.object.zoom /\n            element.clientWidth,\n          scope.object.matrix\n        );\n        panUp(\n          (deltaY * (scope.object.top - scope.object.bottom)) /\n            scope.object.zoom /\n            element.clientHeight,\n          scope.object.matrix\n        );\n      } else {\n        // camera neither orthographic nor perspective\n        console.warn(\n          \"WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.\"\n        );\n        scope.enablePan = false;\n      }\n    };\n  })();\n\n  function dollyOut(dollyScale) {\n    if (scope.object.isPerspectiveCamera) {\n      scale /= dollyScale;\n    } else if (scope.object.isOrthographicCamera) {\n      scope.object.zoom = Math.max(\n        scope.minZoom,\n        Math.min(scope.maxZoom, scope.object.zoom * dollyScale)\n      );\n      scope.object.updateProjectionMatrix();\n      zoomChanged = true;\n    } else {\n      console.warn(\n        \"WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.\"\n      );\n      scope.enableZoom = false;\n    }\n  }\n\n  function dollyIn(dollyScale) {\n    if (scope.object.isPerspectiveCamera) {\n      scale *= dollyScale;\n    } else if (scope.object.isOrthographicCamera) {\n      scope.object.zoom = Math.max(\n        scope.minZoom,\n        Math.min(scope.maxZoom, scope.object.zoom / dollyScale)\n      );\n      scope.object.updateProjectionMatrix();\n      zoomChanged = true;\n    } else {\n      console.warn(\n        \"WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.\"\n      );\n      scope.enableZoom = false;\n    }\n  }\n\n  //\n  // event callbacks - update the object state\n  //\n\n  function handleMouseDownRotate(event) {\n    rotateStart.set(event.clientX, event.clientY);\n  }\n\n  function handleMouseDownDolly(event) {\n    dollyStart.set(event.clientX, event.clientY);\n  }\n\n  function handleMouseDownPan(event) {\n    panStart.set(event.clientX, event.clientY);\n  }\n\n  function handleMouseMoveRotate(event) {\n    rotateEnd.set(event.clientX, event.clientY);\n\n    rotateDelta\n      .subVectors(rotateEnd, rotateStart)\n      .multiplyScalar(scope.rotateSpeed);\n\n    var element = scope.domElement;\n\n    rotateLeft((2 * Math.PI * rotateDelta.x) / element.clientHeight); // yes, height\n\n    rotateUp((2 * Math.PI * rotateDelta.y) / element.clientHeight);\n\n    rotateStart.copy(rotateEnd);\n\n    scope.update();\n  }\n\n  function handleMouseMoveDolly(event) {\n    dollyEnd.set(event.clientX, event.clientY);\n\n    dollyDelta.subVectors(dollyEnd, dollyStart);\n\n    if (dollyDelta.y > 0) {\n      dollyOut(getZoomScale());\n    } else if (dollyDelta.y < 0) {\n      dollyIn(getZoomScale());\n    }\n\n    dollyStart.copy(dollyEnd);\n\n    scope.update();\n  }\n\n  function handleMouseMovePan(event) {\n    panEnd.set(event.clientX, event.clientY);\n\n    panDelta.subVectors(panEnd, panStart).multiplyScalar(scope.panSpeed);\n\n    pan(panDelta.x, panDelta.y);\n\n    panStart.copy(panEnd);\n\n    scope.update();\n  }\n\n  function handleMouseUp(/*event*/) {\n    // no-op\n  }\n\n  function handleMouseWheel(event) {\n    if (event.deltaY < 0) {\n      dollyIn(getZoomScale());\n    } else if (event.deltaY > 0) {\n      dollyOut(getZoomScale());\n    }\n\n    scope.update();\n  }\n\n  function handleKeyDown(event) {\n    var needsUpdate = false;\n\n    switch (event.keyCode) {\n      case scope.keys.UP:\n        pan(0, scope.keyPanSpeed);\n        needsUpdate = true;\n        break;\n\n      case scope.keys.BOTTOM:\n        pan(0, -scope.keyPanSpeed);\n        needsUpdate = true;\n        break;\n\n      case scope.keys.LEFT:\n        pan(scope.keyPanSpeed, 0);\n        needsUpdate = true;\n        break;\n\n      case scope.keys.RIGHT:\n        pan(-scope.keyPanSpeed, 0);\n        needsUpdate = true;\n        break;\n    }\n\n    if (needsUpdate) {\n      // prevent the browser from scrolling on cursor keys\n      event.preventDefault();\n\n      scope.update();\n    }\n  }\n\n  function handleTouchStartRotate(event) {\n    if (event.touches.length == 1) {\n      rotateStart.set(event.touches[0].pageX, event.touches[0].pageY);\n    } else {\n      var x = 0.5 * (event.touches[0].pageX + event.touches[1].pageX);\n      var y = 0.5 * (event.touches[0].pageY + event.touches[1].pageY);\n\n      rotateStart.set(x, y);\n    }\n  }\n\n  function handleTouchStartPan(event) {\n    if (event.touches.length == 1) {\n      panStart.set(event.touches[0].pageX, event.touches[0].pageY);\n    } else {\n      var x = 0.5 * (event.touches[0].pageX + event.touches[1].pageX);\n      var y = 0.5 * (event.touches[0].pageY + event.touches[1].pageY);\n\n      panStart.set(x, y);\n    }\n  }\n\n  function handleTouchStartDolly(event) {\n    var dx = event.touches[0].pageX - event.touches[1].pageX;\n    var dy = event.touches[0].pageY - event.touches[1].pageY;\n\n    var distance = Math.sqrt(dx * dx + dy * dy);\n\n    dollyStart.set(0, distance);\n  }\n\n  function handleTouchStartDollyPan(event) {\n    if (scope.enableZoom) handleTouchStartDolly(event);\n\n    if (scope.enablePan) handleTouchStartPan(event);\n  }\n\n  function handleTouchStartDollyRotate(event) {\n    if (scope.enableZoom) handleTouchStartDolly(event);\n\n    if (scope.enableRotate) handleTouchStartRotate(event);\n  }\n\n  function handleTouchMoveRotate(event) {\n    if (event.touches.length == 1) {\n      rotateEnd.set(event.touches[0].pageX, event.touches[0].pageY);\n    } else {\n      var x = 0.5 * (event.touches[0].pageX + event.touches[1].pageX);\n      var y = 0.5 * (event.touches[0].pageY + event.touches[1].pageY);\n\n      rotateEnd.set(x, y);\n    }\n\n    rotateDelta\n      .subVectors(rotateEnd, rotateStart)\n      .multiplyScalar(scope.rotateSpeed);\n\n    var element = scope.domElement;\n\n    rotateLeft((2 * Math.PI * rotateDelta.x) / element.clientHeight); // yes, height\n\n    rotateUp((2 * Math.PI * rotateDelta.y) / element.clientHeight);\n\n    rotateStart.copy(rotateEnd);\n  }\n\n  function handleTouchMovePan(event) {\n    if (event.touches.length == 1) {\n      panEnd.set(event.touches[0].pageX, event.touches[0].pageY);\n    } else {\n      var x = 0.5 * (event.touches[0].pageX + event.touches[1].pageX);\n      var y = 0.5 * (event.touches[0].pageY + event.touches[1].pageY);\n\n      panEnd.set(x, y);\n    }\n\n    panDelta.subVectors(panEnd, panStart).multiplyScalar(scope.panSpeed);\n\n    pan(panDelta.x, panDelta.y);\n\n    panStart.copy(panEnd);\n  }\n\n  function handleTouchMoveDolly(event) {\n    var dx = event.touches[0].pageX - event.touches[1].pageX;\n    var dy = event.touches[0].pageY - event.touches[1].pageY;\n\n    var distance = Math.sqrt(dx * dx + dy * dy);\n\n    dollyEnd.set(0, distance);\n\n    dollyDelta.set(0, Math.pow(dollyEnd.y / dollyStart.y, scope.zoomSpeed));\n\n    dollyOut(dollyDelta.y);\n\n    dollyStart.copy(dollyEnd);\n  }\n\n  function handleTouchMoveDollyPan(event) {\n    if (scope.enableZoom) handleTouchMoveDolly(event);\n\n    if (scope.enablePan) handleTouchMovePan(event);\n  }\n\n  function handleTouchMoveDollyRotate(event) {\n    if (scope.enableZoom) handleTouchMoveDolly(event);\n\n    if (scope.enableRotate) handleTouchMoveRotate(event);\n  }\n\n  function handleTouchEnd(/*event*/) {\n    // no-op\n  }\n\n  //\n  // event handlers - FSM: listen for events and reset state\n  //\n\n  function onMouseDown(event) {\n    if (scope.enabled === false) return;\n\n    // Prevent the browser from scrolling.\n    event.preventDefault();\n\n    // Manually set the focus since calling preventDefault above\n    // prevents the browser from setting it automatically.\n\n    scope.domElement.focus ? scope.domElement.focus() : window.focus();\n\n    var mouseAction;\n\n    switch (event.button) {\n      case 0:\n        mouseAction = scope.mouseButtons.LEFT;\n        break;\n\n      case 1:\n        mouseAction = scope.mouseButtons.MIDDLE;\n        break;\n\n      case 2:\n        mouseAction = scope.mouseButtons.RIGHT;\n        break;\n\n      default:\n        mouseAction = -1;\n    }\n\n    switch (mouseAction) {\n      case MOUSE.DOLLY:\n        if (scope.enableZoom === false) return;\n\n        handleMouseDownDolly(event);\n\n        state = STATE.DOLLY;\n\n        break;\n\n      case MOUSE.ROTATE:\n        if (event.ctrlKey || event.metaKey || event.shiftKey) {\n          if (scope.enablePan === false) return;\n\n          handleMouseDownPan(event);\n\n          state = STATE.PAN;\n        } else {\n          if (scope.enableRotate === false) return;\n\n          handleMouseDownRotate(event);\n\n          state = STATE.ROTATE;\n        }\n\n        break;\n\n      case MOUSE.PAN:\n        if (event.ctrlKey || event.metaKey || event.shiftKey) {\n          if (scope.enableRotate === false) return;\n\n          handleMouseDownRotate(event);\n\n          state = STATE.ROTATE;\n        } else {\n          if (scope.enablePan === false) return;\n\n          handleMouseDownPan(event);\n\n          state = STATE.PAN;\n        }\n\n        break;\n\n      default:\n        state = STATE.NONE;\n    }\n\n    if (state !== STATE.NONE) {\n      document.addEventListener(\"mousemove\", onMouseMove, false);\n      document.addEventListener(\"mouseup\", onMouseUp, false);\n\n      scope.dispatchEvent(startEvent);\n    }\n  }\n\n  function onMouseMove(event) {\n    if (scope.enabled === false) return;\n\n    event.preventDefault();\n\n    switch (state) {\n      case STATE.ROTATE:\n        if (scope.enableRotate === false) return;\n\n        handleMouseMoveRotate(event);\n\n        break;\n\n      case STATE.DOLLY:\n        if (scope.enableZoom === false) return;\n\n        handleMouseMoveDolly(event);\n\n        break;\n\n      case STATE.PAN:\n        if (scope.enablePan === false) return;\n\n        handleMouseMovePan(event);\n\n        break;\n    }\n  }\n\n  function onMouseUp(event) {\n    if (scope.enabled === false) return;\n\n    handleMouseUp(event);\n\n    document.removeEventListener(\"mousemove\", onMouseMove, false);\n    document.removeEventListener(\"mouseup\", onMouseUp, false);\n\n    scope.dispatchEvent(endEvent);\n\n    state = STATE.NONE;\n  }\n\n  function onMouseWheel(event) {\n    if (\n      scope.enabled === false ||\n      scope.enableZoom === false ||\n      (state !== STATE.NONE && state !== STATE.ROTATE)\n    )\n      return;\n\n    event.preventDefault();\n    event.stopPropagation();\n\n    scope.dispatchEvent(startEvent);\n\n    handleMouseWheel(event);\n\n    scope.dispatchEvent(endEvent);\n  }\n\n  function onKeyDown(event) {\n    if (\n      scope.enabled === false ||\n      scope.enableKeys === false ||\n      scope.enablePan === false\n    )\n      return;\n\n    handleKeyDown(event);\n  }\n\n  function onTouchStart(event) {\n    if (scope.enabled === false) return;\n\n    event.preventDefault(); // prevent scrolling\n\n    switch (event.touches.length) {\n      case 1:\n        switch (scope.touches.ONE) {\n          case TOUCH.ROTATE:\n            if (scope.enableRotate === false) return;\n\n            handleTouchStartRotate(event);\n\n            state = STATE.TOUCH_ROTATE;\n\n            break;\n\n          case TOUCH.PAN:\n            if (scope.enablePan === false) return;\n\n            handleTouchStartPan(event);\n\n            state = STATE.TOUCH_PAN;\n\n            break;\n\n          default:\n            state = STATE.NONE;\n        }\n\n        break;\n\n      case 2:\n        switch (scope.touches.TWO) {\n          case TOUCH.DOLLY_PAN:\n            if (scope.enableZoom === false && scope.enablePan === false) return;\n\n            handleTouchStartDollyPan(event);\n\n            state = STATE.TOUCH_DOLLY_PAN;\n\n            break;\n\n          case TOUCH.DOLLY_ROTATE:\n            if (scope.enableZoom === false && scope.enableRotate === false)\n              return;\n\n            handleTouchStartDollyRotate(event);\n\n            state = STATE.TOUCH_DOLLY_ROTATE;\n\n            break;\n\n          default:\n            state = STATE.NONE;\n        }\n\n        break;\n\n      default:\n        state = STATE.NONE;\n    }\n\n    if (state !== STATE.NONE) {\n      scope.dispatchEvent(startEvent);\n    }\n  }\n\n  function onTouchMove(event) {\n    if (scope.enabled === false) return;\n\n    event.preventDefault(); // prevent scrolling\n    event.stopPropagation();\n\n    switch (state) {\n      case STATE.TOUCH_ROTATE:\n        if (scope.enableRotate === false) return;\n\n        handleTouchMoveRotate(event);\n\n        scope.update();\n\n        break;\n\n      case STATE.TOUCH_PAN:\n        if (scope.enablePan === false) return;\n\n        handleTouchMovePan(event);\n\n        scope.update();\n\n        break;\n\n      case STATE.TOUCH_DOLLY_PAN:\n        if (scope.enableZoom === false && scope.enablePan === false) return;\n\n        handleTouchMoveDollyPan(event);\n\n        scope.update();\n\n        break;\n\n      case STATE.TOUCH_DOLLY_ROTATE:\n        if (scope.enableZoom === false && scope.enableRotate === false) return;\n\n        handleTouchMoveDollyRotate(event);\n\n        scope.update();\n\n        break;\n\n      default:\n        state = STATE.NONE;\n    }\n  }\n\n  function onTouchEnd(event) {\n    if (scope.enabled === false) return;\n\n    handleTouchEnd(event);\n\n    scope.dispatchEvent(endEvent);\n\n    state = STATE.NONE;\n  }\n\n  function onContextMenu(event) {\n    if (scope.enabled === false) return;\n\n    event.preventDefault();\n  }\n\n  //\n\n  scope.domElement.addEventListener(\"contextmenu\", onContextMenu, false);\n\n  scope.domElement.addEventListener(\"mousedown\", onMouseDown, false);\n  scope.domElement.addEventListener(\"wheel\", onMouseWheel, false);\n\n  scope.domElement.addEventListener(\"touchstart\", onTouchStart, false);\n  scope.domElement.addEventListener(\"touchend\", onTouchEnd, false);\n  scope.domElement.addEventListener(\"touchmove\", onTouchMove, false);\n\n  scope.domElement.addEventListener(\"keydown\", onKeyDown, false);\n\n  // make sure element can receive keys.\n\n  if (scope.domElement.tabIndex === -1) {\n    scope.domElement.tabIndex = 0;\n  }\n\n  // force an update at start\n\n  this.update();\n};\n\nOrbitControls.prototype = Object.create(EventDispatcher.prototype);\nOrbitControls.prototype.constructor = OrbitControls;\n\n// This set of controls performs orbiting, dollying (zooming), and panning.\n// Unlike TrackballControls, it maintains the \"up\" direction object.up (+Y by default).\n// This is very similar to OrbitControls, another set of touch behavior\n//\n//    Orbit - right mouse, or left mouse + ctrl/meta/shiftKey / touch: two-finger rotate\n//    Zoom - middle mouse, or mousewheel / touch: two-finger spread or squish\n//    Pan - left mouse, or arrow keys / touch: one-finger move\n\nvar MapControls = function (object, domElement) {\n  OrbitControls.call(this, object, domElement);\n\n  this.mouseButtons.LEFT = MOUSE.PAN;\n  this.mouseButtons.RIGHT = MOUSE.ROTATE;\n\n  this.touches.ONE = TOUCH.PAN;\n  this.touches.TWO = TOUCH.DOLLY_ROTATE;\n};\n\nMapControls.prototype = Object.create(EventDispatcher.prototype);\nMapControls.prototype.constructor = MapControls;\n\nexport { OrbitControls, MapControls };\n"]}]}