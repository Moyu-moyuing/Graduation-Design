{"remainingRequest":"E:\\vue\\vue-admin-template-master\\node_modules\\babel-loader\\lib\\index.js!E:\\vue\\vue-admin-template-master\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\vue\\vue-admin-template-master\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\vue\\vue-admin-template-master\\src\\views\\Editor\\Edit.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\vue\\vue-admin-template-master\\src\\views\\Editor\\Edit.vue","mtime":1651916305979},{"path":"E:\\vue\\vue-admin-template-master\\babel.config.js","mtime":1637248914000},{"path":"E:\\vue\\vue-admin-template-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\vue\\vue-admin-template-master\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"E:\\vue\\vue-admin-template-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\vue\\vue-admin-template-master\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmNvbmNhdC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXktYnVmZmVyLnNsaWNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuZmxvYXQzMi1hcnJheS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LmNvcHktd2l0aGluLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuZXZlcnkuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5maWxsLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuZmluZC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LmZpbmQtaW5kZXguanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5mb3ItZWFjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LmluY2x1ZGVzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuaW5kZXgtb2YuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LmpvaW4uanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5sYXN0LWluZGV4LW9mLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkubWFwLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkucmVkdWNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkucmVkdWNlLXJpZ2h0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkucmV2ZXJzZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LnNldC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LnNsaWNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuc29tZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LnNvcnQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5zdWJhcnJheS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LnRvLWxvY2FsZS1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5tYXAuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5qc29uLnN0cmluZ2lmeS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi51cmwudG8tanNvbi5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCAqIGFzIFRIUkVFIGZyb20gJ3RocmVlL2J1aWxkL3RocmVlLm1vZHVsZS5qcyc7CmltcG9ydCBTdGF0cyBmcm9tICcuLi8uLi9zdG9yZS9TdGF0cy9zdGF0cy5taW4uanMnOwppbXBvcnQgV2lkZ2V0IGZyb20gJy4uL0VkaXRvci9XaWRnZXQvV2lkZ2V0LnZ1ZSc7CmltcG9ydCBBdHRyaWJ1dGUgZnJvbSAnLi4vRWRpdG9yL0F0dHJpYnV0ZS9pbmRleC52dWUnOwppbXBvcnQgRm9vdGVyIGZyb20gJy4uL0VkaXRvci9Gb290ZXIvaW5kZXgudnVlJzsKaW1wb3J0IHsgVHJhbnNmb3JtQ29udHJvbHMgfSBmcm9tICd0aHJlZS9leGFtcGxlcy9qc20vY29udHJvbHMvVHJhbnNmb3JtQ29udHJvbHMnOwppbXBvcnQgeyBEcmFnQ29udHJvbHMgfSBmcm9tICd0aHJlZS9leGFtcGxlcy9qc20vY29udHJvbHMvRHJhZ0NvbnRyb2xzJzsKaW1wb3J0IHsgVHJhY2tiYWxsQ29udHJvbHMgfSBmcm9tICd0aHJlZS9leGFtcGxlcy9qc20vY29udHJvbHMvVHJhY2tiYWxsQ29udHJvbHMnOwppbXBvcnQgeyBPcmJpdENvbnRyb2xzIH0gZnJvbSAndGhyZWUvZXhhbXBsZXMvanNtL2NvbnRyb2xzL09yYml0Q29udHJvbHMnOwppbXBvcnQgeyBDb2xvciwgR3JvdXAsIE9iamVjdDNEIH0gZnJvbSAnLi4vLi4vbGliL3RocmVlLm1vZHVsZS5qcyc7CmltcG9ydCB7IE1PVVNFIH0gZnJvbSAndGhyZWUvc3JjL2NvbnN0YW50cyc7CmltcG9ydCB7IEF4ZXNIZWxwZXIgfSBmcm9tICd0aHJlZS9zcmMvaGVscGVycy9BeGVzSGVscGVyJzsKaW1wb3J0IHsgR3JpZEhlbHBlciB9IGZyb20gJ3RocmVlL3NyYy9oZWxwZXJzL0dyaWRIZWxwZXIuanMnOwppbXBvcnQgeyBFdmVudE1hbmFnZXIgfSBmcm9tICcuLi8uLi9saWIvRXZlbnRNYW5hZ2VyJzsKaW1wb3J0IHsgRGlyZWN0aW9uYWxMaWdodEhlbHBlciB9IGZyb20gJ3RocmVlL3NyYy9oZWxwZXJzL0RpcmVjdGlvbmFsTGlnaHRIZWxwZXInOwppbXBvcnQgeyByYW5nZSB9IGZyb20gIi4uLy4uL2NvbXBvbmVudHMvbW9kZS9yYW5nZSI7CmltcG9ydCB7IG5vZGUgfSBmcm9tICIuLi8uLi9jb21wb25lbnRzL21vZGUvbm9kZSI7IC8v5Yid5aeL5pWw5o2uCgp2YXIgcmVuZGVyZXIsIGNhbWVyYSwgc2NlbmUsIGdlb21ldHJ5LCBtYXRlcmlhbCwgbWVzaCwgc3RhdHMsIG9ianM7IC8vICBsZXQgY29udGFpbmVyPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd3ZWJnbCcpOwoKdmFyIGNvbnRyb2xzID0gewogIHBvc2l0aW9uWDogMCwKICBwb3NpdGlvblk6IDAsCiAgcG9zaXRpb25aOiAwCn07CnZhciBjYW1lcmFDb250cm9sczsKdmFyIHRyYW5zZm9ybUNvbnRyb2w7CnZhciBldmVudE1hbmFnZXI7CnZhciBkaXJlY3Rpb25hbExpZ2h0LCBhbWJpZW50TGlnaHQ7IC8vIGxldCBtb3VzZTsKLy8gbGV0IHJheWNhc3RlcjsKCi8q6L+Z6YeM6K6w5b2V5LiA5Liq5bCPYnVnDQrlvZPmi5bmi73niankvZPnlaXov4flhbbku5bniankvZPkuIrml7bkvJrpgKDmiJDniankvZPlhajpu5ENCuW6lOivpeaYr+adkOi0qOmXrumimOS9v+eUqOS6huazlee6v+WPmOaNouminOiJsuadkOi0qO+8jOaNouaIkOato+W4uOminOiJsuW6lOivpeaYr+ayoeaciemXrumimA0KDQoqLwoKdmFyIHRyYW5zaW5nID0gZmFsc2U7CnZhciBheGVzSGVscGVyLCBncmlkSGVscGVyLCBkaXJlY3RMaWdodEhlbHBlcjsKdmFyIGNhY2hlb2JqZWN0czsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdFZGl0b3InLAogIGNvbXBvbmVudHM6IHsKICAgIFdpZGdldDogV2lkZ2V0LAogICAgQXR0cmlidXRlOiBBdHRyaWJ1dGUsCiAgICBGb290ZXI6IEZvb3RlcgogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHN0YXRlOiB7CiAgICAgICAgR3JpZEhlbHBlcjogdHJ1ZSwKICAgICAgICBBeGVzSGVscGVyOiB0cnVlLAogICAgICAgIExpZ2h0SGVscGVyOiB0cnVlLAogICAgICAgIFBsYW5lSGVscGVyOiBmYWxzZSwKICAgICAgICBCb3hIZWxwZXI6IGZhbHNlLAogICAgICAgIENvbnRyb2w6IHRydWUKICAgICAgfSwKICAgICAgY29uZmlndXJhdGlvbjoge30KICAgIH07CiAgfSwKICB3YXRjaDogewogICAgJ3N0YXRlLkdyaWRIZWxwZXInOiB7CiAgICAgIC8vIGltbWVkaWF0ZTp0cnVlLAogICAgICBkZWVwOiB0cnVlLAogICAgICBoYW5kbGVyOiBmdW5jdGlvbiBoYW5kbGVyKG5ld1ZhbHVlKSB7CiAgICAgICAgaWYgKG5ld1ZhbHVlKSB7CiAgICAgICAgICB0aGlzLkFkZEdyaWQoKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5SZW1vdmVHcmlkKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgJ3N0YXRlLkF4ZXNIZWxwZXInOiB7CiAgICAgIC8vIGltbWVkaWF0ZTp0cnVlLAogICAgICBkZWVwOiB0cnVlLAogICAgICBoYW5kbGVyOiBmdW5jdGlvbiBoYW5kbGVyKG5ld1ZhbHVlKSB7CiAgICAgICAgaWYgKG5ld1ZhbHVlKSB7CiAgICAgICAgICB0aGlzLkFkZEF4ZXMoKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5SZW1vdmVBeGVzKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgJ3N0YXRlLkxpZ2h0SGVscGVyJzogewogICAgICAvLyBpbW1lZGlhdGU6dHJ1ZSwKICAgICAgZGVlcDogdHJ1ZSwKICAgICAgaGFuZGxlcjogZnVuY3Rpb24gaGFuZGxlcihuZXdWYWx1ZSkgewogICAgICAgIGlmIChuZXdWYWx1ZSkgewogICAgICAgICAgdGhpcy5BZGRMaWdodCgpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLlJlbW92ZUxpZ2h0KCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgJ3N0YXRlLkNvbnRyb2wnOiB7CiAgICAgIC8vIGltbWVkaWF0ZTp0cnVlLAogICAgICBkZWVwOiB0cnVlLAogICAgICBoYW5kbGVyOiBmdW5jdGlvbiBoYW5kbGVyKG5ld1ZhbHVlKSB7CiAgICAgICAgaWYgKG5ld1ZhbHVlKSB7CiAgICAgICAgICB0aGlzLkFkZENvbnRyb2woKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5SZW1vdmVDb250cm9sKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBpbml0c3RhdGU6IGZ1bmN0aW9uIGluaXRzdGF0ZSgpIHsKICAgICAgdGhpcy5zdGF0ZSA9IHsKICAgICAgICBHcmlkSGVscGVyOiB0cnVlLAogICAgICAgIEF4ZXNIZWxwZXI6IHRydWUsCiAgICAgICAgTGlnaHRIZWxwZXI6IHRydWUsCiAgICAgICAgUGxhbmVIZWxwZXI6IGZhbHNlLAogICAgICAgIEJveEhlbHBlcjogZmFsc2UsCiAgICAgICAgQ29udHJvbDogdHJ1ZQogICAgICB9OwogICAgfSwKICAgIEFkZE1vZGVsOiBmdW5jdGlvbiBBZGRNb2RlbCgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHRoaXMuJGJ1cy4kb24oJ0FkZE9iamVjdHMnLCBmdW5jdGlvbiAoZW0sIGl0ZW0pIHsKICAgICAgICBpZiAoaXRlbS5uYW1lID09ICcyROaooeWeiycgfHwgaXRlbS5uYW1lID09ICczROaooeWeiycpIHsKICAgICAgICAgIF90aGlzLkFkZEVsZW1lbnQoZW0udHlwZSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIF90aGlzLkxvYWRFbGVtZW50KGVtLnR5cGUpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgZmluZGN1cnJlbnRPYmo6IGZ1bmN0aW9uIGZpbmRjdXJyZW50T2JqKCkgewogICAgICB2YXIgdGhhdCA9IHRoaXM7IC8v6YeN5a6a5ZCRdGhpcyzlpb3liKnnlKjmgLvnur8KCiAgICAgIHRoaXMuJGJ1cy4kb24oJ3JlcXVlc3RPYmonLCBmdW5jdGlvbiAodGFyZ2V0KSB7CiAgICAgICAgdmFyIG9iamVjdCA9IHNjZW5lLmdldE9iamVjdEJ5UHJvcGVydHkoJ3V1aWQnLCB0YXJnZXQudXVpZCk7CiAgICAgICAgdGhhdC4kYnVzLiRlbWl0KCdyZXNwb25zZU9iaicsIG9iamVjdCk7CiAgICAgIH0pOwogICAgfSwKICAgIENoZWNrRnJvbVRyZWU6IGZ1bmN0aW9uIENoZWNrRnJvbVRyZWUoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdGhpcy4kYnVzLiRvbignY2hlY2tFdmVudCcsIGZ1bmN0aW9uICh0YXJnZXQpIHsKICAgICAgICBpZiAoX3RoaXMyLnN0YXRlLkNvbnRyb2wgPT0gdHJ1ZSkgewogICAgICAgICAgaWYgKCF0YXJnZXQpIHsKICAgICAgICAgICAgLy/lpITnkIblr7nkuo7kvKDov4fmnaXmmK/nqbrnm67moIfnmoTmg4XlhrXvvIznm7TmjqXnp7vpmaTmjqfku7YKICAgICAgICAgICAgdHJhbnNmb3JtQ29udHJvbC5kZXRhY2goKTsKICAgICAgICAgICAgc2NlbmUucmVtb3ZlKHRyYW5zZm9ybUNvbnRyb2wpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgaWYgKHRyYW5zZm9ybUNvbnRyb2wub2JqZWN0ICYmIHRhcmdldC51dWlkICE9IHRyYW5zZm9ybUNvbnRyb2wub2JqZWN0LnV1aWQpIHsKICAgICAgICAgICAgICAvL+WmguaenOS7juWcuuaZr+e7k+aehOagkeS4reW+l+WIsOeahOeJqeS9k+S4juebruWJjeeahOS4jeWQjOaJjei/m+ihjOS6i+S7tuWkhOeQhgogICAgICAgICAgICAgIC8v5Y2z5pu05o2i5bCE57q/5ou+5Y+WCiAgICAgICAgICAgICAgdHJhbnNmb3JtQ29udHJvbC5kZXRhY2goKTsKICAgICAgICAgICAgICBzY2VuZS5yZW1vdmUodHJhbnNmb3JtQ29udHJvbCk7IC8v5YWI5Yig6Zmk5b2T5YmN5o6n5Lu25a+56LGhCgogICAgICAgICAgICAgIHNjZW5lLnRyYXZlcnNlKGZ1bmN0aW9uIChvYmopIHsKICAgICAgICAgICAgICAgIGlmIChvYmoudXVpZCA9PSB0YXJnZXQudXVpZCkgewogICAgICAgICAgICAgICAgICBpZiAob2JqLnR5cGUuaW5kZXhPZignSGVscGVyJykgPT0gLTEpIHsKICAgICAgICAgICAgICAgICAgICAvL+WmguaenOS4jeaYr2hlbHBlcgoKICAgICAgICAgICAgICAgICAgICAvKiDog73lkKbnm7TmjqXkvKB1dWlk6L+b5p2l5p+l54S25ZCO5Lyg5Ye65Y6777yfDQogICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICDpnIDopoHph43mnoQNCiAgICAgICAgICAgICAgICAgICAgKi8KICAgICAgICAgICAgICAgICAgICBzY2VuZS5hZGQodHJhbnNmb3JtQ29udHJvbCk7CiAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtQ29udHJvbC5hdHRhY2gob2JqKTsKICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm1Db250cm9sLmRldGFjaCgpOwogICAgICAgICAgICAgICAgICAgIHNjZW5lLnJlbW92ZSh0cmFuc2Zvcm1Db250cm9sKTsKICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9IGVsc2UgaWYgKCF0cmFuc2Zvcm1Db250cm9sLm9iamVjdCkgewogICAgICAgICAgICAgIC8v5aaC5p6c5o6n5Lu25pys6Lqr5LiN5a2Y5Zyo6YKj5LmI55u05o6l5YqgCiAgICAgICAgICAgICAgc2NlbmUudHJhdmVyc2UoZnVuY3Rpb24gKG9iaikgewogICAgICAgICAgICAgICAgaWYgKG9iai51dWlkID09IHRhcmdldC51dWlkKSB7CiAgICAgICAgICAgICAgICAgIC8v5ZCM5qC36ZyA6KaB5Yik5pat5piv5ZCm5pivaGVscGVyCiAgICAgICAgICAgICAgICAgIGlmIChvYmoudHlwZS5pbmRleE9mKCdIZWxwZXInKSA9PSAtMSkgewogICAgICAgICAgICAgICAgICAgIC8v5aaC5p6c5LiN5pivaGVscGVyCiAgICAgICAgICAgICAgICAgICAgc2NlbmUuYWRkKHRyYW5zZm9ybUNvbnRyb2wpOwogICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybUNvbnRyb2wuYXR0YWNoKG9iaik7CiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtQ29udHJvbC5kZXRhY2goKTsKICAgICAgICAgICAgICAgICAgICBzY2VuZS5yZW1vdmUodHJhbnNmb3JtQ29udHJvbCk7CiAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgUmVtb3ZlR3JpZDogZnVuY3Rpb24gUmVtb3ZlR3JpZCgpIHsKICAgICAgc2NlbmUucmVtb3ZlKGdyaWRIZWxwZXIpOyAvL2NvbnNvbGUubG9nKHNjZW5lKTsKICAgIH0sCiAgICBBZGRHcmlkOiBmdW5jdGlvbiBBZGRHcmlkKCkgewogICAgICBzY2VuZS5hZGQoZ3JpZEhlbHBlcik7CiAgICB9LAogICAgUmVtb3ZlQXhlczogZnVuY3Rpb24gUmVtb3ZlQXhlcygpIHsKICAgICAgc2NlbmUucmVtb3ZlKGF4ZXNIZWxwZXIpOwogICAgfSwKICAgIEFkZEF4ZXM6IGZ1bmN0aW9uIEFkZEF4ZXMoKSB7CiAgICAgIHNjZW5lLmFkZChheGVzSGVscGVyKTsKICAgIH0sCiAgICBSZW1vdmVMaWdodDogZnVuY3Rpb24gUmVtb3ZlTGlnaHQoKSB7CiAgICAgIHNjZW5lLnJlbW92ZShkaXJlY3RMaWdodEhlbHBlcik7CiAgICB9LAogICAgQWRkTGlnaHQ6IGZ1bmN0aW9uIEFkZExpZ2h0KCkgewogICAgICBzY2VuZS5hZGQoZGlyZWN0TGlnaHRIZWxwZXIpOwogICAgfSwKICAgIFJlbW92ZUNvbnRyb2w6IGZ1bmN0aW9uIFJlbW92ZUNvbnRyb2woKSB7CiAgICAgIHRyYW5zZm9ybUNvbnRyb2wuZGV0YWNoKCk7CiAgICAgIHNjZW5lLnJlbW92ZSh0cmFuc2Zvcm1Db250cm9sKTsKICAgICAgdmFyIG9iamVjdCA9IG51bGw7CiAgICAgIHRoaXMuJGJ1cy4kZW1pdCgnZ2V0RXZlbnQnLCBvYmplY3QpOwogICAgfSwKICAgIEFkZENvbnRyb2w6IGZ1bmN0aW9uIEFkZENvbnRyb2woKSB7CiAgICAgIHNjZW5lLmFkZCh0cmFuc2Zvcm1Db250cm9sKTsKICAgIH0sCiAgICBpbml0SGVscGVyOiBmdW5jdGlvbiBpbml0SGVscGVyKCkgewogICAgICAvL+WKoOWdkOagh+i9tOi+heWKqeW3peWFtwogICAgICBheGVzSGVscGVyID0gbmV3IEF4ZXNIZWxwZXIoNTAwKTsKCiAgICAgIGF4ZXNIZWxwZXIucmF5Y2FzdCA9IGZ1bmN0aW9uICgpIHt9OwoKICAgICAgYXhlc0hlbHBlci5uYW1lID0gIuWdkOagh+i9tCI7CiAgICAgIHNjZW5lLmFkZChheGVzSGVscGVyKTsKICAgICAgZ3JpZEhlbHBlciA9IG5ldyBHcmlkSGVscGVyKDUwMCwgNDAsICdyZ2IoMjAwLDIwMCwyMDApJywgJ3JnYigxMDAsMTAwLDEwMCknKTsKCiAgICAgIGdyaWRIZWxwZXIucmF5Y2FzdCA9IGZ1bmN0aW9uICgpIHt9OwoKICAgICAgZ3JpZEhlbHBlci5uYW1lID0gIue9keagvOadvyI7CiAgICAgIHNjZW5lLmFkZChncmlkSGVscGVyKTsgLy/lsIbkuKTkuKrovoXliqnlt6XlhbdyYXljYXN05bCE57q/5pa55rOV572u56m65L2/5b6X5YW256aB55So5Y+Y5o2i5o6n5Lu2CgogICAgICBkaXJlY3RMaWdodEhlbHBlciA9IG5ldyBEaXJlY3Rpb25hbExpZ2h0SGVscGVyKGRpcmVjdGlvbmFsTGlnaHQsIDcpOyAvL2RpcmVjdExpZ2h0SGVscGVyLnJheWNhc3Q9KCk9Pnt9OwoKICAgICAgZGlyZWN0TGlnaHRIZWxwZXIubmFtZSA9ICLlrprlkJHlhYnliqnmiYsiOwogICAgICBkaXJlY3RMaWdodEhlbHBlci50eXBlID0gIkRpcnRlY3Rpb25hbExpZ2h0SGVscGVyIjsKICAgICAgc2NlbmUuYWRkKGRpcmVjdExpZ2h0SGVscGVyKTsKICAgIH0sCiAgICBpbml0Q2FtZXJhQ29udHJvbDogZnVuY3Rpb24gaW5pdENhbWVyYUNvbnRyb2woKSB7CiAgICAgIGNhbWVyYUNvbnRyb2xzID0gbmV3IE9yYml0Q29udHJvbHMoY2FtZXJhLCByZW5kZXJlci5kb21FbGVtZW50KTsKICAgICAgY2FtZXJhQ29udHJvbHMuZW5hYmxlRGFtcGluZyA9IHRydWU7CiAgICAgIGNhbWVyYUNvbnRyb2xzLm1vdXNlQnV0dG9ucyA9IHsKICAgICAgICBMRUZUOiBudWxsLAogICAgICAgIE1JRERMRTogTU9VU0UuRE9MTFksCiAgICAgICAgUklHSFQ6IE1PVVNFLlJPVEFURSAvL+W3pumUruS4jeaOp+WItuebuOacugogICAgICAgIC8v5Y+z6ZSu5o6n5Yi25peL6L2sCiAgICAgICAgLy/kuK3pl7TplK7mjqfliLbnvKnmlL4KICAgICAgICAvL2N0cmwr5Y+z6ZSu5o6n5Yi255u45py65bmz56e7CgogICAgICB9OwogICAgfSwKICAgIGdldFBhcmVudHM6IGZ1bmN0aW9uIGdldFBhcmVudHMob2JqKSB7CiAgICAgIGlmIChvYmoucGFyZW50ID09IHNjZW5lKSB7CiAgICAgICAgcmV0dXJuIG9iajsKICAgICAgfSBlbHNlIHsKICAgICAgICB3aGlsZSAob2JqLnBhcmVudCAhPSBzY2VuZSkgewogICAgICAgICAgb2JqID0gb2JqLnBhcmVudDsKICAgICAgICB9CgogICAgICAgIHJldHVybiBvYmo7CiAgICAgIH0KICAgIH0sCiAgICBpbml0RXZlbnRNYW5hZ2VyOiBmdW5jdGlvbiBpbml0RXZlbnRNYW5hZ2VyKCkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIGV2ZW50TWFuYWdlciA9IG5ldyBFdmVudE1hbmFnZXIocmVuZGVyZXIuZG9tRWxlbWVudCwgc2NlbmUsIGNhbWVyYSwgb2Jqcyk7CiAgICAgIGV2ZW50TWFuYWdlci5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgICAvL+WFqOWxgGNhbnZhc+inpuWPkeaLv+WIsOeJqeS9k+aMh+mSiOmYn+WIlwogICAgICAgIGlmIChldmVudC5pbnRlcnNlY3Rpb24ubGVuZ3RoKSB7CiAgICAgICAgICB2YXIgb2JqZWN0ID0gZXZlbnQuaW50ZXJzZWN0aW9uWzBdLm9iamVjdDsKCiAgICAgICAgICBpZiAob2JqZWN0ID09IGNhY2hlb2JqZWN0cykgewogICAgICAgICAgICAvL+WmguaenOW9k+S4i+m8oOagh+i/mOWcqOWQjOS4gOS4queJqeS9k+S4i+S4jeinpuWPkeS7u+S9leaTjeS9nAogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9IGVsc2UgaWYgKG9iamVjdCAhPSBjYWNoZW9iamVjdHMgJiYgY2FjaGVvYmplY3RzKSB7CiAgICAgICAgICAgIC8v5aaC5p6c5b2T5LiL6byg5qCH5LuO5LiA5Liq54mp5L2T56e75Yqo5Yiw5Y+m5LiA5Liq54mp5L2T5pe2CiAgICAgICAgICAgIC8v5YWI6Kem5Y+R6aKc6Imy5oGi5aSN5YaN6Kem5Y+R5Y+Y6ImyCiAgICAgICAgICAgIGNhY2hlb2JqZWN0cy5tYXRlcmlhbC5jb2xvci5tdWx0aXBseVNjYWxhcigwLjUpOyAvL+i/lOWbnuWOn+adpeminOiJsgogICAgICAgICAgfSAvL+WmguaenOacieadkOi0qAoKCiAgICAgICAgICBpZiAob2JqZWN0Lm1hdGVyaWFsKSB7CiAgICAgICAgICAgIG9iamVjdC5tYXRlcmlhbC5jb2xvci5tdWx0aXBseVNjYWxhcigyKTsgLy/lj5jkuq4KCiAgICAgICAgICAgIGNhY2hlb2JqZWN0cyA9IG9iamVjdDsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgLy/lpoLmnpzpvKDmoIfnp7vliqjliLDlnLrmma/nqbrnmb3lpITmgaLlpI0KICAgICAgICAgIGlmIChjYWNoZW9iamVjdHMpIHsKICAgICAgICAgICAgY2FjaGVvYmplY3RzLm1hdGVyaWFsLmNvbG9yLm11bHRpcGx5U2NhbGFyKDAuNSk7IC8v6L+U5Zue5Y6f5p2l6aKc6ImyCiAgICAgICAgICB9CgogICAgICAgICAgY2FjaGVvYmplY3RzID0gbnVsbDsKICAgICAgICB9CiAgICAgIH0pOyAvLyAvL+eJqeS9k+aLvuWPluS6i+S7tuWkhOeQhgoKICAgICAgZXZlbnRNYW5hZ2VyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgICAgaWYgKHRyYW5zaW5nKSB7CiAgICAgICAgICB0cmFuc2luZyA9IGZhbHNlOwogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KCiAgICAgICAgaWYgKGV2ZW50LmludGVyc2VjdGlvbi5sZW5ndGgpIHsKICAgICAgICAgIHZhciBvYmplY3QgPSBldmVudC5pbnRlcnNlY3Rpb25bMF0ub2JqZWN0OwogICAgICAgICAgY29uc29sZS5sb2coZXZlbnQuaW50ZXJzZWN0aW9uKTsKCiAgICAgICAgICBpZiAob2JqZWN0LnR5cGUgPT0gIlRyYW5zZm9ybUNvbnRyb2xzUGxhbmUiKSB7CiAgICAgICAgICAgIC8v5aaC5p6c6YCJ5Y+W5Yiw5o6n5Yi25Zmo5pys6Lqr55u05o6l6Lez6L+HCiAgICAgICAgICAgIHRyYW5zZm9ybUNvbnRyb2wuZGV0YWNoKCk7CiAgICAgICAgICAgIHNjZW5lLnJlbW92ZSh0cmFuc2Zvcm1Db250cm9sKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIC8v6YCJ5Y+W5Yiw54mp5L2TCiAgICAgICAgICAgIGlmIChfdGhpczMuc3RhdGUuQ29udHJvbCA9PSB0cnVlKSB7CiAgICAgICAgICAgICAgLy/lj6rmnInlvZNDb250cm9s5bGe5oCn5byA5ZCv5pe25omN5ZCv55SodHJhbnNmb3JtQ29udHJvbAogICAgICAgICAgICAgIC8v5L2G5LiN5b2x5ZON5pi+56S6VHJlZeW9k+WJjeeCueS6rgogICAgICAgICAgICAgIHNjZW5lLmFkZCh0cmFuc2Zvcm1Db250cm9sKTsgLy90cmFuc2Zvcm1Db250cm9sLmF0dGFjaChvYmplY3QucGFyZW50IGluc3RhbmNlb2YgVEhSRUUuR3JvdXAgPyBvYmplY3QucGFyZW50IDogb2JqZWN0KTsKCiAgICAgICAgICAgICAgdHJhbnNmb3JtQ29udHJvbC5hdHRhY2goX3RoaXMzLmdldFBhcmVudHMob2JqZWN0KSk7CiAgICAgICAgICAgIH0gLy9sZXQgdXVpZD1vYmplY3QudXVpZDsKICAgICAgICAgICAgLy8gY29uc29sZS5sb2codXVpZCk7CgoKICAgICAgICAgICAgX3RoaXMzLiRidXMuJGVtaXQoJ2dldEV2ZW50JywgX3RoaXMzLmdldFBhcmVudHMob2JqZWN0KSk7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIC8v5b2T54K55Ye75Yiw5Zy65pmv56m655m95aSE5pe256aB55So5Y+v5o6n5Lu2CiAgICAgICAgICB0cmFuc2Zvcm1Db250cm9sLmRldGFjaCgpOwogICAgICAgICAgc2NlbmUucmVtb3ZlKHRyYW5zZm9ybUNvbnRyb2wpOwogICAgICAgICAgdmFyIF9vYmplY3QgPSBudWxsOwoKICAgICAgICAgIF90aGlzMy4kYnVzLiRlbWl0KCdnZXRFdmVudCcsIF9vYmplY3QpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgLy/lsITnur/mi77lj5blmagKICAgIGluaXRMaWdodDogZnVuY3Rpb24gaW5pdExpZ2h0KCkgewogICAgICBkaXJlY3Rpb25hbExpZ2h0ID0gbmV3IFRIUkVFLkRpcmVjdGlvbmFsTGlnaHQoMHhmZmZmZmYpOyAvL+a3u+WKoOS6huS4gOS4queZveiJsueahOW5s+ihjOWFiQoKICAgICAgZGlyZWN0aW9uYWxMaWdodC5wb3NpdGlvbi5zZXQoMjAsIDUwLCA1MCk7IC8v6K6+572u5YWJ55qE5pa55ZCRCgogICAgICBkaXJlY3Rpb25hbExpZ2h0Lm5hbWUgPSAi5bmz6KGM5YWJIjsKICAgICAgc2NlbmUuYWRkKGRpcmVjdGlvbmFsTGlnaHQpOyAvL+a3u+WKoOWIsOWcuuaZrwoKICAgICAgb2Jqcy5wdXNoKGRpcmVjdGlvbmFsTGlnaHQpOwogICAgICBhbWJpZW50TGlnaHQgPSBuZXcgVEhSRUUuQW1iaWVudExpZ2h0KDB4MjIyMjIyKTsKICAgICAgYW1iaWVudExpZ2h0Lm5hbWUgPSAi5YWo5bGA5YWJIjsgLy/mt7vliqDkuIDkuKrlhajlsYDnjq/looPlhYkKCiAgICAgIHNjZW5lLmFkZChhbWJpZW50TGlnaHQpOwogICAgICBvYmpzLnB1c2goYW1iaWVudExpZ2h0KTsKICAgIH0sCiAgICAvLyBpbml0UmF5Y2FzdGVyKCl7CiAgICAvLyAgICAgLy8gcmF5Y2FzdGVyPW5ldyBUSFJFRS5SYXljYXN0ZXIoKTsKICAgIC8vIH0sCiAgICAvL+Wvueixoee8k+WtmOWIneWni+WMlgogICAgaW5pdENhY2hlOiBmdW5jdGlvbiBpbml0Q2FjaGUoKSB7CiAgICAgIGNhY2hlb2JqZWN0cyA9IG51bGw7CiAgICB9LAogICAgaW5pdENvbnRyb2w6IGZ1bmN0aW9uIGluaXRDb250cm9sKCkgewogICAgICAvL+WPr+inhuWMluWPmOaNouaOp+S7tuWvueixoQogICAgICB0cmFuc2Zvcm1Db250cm9sID0gbmV3IFRyYW5zZm9ybUNvbnRyb2xzKGNhbWVyYSwgcmVuZGVyZXIuZG9tRWxlbWVudCk7CiAgICAgIHRyYW5zZm9ybUNvbnRyb2wudHlwZSA9ICJUcmFuc2Zvcm1Db250cm9sIjsgLy8gc2NlbmUuYWRkKCB0cmFuc2Zvcm1Db250cm9sICk7Ly/mjqfku7blr7nosaHmt7vliqDliLDlnLrmma/lr7nosaEKCiAgICAgIHRyYW5zZm9ybUNvbnRyb2wuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VEb3duJywgZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgICAgLy/liqDkuIDkuKrlj4LmlbDmjqfliLbpmLLmraLngrnlh7vkuovku7blkozmi5bmi73kuovku7blhrLnqoEKICAgICAgICB0cmFuc2luZyA9IHRydWU7CiAgICAgIH0pOyAvL+mUruebmOaOp+WItuWPr+inhuWMluWPmOaNouaOp+S7tuWKn+iDvQoKICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgICBpZiAoZXZlbnQua2V5ID09ICdlJykgewogICAgICAgICAgLy9F6ZSu57yp5pS+CiAgICAgICAgICB0cmFuc2Zvcm1Db250cm9sLm1vZGUgPSAic2NhbGUiOwogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KCiAgICAgICAgaWYgKGV2ZW50LmtleSA9PSAncicpIHsKICAgICAgICAgIC8vUumUruaXi+i9rAogICAgICAgICAgdHJhbnNmb3JtQ29udHJvbC5tb2RlID0gInJvdGF0ZSI7CiAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQoKICAgICAgICBpZiAoZXZlbnQua2V5ID09ICd0JykgewogICAgICAgICAgLy9U6ZSu5bmz56e7CiAgICAgICAgICB0cmFuc2Zvcm1Db250cm9sLm1vZGUgPSAidHJhbnNsYXRlIjsKICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIExvYWRFbGVtZW50OiBmdW5jdGlvbiBMb2FkRWxlbWVudCh0eXBlKSB7CiAgICAgIGlmICh0eXBlID09ICdtb2RlbC0xJykgewogICAgICAgIHRoaXMuaW5pdExpbmUoKTsKICAgICAgICB0aGlzLnNjZW5lQ2hhbmdlZEV2ZW50KCk7CiAgICAgIH0gZWxzZSBpZiAodHlwZSA9PSAnbW9kZWwtMicpIHsKICAgICAgICB0aGlzLmluaXRCYXJzKCk7CiAgICAgICAgdGhpcy5zY2VuZUNoYW5nZWRFdmVudCgpOwogICAgICB9IGVsc2UgaWYgKHR5cGUgPT0gJ21vZGVsLTMnKSB7CiAgICAgICAgc2NlbmUuYmFja2dyb3VuZCA9IG5ldyBUSFJFRS5DdWJlVGV4dHVyZUxvYWRlcigpLmxvYWQoW3JlcXVpcmUoJ0AvYXNzZXRzL3NreWJveC9CbHVlUmVkL0xlZnQucG5nJyksIHJlcXVpcmUoJ0AvYXNzZXRzL3NreWJveC9CbHVlUmVkL1JpZ2h0LnBuZycpLCByZXF1aXJlKCdAL2Fzc2V0cy9za3lib3gvQmx1ZVJlZC9VcC5wbmcnKSwgcmVxdWlyZSgnQC9hc3NldHMvc2t5Ym94L0JsdWVSZWQvRG93bi5wbmcnKSwgcmVxdWlyZSgnQC9hc3NldHMvc2t5Ym94L0JsdWVSZWQvRnJvbnQucG5nJyksIHJlcXVpcmUoJ0AvYXNzZXRzL3NreWJveC9CbHVlUmVkL0JhY2sucG5nJyldKTsKICAgICAgfQogICAgfSwKICAgIEFkZEVsZW1lbnQ6IGZ1bmN0aW9uIEFkZEVsZW1lbnQodHlwZSkgewogICAgICBpZiAodHlwZSA9PSAnbG9uZWx5UGxhbmV0JykgewogICAgICAgIHRoaXMuaW5pdEJveCgpOwogICAgICB9IGVsc2UgaWYgKHR5cGUgPT0gJ2JlemllckN1cnZlJykgewogICAgICAgIHRoaXMuaW5pdENvbmUoKTsKICAgICAgfSBlbHNlIGlmICh0eXBlID09ICdldGhlcmVhVG9uZScpIHsKICAgICAgICB0aGlzLmluaXRDeWxpbmRlcigpOwogICAgICB9IGVsc2UgaWYgKHR5cGUgPT0gJ2VsZWN0cm9uaWNNdXNpYycpIHsKICAgICAgICB0aGlzLmluaXRTcGhlcmUoKTsKICAgICAgfSBlbHNlIGlmICh0eXBlID09ICdibGFzdFN1Yndvb2ZlcicpIHsKICAgICAgICB0aGlzLmluaXRUb3J1cygpOwogICAgICB9CiAgICB9LAogICAgaW5pdEJveDogZnVuY3Rpb24gaW5pdEJveCgpIHsKICAgICAgdmFyIG1hdGVyaWFsID0gbmV3IFRIUkVFLk1lc2hTdGFuZGFyZE1hdGVyaWFsKCk7CiAgICAgIG1hdGVyaWFsLmNvbG9yID0gbmV3IENvbG9yKDAuOCwgMC4yLCAwLjIpOwogICAgICB2YXIgYm94ID0gbmV3IFRIUkVFLk1lc2gobmV3IFRIUkVFLkJveEdlb21ldHJ5KDUsIDUsIDUpLCBtYXRlcmlhbCk7CiAgICAgIGJveC5wb3NpdGlvbi5zZXQoLTUwLCAyMCwgMCk7CiAgICAgIGJveC5uYW1lID0gIuebkuWtkCI7CiAgICAgIHNjZW5lLmFkZChib3gpOwogICAgICBvYmpzLnB1c2goYm94KTsKICAgICAgdGhpcy5zY2VuZUNoYW5nZWRFdmVudCgpOwogICAgfSwKICAgIGluaXRDb25lOiBmdW5jdGlvbiBpbml0Q29uZSgpIHsKICAgICAgdmFyIG1hdGVyaWFsID0gbmV3IFRIUkVFLk1lc2hTdGFuZGFyZE1hdGVyaWFsKCk7CiAgICAgIG1hdGVyaWFsLmNvbG9yID0gbmV3IENvbG9yKDAuNywgMC42LCAwLjYpOwogICAgICB2YXIgY29uZSA9IG5ldyBUSFJFRS5NZXNoKG5ldyBUSFJFRS5Db25lR2VvbWV0cnkoNSwgMjAsIDMyKSwgbWF0ZXJpYWwpOwogICAgICBjb25lLnBvc2l0aW9uLnNldCgyMCwgMjAsIDApOwogICAgICBjb25lLm5hbWUgPSAi5ZyG6ZSlIjsKICAgICAgc2NlbmUuYWRkKGNvbmUpOwogICAgICBvYmpzLnB1c2goY29uZSk7CiAgICAgIHRoaXMuc2NlbmVDaGFuZ2VkRXZlbnQoKTsgLy9yZW5kZXJlci5yZW5kZXIoc2NlbmUsY2FtZXJhKTsvL+a4suafkwogICAgfSwKICAgIGluaXRDeWxpbmRlcjogZnVuY3Rpb24gaW5pdEN5bGluZGVyKCkgewogICAgICB2YXIgbWF0ZXJpYWwgPSBuZXcgVEhSRUUuTWVzaFN0YW5kYXJkTWF0ZXJpYWwoKTsKICAgICAgbWF0ZXJpYWwuY29sb3IgPSBuZXcgQ29sb3IoMC44LCAwLjcsIDAuMik7CiAgICAgIHZhciBjeWxpbmRlciA9IG5ldyBUSFJFRS5NZXNoKG5ldyBUSFJFRS5DeWxpbmRlckdlb21ldHJ5KDUsIDUsIDIwLCAzMiksIG1hdGVyaWFsKTsKICAgICAgY3lsaW5kZXIucG9zaXRpb24uc2V0KDUwLCAyMCwgMCk7CiAgICAgIGN5bGluZGVyLm5hbWUgPSAi5ZyG5p+xIjsKICAgICAgc2NlbmUuYWRkKGN5bGluZGVyKTsKICAgICAgb2Jqcy5wdXNoKGN5bGluZGVyKTsKICAgICAgdGhpcy5zY2VuZUNoYW5nZWRFdmVudCgpOyAvL3JlbmRlcmVyLnJlbmRlcihzY2VuZSxjYW1lcmEpOy8v5riy5p+TCiAgICB9LAogICAgaW5pdFNwaGVyZTogZnVuY3Rpb24gaW5pdFNwaGVyZSgpIHsKICAgICAgdmFyIG1hdGVyaWFsID0gbmV3IFRIUkVFLk1lc2hTdGFuZGFyZE1hdGVyaWFsKCk7CiAgICAgIG1hdGVyaWFsLmNvbG9yID0gbmV3IENvbG9yKDAuMiwgMC43LCAwLjIpOwogICAgICB2YXIgc3BoZXJlID0gbmV3IFRIUkVFLk1lc2gobmV3IFRIUkVFLlNwaGVyZUdlb21ldHJ5KDUsIDMyLCAzMiksIG1hdGVyaWFsKTsKICAgICAgc3BoZXJlLnBvc2l0aW9uLnNldCgtMjAsIC0yMCwgMCk7CiAgICAgIHNwaGVyZS5uYW1lID0gIueQgyI7CiAgICAgIHNjZW5lLmFkZChzcGhlcmUpOwogICAgICBvYmpzLnB1c2goc3BoZXJlKTsKICAgICAgdGhpcy5zY2VuZUNoYW5nZWRFdmVudCgpOwogICAgfSwKICAgIGluaXRUb3J1czogZnVuY3Rpb24gaW5pdFRvcnVzKCkgewogICAgICB2YXIgbWF0ZXJpYWwgPSBuZXcgVEhSRUUuTWVzaFN0YW5kYXJkTWF0ZXJpYWwoKTsKICAgICAgbWF0ZXJpYWwuY29sb3IgPSBuZXcgQ29sb3IoMC4zLCAwLjEsIDAuOSk7CiAgICAgIHZhciB0b3J1cyA9IG5ldyBUSFJFRS5NZXNoKG5ldyBUSFJFRS5Ub3J1c0dlb21ldHJ5KDEwLCAzLCAxNiwgMTAwKSwgbWF0ZXJpYWwpOwogICAgICB0b3J1cy5wb3NpdGlvbi5zZXQoNTAsIC0yMCwgMCk7CiAgICAgIHRvcnVzLm5hbWUgPSAi5ZyG546vIjsKICAgICAgc2NlbmUuYWRkKHRvcnVzKTsKICAgICAgb2Jqcy5wdXNoKHRvcnVzKTsKICAgICAgdGhpcy5zY2VuZUNoYW5nZWRFdmVudCgpOyAvL3JlbmRlcmVyLnJlbmRlcihzY2VuZSxjYW1lcmEpOy8v5riy5p+TCiAgICB9LAogICAgaW5pdDogZnVuY3Rpb24gaW5pdCgpIHsKICAgICAgdGhpcy5pbml0UmVuZGVyZXIoKTsKICAgICAgdGhpcy5pbml0U2NlbmUoKTsKICAgICAgdGhpcy5pbml0Q2FtZXJhKCk7CiAgICAgIHRoaXMuaW5pdExpZ2h0KCk7CiAgICAgIHRoaXMuaW5pdE1lc2goKTsgLy8gdGhpcy5pbml0UmF5Y2FzdGVyKCk7CgogICAgICB0aGlzLmluaXRDYWNoZSgpOwogICAgICB0aGlzLmluaXRDYW1lcmFDb250cm9sKCk7CiAgICAgIHRoaXMuaW5pdENvbnRyb2woKTsKICAgICAgdGhpcy5pbml0SGVscGVyKCk7CiAgICAgIHRoaXMud2F0Y2hIZWxwZXIoKTsgLy8gdGhpcy5pbml0TW91c2VFdmVudCgpOwoKICAgICAgdGhpcy5pbml0RXZlbnRNYW5hZ2VyKCk7CiAgICAgIHRoaXMuaW5pdFN0YXRzKCk7IC8vIGluaXREYXRHVUkoKTsKCiAgICAgIHRoaXMuc2NlbmVDaGFuZ2VkRXZlbnQoKTsKICAgICAgdGhpcy5hbmltYXRlKCk7CiAgICAgIGNvbnNvbGUubG9nKHNjZW5lKTsKICAgIH0sCiAgICB3YXRjaEhlbHBlcjogZnVuY3Rpb24gd2F0Y2hIZWxwZXIoKSB7CiAgICAgIHZhciBzdGF0ZSA9IHRoaXMuc3RhdGU7CiAgICAgIHRoaXMuJGJ1cy4kZW1pdCgnc3RhdGVDb250cm9sJywgc3RhdGUpOwogICAgfSwKICAgIHNjZW5lQ2hhbmdlZEV2ZW50OiBmdW5jdGlvbiBzY2VuZUNoYW5nZWRFdmVudCgpIHsKICAgICAgdmFyIHNjZW5lbGlzdCA9IHNjZW5lLmNoaWxkcmVuOwogICAgICB0aGlzLiRidXMuJGVtaXQoJ3NjZW5lQ2hhbmdlZCcsIHNjZW5lbGlzdCk7CiAgICB9LAogICAgLy/pvKDmoIfkuovliqHlpITnkIbvvIjljIXmi6zngrnlh7vkuovku7bjgIHnp7vliqjkuovku7bvvIkKICAgIC8vIGluaXRNb3VzZUV2ZW50KCl7CiAgICAvL+e7mWNhbnZhc+Wvueixoei/m+ihjOm8oOagh+WdkOagh+i9rOaNogogICAgLy8gbW91c2U9bmV3IFZlY3RvcjIoKTsKICAgIC8vIGxldCBkb21YPTA7CiAgICAvLyBsZXQgZG9tWT0wOwogICAgLy8gbGV0IHdpZHRoPTA7CiAgICAvLyBsZXQgaGVpZ2h0PTA7CiAgICAvLyByZW5kZXJlci5kb21FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsKGV2ZW50KT0+ewogICAgLy8gICAgIC8vY29uc29sZS5sb2coZXZlbnQub2Zmc2V0WCxldmVudC5vZmZzZXRZKTsKICAgIC8vICAgICBkb21YPWV2ZW50Lm9mZnNldFg7CiAgICAvLyAgICAgZG9tWT1ldmVudC5vZmZzZXRZOwogICAgLy8gICAgIHdpZHRoPXJlbmRlcmVyLmRvbUVsZW1lbnQub2Zmc2V0V2lkdGg7CiAgICAvLyAgICAgaGVpZ2h0PXJlbmRlcmVyLmRvbUVsZW1lbnQub2Zmc2V0SGVpZ2h0OwogICAgLy8gICAgIG1vdXNlLng9ZG9tWC93aWR0aCoyLTE7CiAgICAvLyAgICAgbW91c2UueT0tZG9tWSoyL2hlaWdodCsxOwogICAgLy8gICAgIC8vIGNvbnNvbGUubG9nKG1vdXNlLngsbW91c2UueSk7CiAgICAvLyAgICAgcmF5Y2FzdGVyLnNldEZyb21DYW1lcmEobW91c2UsY2FtZXJhKTsKICAgIC8vICAgICAvL+mYsuatouaOp+WItuWZqOiiq+mAieS4rQogICAgLy8gICAgIHNjZW5lLnJlbW92ZSh0cmFuc2Zvcm1Db250cm9sKTsKICAgIC8vICAgICBjb25zdCBpbnRlcnNlY3Rpb249cmF5Y2FzdGVyLmludGVyc2VjdE9iamVjdHMoc2NlbmUuY2hpbGRyZW4sZmFsc2UpOwogICAgLy8gICAgIC8v5oqK5omA5pyJ5pyJY2hpbGRyZW7nmoTlsY/olL3mjonvvIzlj6/ku6XpmLLmraLlr7loZWxwZXLov5vooYzmjqfliLYKICAgIC8vICAgICBzY2VuZS5hZGQodHJhbnNmb3JtQ29udHJvbCk7CiAgICAvLyAgICAgaWYoaW50ZXJzZWN0aW9uLmxlbmd0aCl7CiAgICAvLyAgICAgICAgIC8v5aaC5p6c5ou+5Y+W5Yiw5p2Q6LSo54mp5L2TCiAgICAvLyAgICAgICAgIGNvbnN0IG9iamVjdD1pbnRlcnNlY3Rpb25bMF0ub2JqZWN0OwogICAgLy8gICAgICAgICAvL+WmguaenOW9k+S4i+eJqeS9k+S4jeaYr+S4iuasoee8k+WtmOeJqeS9k++8jOivtOaYjuaYr+S7juS4jeWQjOeJqeS9k+S4iuenu+WIsOW9k+WJjeeJqeS9k+S4iuinpuWPkW1vdXNlZW50ZXLkuovku7YKICAgIC8vICAgICAgICAgaWYob2JqZWN0IT1jYWNoZW9iamVjdHMpewogICAgLy8gICAgICAgICAgICAgaWYoY2FjaGVvYmplY3RzKXsKICAgIC8vICAgICAgICAgICAgICAgICAvL+W9k+m8oOagh+S7juS4gOS4queJqeS9k+enu+WKqOWIsOWPpuS4gOS4queJqeS9k+aXtu+8jOWFiOinpuWPkeS5i+WJjee8k+WtmOeJqeS9k+eahG1vdXNlbGVhdmXmlrnms5UKICAgIC8vICAgICAgICAgICAgICAgICAvL+WGjeinpuWPkeW9k+WJjeeJqeS9k+eahG1vdXNlZW50ZXLmlrnms5UKICAgIC8vICAgICAgICAgICAgICAgICBjYWNoZW9iamVjdHMuZGlzcGF0Y2hFdmVudCh7CiAgICAvLyAgICAgICAgICAgICB0eXBlOidtb3VzZWxlYXZlJwogICAgLy8gICAgICAgICB9KTsKICAgIC8vICAgICAgICAgICAgIH0KICAgIC8vICAgICAgICAgICAgICAgb2JqZWN0LmRpc3BhdGNoRXZlbnQoewogICAgLy8gICAgICAgICAgICAgdHlwZTonbW91c2VlbnRlcicKICAgIC8vICAgICAgICAgfSk7CiAgICAvLyAgICAgICAgIH0vL+WmguaenOebuOetieinpuWPkW1vdXNlbW92ZeaWueazleW+l+WIsOeJqeS9k+WdkOaghyjpvKDmoIfkuIDnm7TlnKjniankvZPkuIrnp7vliqgpCiAgICAvLyAgICAgICAgIGVsc2UgaWYob2JqZWN0PT1jYWNoZW9iamVjdHMpewogICAgLy8gICAgICAgICAgICAgb2JqZWN0LmRpc3BhdGNoRXZlbnQoewogICAgLy8gICAgICAgICAgICAgdHlwZTonbW91c2Vtb3ZlJwogICAgLy8gICAgICAgICB9KTsKICAgIC8vICAgICAgICAgfQogICAgLy8gICAgICAgICBjYWNoZW9iamVjdHM9b2JqZWN0OwogICAgLy8gICAgIH1lbHNlewogICAgLy8gICAgICAgICAvL+W9k+m8oOagh+S7juS4gOS4queJqeS9k+enu+WKqOWIsOWwhOe6v+aLvuWPluWZqOaLvuWPluS4jeWIsOeJqeS9k+aXtuS5n+S8muinpuWPkeS5i+WJjeeahOeJqeS9k+eahG1vdXNlbGVhdmXmlrnms5UKICAgIC8vICAgICAgICAgIGlmKGNhY2hlb2JqZWN0cyl7CiAgICAvLyAgICAgICAgICAgICAgICAgLy/lvZPpvKDmoIfku47kuIDkuKrniankvZPnp7vliqjliLDlj6bkuIDkuKrniankvZPml7bvvIzlhYjop6blj5HkuYvliY3nvJPlrZjniankvZPnmoRtb3VzZWxlYXZl5pa55rOVCiAgICAvLyAgICAgICAgICAgICAgICAgLy/lho3op6blj5HlvZPliY3niankvZPnmoRtb3VzZWVudGVy5pa55rOVCiAgICAvLyAgICAgICAgICAgICAgICAgY2FjaGVvYmplY3RzLmRpc3BhdGNoRXZlbnQoewogICAgLy8gICAgICAgICAgICAgdHlwZTonbW91c2VsZWF2ZScKICAgIC8vICAgICAgICAgfSk7CiAgICAvLyAgICAgfQogICAgLy8gICAgICAgICBjYWNoZW9iamVjdHM9bnVsbDsKICAgIC8vICAgICB9CiAgICAvLyB9KTsKICAgIC8vIC8vIC8v54mp5L2T5ou+5Y+W5LqL5Lu25aSE55CGCiAgICAvLyByZW5kZXJlci5kb21FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywoZXZlbnQpPT57CiAgICAvLyAgICAgaWYodHJhbnNpbmcpewogICAgLy8gICAgICAgICB0cmFuc2luZz1mYWxzZTsKICAgIC8vICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgLy8gICAgIH0KICAgIC8vICAgICAvLyByYXljYXN0ZXIuc2V0RnJvbUNhbWVyYShtb3VzZSxjYW1lcmEpOwogICAgLy8gICAgIC8vIC8v6Ziy5q2i5o6n5Yi25Zmo6KKr6YCJ5LitCiAgICAvLyAgICAgLy8gc2NlbmUucmVtb3ZlKHRyYW5zZm9ybUNvbnRyb2wpOwogICAgLy8gICAgIC8vIGNvbnN0IGludGVyc2VjdGlvbj1yYXljYXN0ZXIuaW50ZXJzZWN0T2JqZWN0cyhzY2VuZS5jaGlsZHJlbixmYWxzZSk7CiAgICAvLyAgICAgLy8gLy/miormiYDmnInmnIljaGlsZHJlbueahOWxj+iUveaOie+8jOWPr+S7pemYsuatouWvuWhlbHBlcui/m+ihjOaOp+WItgogICAgLy8gICAgIC8vIHNjZW5lLmFkZCh0cmFuc2Zvcm1Db250cm9sKTsKICAgIC8vICAgICAvLyBpZihpbnRlcnNlY3Rpb24ubGVuZ3RoKXsKICAgIC8vICAgICAvLyAgICAgY29uc3Qgb2JqZWN0PWludGVyc2VjdGlvblswXS5vYmplY3Q7CiAgICAvLyAgICAgLy8gICAgIHRyYW5zZm9ybUNvbnRyb2wuYXR0YWNoKG9iamVjdCk7CiAgICAvLyAgICAgLy8gfWVsc2V7CiAgICAvLyAgICAgLy8gICAgIC8v5b2T54K55Ye75Yiw5Zy65pmv56m655m95aSE5pe256aB55So5Y+v5o6n5Lu2CiAgICAvLyAgICAgLy8gICAgdHJhbnNmb3JtQ29udHJvbC5kZXRhY2goKTsKICAgIC8vICAgICAvLyB9CiAgICAvLyB9KTsKICAgIC8vIH0sCiAgICBpbml0U3RhdHM6IGZ1bmN0aW9uIGluaXRTdGF0cygpIHsKICAgICAgc3RhdHMgPSBuZXcgU3RhdHMoKTsKICAgICAgc3RhdHMuZG9tRWxlbWVudC5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7IC8v57ud5a+55Z2Q5qCHICAKCiAgICAgIHN0YXRzLmRvbUVsZW1lbnQuc3R5bGUubGVmdCA9ICcwcHgnOyAvLyAoMCwwKXB4LOW3puS4iuinkiAgCgogICAgICBzdGF0cy5kb21FbGVtZW50LnN0eWxlLnRvcCA9ICcwcHgnOwogICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnd2ViZ2wnKS5hcHBlbmRDaGlsZChzdGF0cy5kb21FbGVtZW50KTsKICAgIH0sCiAgICB1cGRhdGVQb3NpdGlvbjogZnVuY3Rpb24gdXBkYXRlUG9zaXRpb24oKSB7CiAgICAgIG1lc2gucG9zaXRpb24uc2V0KGNvbnRyb2xzLnBvc2l0aW9uWCwgY29udHJvbHMucG9zaXRpb25ZLCBjb250cm9scy5wb3NpdGlvblopOwogICAgfSwKICAgIC8v5Yid5aeL5YyW5riy5p+T5ZmoCiAgICBpbml0UmVuZGVyZXI6IGZ1bmN0aW9uIGluaXRSZW5kZXJlcigpIHsKICAgICAgcmVuZGVyZXIgPSBuZXcgVEhSRUUuV2ViR0xSZW5kZXJlcih7CiAgICAgICAgYW50aWFsaWFzOiB0cnVlCiAgICAgIH0pOyAvL+WunuS+i+WMlua4suafk+WZqAogICAgICAvL+aKl+mUr+m9v+W8gOWQrwoKICAgICAgcmVuZGVyZXIuc2V0U2l6ZSh3aW5kb3cuaW5uZXJXaWR0aCAqIDAuNywgd2luZG93LmlubmVySGVpZ2h0ICogMC43KTsgLy/orr7nva7lrr3pq5gKCiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd3ZWJnbCcpLmFwcGVuZENoaWxkKHJlbmRlcmVyLmRvbUVsZW1lbnQpOyAvL+a3u+WKoOWIsGRvbQogICAgfSwKICAgIC8v5Yid5aeL5YyW5Zy65pmvCiAgICBpbml0U2NlbmU6IGZ1bmN0aW9uIGluaXRTY2VuZSgpIHsKICAgICAgc2NlbmUgPSBuZXcgVEhSRUUuU2NlbmUoKTsgLy/lrp7kvovljJblnLrmma8KCiAgICAgIG9ianMgPSBbXTsKICAgICAgc2NlbmUuYmFja2dyb3VuZCA9IG5ldyBUSFJFRS5DdWJlVGV4dHVyZUxvYWRlcigpLmxvYWQoW3JlcXVpcmUoJ0AvYXNzZXRzL3NreWJveC9HYWxheHkvUmlnaHQuanBnJyksIHJlcXVpcmUoJ0AvYXNzZXRzL3NreWJveC9HYWxheHkvTGVmdC5qcGcnKSwgcmVxdWlyZSgnQC9hc3NldHMvc2t5Ym94L0dhbGF4eS9VcC5qcGcnKSwgcmVxdWlyZSgnQC9hc3NldHMvc2t5Ym94L0dhbGF4eS9Eb3duLmpwZycpLCByZXF1aXJlKCdAL2Fzc2V0cy9za3lib3gvR2FsYXh5L0Zyb250LmpwZycpLCByZXF1aXJlKCdAL2Fzc2V0cy9za3lib3gvR2FsYXh5L0JhY2suanBnJyldKTsgLy8gdGhpcy4kYnVzLiRlbWl0KCdzY2VuZUNoYW5nZWQnLHNjZW5lKTsKICAgIH0sCiAgICAvL+WIneWni+WMluebuOacugogICAgaW5pdENhbWVyYTogZnVuY3Rpb24gaW5pdENhbWVyYSgpIHsKICAgICAgY2FtZXJhID0gbmV3IFRIUkVFLlBlcnNwZWN0aXZlQ2FtZXJhKDQ1LCB3aW5kb3cuaW5uZXJXaWR0aCAvIHdpbmRvdy5pbm5lckhlaWdodCwgMC4xLCAyMDApOyAvL+WunuS+i+WMluebuOacuuOAkQoKICAgICAgY2FtZXJhLnBvc2l0aW9uLnNldCgwLCAwLCAxNTApOwogICAgfSwKICAgIC8v5Yib5bu65qih5Z6LCiAgICBpbml0TWVzaDogZnVuY3Rpb24gaW5pdE1lc2goKSB7CiAgICAgIC8vIGdlb21ldHJ5ID0gbmV3IFRIUkVFLkJveEdlb21ldHJ5KDUsIDUsIDUgKTsgLy/liJvlu7rlh6DkvZXkvZMKICAgICAgLy8gdmFyIG1hdGVyaWFsPW5ldyBUSFJFRS5NZXNoU3RhbmRhcmRNYXRlcmlhbCgpOwogICAgICAvLyBtYXRlcmlhbC5jb2xvcj1uZXcgQ29sb3IoMC43LDAuMiwwLjIpOyAvL+WIm+W7uuadkOi0qAogICAgICAvLyBtZXNoID0gbmV3IFRIUkVFLk1lc2goIGdlb21ldHJ5LCBtYXRlcmlhbCApOyAvL+WIm+W7uue9keagvAogICAgICAvLyBtZXNoLm5hbWU9IuebkuWtkCI7CiAgICAgIC8vIHNjZW5lLmFkZCggbWVzaCApOyAvL+Wwhue9keagvOa3u+WKoOWIsOWcuuaZrwogICAgICAvLyB0aGlzLmluaXRDb25lKCk7CiAgICAgIC8vIHRoaXMuaW5pdEJveCgpOwogICAgICB0aGlzLmluaXRMaW5lKCk7CiAgICAgIHRoaXMuaW5pdEJhcnMoKTsKICAgIH0sCiAgICBpbml0QmFyczogZnVuY3Rpb24gaW5pdEJhcnMoKSB7CiAgICAgIHRoaXMuYXVkaW9CYXJzKDI1LCAxMjgpOwogICAgfSwKICAgIGF1ZGlvQmFyczogZnVuY3Rpb24gYXVkaW9CYXJzKHJhZGl1cywgY291bnREYXRhKSB7CiAgICAgIHZhciBiYXJHcm91cCA9IG5ldyBUSFJFRS5Hcm91cCgpOwogICAgICB2YXIgUiA9IHJhZGl1czsKICAgICAgdmFyIE4gPSBjb3VudERhdGE7CgogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IE47IGkrKykgewogICAgICAgIHZhciBtaW5Hcm91cCA9IG5ldyBUSFJFRS5Hcm91cCgpOwogICAgICAgIHZhciBib3ggPSBuZXcgVEhSRUUuQm94R2VvbWV0cnkoMSwgMSwgMSk7CgogICAgICAgIHZhciBfbWF0ZXJpYWwgPSBuZXcgVEhSRUUuTWVzaFBob25nTWF0ZXJpYWwoewogICAgICAgICAgY29sb3I6IDB4MDBmZmZmCiAgICAgICAgfSk7IC8vIOadkOi0qOWvueixoQoKCiAgICAgICAgdmFyIG0gPSBpOwoKICAgICAgICB2YXIgX21lc2ggPSBuZXcgVEhSRUUuTWVzaChib3gsIF9tYXRlcmlhbCk7CgogICAgICAgIF9tZXNoLnBvc2l0aW9uLnkgPSAwLjU7CiAgICAgICAgbWluR3JvdXAuYWRkKF9tZXNoKTsKICAgICAgICBtaW5Hcm91cC5wb3NpdGlvbi5zZXQoTWF0aC5zaW4obSAqIE1hdGguUEkgLyBOICogMikgKiBSLCBNYXRoLmNvcyhtICogTWF0aC5QSSAvIE4gKiAyKSAqIFIsIDApOwogICAgICAgIG1pbkdyb3VwLnJvdGF0aW9uLnogPSAtbSAqIE1hdGguUEkgLyBOICogMjsKICAgICAgICBiYXJHcm91cC5hZGQobWluR3JvdXApOwogICAgICB9CgogICAgICBiYXJHcm91cC5uYW1lID0gIumfs+mikeiwsSI7CiAgICAgIGJhckdyb3VwLnR5cGUgPSAiQmFyR3JvdXAiOwogICAgICBzY2VuZS5hZGQoYmFyR3JvdXApOwogICAgICBvYmpzLnB1c2goYmFyR3JvdXApOwogICAgfSwKCiAgICAvKiDov5nph4zmnInkuKrljp/nkIbvvIzkuLrku4DkuYjlr7npn7PpopHnur/lkozpn7PpopHnu4Tov5vooYznp7vliqjml4vovazmk43kvZzlkI4g5L6d54S25Y+v5Lul5qC55o2u5Yid5aeL5YyW55qE6Z+z6aKR5pWw5o2u6L+b6KGM6YeN55S7DQogICAg5oyJ5Y6f55CG5p2l6K+05bqU6K+l6KaB6YeN5paw6K6h566X5ZCE5Liq57q/5q6155qE5Z2Q5qCH5YC86L+b6KGM6YeN57uY77yM5Li65LuA5LmI6L+Z6YeM5a+85Ye65pWw5o2u5ZCO5L6d54S25Y+v5Lul5Yip55So5Yid5aeL5YyW55qEDQogICAgYmFyTm9kZXPov5vooYzkuIDkuKrnur/mrrXorqHnrpfph43lm57lkKfvvIzljp/lm6DmmK/lm6DkuLrvvIzlnKjnvJbovpHlmajkuK3lr7nkuIDkuKrnu4Tlr7nosaHov5vooYzmk43kvZzml7bvvIzlhbblkITlrZDlr7nosaENCiAgICDnmoTlnZDmoIflubbkuI3kvJrlj5jljJbvvIzlj6rmlLnlj5jov5nkuKrnu4Tlr7nosaHnmoTkvY3nva7jgIHml4vovaznrYnkv6Hmga/vvIzlhbblrZDlr7nosaHnmoTlnZDmoIfkuIDnm7TmmK/nm7jlr7nkuo7lhbbniLblr7nosaHnmoQNCiAgICDlnZDmoIfljbPmnKzlnLDlnZDmoIfvvIzogIzpnZ7kuJbnlYzlnZDmoIfvvIzlj6rmnInlvZPniLblr7nosaHmmK9zY2VuZeWcuuaZr+aXtu+8jOacrOWcsOWdkOagh+aJjeetieS6juS4lueVjOWdkOaghw0KICAgICAqLwogICAgaW5pdExpbmU6IGZ1bmN0aW9uIGluaXRMaW5lKCkgewogICAgICB0aGlzLmF1ZGlvTGluZXMoMjAsIDI1Nik7CiAgICB9LAogICAgcmVuZGVyR2VvbWV0cmllczogZnVuY3Rpb24gcmVuZGVyR2VvbWV0cmllcyh2ZXJ0aWNlcykgewogICAgICB2YXIgcmVzID0gW107CiAgICAgIHZlcnRpY2VzID0gdmVydGljZXMuY29uY2F0KHZlcnRpY2VzWzBdKTsgLy/lkIjlubbmlbDnu4TvvIzmiorph4zlpJbkvY3nva7lkYrnn6XopoHnlLvnmoTnur8KCiAgICAgIHZlcnRpY2VzLmZvckVhY2goZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgICAgcmVzLnB1c2godmFsdWUueCwgdmFsdWUueSwgMCk7CiAgICAgIH0pOwogICAgICByZXR1cm4gbmV3IFRIUkVFLkJ1ZmZlckF0dHJpYnV0ZShuZXcgRmxvYXQzMkFycmF5KHJlcyksIDMpOwogICAgfSwKICAgIGF1ZGlvTGluZXM6IGZ1bmN0aW9uIGF1ZGlvTGluZXMocmFkaXVzLCBjb3VudERhdGEpIHsKICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CgogICAgICB2YXIgYmFyTm9kZXMgPSByYW5nZSgwLCBjb3VudERhdGEpLm1hcChmdW5jdGlvbiAoaW5kZXgpIHsKICAgICAgICByZXR1cm4gbmV3IG5vZGUocmFkaXVzLCAoaW5kZXggLyBjb3VudERhdGEgKiAzNjAgKyA0NSkgJSAzNjAsIG5ldyBUSFJFRS5WZWN0b3IyKDAsIDApKTsKICAgICAgfSk7IC8v5b6X5Yiw5LiA5Liq6K6w5b2V5ZyG5LiKMjU25Liq54K555qE5L2N572u5L+h5oGv55qE5pWw57uECgogICAgICB2YXIgbGluZU1hdGVyaWFsID0gbmV3IFRIUkVFLkxpbmVCYXNpY01hdGVyaWFsKHsKICAgICAgICBjb2xvcjogMHgwMGZmZmYKICAgICAgfSk7CiAgICAgIHZhciBiYXJMaW5lID0gcmFuZ2UoMCwgY291bnREYXRhKS5tYXAoZnVuY3Rpb24gKGluZGV4KSB7CiAgICAgICAgcmV0dXJuIG5ldyBUSFJFRS5MaW5lKG5ldyBUSFJFRS5CdWZmZXJHZW9tZXRyeSgpLnNldEF0dHJpYnV0ZSgicG9zaXRpb24iLCBfdGhpczQucmVuZGVyR2VvbWV0cmllcyhbYmFyTm9kZXNbaW5kZXhdLnBvc2l0aW9uQSgpLCBiYXJOb2Rlc1tpbmRleF0ucG9zaXRpb25CKCldKSksIGxpbmVNYXRlcmlhbCk7CiAgICAgIH0pOwogICAgICB2YXIgb3V0TGluZSA9IG5ldyBUSFJFRS5MaW5lKG5ldyBUSFJFRS5CdWZmZXJHZW9tZXRyeSgpLnNldEF0dHJpYnV0ZSgicG9zaXRpb24iLCB0aGlzLnJlbmRlckdlb21ldHJpZXMoYmFyTm9kZXMubWFwKGZ1bmN0aW9uIChub2RlKSB7CiAgICAgICAgcmV0dXJuIG5vZGUucG9zaXRpb25BKCk7CiAgICAgIH0pKSksIGxpbmVNYXRlcmlhbCk7CiAgICAgIHZhciBpbkxpbmUgPSBuZXcgVEhSRUUuTGluZShuZXcgVEhSRUUuQnVmZmVyR2VvbWV0cnkoKS5zZXRBdHRyaWJ1dGUoInBvc2l0aW9uIiwgdGhpcy5yZW5kZXJHZW9tZXRyaWVzKGJhck5vZGVzLm1hcChmdW5jdGlvbiAobm9kZSkgewogICAgICAgIHJldHVybiBub2RlLnBvc2l0aW9uQigpOwogICAgICB9KSkpLCBsaW5lTWF0ZXJpYWwpOwogICAgICB2YXIgbGluZXNHcm91cCA9IG5ldyBUSFJFRS5Hcm91cCgpOwogICAgICBsaW5lc0dyb3VwLmFkZChvdXRMaW5lKTsKICAgICAgbGluZXNHcm91cC5hZGQoaW5MaW5lKTsKICAgICAgYmFyTGluZS5mb3JFYWNoKGZ1bmN0aW9uIChsaW5lKSB7CiAgICAgICAgcmV0dXJuIGxpbmVzR3JvdXAuYWRkKGxpbmUpOwogICAgICB9KTsKICAgICAgbGluZXNHcm91cC5uYW1lID0gIumfs+mikee6vyI7CiAgICAgIGxpbmVzR3JvdXAudHlwZSA9ICJMaW5lR3JvdXAiOwogICAgICBzY2VuZS5hZGQobGluZXNHcm91cCk7CiAgICAgIG9ianMucHVzaChsaW5lc0dyb3VwKTsKICAgIH0sCiAgICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZSgpIHsKICAgICAgc3RhdHMudXBkYXRlKCk7CiAgICB9LAogICAgUmVzZXQ6IGZ1bmN0aW9uIFJlc2V0KCkge30sCiAgICBSZXNldEFsbDogZnVuY3Rpb24gUmVzZXRBbGwoKSB7CiAgICAgIHZhciBfdGhpczUgPSB0aGlzOwoKICAgICAgdGhpcy4kYnVzLiRvbigncmVzZXQnLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXM1LlJlc2V0KCk7CiAgICAgIH0pOwogICAgfSwKICAgIEV4cG9ydDogZnVuY3Rpb24gRXhwb3J0KCkgewogICAgICB2YXIgX3RoaXM2ID0gdGhpczsKCiAgICAgIHRoaXMuJGJ1cy4kb24oJ2V4cG9ydCcsIGZ1bmN0aW9uICgpIHsKICAgICAgICBpZiAoc2NlbmUuY2hpbGRyZW4ubGVuZ3RoID4gMCkgewogICAgICAgICAgdmFyIG9iajsgLy/liKDpmaTmiYDmnIloZWxwZXLvvIzlj6rkv53nlZnlhYnmupDjgIHmnZDotKgKCiAgICAgICAgICBmb3IgKHZhciBpID0gc2NlbmUuY2hpbGRyZW4ubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHsKICAgICAgICAgICAgb2JqID0gc2NlbmUuY2hpbGRyZW5baV07CgogICAgICAgICAgICBpZiAob2JqLnR5cGUuaW5kZXhPZignSGVscGVyJykgIT0gLTEgfHwgb2JqLnR5cGUuaW5kZXhPZignQ29udHJvbCcpICE9IC0xKSB7CiAgICAgICAgICAgICAgc2NlbmUucmVtb3ZlKG9iaik7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9IC8v5Zug5Li65q+P5qyh6L+t5Luj5LitLmNoaWxkcmVuIOS4gOaXpnJlbW92ZeWQjuS7juWktOW8gOWni+aJp+ihjAogICAgICAgIC8v5pWw57uE5Lya5pS55Y+Y77yM5Zug5q2k5L2/55So6YGN5Y6G55qEZm9yRWFjaOS5n+Wlve+8jHRyYXZlcnNl5Lmf5aW95pWw57uE55qECiAgICAgICAgLy/ntKLlvJXlhajpg73mlLnlj5jvvIzlj6rkvJrliKDpmaTkuIDkuKrlr7nosaEKICAgICAgICAvL+S9huWmguaenOS7juWQjuW8gOWni+mBjeWOhuWIoOmZpO+8jOavj+asoXJlbW92ZeWQjuWJjemdoueahOe0ouW8leS5n+WNs+aYr+acqumBjeWOhui/h+eahOiKgueCuee0ouW8leS4jeS8muWPmAogICAgICAgIC8v5L2/55Soc3RhdGXlgLznhLblkI7ov5vooYzmt7Hluqbnm5HlkKzkvp3nhLbkuI3ooYzvvIzlm6DkuLp3YXRjaOaWueazleavj+asoeWcqG1vdW50ZWTkuYvlkI4KICAgICAgICAvL+i/meWwseWvvOiHtOS6huWmguaenG1vdW50ZWTkuK3nmoRkYXRh5YC85Y+Y5YyW77yM5oiR6ZyA6KaB5a+85Ye655qE5pWw5o2u6L+Y5piv5Y6f5p2l5pWw5o2u77yMd2F0Y2jlj6rkvJrlnKjkuYvlkI4KICAgICAgICAvL+WPkeeUn+S9nOeUqOOAggoKCiAgICAgICAgdmFyIEpTT05TdHIgPSBKU09OLnN0cmluZ2lmeShzY2VuZS50b0pTT04oKSk7IC8vY29uc29sZS5sb2coSlNPTlN0cik7CgogICAgICAgIF90aGlzNi5kb3dubG9hZCgic2NlbmUuanNvbiIsIEpTT05TdHIpOwoKICAgICAgICBfdGhpczYuaW5pdEhlbHBlcigpOwogICAgICB9KTsKICAgIH0sCiAgICBkb3dubG9hZDogZnVuY3Rpb24gZG93bmxvYWQoZmlsZW5hbWUsIHRleHQpIHsKICAgICAgdmFyIHBvbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTsKICAgICAgcG9tLnNldEF0dHJpYnV0ZSgnaHJlZicsICdkYXRhOnRleHQvcGxhaW47Y2hhcnNldD11dGYtOCwnICsgZW5jb2RlVVJJQ29tcG9uZW50KHRleHQpKTsKICAgICAgcG9tLnNldEF0dHJpYnV0ZSgnZG93bmxvYWQnLCBmaWxlbmFtZSk7CgogICAgICBpZiAoZG9jdW1lbnQuY3JlYXRlRXZlbnQpIHsKICAgICAgICB2YXIgZXZlbnQgPSBkb2N1bWVudC5jcmVhdGVFdmVudCgnTW91c2VFdmVudHMnKTsKICAgICAgICBldmVudC5pbml0TW91c2VFdmVudCgnY2xpY2snLCB0cnVlLCBmYWxzZSwgd2luZG93LCAwLCAwLCAwLCAwLCAwLCBmYWxzZSwgZmFsc2UsIGZhbHNlLCBmYWxzZSwgMCwgbnVsbCk7CiAgICAgICAgcG9tLmRpc3BhdGNoRXZlbnQoZXZlbnQpOwogICAgICB9IGVsc2UgewogICAgICAgIHBvbS5jbGljaygpOwogICAgICB9CiAgICB9LAogICAgLy/ov5DooYzliqjnlLsKICAgIGFuaW1hdGU6IGZ1bmN0aW9uIGFuaW1hdGUoKSB7CiAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSh0aGlzLmFuaW1hdGUpOyAvL+W+queOr+iwg+eUqOWHveaVsAogICAgICAvLyBtZXNoLnJvdGF0aW9uLngrPTAuMDE7CiAgICAgIC8vIC8vIC8v5q+P5bin572R5qC85qih5Z6L5rK/eOi9tOaXi+i9rDAuMDHlvKfluqYKICAgICAgLy8gbWVzaC5yb3RhdGlvbi55Kz0wLjAyOwogICAgICAvLyAvL+avj+W4p+e9keagvOaooeWei+ayv3novbTml4vovawwLjAy5byn5bqmCiAgICAgIC8vIC8vc3RhdHMudXBkYXRlKCk7Ly/mm7TmlrDmgKfog73mo4DmtYvmoYYKCiAgICAgIHRoaXMudXBkYXRlKCk7CiAgICAgIHJlbmRlcmVyLnJlbmRlcihzY2VuZSwgY2FtZXJhKTsgLy/muLLmn5MKICAgIH0KICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB0aGlzLmluaXQoKTsKICAgIHRoaXMuQ2hlY2tGcm9tVHJlZSgpOwogICAgdGhpcy5maW5kY3VycmVudE9iaigpOwogICAgdGhpcy5BZGRNb2RlbCgpOwogICAgdGhpcy5SZXNldEFsbCgpOwogICAgdGhpcy5FeHBvcnQoKTsKICB9Cn07"},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kD,CACA;;AACA,mE,CACA;;AACA;AACAA,cADA;AAEAC,cAFA;AAGAC;AAHA;AAKA;AACA;AACA;AACA,mC,CACA;AACA;;AACA;AACA;AACA;;AAEA;;AACA;AACA;AACA;AACA;AACAC,gBADA;AAEAC;AACAC,kBADA;AAEAC,wBAFA;AAGAC;AAHA,GAFA;AAOAC,MAPA,kBAOA;AACA;AACAC;AACAC,wBADA;AAEAC,wBAFA;AAGAC,yBAHA;AAIAC,0BAJA;AAKAC,wBALA;AAMAC;AANA,OADA;AASAC;AATA;AAWA,GAnBA;AAoBAC;AACA;AACA;AACAC,gBAFA;AAGAC,aAHA,mBAGAC,QAHA,EAGA;AACA;AACA;AACA,SAFA,MAEA;AACA;AACA;AACA;AATA,KADA;AAYA;AACA;AACAF,gBAFA;AAGAC,aAHA,mBAGAC,QAHA,EAGA;AACA;AACA;AACA,SAFA,MAEA;AACA;AACA;AACA;AATA,KAZA;AAuBA;AACA;AACAF,gBAFA;AAGAC,aAHA,mBAGAC,QAHA,EAGA;AACA;AACA;AACA,SAFA,MAEA;AACA;AACA;AACA;AATA,KAvBA;AAkCA;AACA;AACAF,gBAFA;AAGAC,aAHA,mBAGAC,QAHA,EAGA;AACA;AACA;AACA,SAFA,MAEA;AACA;AACA;AACA;AATA;AAlCA,GApBA;AAkEAC;AACAC,aADA,uBACA;AACA;AACAZ,wBADA;AAEAC,wBAFA;AAGAC,yBAHA;AAIAC,0BAJA;AAKAC,wBALA;AAMAC;AANA;AAQA,KAVA;AAWAQ,YAXA,sBAWA;AAAA;;AACA;AACA;AACA;AACA,SAFA,MAGA;AACA;AACA;AACA,OAPA;AAQA,KApBA;AAqBAC,kBArBA,4BAqBA;AACA,sBADA,CAEA;;AACA;AACA;AACAC;AACA,OAHA;AAKA,KA7BA;AA8BAC,iBA9BA,2BA8BA;AAAA;;AACA;AACA;AACA;AACA;AACAC;AACAC;AACA,WAJA,MAKA;AACA;AACA;AACA;AAEAD;AACAC,6CALA,CAMA;;AACAA;AACA;AACA;AACA;;AACA;;AAEA;AACA;AACAA;AACAD;AAGA,mBAVA,MAWA;AACAA;AACAC;AAGA;;AACA;AACA;AACA,eArBA;AAuBA,aA9BA,MA+BA;AACA;AACAA;AACA;AACA;AACA;AACA;AAEAA;AACAD;AAGA,mBAPA,MAQA;AACAA;AACAC;AAGA;;AACA;AACA;AACA,eAnBA;AAoBA;AACA;AACA;AACA,OAhEA;AAiEA,KAhGA;AAiGAC,cAjGA,wBAiGA;AACAD,+BADA,CAEA;AACA,KApGA;AAqGAE,WArGA,qBAqGA;AACAF;AACA,KAvGA;AAwGAG,cAxGA,wBAwGA;AACAH;AACA,KA1GA;AA2GAI,WA3GA,qBA2GA;AACAJ;AACA,KA7GA;AA8GAK,eA9GA,yBA8GA;AACAL;AACA,KAhHA;AAiHAM,YAjHA,sBAiHA;AACAN;AACA,KAnHA;AAoHAO,iBApHA,2BAoHA;AACAR;AACAC;AACA;AACA;AACA,KAzHA;AA0HAQ,cA1HA,wBA0HA;AACAR;AAEA,KA7HA;AA8HAS,cA9HA,wBA8HA;AACA;AACAC;;AACAA;;AACAA;AACAV;AACAW;;AACAA;;AACAA;AACAX,4BATA,CAUA;;AACAY,0EAXA,CAYA;;AACAA;AACAA;AACAZ;AAKA,KAlJA;AAmJAa,qBAnJA,+BAmJA;AACAC;AACAA;AACAA;AACAC,kBADA;AAEAC,2BAFA;AAGAC,2BAHA,CAIA;AACA;AACA;AACA;;AAPA;AASA,KA/JA;AAgKAC,cAhKA,sBAgKAC,GAhKA,EAgKA;AACA;AACA;AACA,OAFA,MAEA;AACA;AACAA;AACA;;AACA;AACA;AAEA,KA1KA;AA2KAC,oBA3KA,8BA2KA;AAAA;;AACAC;AACAA;AACA;AACA;AACA;;AAEA;AACA;AAEA;AACA,WAJA,MAKA;AACA;AACA;AAEAC,4DAJA,CAKA;AACA,WAdA,CAgBA;;;AACA;AACAC,oDADA,CAEA;;AAEAD;AACA;AACA,SAvBA,MAuBA;AACA;AACA;AACAA,4DADA,CAGA;AACA;;AACAA;AACA;AACA,OAlCA,EAFA,CAqCA;;AACAD;AAEA;AACAG;AACA;AACA;;AACA;AACA;AACAC;;AACA;AACA;AACA1B;AACAC;AACA,WAJA,MAKA;AACA;AACA,8CACA;AACA;AACA;AACAA,0CAHA,CAKA;;AACAD;AACA,aAVA,CAYA;AACA;;;AACA;AACA;AAEA,SAzBA,MAyBA;AACA;AACAA;AACAC;AACA;;AACA;AACA;AACA,OAtCA;AAuCA,KAxPA;AAyPA;AAEA0B,aA3PA,uBA2PA;AACAC,8DADA,CACA;;AACAA,gDAFA,CAEA;;AACAA;AACA3B,kCAJA,CAIA;;AACA4B;AACAC;AACAA,gCAPA,CAQA;;AACA7B;AACA4B;AACA,KAtQA;AAuQA;AACA;AAEA;AACA;AACAE,aA5QA,uBA4QA;AACAR;AACA,KA9QA;AA+QAS,eA/QA,yBA+QA;AACA;AACAhC;AACAA,iDAHA,CAIA;;AACAA;AACA;AACAyB;AACA,OAHA,EALA,CASA;;AACAQ;AACA;AACA;AACAjC;AACA;AACA;;AACA;AACA;AACAA;AACA;AACA;;AACA;AACA;AACAA;AACA;AACA;AAEA,OAjBA;AAkBA,KA3SA;AA4SAkC,eA5SA,uBA4SAC,IA5SA,EA4SA;AACA;AACA;AACA;AACA,OAHA,MAIA;AACA;AACA;AACA,OAHA,MAIA;AACAlC,+DACAmC,2CADA,EAEAA,4CAFA,EAGAA,yCAHA,EAIAA,2CAJA,EAKAA,4CALA,EAMAA,2CANA;AAQA;AACA,KA/TA;AAgUAC,cAhUA,sBAgUAF,IAhUA,EAgUA;AACA;AACA;AACA,OAFA,MAGA;AACA;AACA,OAFA,MAEA;AACA;AACA,OAFA,MAEA;AACA;AACA,OAFA,MAEA;AACA;AACA;AAEA,KA9UA;AA+UAG,WA/UA,qBA+UA;AACA;AACAC;AACA;AACAC;AACAA;AACAvC;AACA4B;AACA;AACA,KAxVA;AAyVAY,YAzVA,sBAyVA;AACA;AACAF;AACA;AACAG;AACAA;AACAzC;AACA4B;AACA,+BARA,CASA;AAGA,KArWA;AAsWAc,gBAtWA,0BAsWA;AACA;AACAJ;AACA;AACAK;AACAA;AACA3C;AACA4B;AACA,+BARA,CASA;AAEA,KAjXA;AAkXAgB,cAlXA,wBAkXA;AACA;AACAN;AACA;AACAO;AACAA;AACA7C;AACA4B;AACA;AAIA,KA9XA;AA+XAkB,aA/XA,uBA+XA;AACA;AACAR;AACA;AACAS;AACAA;AACA/C;AACA4B;AACA,+BARA,CASA;AAGA,KA3YA;AA4YAoB,QA5YA,kBA4YA;AACA;AACA;AACA;AACA;AACA,sBALA,CAMA;;AACA;AACA;AACA;AACA;AACA,yBAXA,CAYA;;AACA;AACA,uBAdA,CAgBA;;AACA;AACA;AACAvB;AAEA,KAjaA;AAkaAwB,eAlaA,yBAkaA;AACA;AACA;AACA,KAraA;AAsaAC,qBAtaA,+BAsaA;AACA;AACA;AACA,KAzaA;AA0aA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACAC,aA/fA,uBA+fA;AACAC;AACAA,mDAFA,CAEA;;AACAA,0CAHA,CAGA;;AACAA;AACApB;AAEA,KAtgBA;AAugBAqB,kBAvgBA,4BAugBA;AACAC;AACA,KAzgBA;AA0gBA;AACAC,gBA3gBA,0BA2gBA;AAGAC;AAAAC;AAAA,SAHA,CAGA;AACA;;AACAD,0EALA,CAKA;;AACAxB,wEANA,CAMA;AACA,KAlhBA;AAmhBA;AACA0B,aAphBA,uBAohBA;AAEA1D,gCAFA,CAEA;;AACA4B;AACA5B,6DACAmC,2CADA,EAEAA,0CAFA,EAGAA,wCAHA,EAIAA,0CAJA,EAKAA,2CALA,EAMAA,0CANA,GAJA,CAYA;AACA,KAjiBA;AAkiBA;AACAwB,cAniBA,wBAmiBA;AACAC,iGADA,CAEA;;AACAA;AACA,KAviBA;AAwiBA;AACAC,YAziBA,sBAyiBA;AACA;AACA;AACA;AAEA;AACA;AAEA;AAGA;AACA;AACA;AACA;AAEA,KAzjBA;AA2jBAC,YA3jBA,sBA2jBA;AACA;AACA,KA7jBA;AA+jBAC,aA/jBA,qBA+jBAC,MA/jBA,EA+jBAC,SA/jBA,EA+jBA;AACA;AACA;AACA;;AACA;AACA;AACA;;AACA;AACAC;AADA,WAHA,CAKA;;;AACA;;AACA;;AAEAZ;AACAa;AACAA,8BACAC,iCADA,EAEAA,iCAFA,EAGA,CAHA;AAKAD;AACAE;AACA;;AACAA;AACAA;AACArE;AACA4B;AACA,KA1lBA;;AA2lBA;AACA;AACA;AACA;AACA;AACA;AACA0C,YAjmBA,sBAimBA;AACA;AACA,KAnmBA;AAomBAC,oBApmBA,4BAomBAC,QApmBA,EAomBA;AACA;AACAA,8CAFA,CAGA;;AACAA;AACAC;AACA,OAFA;AAGA;AACA,KA5mBA;AA6mBAC,cA7mBA,sBA6mBAV,MA7mBA,EA6mBAC,SA7mBA,EA6mBA;AAAA;;AACA;AACA,wBACAD,MADA,EAEA,oCAFA,EAGA,uBAHA;AAKA,OANA,EADA,CAQA;;AACA;AACAE;AADA;AAGA;AACA,8BACA,wCACA,UADA,EAEA,yBACAS,2BADA,EAEAA,2BAFA,EAFA,CADA,EAQAC,YARA;AAUA,OAXA;AAYA,mCACA,wCACA,UADA,EAEA;AAAA;AAAA,SAFA,CADA,EAKAA,YALA;AAQA,kCACA,wCACA,UADA,EAEA;AAAA;AAAA,SAFA,CADA,EAKAA,YALA;AAQA;AACAC;AACAA;AACAC;AAAA;AAAA;AACAD;AACAA;AACA7E;AACA4B;AACA,KA7pBA;AAiqBAmD,UAjqBA,oBAiqBA;AACA3B;AACA,KAnqBA;AAoqBA4B,SApqBA,mBAoqBA,CAEA,CAtqBA;AAuqBAC,YAvqBA,sBAuqBA;AAAA;;AACA;AACA;AACA,OAFA;AAGA,KA3qBA;AA4qBAC,UA5qBA,oBA4qBA;AAAA;;AAEA;AACA;AACA,kBADA,CAEA;;AACA;AAEA/D;;AACA;AACAnB;AACA;AACA;AACA,SAXA,CAaA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEA,qDArBA,CAsBA;;AACA;;AACA;AACA,OAzBA;AA0BA,KAxsBA;AAysBAmF,YAzsBA,oBAysBAC,QAzsBA,EAysBAC,IAzsBA,EAysBA;AACA;AACAC,kEACAC,wBADA;AAEAD;;AACA;AACA;AACAE,mDACAC,MADA,EACA,CADA,EACA,CADA,EACA,CADA,EACA,CADA,EACA,CADA,EACA,KADA,EACA,KADA,EACA,KADA,EACA,KADA,EACA,CADA,EACA,IADA;AAEAH;AACA,OALA,MAKA;AACAA;AACA;AAEA,KAvtBA;AAwtBA;AACAI,WAztBA,qBAytBA;AACAC,0CADA,CACA;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACAnC,qCAVA,CAUA;AACA;AApuBA,GAlEA;AAwyBAoC,SAxyBA,qBAwyBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA/yBA","names":["positionX","positionY","positionZ","name","components","Widget","Attribute","Footer","data","state","GridHelper","AxesHelper","LightHelper","PlaneHelper","BoxHelper","Control","configuration","watch","deep","handler","newValue","methods","initstate","AddModel","findcurrentObj","that","CheckFromTree","transformControl","scene","RemoveGrid","AddGrid","RemoveAxes","AddAxes","RemoveLight","AddLight","RemoveControl","AddControl","initHelper","axesHelper","gridHelper","directLightHelper","initCameraControl","cameraControls","LEFT","MIDDLE","RIGHT","getParents","obj","initEventManager","eventManager","cacheobjects","object","transing","console","initLight","directionalLight","objs","ambientLight","initCache","initControl","document","LoadElement","type","require","AddElement","initBox","material","box","initCone","cone","initCylinder","cylinder","initSphere","sphere","initTorus","torus","init","watchHelper","sceneChangedEvent","initStats","stats","updatePosition","mesh","initRenderer","renderer","antialias","initScene","initCamera","camera","initMesh","initBars","audioBars","radius","countData","color","minGroup","Math","barGroup","initLine","renderGeometries","vertices","res","audioLines","barNodes","lineMaterial","linesGroup","barLine","update","Reset","ResetAll","Export","download","filename","text","pom","encodeURIComponent","event","window","animate","requestAnimationFrame","mounted"],"sourceRoot":"src/views/Editor","sources":["Edit.vue"],"sourcesContent":["<template>\r\n  <div class=\"app-container\">\r\n    <div>\r\n        <el-container>\r\n           <!-- <el-header>Header</el-header> -->\r\n           <el-container>\r\n                <el-aside width=\"260px\">\r\n                       <Widget/>\r\n                </el-aside>\r\n                \r\n                <el-main >\r\n                    <el-scrollbar class=\"Scrollbar\">\r\n                        <div id=\"webgl\" style=\"position:relative\">\r\n                        </div>\r\n                    </el-scrollbar>\r\n                </el-main>\r\n                <el-aside width=\"260px\">\r\n                    <Attribute/>\r\n                </el-aside>\r\n            </el-container>\r\n            <el-footer>\r\n                <Footer/>\r\n            </el-footer>\r\n        </el-container>\r\n      <!-- <el-row :gutter=\"20\">\r\n        <el-col :span=\"3\" :xs=\"24\">\r\n          <el-card style=\"margin-bottom:20px;height: 500px;\">  \r\n              \r\n          </el-card>\r\n        </el-col>\r\n        <el-col :span=\"16\" :xs=\"24\">\r\n            <div id=\"webgl\" style=\"position:relative\">\r\n               \r\n            </div>\r\n        </el-col>\r\n        <el-col :span=\"3\" :xs=\"24\">\r\n          <el-card style=\"margin-bottom:20px;height: 500px;\">  \r\n              \r\n          </el-card>\r\n        </el-col>\r\n      </el-row> -->\r\n    </div>\r\n\r\n                \r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport * as THREE from 'three/build/three.module.js'\r\nimport Stats from '../../store/Stats/stats.min.js'\r\nimport Widget from '../Editor/Widget/Widget.vue'\r\nimport Attribute from '../Editor/Attribute/index.vue'\r\nimport Footer from '../Editor/Footer/index.vue'\r\nimport {TransformControls} from 'three/examples/jsm/controls/TransformControls'\r\nimport {DragControls} from 'three/examples/jsm/controls/DragControls'\r\nimport {TrackballControls} from 'three/examples/jsm/controls/TrackballControls'\r\nimport {OrbitControls} from 'three/examples/jsm/controls/OrbitControls'\r\nimport { Color, Group, Object3D} from '../../lib/three.module.js'\r\nimport {MOUSE} from 'three/src/constants'\r\nimport {AxesHelper} from 'three/src/helpers/AxesHelper'\r\nimport {GridHelper} from 'three/src/helpers/GridHelper.js'\r\nimport {EventManager} from '../../lib/EventManager'\r\nimport {DirectionalLightHelper} from 'three/src/helpers/DirectionalLightHelper'\r\nimport { range } from \"../../components/mode/range\";\r\nimport { node } from \"../../components/mode/node\";\r\n//初始数据\r\nlet renderer,camera,scene,geometry,material,mesh,stats,objs;\r\n//  let container=document.getElementById('webgl');\r\n   var controls={\r\n            positionX:0,\r\n            positionY:0,\r\n            positionZ:0\r\n        }\r\nlet cameraControls;\r\nlet transformControl;\r\nlet eventManager;\r\nlet directionalLight,ambientLight;\r\n// let mouse;\r\n// let raycaster;\r\n/*这里记录一个小bug\r\n当拖拽物体略过其他物体上时会造成物体全黑\r\n应该是材质问题使用了法线变换颜色材质，换成正常颜色应该是没有问题\r\n\r\n*/\r\nlet transing=false;\r\nlet axesHelper,gridHelper,directLightHelper;\r\nlet cacheobjects;\r\nexport default {\r\n    name:'Editor',\r\n    components:{\r\n        Widget,\r\n        Attribute,\r\n        Footer\r\n    },\r\n    data() {\r\n        return {\r\n             state:{\r\n                GridHelper:true,\r\n                AxesHelper:true,\r\n                LightHelper:true,\r\n                PlaneHelper:false,\r\n                BoxHelper:false,\r\n                Control:true\r\n            },\r\n            configuration:{},\r\n        }\r\n    },\r\n    watch:{\r\n        'state.GridHelper':{\r\n            // immediate:true,\r\n            deep:true,\r\n            handler(newValue){\r\n                if(newValue){\r\n                    this.AddGrid();\r\n                }else{\r\n                    this.RemoveGrid();\r\n                }\r\n            }\r\n        },\r\n         'state.AxesHelper':{\r\n            // immediate:true,\r\n            deep:true,\r\n            handler(newValue){\r\n                if(newValue){\r\n                    this.AddAxes();\r\n                }else{\r\n                    this.RemoveAxes();\r\n                }\r\n            }\r\n        },\r\n        'state.LightHelper':{\r\n            // immediate:true,\r\n            deep:true,\r\n            handler(newValue){\r\n                if(newValue){\r\n                    this.AddLight();\r\n                }else{\r\n                    this.RemoveLight();\r\n                }\r\n            }\r\n        },\r\n        'state.Control':{\r\n            // immediate:true,\r\n            deep:true,\r\n            handler(newValue){\r\n                if(newValue){\r\n                    this.AddControl();\r\n                }else{\r\n                    this.RemoveControl();\r\n                }\r\n            }\r\n        }\r\n    },\r\n    methods: {\r\n        initstate(){\r\n            this.state={\r\n                GridHelper:true,\r\n                AxesHelper:true,\r\n                LightHelper:true,\r\n                PlaneHelper:false,\r\n                BoxHelper:false,\r\n                Control:true\r\n            };\r\n        },\r\n        AddModel(){\r\n            this.$bus.$on('AddObjects',(em,item)=>{\r\n                if(item.name=='2D模型'||item.name=='3D模型'){\r\n              this.AddElement(em.type);\r\n          }\r\n          else{\r\n              this.LoadElement(em.type);\r\n          }\r\n            })\r\n        },\r\n        findcurrentObj(){ \r\n            let that=this;\r\n            //重定向this,好利用总线\r\n            this.$bus.$on('requestObj',(target)=>{\r\n                let object=scene.getObjectByProperty('uuid',target.uuid);\r\n                that.$bus.$emit('responseObj',object);\r\n            });\r\n            \r\n        },\r\n        CheckFromTree(){\r\n            this.$bus.$on('checkEvent',(target)=>{\r\n                if(this.state.Control==true){\r\n                if(!target){\r\n                    //处理对于传过来是空目标的情况，直接移除控件\r\n                     transformControl.detach();\r\n                    scene.remove(transformControl);\r\n                }\r\n                else {\r\n                    if(transformControl.object&&target.uuid!=transformControl.object.uuid){\r\n                    //如果从场景结构树中得到的物体与目前的不同才进行事件处理\r\n                    //即更换射线拾取\r\n                    \r\n                    transformControl.detach();\r\n                    scene.remove(transformControl);\r\n                    //先删除当前控件对象\r\n                    scene.traverse(function(obj){\r\n                        if(obj.uuid==target.uuid){\r\n                            if(obj.type.indexOf('Helper')==-1){\r\n                                //如果不是helper\r\n                               /* 能否直接传uuid进来查然后传出去？\r\n                               \r\n                               需要重构\r\n                               */\r\n                                scene.add(transformControl);\r\n                                transformControl.attach(obj);\r\n                                \r\n                                \r\n                            }\r\n                              else{\r\n                                  transformControl.detach();\r\n                                 scene.remove(transformControl);\r\n                                 \r\n                               \r\n                              }  \r\n                             return; \r\n                    }\r\n                    });\r\n\r\n                }\r\n                else if(!transformControl.object){\r\n                    //如果控件本身不存在那么直接加\r\n                    scene.traverse(function(obj){\r\n                        if(obj.uuid==target.uuid){\r\n                            //同样需要判断是否是helper\r\n                        if(obj.type.indexOf('Helper')==-1){\r\n                                //如果不是helper\r\n                               \r\n                                scene.add(transformControl);\r\n                                transformControl.attach(obj);\r\n                                \r\n                                \r\n                            }\r\n                              else{\r\n                                  transformControl.detach();\r\n                                 scene.remove(transformControl);\r\n                                \r\n                               \r\n                              }  \r\n                        return;\r\n                    }\r\n                    });\r\n                }\r\n                }\r\n                }\r\n            });\r\n        },\r\n        RemoveGrid(){\r\n            scene.remove(gridHelper);\r\n            //console.log(scene);\r\n        },\r\n        AddGrid(){\r\n            scene.add(gridHelper);\r\n        },\r\n        RemoveAxes(){\r\n            scene.remove(axesHelper);\r\n        },\r\n        AddAxes(){\r\n            scene.add(axesHelper);\r\n        },\r\n        RemoveLight(){\r\n            scene.remove(directLightHelper);\r\n        },\r\n        AddLight(){\r\n            scene.add(directLightHelper);\r\n        },\r\n        RemoveControl(){\r\n            transformControl.detach();\r\n            scene.remove(transformControl);\r\n            let object=null;\r\n            this.$bus.$emit('getEvent',object);\r\n        },\r\n        AddControl(){\r\n            scene.add(transformControl);\r\n\r\n        },\r\n        initHelper(){\r\n            //加坐标轴辅助工具\r\n            axesHelper=new AxesHelper(500);\r\n            axesHelper.raycast=()=>{};\r\n            axesHelper.name=\"坐标轴\";\r\n            scene.add(axesHelper);\r\n            gridHelper=new GridHelper(500,40,'rgb(200,200,200)','rgb(100,100,100)');\r\n            gridHelper.raycast=()=>{};\r\n            gridHelper.name=\"网格板\";\r\n            scene.add(gridHelper);\r\n            //将两个辅助工具raycast射线方法置空使得其禁用变换控件\r\n            directLightHelper=new DirectionalLightHelper(directionalLight,7);\r\n            //directLightHelper.raycast=()=>{};\r\n            directLightHelper.name=\"定向光助手\";\r\n            directLightHelper.type=\"DirtectionalLightHelper\";\r\n            scene.add(directLightHelper);\r\n            \r\n\r\n\r\n\r\n        },\r\n        initCameraControl(){\r\n            cameraControls=new OrbitControls(camera,renderer.domElement);\r\n            cameraControls.enableDamping=true;\r\n            cameraControls.mouseButtons={\r\n                LEFT:null,\r\n                MIDDLE:MOUSE.DOLLY,\r\n                RIGHT:MOUSE.ROTATE\r\n                //左键不控制相机\r\n                //右键控制旋转\r\n                //中间键控制缩放\r\n                //ctrl+右键控制相机平移\r\n            }\r\n        },\r\n        getParents(obj){\r\n            if(obj.parent==scene){\r\n                return obj;\r\n            }else{\r\n                while(obj.parent!=scene){\r\n                    obj=obj.parent;\r\n                }\r\n                return obj;\r\n            }\r\n            \r\n        },\r\n        initEventManager(){\r\n            eventManager=new EventManager(renderer.domElement,scene,camera,objs);\r\n            eventManager.addEventListener('mousemove',(event)=>{\r\n                //全局canvas触发拿到物体指针队列\r\n                if(event.intersection.length){\r\n                    const object=event.intersection[0].object;\r\n                   \r\n                    if(object==cacheobjects){\r\n                        //如果当下鼠标还在同一个物体下不触发任何操作\r\n                        \r\n                        return;\r\n                    }\r\n                    else if(object!=cacheobjects&&cacheobjects){\r\n                        //如果当下鼠标从一个物体移动到另一个物体时\r\n                        //先触发颜色恢复再触发变色\r\n                        \r\n                        cacheobjects.material.color.multiplyScalar(0.5);\r\n                        //返回原来颜色\r\n                    }\r\n\r\n                    //如果有材质\r\n                    if(object.material){\r\n                        object.material.color.multiplyScalar(2);\r\n                        //变亮\r\n                        \r\n                        cacheobjects=object;\r\n                    }\r\n                }else{\r\n                    //如果鼠标移动到场景空白处恢复\r\n                    if(cacheobjects){\r\n                        cacheobjects.material.color.multiplyScalar(0.5);\r\n                       \r\n                        //返回原来颜色\r\n                    }\r\n                    cacheobjects=null;\r\n                }\r\n            });\r\n             // //物体拾取事件处理\r\n            eventManager.addEventListener('click',(event)=>{\r\n              \r\n                if(transing){\r\n                    transing=false;\r\n                    return false;\r\n                }\r\n                if(event.intersection.length){\r\n                    const object=event.intersection[0].object;\r\n                    console.log(event.intersection);\r\n                    if(object.type==\"TransformControlsPlane\"){\r\n                        //如果选取到控制器本身直接跳过\r\n                        transformControl.detach();\r\n                        scene.remove(transformControl);\r\n                    }\r\n                    else{\r\n                        //选取到物体\r\n                          if(this.state.Control==true)\r\n                          {\r\n                              //只有当Control属性开启时才启用transformControl\r\n                              //但不影响显示Tree当前点亮\r\n                            scene.add(transformControl);\r\n                            \r\n                            //transformControl.attach(object.parent instanceof THREE.Group ? object.parent : object);\r\n                            transformControl.attach(this.getParents(object));\r\n                        }\r\n                        \r\n                        //let uuid=object.uuid;\r\n                        // console.log(uuid);\r\n                        this.$bus.$emit('getEvent',this.getParents(object));\r\n                    }\r\n                    \r\n                }else{\r\n                    //当点击到场景空白处时禁用可控件\r\n                   transformControl.detach();\r\n                    scene.remove(transformControl);\r\n                    let object=null;\r\n                    this.$bus.$emit('getEvent',object);\r\n                }\r\n            });\r\n        },\r\n        //射线拾取器\r\n        \r\n     initLight() {\r\n        directionalLight = new THREE.DirectionalLight(0xffffff); //添加了一个白色的平行光\r\n        directionalLight.position.set(20, 50, 50); //设置光的方向\r\n        directionalLight.name=\"平行光\";\r\n        scene.add(directionalLight); //添加到场景\r\n        objs.push(directionalLight);\r\n        ambientLight=new THREE.AmbientLight(0x222222);\r\n        ambientLight.name=\"全局光\";\r\n        //添加一个全局环境光\r\n        scene.add(ambientLight);\r\n         objs.push(ambientLight);\r\n    },\r\n        // initRaycaster(){\r\n        //     // raycaster=new THREE.Raycaster();\r\n\r\n        // },\r\n        //对象缓存初始化\r\n        initCache(){\r\n            cacheobjects=null;\r\n        },\r\n        initControl(){\r\n  //可视化变换控件对象\r\n        transformControl = new TransformControls( camera,renderer.domElement );\r\n        transformControl.type=\"TransformControl\";\r\n        // scene.add( transformControl );//控件对象添加到场景对象\r\n        transformControl.addEventListener('mouseDown',(event)=>{\r\n            //加一个参数控制防止点击事件和拖拽事件冲突\r\n            transing=true;\r\n        });\r\n        //键盘控制可视化变换控件功能\r\n        document.addEventListener('keyup',(event)=>{\r\n            if(event.key=='e'){\r\n                //E键缩放\r\n                transformControl.mode=\"scale\";\r\n                return false;\r\n            }\r\n            if(event.key=='r'){\r\n                //R键旋转\r\n                transformControl.mode=\"rotate\";\r\n                return false;\r\n            }\r\n            if(event.key=='t'){\r\n                //T键平移\r\n                transformControl.mode=\"translate\";\r\n                return false;\r\n            }\r\n            \r\n        });\r\n        },\r\n        LoadElement(type){\r\n            if(type=='model-1'){\r\n                this.initLine();\r\n                this.sceneChangedEvent();\r\n            }\r\n            else if(type=='model-2'){\r\n                this.initBars();\r\n                this.sceneChangedEvent();\r\n            }\r\n             else if(type=='model-3'){\r\n               scene.background = new THREE.CubeTextureLoader().load([\r\n          require('@/assets/skybox/BlueRed/Left.png'),\r\n          require('@/assets/skybox/BlueRed/Right.png'),\r\n          require('@/assets/skybox/BlueRed/Up.png'),\r\n          require('@/assets/skybox/BlueRed/Down.png'),\r\n          require('@/assets/skybox/BlueRed/Front.png'),\r\n          require('@/assets/skybox/BlueRed/Back.png')\r\n        ]);\r\n            }\r\n        },\r\n        AddElement(type){\r\n            if(type=='lonelyPlanet'){\r\n                this.initBox();\r\n            }\r\n            else if(type=='bezierCurve'){\r\n                this.initCone();\r\n            }else if(type=='ethereaTone'){\r\n                this.initCylinder();\r\n            }else if(type=='electronicMusic'){\r\n                this.initSphere();\r\n            }else if(type=='blastSubwoofer'){\r\n                this.initTorus();\r\n            }\r\n\r\n        },\r\n        initBox(){\r\n            var material=new THREE.MeshStandardMaterial();\r\n            material.color=new Color(0.8,0.2,0.2);\r\n            var box=new THREE.Mesh(new THREE.BoxGeometry(5,5,5),material);\r\n            box.position.set(-50, 20, 0);\r\n            box.name=\"盒子\";\r\n            scene.add(box);\r\n            objs.push(box);\r\n            this.sceneChangedEvent();\r\n        },\r\n       initCone(){\r\n        var material=new THREE.MeshStandardMaterial();\r\n        material.color=new Color(0.7,0.6,0.6);\r\n         var cone=new THREE.Mesh(new THREE.ConeGeometry(5,20,32),material);\r\n          cone.position.set(20, 20, 0);\r\n          cone.name=\"圆锥\";\r\n           scene.add(cone);\r\n           objs.push(cone);\r\n          this.sceneChangedEvent();\r\n           //renderer.render(scene,camera);//渲染\r\n          \r\n            \r\n       },\r\n       initCylinder(){\r\n            var material=new THREE.MeshStandardMaterial();\r\n            material.color=new Color(0.8,0.7,0.2);\r\n           var cylinder=new THREE.Mesh(new THREE.CylinderGeometry(5, 5, 20, 32),material);\r\n           cylinder.position.set(50,20,0);\r\n           cylinder.name=\"圆柱\";\r\n           scene.add(cylinder);\r\n           objs.push(cylinder);\r\n           this.sceneChangedEvent();\r\n           //renderer.render(scene,camera);//渲染\r\n           \r\n       },\r\n       initSphere(){\r\n           var material=new THREE.MeshStandardMaterial();\r\n            material.color=new Color(0.2,0.7,0.2);\r\n          var  sphere=new THREE.Mesh(new THREE.SphereGeometry(5, 32, 32),material);\r\n           sphere.position.set(-20, -20, 0);\r\n           sphere.name=\"球\";\r\n            scene.add(sphere);\r\n            objs.push(sphere);\r\n            this.sceneChangedEvent();\r\n           \r\n            \r\n            \r\n       },\r\n       initTorus(){\r\n           var material=new THREE.MeshStandardMaterial();\r\n            material.color=new Color(0.3,0.1,0.9);\r\n           var torus =new THREE.Mesh(new THREE.TorusGeometry(10, 3, 16, 100),material);\r\n            torus.position.set(50, -20, 0);\r\n            torus.name=\"圆环\";\r\n            scene.add(torus);\r\n            objs.push(torus);\r\n            this.sceneChangedEvent();\r\n            //renderer.render(scene,camera);//渲染\r\n            \r\n           \r\n       },\r\n        init(){\r\n            this.initRenderer();\r\n            this.initScene();\r\n            this.initCamera();\r\n            this.initLight();\r\n            this.initMesh();\r\n            // this.initRaycaster();\r\n            this.initCache();\r\n            this.initCameraControl();\r\n            this.initControl();\r\n            this.initHelper();\r\n            this.watchHelper();\r\n            // this.initMouseEvent();\r\n            this.initEventManager();\r\n            this.initStats();\r\n            \r\n            // initDatGUI();\r\n            this.sceneChangedEvent();\r\n            this.animate();\r\n            console.log(scene);\r\n            \r\n        },\r\n        watchHelper(){\r\n            let state=this.state;\r\n             this.$bus.$emit('stateControl',state);\r\n        },\r\n        sceneChangedEvent(){\r\n            let scenelist=scene.children;\r\n            this.$bus.$emit('sceneChanged',scenelist);\r\n        },\r\n        //鼠标事务处理（包括点击事件、移动事件）\r\n        // initMouseEvent(){\r\n            //给canvas对象进行鼠标坐标转换\r\n            // mouse=new Vector2();\r\n            // let domX=0;\r\n            // let domY=0;\r\n            // let width=0;\r\n            // let height=0;\r\n            // renderer.domElement.addEventListener('mousemove',(event)=>{\r\n            //     //console.log(event.offsetX,event.offsetY);\r\n            //     domX=event.offsetX;\r\n            //     domY=event.offsetY;\r\n            //     width=renderer.domElement.offsetWidth;\r\n            //     height=renderer.domElement.offsetHeight;\r\n            //     mouse.x=domX/width*2-1;\r\n            //     mouse.y=-domY*2/height+1;\r\n            //     // console.log(mouse.x,mouse.y);\r\n            //     raycaster.setFromCamera(mouse,camera);\r\n            //     //防止控制器被选中\r\n            //     scene.remove(transformControl);\r\n            //     const intersection=raycaster.intersectObjects(scene.children,false);\r\n            //     //把所有有children的屏蔽掉，可以防止对helper进行控制\r\n            //     scene.add(transformControl);\r\n            //     if(intersection.length){\r\n            //         //如果拾取到材质物体\r\n            //         const object=intersection[0].object;\r\n            //         //如果当下物体不是上次缓存物体，说明是从不同物体上移到当前物体上触发mouseenter事件\r\n            //         if(object!=cacheobjects){\r\n            //             if(cacheobjects){\r\n            //                 //当鼠标从一个物体移动到另一个物体时，先触发之前缓存物体的mouseleave方法\r\n            //                 //再触发当前物体的mouseenter方法\r\n            //                 cacheobjects.dispatchEvent({\r\n            //             type:'mouseleave'\r\n            //         });\r\n            //             }\r\n            //               object.dispatchEvent({\r\n            //             type:'mouseenter'\r\n            //         });\r\n            //         }//如果相等触发mousemove方法得到物体坐标(鼠标一直在物体上移动)\r\n            //         else if(object==cacheobjects){\r\n            //             object.dispatchEvent({\r\n            //             type:'mousemove'\r\n            //         });\r\n            //         }\r\n            //         cacheobjects=object;\r\n            //     }else{\r\n            //         //当鼠标从一个物体移动到射线拾取器拾取不到物体时也会触发之前的物体的mouseleave方法\r\n            //          if(cacheobjects){\r\n            //                 //当鼠标从一个物体移动到另一个物体时，先触发之前缓存物体的mouseleave方法\r\n            //                 //再触发当前物体的mouseenter方法\r\n            //                 cacheobjects.dispatchEvent({\r\n            //             type:'mouseleave'\r\n            //         });\r\n            //     }\r\n            //         cacheobjects=null;\r\n\r\n\r\n            //     }\r\n                \r\n               \r\n            // });\r\n            // // //物体拾取事件处理\r\n            // renderer.domElement.addEventListener('click',(event)=>{\r\n            //     if(transing){\r\n            //         transing=false;\r\n            //         return false;\r\n            //     }\r\n            //     // raycaster.setFromCamera(mouse,camera);\r\n            //     // //防止控制器被选中\r\n            //     // scene.remove(transformControl);\r\n            //     // const intersection=raycaster.intersectObjects(scene.children,false);\r\n            //     // //把所有有children的屏蔽掉，可以防止对helper进行控制\r\n            //     // scene.add(transformControl);\r\n            //     // if(intersection.length){\r\n\r\n                    \r\n            //     //     const object=intersection[0].object;\r\n            //     //     transformControl.attach(object);\r\n            //     // }else{\r\n            //     //     //当点击到场景空白处时禁用可控件\r\n            //     //    transformControl.detach();\r\n            //     // }\r\n            // });\r\n\r\n        // },\r\n        initStats(){\r\n            stats = new Stats();\r\n             stats.domElement.style.position = 'absolute'; //绝对坐标  \r\n                stats.domElement.style.left = '0px';// (0,0)px,左上角  \r\n                stats.domElement.style.top = '0px';  \r\n            document.getElementById('webgl').appendChild(stats.domElement);\r\n\r\n        },\r\n        updatePosition(){\r\n            mesh.position.set(controls.positionX,controls.positionY,controls.positionZ);\r\n        },\r\n        //初始化渲染器\r\n        initRenderer(){\r\n            \r\n            \r\n            renderer=new THREE.WebGLRenderer({antialias:true});//实例化渲染器\r\n            //抗锯齿开启\r\n            renderer.setSize(window.innerWidth*0.7,window.innerHeight*0.7);//设置宽高\r\n            document.getElementById('webgl').appendChild(renderer.domElement);//添加到dom\r\n        },\r\n        //初始化场景\r\n        initScene(){\r\n            \r\n            scene=new THREE.Scene();//实例化场景\r\n            objs=[];\r\n             scene.background = new THREE.CubeTextureLoader().load([\r\n          require('@/assets/skybox/Galaxy/Right.jpg'),\r\n          require('@/assets/skybox/Galaxy/Left.jpg'),\r\n          require('@/assets/skybox/Galaxy/Up.jpg'),\r\n          require('@/assets/skybox/Galaxy/Down.jpg'),\r\n          require('@/assets/skybox/Galaxy/Front.jpg'),\r\n          require('@/assets/skybox/Galaxy/Back.jpg')\r\n        ]);\r\n            // this.$bus.$emit('sceneChanged',scene);\r\n        },\r\n        //初始化相机\r\n        initCamera(){\r\n            camera=new THREE.PerspectiveCamera(45,window.innerWidth/window.innerHeight,0.1,200)\r\n            //实例化相机】\r\n            camera.position.set(0,0,150);\r\n        },\r\n        //创建模型\r\n        initMesh(){\r\n            // geometry = new THREE.BoxGeometry(5, 5, 5 ); //创建几何体\r\n            // var material=new THREE.MeshStandardMaterial();\r\n            // material.color=new Color(0.7,0.2,0.2); //创建材质\r\n\r\n            // mesh = new THREE.Mesh( geometry, material ); //创建网格\r\n            // mesh.name=\"盒子\";\r\n\r\n            // scene.add( mesh ); //将网格添加到场景\r\n            \r\n          \r\n            // this.initCone();\r\n            // this.initBox();\r\n            this.initLine();\r\n            this.initBars();\r\n\r\n        },\r\n\r\n        initBars(){\r\n            this.audioBars(25,128);\r\n        },\r\n\r\n        audioBars(radius, countData) {\r\n      let barGroup = new THREE.Group();\r\n      let R = radius;\r\n      let N = countData;\r\n      for (let i = 0; i < N; i++) {\r\n        let minGroup = new THREE.Group();\r\n        let box = new THREE.BoxGeometry(1, 1, 1);\r\n        let material = new THREE.MeshPhongMaterial({\r\n          color: 0x00ffff\r\n        }); // 材质对象\r\n        let m = i;\r\n        let mesh = new THREE.Mesh(box, material);\r\n\r\n        mesh.position.y = 0.5;\r\n        minGroup.add(mesh);\r\n        minGroup.position.set(\r\n          Math.sin(((m * Math.PI) / N) * 2) * R,\r\n          Math.cos(((m * Math.PI) / N) * 2) * R,\r\n          0\r\n        );\r\n       minGroup.rotation.z = ((-m * Math.PI) / N) * 2;\r\n        barGroup.add(minGroup);\r\n      }\r\n      barGroup.name=\"音频谱\";\r\n      barGroup.type=\"BarGroup\";\r\n      scene.add(barGroup);\r\n      objs.push(barGroup);\r\n    },\r\n/* 这里有个原理，为什么对音频线和音频组进行移动旋转操作后 依然可以根据初始化的音频数据进行重画\r\n按原理来说应该要重新计算各个线段的坐标值进行重绘，为什么这里导出数据后依然可以利用初始化的\r\nbarNodes进行一个线段计算重回吧，原因是因为，在编辑器中对一个组对象进行操作时，其各子对象\r\n的坐标并不会变化，只改变这个组对象的位置、旋转等信息，其子对象的坐标一直是相对于其父对象的\r\n坐标即本地坐标，而非世界坐标，只有当父对象是scene场景时，本地坐标才等于世界坐标\r\n */\r\n        initLine(){\r\n            this.audioLines(20,256);\r\n        },\r\n        renderGeometries(vertices) {\r\n            const res = [];\r\n            vertices = vertices.concat(vertices[0]);\r\n            //合并数组，把里外位置告知要画的线\r\n            vertices.forEach(value => {\r\n            res.push(value.x, value.y, 0);\r\n      });\r\n            return new THREE.BufferAttribute(new Float32Array(res), 3);\r\n    },\r\n        audioLines(radius, countData) {\r\n            var barNodes = range(0, countData).map(index => {\r\n                return new node(\r\n                radius,\r\n                ((index / countData) * 360 + 45) % 360,\r\n                new THREE.Vector2(0, 0)\r\n                );\r\n            });\r\n            //得到一个记录圆上256个点的位置信息的数组\r\n            const lineMaterial = new THREE.LineBasicMaterial({\r\n                color: 0x00ffff\r\n            });\r\n            var barLine = range(0, countData).map(index => {\r\n            return new THREE.Line(\r\n                new THREE.BufferGeometry().setAttribute(\r\n                    \"position\",\r\n                this.renderGeometries([\r\n                    barNodes[index].positionA(),\r\n                     barNodes[index].positionB()\r\n            ])\r\n          ),\r\n            lineMaterial\r\n            );\r\n        });\r\n        var outLine = new THREE.Line(\r\n        new THREE.BufferGeometry().setAttribute(\r\n          \"position\",\r\n          this.renderGeometries(barNodes.map(node => node.positionA()))\r\n        ),\r\n        lineMaterial\r\n      );\r\n\r\n      var inLine = new THREE.Line(\r\n        new THREE.BufferGeometry().setAttribute(\r\n          \"position\",\r\n          this.renderGeometries(barNodes.map(node => node.positionB()))\r\n        ),\r\n        lineMaterial\r\n      );\r\n\r\n      var linesGroup = new THREE.Group();\r\n      linesGroup.add(outLine);\r\n      linesGroup.add(inLine);\r\n      barLine.forEach(line => linesGroup.add(line));\r\n      linesGroup.name=\"音频线\";\r\n      linesGroup.type=\"LineGroup\";\r\n      scene.add(linesGroup);\r\n      objs.push(linesGroup);     \r\n    },\r\n\r\n\r\n\r\n        update(){\r\n            stats.update();\r\n        },\r\n        Reset(){\r\n          \r\n        },\r\n        ResetAll(){\r\n            this.$bus.$on('reset',()=>{\r\n                this.Reset();\r\n            });\r\n        },\r\n        Export(){\r\n            \r\n            this.$bus.$on('export',()=>{\r\n            if(scene.children.length>0){\r\n                let obj;\r\n                //删除所有helper，只保留光源、材质\r\n                for(var i=scene.children.length-1;i>=0;i--){\r\n                    \r\n                     obj=scene.children[i];\r\n                    if(obj.type.indexOf('Helper')!=-1||obj.type.indexOf('Control')!=-1){\r\n                         scene.remove(obj);\r\n                    }\r\n                }\r\n            }\r\n\r\n                //因为每次迭代中.children 一旦remove后从头开始执行\r\n                //数组会改变，因此使用遍历的forEach也好，traverse也好数组的\r\n                //索引全都改变，只会删除一个对象\r\n                //但如果从后开始遍历删除，每次remove后前面的索引也即是未遍历过的节点索引不会变\r\n                //使用state值然后进行深度监听依然不行，因为watch方法每次在mounted之后\r\n                //这就导致了如果mounted中的data值变化，我需要导出的数据还是原来数据，watch只会在之后\r\n                //发生作用。\r\n           \r\n            var JSONStr=JSON.stringify(scene.toJSON());\r\n            //console.log(JSONStr);\r\n            this.download(\"scene.json\",JSONStr);  \r\n            this.initHelper();\r\n            });\r\n        },\r\n        download(filename,text){\r\n            var pom=document.createElement('a');\r\n            pom.setAttribute('href','data:text/plain;charset=utf-8,'\r\n            +encodeURIComponent(text));\r\n            pom.setAttribute('download',filename);\r\n            if(document.createEvent){\r\n                var event=document.createEvent('MouseEvents');\r\n                event.initMouseEvent('click',true, false,\r\n                window,0,0,0,0,0,false,false,false,false,0,null);\r\n                pom.dispatchEvent(event);\r\n            }else{\r\n                pom.click();\r\n            }\r\n\r\n        },\r\n        //运行动画\r\n        animate(){\r\n            requestAnimationFrame(this.animate);//循环调用函数\r\n            \r\n            // mesh.rotation.x+=0.01;\r\n            // // //每帧网格模型沿x轴旋转0.01弧度\r\n            // mesh.rotation.y+=0.02;\r\n            // //每帧网格模型沿y轴旋转0.02弧度\r\n            // //stats.update();//更新性能检测框\r\n\r\n            this.update();\r\n            renderer.render(scene,camera);//渲染\r\n        }\r\n    },\r\n    mounted() {\r\n        this.init();\r\n        this.CheckFromTree();\r\n        this.findcurrentObj();\r\n        this.AddModel();\r\n        this.ResetAll();\r\n        this.Export();\r\n    },\r\n}\r\n</script>\r\n<style>\r\n #webgl {\r\n    height: 500px;\r\n  }\r\n.app-container{\r\n    background-color: #432d43;\r\n}\r\n</style>"]}]}