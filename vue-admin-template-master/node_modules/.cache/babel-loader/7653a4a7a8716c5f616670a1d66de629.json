{"remainingRequest":"E:\\wuhanligong-java\\music\\vue-admin-template-master\\node_modules\\babel-loader\\lib\\index.js!E:\\wuhanligong-java\\music\\vue-admin-template-master\\node_modules\\eslint-loader\\index.js??ref--13-0!E:\\wuhanligong-java\\music\\vue-admin-template-master\\src\\lib\\dat.gui.module.js","dependencies":[{"path":"E:\\wuhanligong-java\\music\\vue-admin-template-master\\src\\lib\\dat.gui.module.js","mtime":1625070368000},{"path":"E:\\wuhanligong-java\\music\\vue-admin-template-master\\babel.config.js","mtime":1637248914000},{"path":"E:\\wuhanligong-java\\music\\vue-admin-template-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\wuhanligong-java\\music\\vue-admin-template-master\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"E:\\wuhanligong-java\\music\\vue-admin-template-master\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90eXBlb2YyIGZyb20gIkU6L3d1aGFubGlnb25nLWphdmEvbXVzaWMvdnVlLWFkbWluLXRlbXBsYXRlLW1hc3Rlci9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vdHlwZW9mLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5udW1iZXIudG8tZml4ZWQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zbGljZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5rZXlzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLm1hdGNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLmRlc2NyaXB0aW9uLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuZ2V0LXByb3RvdHlwZS1vZi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5zZXQtcHJvdG90eXBlLW9mLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnNwbGl0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5qb2luLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc3BsaWNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLnRlc3QuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuY29uc3RydWN0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuc3RpY2t5LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmpzb24uc3RyaW5naWZ5LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKCi8qKgogKiBkYXQtZ3VpIEphdmFTY3JpcHQgQ29udHJvbGxlciBMaWJyYXJ5CiAqIGh0dHA6Ly9jb2RlLmdvb2dsZS5jb20vcC9kYXQtZ3VpCiAqCiAqIENvcHlyaWdodCAyMDExIERhdGEgQXJ0cyBUZWFtLCBHb29nbGUgQ3JlYXRpdmUgTGFiCiAqCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICovCmZ1bmN0aW9uIF9fXyRpbnNlcnRTdHlsZShjc3MpIHsKICBpZiAoIWNzcykgewogICAgcmV0dXJuOwogIH0KCiAgaWYgKHR5cGVvZiB3aW5kb3cgPT09ICd1bmRlZmluZWQnKSB7CiAgICByZXR1cm47CiAgfQoKICB2YXIgc3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpOwogIHN0eWxlLnNldEF0dHJpYnV0ZSgndHlwZScsICd0ZXh0L2NzcycpOwogIHN0eWxlLmlubmVySFRNTCA9IGNzczsKICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHN0eWxlKTsKICByZXR1cm4gY3NzOwp9CgpmdW5jdGlvbiBjb2xvclRvU3RyaW5nKGNvbG9yLCBmb3JjZUNTU0hleCkgewogIHZhciBjb2xvckZvcm1hdCA9IGNvbG9yLl9fc3RhdGUuY29udmVyc2lvbk5hbWUudG9TdHJpbmcoKTsKCiAgdmFyIHIgPSBNYXRoLnJvdW5kKGNvbG9yLnIpOwogIHZhciBnID0gTWF0aC5yb3VuZChjb2xvci5nKTsKICB2YXIgYiA9IE1hdGgucm91bmQoY29sb3IuYik7CiAgdmFyIGEgPSBjb2xvci5hOwogIHZhciBoID0gTWF0aC5yb3VuZChjb2xvci5oKTsKICB2YXIgcyA9IGNvbG9yLnMudG9GaXhlZCgxKTsKICB2YXIgdiA9IGNvbG9yLnYudG9GaXhlZCgxKTsKCiAgaWYgKGZvcmNlQ1NTSGV4IHx8IGNvbG9yRm9ybWF0ID09PSAnVEhSRUVfQ0hBUl9IRVgnIHx8IGNvbG9yRm9ybWF0ID09PSAnU0lYX0NIQVJfSEVYJykgewogICAgdmFyIHN0ciA9IGNvbG9yLmhleC50b1N0cmluZygxNik7CgogICAgd2hpbGUgKHN0ci5sZW5ndGggPCA2KSB7CiAgICAgIHN0ciA9ICcwJyArIHN0cjsKICAgIH0KCiAgICByZXR1cm4gJyMnICsgc3RyOwogIH0gZWxzZSBpZiAoY29sb3JGb3JtYXQgPT09ICdDU1NfUkdCJykgewogICAgcmV0dXJuICdyZ2IoJyArIHIgKyAnLCcgKyBnICsgJywnICsgYiArICcpJzsKICB9IGVsc2UgaWYgKGNvbG9yRm9ybWF0ID09PSAnQ1NTX1JHQkEnKSB7CiAgICByZXR1cm4gJ3JnYmEoJyArIHIgKyAnLCcgKyBnICsgJywnICsgYiArICcsJyArIGEgKyAnKSc7CiAgfSBlbHNlIGlmIChjb2xvckZvcm1hdCA9PT0gJ0hFWCcpIHsKICAgIHJldHVybiAnMHgnICsgY29sb3IuaGV4LnRvU3RyaW5nKDE2KTsKICB9IGVsc2UgaWYgKGNvbG9yRm9ybWF0ID09PSAnUkdCX0FSUkFZJykgewogICAgcmV0dXJuICdbJyArIHIgKyAnLCcgKyBnICsgJywnICsgYiArICddJzsKICB9IGVsc2UgaWYgKGNvbG9yRm9ybWF0ID09PSAnUkdCQV9BUlJBWScpIHsKICAgIHJldHVybiAnWycgKyByICsgJywnICsgZyArICcsJyArIGIgKyAnLCcgKyBhICsgJ10nOwogIH0gZWxzZSBpZiAoY29sb3JGb3JtYXQgPT09ICdSR0JfT0JKJykgewogICAgcmV0dXJuICd7cjonICsgciArICcsZzonICsgZyArICcsYjonICsgYiArICd9JzsKICB9IGVsc2UgaWYgKGNvbG9yRm9ybWF0ID09PSAnUkdCQV9PQkonKSB7CiAgICByZXR1cm4gJ3tyOicgKyByICsgJyxnOicgKyBnICsgJyxiOicgKyBiICsgJyxhOicgKyBhICsgJ30nOwogIH0gZWxzZSBpZiAoY29sb3JGb3JtYXQgPT09ICdIU1ZfT0JKJykgewogICAgcmV0dXJuICd7aDonICsgaCArICcsczonICsgcyArICcsdjonICsgdiArICd9JzsKICB9IGVsc2UgaWYgKGNvbG9yRm9ybWF0ID09PSAnSFNWQV9PQkonKSB7CiAgICByZXR1cm4gJ3toOicgKyBoICsgJyxzOicgKyBzICsgJyx2OicgKyB2ICsgJyxhOicgKyBhICsgJ30nOwogIH0KCiAgcmV0dXJuICd1bmtub3duIGZvcm1hdCc7Cn0KCnZhciBBUlJfRUFDSCA9IEFycmF5LnByb3RvdHlwZS5mb3JFYWNoOwp2YXIgQVJSX1NMSUNFID0gQXJyYXkucHJvdG90eXBlLnNsaWNlOwp2YXIgQ29tbW9uID0gewogIEJSRUFLOiB7fSwKICBleHRlbmQ6IGZ1bmN0aW9uIGV4dGVuZCh0YXJnZXQpIHsKICAgIHRoaXMuZWFjaChBUlJfU0xJQ0UuY2FsbChhcmd1bWVudHMsIDEpLCBmdW5jdGlvbiAob2JqKSB7CiAgICAgIHZhciBrZXlzID0gdGhpcy5pc09iamVjdChvYmopID8gT2JqZWN0LmtleXMob2JqKSA6IFtdOwogICAgICBrZXlzLmZvckVhY2goZnVuY3Rpb24gKGtleSkgewogICAgICAgIGlmICghdGhpcy5pc1VuZGVmaW5lZChvYmpba2V5XSkpIHsKICAgICAgICAgIHRhcmdldFtrZXldID0gb2JqW2tleV07CiAgICAgICAgfQogICAgICB9LmJpbmQodGhpcykpOwogICAgfSwgdGhpcyk7CiAgICByZXR1cm4gdGFyZ2V0OwogIH0sCiAgZGVmYXVsdHM6IGZ1bmN0aW9uIGRlZmF1bHRzKHRhcmdldCkgewogICAgdGhpcy5lYWNoKEFSUl9TTElDRS5jYWxsKGFyZ3VtZW50cywgMSksIGZ1bmN0aW9uIChvYmopIHsKICAgICAgdmFyIGtleXMgPSB0aGlzLmlzT2JqZWN0KG9iaikgPyBPYmplY3Qua2V5cyhvYmopIDogW107CiAgICAgIGtleXMuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgaWYgKHRoaXMuaXNVbmRlZmluZWQodGFyZ2V0W2tleV0pKSB7CiAgICAgICAgICB0YXJnZXRba2V5XSA9IG9ialtrZXldOwogICAgICAgIH0KICAgICAgfS5iaW5kKHRoaXMpKTsKICAgIH0sIHRoaXMpOwogICAgcmV0dXJuIHRhcmdldDsKICB9LAogIGNvbXBvc2U6IGZ1bmN0aW9uIGNvbXBvc2UoKSB7CiAgICB2YXIgdG9DYWxsID0gQVJSX1NMSUNFLmNhbGwoYXJndW1lbnRzKTsKICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBhcmdzID0gQVJSX1NMSUNFLmNhbGwoYXJndW1lbnRzKTsKCiAgICAgIGZvciAodmFyIGkgPSB0b0NhbGwubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHsKICAgICAgICBhcmdzID0gW3RvQ2FsbFtpXS5hcHBseSh0aGlzLCBhcmdzKV07CiAgICAgIH0KCiAgICAgIHJldHVybiBhcmdzWzBdOwogICAgfTsKICB9LAogIGVhY2g6IGZ1bmN0aW9uIGVhY2gob2JqLCBpdHIsIHNjb3BlKSB7CiAgICBpZiAoIW9iaikgewogICAgICByZXR1cm47CiAgICB9CgogICAgaWYgKEFSUl9FQUNIICYmIG9iai5mb3JFYWNoICYmIG9iai5mb3JFYWNoID09PSBBUlJfRUFDSCkgewogICAgICBvYmouZm9yRWFjaChpdHIsIHNjb3BlKTsKICAgIH0gZWxzZSBpZiAob2JqLmxlbmd0aCA9PT0gb2JqLmxlbmd0aCArIDApIHsKICAgICAgdmFyIGtleSA9IHZvaWQgMDsKICAgICAgdmFyIGwgPSB2b2lkIDA7CgogICAgICBmb3IgKGtleSA9IDAsIGwgPSBvYmoubGVuZ3RoOyBrZXkgPCBsOyBrZXkrKykgewogICAgICAgIGlmIChrZXkgaW4gb2JqICYmIGl0ci5jYWxsKHNjb3BlLCBvYmpba2V5XSwga2V5KSA9PT0gdGhpcy5CUkVBSykgewogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgZm9yICh2YXIgX2tleSBpbiBvYmopIHsKICAgICAgICBpZiAoaXRyLmNhbGwoc2NvcGUsIG9ialtfa2V5XSwgX2tleSkgPT09IHRoaXMuQlJFQUspIHsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9LAogIGRlZmVyOiBmdW5jdGlvbiBkZWZlcihmbmMpIHsKICAgIHNldFRpbWVvdXQoZm5jLCAwKTsKICB9LAogIGRlYm91bmNlOiBmdW5jdGlvbiBkZWJvdW5jZShmdW5jLCB0aHJlc2hvbGQsIGNhbGxJbW1lZGlhdGVseSkgewogICAgdmFyIHRpbWVvdXQgPSB2b2lkIDA7CiAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICB2YXIgb2JqID0gdGhpczsKICAgICAgdmFyIGFyZ3MgPSBhcmd1bWVudHM7CgogICAgICBmdW5jdGlvbiBkZWxheWVkKCkgewogICAgICAgIHRpbWVvdXQgPSBudWxsOwogICAgICAgIGlmICghY2FsbEltbWVkaWF0ZWx5KSBmdW5jLmFwcGx5KG9iaiwgYXJncyk7CiAgICAgIH0KCiAgICAgIHZhciBjYWxsTm93ID0gY2FsbEltbWVkaWF0ZWx5IHx8ICF0aW1lb3V0OwogICAgICBjbGVhclRpbWVvdXQodGltZW91dCk7CiAgICAgIHRpbWVvdXQgPSBzZXRUaW1lb3V0KGRlbGF5ZWQsIHRocmVzaG9sZCk7CgogICAgICBpZiAoY2FsbE5vdykgewogICAgICAgIGZ1bmMuYXBwbHkob2JqLCBhcmdzKTsKICAgICAgfQogICAgfTsKICB9LAogIHRvQXJyYXk6IGZ1bmN0aW9uIHRvQXJyYXkob2JqKSB7CiAgICBpZiAob2JqLnRvQXJyYXkpIHJldHVybiBvYmoudG9BcnJheSgpOwogICAgcmV0dXJuIEFSUl9TTElDRS5jYWxsKG9iaik7CiAgfSwKICBpc1VuZGVmaW5lZDogZnVuY3Rpb24gaXNVbmRlZmluZWQob2JqKSB7CiAgICByZXR1cm4gb2JqID09PSB1bmRlZmluZWQ7CiAgfSwKICBpc051bGw6IGZ1bmN0aW9uIGlzTnVsbChvYmopIHsKICAgIHJldHVybiBvYmogPT09IG51bGw7CiAgfSwKICBpc05hTjogZnVuY3Rpb24gKF9pc05hTikgewogICAgZnVuY3Rpb24gaXNOYU4oKSB7CiAgICAgIHJldHVybiBfaXNOYU4uYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgIH0KCiAgICBpc05hTi50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIF9pc05hTi50b1N0cmluZygpOwogICAgfTsKCiAgICByZXR1cm4gaXNOYU47CiAgfShmdW5jdGlvbiAob2JqKSB7CiAgICByZXR1cm4gaXNOYU4ob2JqKTsKICB9KSwKICBpc0FycmF5OiBBcnJheS5pc0FycmF5IHx8IGZ1bmN0aW9uIChvYmopIHsKICAgIHJldHVybiBvYmouY29uc3RydWN0b3IgPT09IEFycmF5OwogIH0sCiAgaXNPYmplY3Q6IGZ1bmN0aW9uIGlzT2JqZWN0KG9iaikgewogICAgcmV0dXJuIG9iaiA9PT0gT2JqZWN0KG9iaik7CiAgfSwKICBpc051bWJlcjogZnVuY3Rpb24gaXNOdW1iZXIob2JqKSB7CiAgICByZXR1cm4gb2JqID09PSBvYmogKyAwOwogIH0sCiAgaXNTdHJpbmc6IGZ1bmN0aW9uIGlzU3RyaW5nKG9iaikgewogICAgcmV0dXJuIG9iaiA9PT0gb2JqICsgJyc7CiAgfSwKICBpc0Jvb2xlYW46IGZ1bmN0aW9uIGlzQm9vbGVhbihvYmopIHsKICAgIHJldHVybiBvYmogPT09IGZhbHNlIHx8IG9iaiA9PT0gdHJ1ZTsKICB9LAogIGlzRnVuY3Rpb246IGZ1bmN0aW9uIGlzRnVuY3Rpb24ob2JqKSB7CiAgICByZXR1cm4gb2JqIGluc3RhbmNlb2YgRnVuY3Rpb247CiAgfQp9Owp2YXIgSU5URVJQUkVUQVRJT05TID0gW3sKICBsaXRtdXM6IENvbW1vbi5pc1N0cmluZywKICBjb252ZXJzaW9uczogewogICAgVEhSRUVfQ0hBUl9IRVg6IHsKICAgICAgcmVhZDogZnVuY3Rpb24gcmVhZChvcmlnaW5hbCkgewogICAgICAgIHZhciB0ZXN0ID0gb3JpZ2luYWwubWF0Y2goL14jKFtBLUYwLTldKShbQS1GMC05XSkoW0EtRjAtOV0pJC9pKTsKCiAgICAgICAgaWYgKHRlc3QgPT09IG51bGwpIHsKICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CgogICAgICAgIHJldHVybiB7CiAgICAgICAgICBzcGFjZTogJ0hFWCcsCiAgICAgICAgICBoZXg6IHBhcnNlSW50KCcweCcgKyB0ZXN0WzFdLnRvU3RyaW5nKCkgKyB0ZXN0WzFdLnRvU3RyaW5nKCkgKyB0ZXN0WzJdLnRvU3RyaW5nKCkgKyB0ZXN0WzJdLnRvU3RyaW5nKCkgKyB0ZXN0WzNdLnRvU3RyaW5nKCkgKyB0ZXN0WzNdLnRvU3RyaW5nKCksIDApCiAgICAgICAgfTsKICAgICAgfSwKICAgICAgd3JpdGU6IGNvbG9yVG9TdHJpbmcKICAgIH0sCiAgICBTSVhfQ0hBUl9IRVg6IHsKICAgICAgcmVhZDogZnVuY3Rpb24gcmVhZChvcmlnaW5hbCkgewogICAgICAgIHZhciB0ZXN0ID0gb3JpZ2luYWwubWF0Y2goL14jKFtBLUYwLTldezZ9KSQvaSk7CgogICAgICAgIGlmICh0ZXN0ID09PSBudWxsKSB7CiAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gewogICAgICAgICAgc3BhY2U6ICdIRVgnLAogICAgICAgICAgaGV4OiBwYXJzZUludCgnMHgnICsgdGVzdFsxXS50b1N0cmluZygpLCAwKQogICAgICAgIH07CiAgICAgIH0sCiAgICAgIHdyaXRlOiBjb2xvclRvU3RyaW5nCiAgICB9LAogICAgQ1NTX1JHQjogewogICAgICByZWFkOiBmdW5jdGlvbiByZWFkKG9yaWdpbmFsKSB7CiAgICAgICAgdmFyIHRlc3QgPSBvcmlnaW5hbC5tYXRjaCgvXnJnYlwoXHMqKC4rKVxzKixccyooLispXHMqLFxzKiguKylccypcKS8pOwoKICAgICAgICBpZiAodGVzdCA9PT0gbnVsbCkgewogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIHNwYWNlOiAnUkdCJywKICAgICAgICAgIHI6IHBhcnNlRmxvYXQodGVzdFsxXSksCiAgICAgICAgICBnOiBwYXJzZUZsb2F0KHRlc3RbMl0pLAogICAgICAgICAgYjogcGFyc2VGbG9hdCh0ZXN0WzNdKQogICAgICAgIH07CiAgICAgIH0sCiAgICAgIHdyaXRlOiBjb2xvclRvU3RyaW5nCiAgICB9LAogICAgQ1NTX1JHQkE6IHsKICAgICAgcmVhZDogZnVuY3Rpb24gcmVhZChvcmlnaW5hbCkgewogICAgICAgIHZhciB0ZXN0ID0gb3JpZ2luYWwubWF0Y2goL15yZ2JhXChccyooLispXHMqLFxzKiguKylccyosXHMqKC4rKVxzKixccyooLispXHMqXCkvKTsKCiAgICAgICAgaWYgKHRlc3QgPT09IG51bGwpIHsKICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CgogICAgICAgIHJldHVybiB7CiAgICAgICAgICBzcGFjZTogJ1JHQicsCiAgICAgICAgICByOiBwYXJzZUZsb2F0KHRlc3RbMV0pLAogICAgICAgICAgZzogcGFyc2VGbG9hdCh0ZXN0WzJdKSwKICAgICAgICAgIGI6IHBhcnNlRmxvYXQodGVzdFszXSksCiAgICAgICAgICBhOiBwYXJzZUZsb2F0KHRlc3RbNF0pCiAgICAgICAgfTsKICAgICAgfSwKICAgICAgd3JpdGU6IGNvbG9yVG9TdHJpbmcKICAgIH0KICB9Cn0sIHsKICBsaXRtdXM6IENvbW1vbi5pc051bWJlciwKICBjb252ZXJzaW9uczogewogICAgSEVYOiB7CiAgICAgIHJlYWQ6IGZ1bmN0aW9uIHJlYWQob3JpZ2luYWwpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgc3BhY2U6ICdIRVgnLAogICAgICAgICAgaGV4OiBvcmlnaW5hbCwKICAgICAgICAgIGNvbnZlcnNpb25OYW1lOiAnSEVYJwogICAgICAgIH07CiAgICAgIH0sCiAgICAgIHdyaXRlOiBmdW5jdGlvbiB3cml0ZShjb2xvcikgewogICAgICAgIHJldHVybiBjb2xvci5oZXg7CiAgICAgIH0KICAgIH0KICB9Cn0sIHsKICBsaXRtdXM6IENvbW1vbi5pc0FycmF5LAogIGNvbnZlcnNpb25zOiB7CiAgICBSR0JfQVJSQVk6IHsKICAgICAgcmVhZDogZnVuY3Rpb24gcmVhZChvcmlnaW5hbCkgewogICAgICAgIGlmIChvcmlnaW5hbC5sZW5ndGggIT09IDMpIHsKICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CgogICAgICAgIHJldHVybiB7CiAgICAgICAgICBzcGFjZTogJ1JHQicsCiAgICAgICAgICByOiBvcmlnaW5hbFswXSwKICAgICAgICAgIGc6IG9yaWdpbmFsWzFdLAogICAgICAgICAgYjogb3JpZ2luYWxbMl0KICAgICAgICB9OwogICAgICB9LAogICAgICB3cml0ZTogZnVuY3Rpb24gd3JpdGUoY29sb3IpIHsKICAgICAgICByZXR1cm4gW2NvbG9yLnIsIGNvbG9yLmcsIGNvbG9yLmJdOwogICAgICB9CiAgICB9LAogICAgUkdCQV9BUlJBWTogewogICAgICByZWFkOiBmdW5jdGlvbiByZWFkKG9yaWdpbmFsKSB7CiAgICAgICAgaWYgKG9yaWdpbmFsLmxlbmd0aCAhPT0gNCkgcmV0dXJuIGZhbHNlOwogICAgICAgIHJldHVybiB7CiAgICAgICAgICBzcGFjZTogJ1JHQicsCiAgICAgICAgICByOiBvcmlnaW5hbFswXSwKICAgICAgICAgIGc6IG9yaWdpbmFsWzFdLAogICAgICAgICAgYjogb3JpZ2luYWxbMl0sCiAgICAgICAgICBhOiBvcmlnaW5hbFszXQogICAgICAgIH07CiAgICAgIH0sCiAgICAgIHdyaXRlOiBmdW5jdGlvbiB3cml0ZShjb2xvcikgewogICAgICAgIHJldHVybiBbY29sb3IuciwgY29sb3IuZywgY29sb3IuYiwgY29sb3IuYV07CiAgICAgIH0KICAgIH0KICB9Cn0sIHsKICBsaXRtdXM6IENvbW1vbi5pc09iamVjdCwKICBjb252ZXJzaW9uczogewogICAgUkdCQV9PQko6IHsKICAgICAgcmVhZDogZnVuY3Rpb24gcmVhZChvcmlnaW5hbCkgewogICAgICAgIGlmIChDb21tb24uaXNOdW1iZXIob3JpZ2luYWwucikgJiYgQ29tbW9uLmlzTnVtYmVyKG9yaWdpbmFsLmcpICYmIENvbW1vbi5pc051bWJlcihvcmlnaW5hbC5iKSAmJiBDb21tb24uaXNOdW1iZXIob3JpZ2luYWwuYSkpIHsKICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIHNwYWNlOiAnUkdCJywKICAgICAgICAgICAgcjogb3JpZ2luYWwuciwKICAgICAgICAgICAgZzogb3JpZ2luYWwuZywKICAgICAgICAgICAgYjogb3JpZ2luYWwuYiwKICAgICAgICAgICAgYTogb3JpZ2luYWwuYQogICAgICAgICAgfTsKICAgICAgICB9CgogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfSwKICAgICAgd3JpdGU6IGZ1bmN0aW9uIHdyaXRlKGNvbG9yKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIHI6IGNvbG9yLnIsCiAgICAgICAgICBnOiBjb2xvci5nLAogICAgICAgICAgYjogY29sb3IuYiwKICAgICAgICAgIGE6IGNvbG9yLmEKICAgICAgICB9OwogICAgICB9CiAgICB9LAogICAgUkdCX09CSjogewogICAgICByZWFkOiBmdW5jdGlvbiByZWFkKG9yaWdpbmFsKSB7CiAgICAgICAgaWYgKENvbW1vbi5pc051bWJlcihvcmlnaW5hbC5yKSAmJiBDb21tb24uaXNOdW1iZXIob3JpZ2luYWwuZykgJiYgQ29tbW9uLmlzTnVtYmVyKG9yaWdpbmFsLmIpKSB7CiAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICBzcGFjZTogJ1JHQicsCiAgICAgICAgICAgIHI6IG9yaWdpbmFsLnIsCiAgICAgICAgICAgIGc6IG9yaWdpbmFsLmcsCiAgICAgICAgICAgIGI6IG9yaWdpbmFsLmIKICAgICAgICAgIH07CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0sCiAgICAgIHdyaXRlOiBmdW5jdGlvbiB3cml0ZShjb2xvcikgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICByOiBjb2xvci5yLAogICAgICAgICAgZzogY29sb3IuZywKICAgICAgICAgIGI6IGNvbG9yLmIKICAgICAgICB9OwogICAgICB9CiAgICB9LAogICAgSFNWQV9PQko6IHsKICAgICAgcmVhZDogZnVuY3Rpb24gcmVhZChvcmlnaW5hbCkgewogICAgICAgIGlmIChDb21tb24uaXNOdW1iZXIob3JpZ2luYWwuaCkgJiYgQ29tbW9uLmlzTnVtYmVyKG9yaWdpbmFsLnMpICYmIENvbW1vbi5pc051bWJlcihvcmlnaW5hbC52KSAmJiBDb21tb24uaXNOdW1iZXIob3JpZ2luYWwuYSkpIHsKICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIHNwYWNlOiAnSFNWJywKICAgICAgICAgICAgaDogb3JpZ2luYWwuaCwKICAgICAgICAgICAgczogb3JpZ2luYWwucywKICAgICAgICAgICAgdjogb3JpZ2luYWwudiwKICAgICAgICAgICAgYTogb3JpZ2luYWwuYQogICAgICAgICAgfTsKICAgICAgICB9CgogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfSwKICAgICAgd3JpdGU6IGZ1bmN0aW9uIHdyaXRlKGNvbG9yKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIGg6IGNvbG9yLmgsCiAgICAgICAgICBzOiBjb2xvci5zLAogICAgICAgICAgdjogY29sb3IudiwKICAgICAgICAgIGE6IGNvbG9yLmEKICAgICAgICB9OwogICAgICB9CiAgICB9LAogICAgSFNWX09CSjogewogICAgICByZWFkOiBmdW5jdGlvbiByZWFkKG9yaWdpbmFsKSB7CiAgICAgICAgaWYgKENvbW1vbi5pc051bWJlcihvcmlnaW5hbC5oKSAmJiBDb21tb24uaXNOdW1iZXIob3JpZ2luYWwucykgJiYgQ29tbW9uLmlzTnVtYmVyKG9yaWdpbmFsLnYpKSB7CiAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICBzcGFjZTogJ0hTVicsCiAgICAgICAgICAgIGg6IG9yaWdpbmFsLmgsCiAgICAgICAgICAgIHM6IG9yaWdpbmFsLnMsCiAgICAgICAgICAgIHY6IG9yaWdpbmFsLnYKICAgICAgICAgIH07CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0sCiAgICAgIHdyaXRlOiBmdW5jdGlvbiB3cml0ZShjb2xvcikgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICBoOiBjb2xvci5oLAogICAgICAgICAgczogY29sb3IucywKICAgICAgICAgIHY6IGNvbG9yLnYKICAgICAgICB9OwogICAgICB9CiAgICB9CiAgfQp9XTsKdmFyIHJlc3VsdCA9IHZvaWQgMDsKdmFyIHRvUmV0dXJuID0gdm9pZCAwOwoKdmFyIGludGVycHJldCA9IGZ1bmN0aW9uIGludGVycHJldCgpIHsKICB0b1JldHVybiA9IGZhbHNlOwogIHZhciBvcmlnaW5hbCA9IGFyZ3VtZW50cy5sZW5ndGggPiAxID8gQ29tbW9uLnRvQXJyYXkoYXJndW1lbnRzKSA6IGFyZ3VtZW50c1swXTsKICBDb21tb24uZWFjaChJTlRFUlBSRVRBVElPTlMsIGZ1bmN0aW9uIChmYW1pbHkpIHsKICAgIGlmIChmYW1pbHkubGl0bXVzKG9yaWdpbmFsKSkgewogICAgICBDb21tb24uZWFjaChmYW1pbHkuY29udmVyc2lvbnMsIGZ1bmN0aW9uIChjb252ZXJzaW9uLCBjb252ZXJzaW9uTmFtZSkgewogICAgICAgIHJlc3VsdCA9IGNvbnZlcnNpb24ucmVhZChvcmlnaW5hbCk7CgogICAgICAgIGlmICh0b1JldHVybiA9PT0gZmFsc2UgJiYgcmVzdWx0ICE9PSBmYWxzZSkgewogICAgICAgICAgdG9SZXR1cm4gPSByZXN1bHQ7CiAgICAgICAgICByZXN1bHQuY29udmVyc2lvbk5hbWUgPSBjb252ZXJzaW9uTmFtZTsKICAgICAgICAgIHJlc3VsdC5jb252ZXJzaW9uID0gY29udmVyc2lvbjsKICAgICAgICAgIHJldHVybiBDb21tb24uQlJFQUs7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgcmV0dXJuIENvbW1vbi5CUkVBSzsKICAgIH0KICB9KTsKICByZXR1cm4gdG9SZXR1cm47Cn07Cgp2YXIgdG1wQ29tcG9uZW50ID0gdm9pZCAwOwp2YXIgQ29sb3JNYXRoID0gewogIGhzdl90b19yZ2I6IGZ1bmN0aW9uIGhzdl90b19yZ2IoaCwgcywgdikgewogICAgdmFyIGhpID0gTWF0aC5mbG9vcihoIC8gNjApICUgNjsKICAgIHZhciBmID0gaCAvIDYwIC0gTWF0aC5mbG9vcihoIC8gNjApOwogICAgdmFyIHAgPSB2ICogKDEuMCAtIHMpOwogICAgdmFyIHEgPSB2ICogKDEuMCAtIGYgKiBzKTsKICAgIHZhciB0ID0gdiAqICgxLjAgLSAoMS4wIC0gZikgKiBzKTsKICAgIHZhciBjID0gW1t2LCB0LCBwXSwgW3EsIHYsIHBdLCBbcCwgdiwgdF0sIFtwLCBxLCB2XSwgW3QsIHAsIHZdLCBbdiwgcCwgcV1dW2hpXTsKICAgIHJldHVybiB7CiAgICAgIHI6IGNbMF0gKiAyNTUsCiAgICAgIGc6IGNbMV0gKiAyNTUsCiAgICAgIGI6IGNbMl0gKiAyNTUKICAgIH07CiAgfSwKICByZ2JfdG9faHN2OiBmdW5jdGlvbiByZ2JfdG9faHN2KHIsIGcsIGIpIHsKICAgIHZhciBtaW4gPSBNYXRoLm1pbihyLCBnLCBiKTsKICAgIHZhciBtYXggPSBNYXRoLm1heChyLCBnLCBiKTsKICAgIHZhciBkZWx0YSA9IG1heCAtIG1pbjsKICAgIHZhciBoID0gdm9pZCAwOwogICAgdmFyIHMgPSB2b2lkIDA7CgogICAgaWYgKG1heCAhPT0gMCkgewogICAgICBzID0gZGVsdGEgLyBtYXg7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gewogICAgICAgIGg6IE5hTiwKICAgICAgICBzOiAwLAogICAgICAgIHY6IDAKICAgICAgfTsKICAgIH0KCiAgICBpZiAociA9PT0gbWF4KSB7CiAgICAgIGggPSAoZyAtIGIpIC8gZGVsdGE7CiAgICB9IGVsc2UgaWYgKGcgPT09IG1heCkgewogICAgICBoID0gMiArIChiIC0gcikgLyBkZWx0YTsKICAgIH0gZWxzZSB7CiAgICAgIGggPSA0ICsgKHIgLSBnKSAvIGRlbHRhOwogICAgfQoKICAgIGggLz0gNjsKCiAgICBpZiAoaCA8IDApIHsKICAgICAgaCArPSAxOwogICAgfQoKICAgIHJldHVybiB7CiAgICAgIGg6IGggKiAzNjAsCiAgICAgIHM6IHMsCiAgICAgIHY6IG1heCAvIDI1NQogICAgfTsKICB9LAogIHJnYl90b19oZXg6IGZ1bmN0aW9uIHJnYl90b19oZXgociwgZywgYikgewogICAgdmFyIGhleCA9IHRoaXMuaGV4X3dpdGhfY29tcG9uZW50KDAsIDIsIHIpOwogICAgaGV4ID0gdGhpcy5oZXhfd2l0aF9jb21wb25lbnQoaGV4LCAxLCBnKTsKICAgIGhleCA9IHRoaXMuaGV4X3dpdGhfY29tcG9uZW50KGhleCwgMCwgYik7CiAgICByZXR1cm4gaGV4OwogIH0sCiAgY29tcG9uZW50X2Zyb21faGV4OiBmdW5jdGlvbiBjb21wb25lbnRfZnJvbV9oZXgoaGV4LCBjb21wb25lbnRJbmRleCkgewogICAgcmV0dXJuIGhleCA+PiBjb21wb25lbnRJbmRleCAqIDggJiAweEZGOwogIH0sCiAgaGV4X3dpdGhfY29tcG9uZW50OiBmdW5jdGlvbiBoZXhfd2l0aF9jb21wb25lbnQoaGV4LCBjb21wb25lbnRJbmRleCwgdmFsdWUpIHsKICAgIHJldHVybiB2YWx1ZSA8PCAodG1wQ29tcG9uZW50ID0gY29tcG9uZW50SW5kZXggKiA4KSB8IGhleCAmIH4oMHhGRiA8PCB0bXBDb21wb25lbnQpOwogIH0KfTsKCnZhciBfdHlwZW9mID0gdHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiBfdHlwZW9mMihTeW1ib2wuaXRlcmF0b3IpID09PSAic3ltYm9sIiA/IGZ1bmN0aW9uIChvYmopIHsKICByZXR1cm4gX3R5cGVvZjIob2JqKTsKfSA6IGZ1bmN0aW9uIChvYmopIHsKICByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gInN5bWJvbCIgOiBfdHlwZW9mMihvYmopOwp9OwoKdmFyIGNsYXNzQ2FsbENoZWNrID0gZnVuY3Rpb24gY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7CiAgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsKICAgIHRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpOwogIH0KfTsKCnZhciBjcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsKICBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsKICAgICAgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsKICAgICAgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOwogICAgICBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7CiAgICAgIGlmICgidmFsdWUiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOwogICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7CiAgICB9CiAgfQoKICByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgewogICAgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsKICAgIGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOwogICAgcmV0dXJuIENvbnN0cnVjdG9yOwogIH07Cn0oKTsKCnZhciBnZXQgPSBmdW5jdGlvbiBnZXQob2JqZWN0LCBwcm9wZXJ0eSwgcmVjZWl2ZXIpIHsKICBpZiAob2JqZWN0ID09PSBudWxsKSBvYmplY3QgPSBGdW5jdGlvbi5wcm90b3R5cGU7CiAgdmFyIGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgcHJvcGVydHkpOwoKICBpZiAoZGVzYyA9PT0gdW5kZWZpbmVkKSB7CiAgICB2YXIgcGFyZW50ID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKG9iamVjdCk7CgogICAgaWYgKHBhcmVudCA9PT0gbnVsbCkgewogICAgICByZXR1cm4gdW5kZWZpbmVkOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIGdldChwYXJlbnQsIHByb3BlcnR5LCByZWNlaXZlcik7CiAgICB9CiAgfSBlbHNlIGlmICgidmFsdWUiIGluIGRlc2MpIHsKICAgIHJldHVybiBkZXNjLnZhbHVlOwogIH0gZWxzZSB7CiAgICB2YXIgZ2V0dGVyID0gZGVzYy5nZXQ7CgogICAgaWYgKGdldHRlciA9PT0gdW5kZWZpbmVkKSB7CiAgICAgIHJldHVybiB1bmRlZmluZWQ7CiAgICB9CgogICAgcmV0dXJuIGdldHRlci5jYWxsKHJlY2VpdmVyKTsKICB9Cn07Cgp2YXIgaW5oZXJpdHMgPSBmdW5jdGlvbiBpbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgewogIGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gImZ1bmN0aW9uIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7CiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90ICIgKyBfdHlwZW9mMihzdXBlckNsYXNzKSk7CiAgfQoKICBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsKICAgIGNvbnN0cnVjdG9yOiB7CiAgICAgIHZhbHVlOiBzdWJDbGFzcywKICAgICAgZW51bWVyYWJsZTogZmFsc2UsCiAgICAgIHdyaXRhYmxlOiB0cnVlLAogICAgICBjb25maWd1cmFibGU6IHRydWUKICAgIH0KICB9KTsKICBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7Cn07Cgp2YXIgcG9zc2libGVDb25zdHJ1Y3RvclJldHVybiA9IGZ1bmN0aW9uIHBvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgewogIGlmICghc2VsZikgewogICAgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWQiKTsKICB9CgogIHJldHVybiBjYWxsICYmIChfdHlwZW9mMihjYWxsKSA9PT0gIm9iamVjdCIgfHwgdHlwZW9mIGNhbGwgPT09ICJmdW5jdGlvbiIpID8gY2FsbCA6IHNlbGY7Cn07Cgp2YXIgQ29sb3IgPSBmdW5jdGlvbiAoKSB7CiAgZnVuY3Rpb24gQ29sb3IoKSB7CiAgICBjbGFzc0NhbGxDaGVjayh0aGlzLCBDb2xvcik7CiAgICB0aGlzLl9fc3RhdGUgPSBpbnRlcnByZXQuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKCiAgICBpZiAodGhpcy5fX3N0YXRlID09PSBmYWxzZSkgewogICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCB0byBpbnRlcnByZXQgY29sb3IgYXJndW1lbnRzJyk7CiAgICB9CgogICAgdGhpcy5fX3N0YXRlLmEgPSB0aGlzLl9fc3RhdGUuYSB8fCAxOwogIH0KCiAgY3JlYXRlQ2xhc3MoQ29sb3IsIFt7CiAgICBrZXk6ICd0b1N0cmluZycsCiAgICB2YWx1ZTogZnVuY3Rpb24gdG9TdHJpbmcoKSB7CiAgICAgIHJldHVybiBjb2xvclRvU3RyaW5nKHRoaXMpOwogICAgfQogIH0sIHsKICAgIGtleTogJ3RvSGV4U3RyaW5nJywKICAgIHZhbHVlOiBmdW5jdGlvbiB0b0hleFN0cmluZygpIHsKICAgICAgcmV0dXJuIGNvbG9yVG9TdHJpbmcodGhpcywgdHJ1ZSk7CiAgICB9CiAgfSwgewogICAga2V5OiAndG9PcmlnaW5hbCcsCiAgICB2YWx1ZTogZnVuY3Rpb24gdG9PcmlnaW5hbCgpIHsKICAgICAgcmV0dXJuIHRoaXMuX19zdGF0ZS5jb252ZXJzaW9uLndyaXRlKHRoaXMpOwogICAgfQogIH1dKTsKICByZXR1cm4gQ29sb3I7Cn0oKTsKCmZ1bmN0aW9uIGRlZmluZVJHQkNvbXBvbmVudCh0YXJnZXQsIGNvbXBvbmVudCwgY29tcG9uZW50SGV4SW5kZXgpIHsKICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBjb21wb25lbnQsIHsKICAgIGdldDogZnVuY3Rpb24gZ2V0JCQxKCkgewogICAgICBpZiAodGhpcy5fX3N0YXRlLnNwYWNlID09PSAnUkdCJykgewogICAgICAgIHJldHVybiB0aGlzLl9fc3RhdGVbY29tcG9uZW50XTsKICAgICAgfQoKICAgICAgQ29sb3IucmVjYWxjdWxhdGVSR0IodGhpcywgY29tcG9uZW50LCBjb21wb25lbnRIZXhJbmRleCk7CiAgICAgIHJldHVybiB0aGlzLl9fc3RhdGVbY29tcG9uZW50XTsKICAgIH0sCiAgICBzZXQ6IGZ1bmN0aW9uIHNldCQkMSh2KSB7CiAgICAgIGlmICh0aGlzLl9fc3RhdGUuc3BhY2UgIT09ICdSR0InKSB7CiAgICAgICAgQ29sb3IucmVjYWxjdWxhdGVSR0IodGhpcywgY29tcG9uZW50LCBjb21wb25lbnRIZXhJbmRleCk7CiAgICAgICAgdGhpcy5fX3N0YXRlLnNwYWNlID0gJ1JHQic7CiAgICAgIH0KCiAgICAgIHRoaXMuX19zdGF0ZVtjb21wb25lbnRdID0gdjsKICAgIH0KICB9KTsKfQoKZnVuY3Rpb24gZGVmaW5lSFNWQ29tcG9uZW50KHRhcmdldCwgY29tcG9uZW50KSB7CiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgY29tcG9uZW50LCB7CiAgICBnZXQ6IGZ1bmN0aW9uIGdldCQkMSgpIHsKICAgICAgaWYgKHRoaXMuX19zdGF0ZS5zcGFjZSA9PT0gJ0hTVicpIHsKICAgICAgICByZXR1cm4gdGhpcy5fX3N0YXRlW2NvbXBvbmVudF07CiAgICAgIH0KCiAgICAgIENvbG9yLnJlY2FsY3VsYXRlSFNWKHRoaXMpOwogICAgICByZXR1cm4gdGhpcy5fX3N0YXRlW2NvbXBvbmVudF07CiAgICB9LAogICAgc2V0OiBmdW5jdGlvbiBzZXQkJDEodikgewogICAgICBpZiAodGhpcy5fX3N0YXRlLnNwYWNlICE9PSAnSFNWJykgewogICAgICAgIENvbG9yLnJlY2FsY3VsYXRlSFNWKHRoaXMpOwogICAgICAgIHRoaXMuX19zdGF0ZS5zcGFjZSA9ICdIU1YnOwogICAgICB9CgogICAgICB0aGlzLl9fc3RhdGVbY29tcG9uZW50XSA9IHY7CiAgICB9CiAgfSk7Cn0KCkNvbG9yLnJlY2FsY3VsYXRlUkdCID0gZnVuY3Rpb24gKGNvbG9yLCBjb21wb25lbnQsIGNvbXBvbmVudEhleEluZGV4KSB7CiAgaWYgKGNvbG9yLl9fc3RhdGUuc3BhY2UgPT09ICdIRVgnKSB7CiAgICBjb2xvci5fX3N0YXRlW2NvbXBvbmVudF0gPSBDb2xvck1hdGguY29tcG9uZW50X2Zyb21faGV4KGNvbG9yLl9fc3RhdGUuaGV4LCBjb21wb25lbnRIZXhJbmRleCk7CiAgfSBlbHNlIGlmIChjb2xvci5fX3N0YXRlLnNwYWNlID09PSAnSFNWJykgewogICAgQ29tbW9uLmV4dGVuZChjb2xvci5fX3N0YXRlLCBDb2xvck1hdGguaHN2X3RvX3JnYihjb2xvci5fX3N0YXRlLmgsIGNvbG9yLl9fc3RhdGUucywgY29sb3IuX19zdGF0ZS52KSk7CiAgfSBlbHNlIHsKICAgIHRocm93IG5ldyBFcnJvcignQ29ycnVwdGVkIGNvbG9yIHN0YXRlJyk7CiAgfQp9OwoKQ29sb3IucmVjYWxjdWxhdGVIU1YgPSBmdW5jdGlvbiAoY29sb3IpIHsKICB2YXIgcmVzdWx0ID0gQ29sb3JNYXRoLnJnYl90b19oc3YoY29sb3IuciwgY29sb3IuZywgY29sb3IuYik7CiAgQ29tbW9uLmV4dGVuZChjb2xvci5fX3N0YXRlLCB7CiAgICBzOiByZXN1bHQucywKICAgIHY6IHJlc3VsdC52CiAgfSk7CgogIGlmICghQ29tbW9uLmlzTmFOKHJlc3VsdC5oKSkgewogICAgY29sb3IuX19zdGF0ZS5oID0gcmVzdWx0Lmg7CiAgfSBlbHNlIGlmIChDb21tb24uaXNVbmRlZmluZWQoY29sb3IuX19zdGF0ZS5oKSkgewogICAgY29sb3IuX19zdGF0ZS5oID0gMDsKICB9Cn07CgpDb2xvci5DT01QT05FTlRTID0gWydyJywgJ2cnLCAnYicsICdoJywgJ3MnLCAndicsICdoZXgnLCAnYSddOwpkZWZpbmVSR0JDb21wb25lbnQoQ29sb3IucHJvdG90eXBlLCAncicsIDIpOwpkZWZpbmVSR0JDb21wb25lbnQoQ29sb3IucHJvdG90eXBlLCAnZycsIDEpOwpkZWZpbmVSR0JDb21wb25lbnQoQ29sb3IucHJvdG90eXBlLCAnYicsIDApOwpkZWZpbmVIU1ZDb21wb25lbnQoQ29sb3IucHJvdG90eXBlLCAnaCcpOwpkZWZpbmVIU1ZDb21wb25lbnQoQ29sb3IucHJvdG90eXBlLCAncycpOwpkZWZpbmVIU1ZDb21wb25lbnQoQ29sb3IucHJvdG90eXBlLCAndicpOwpPYmplY3QuZGVmaW5lUHJvcGVydHkoQ29sb3IucHJvdG90eXBlLCAnYScsIHsKICBnZXQ6IGZ1bmN0aW9uIGdldCQkMSgpIHsKICAgIHJldHVybiB0aGlzLl9fc3RhdGUuYTsKICB9LAogIHNldDogZnVuY3Rpb24gc2V0JCQxKHYpIHsKICAgIHRoaXMuX19zdGF0ZS5hID0gdjsKICB9Cn0pOwpPYmplY3QuZGVmaW5lUHJvcGVydHkoQ29sb3IucHJvdG90eXBlLCAnaGV4JywgewogIGdldDogZnVuY3Rpb24gZ2V0JCQxKCkgewogICAgaWYgKHRoaXMuX19zdGF0ZS5zcGFjZSAhPT0gJ0hFWCcpIHsKICAgICAgdGhpcy5fX3N0YXRlLmhleCA9IENvbG9yTWF0aC5yZ2JfdG9faGV4KHRoaXMuciwgdGhpcy5nLCB0aGlzLmIpOwogICAgICB0aGlzLl9fc3RhdGUuc3BhY2UgPSAnSEVYJzsKICAgIH0KCiAgICByZXR1cm4gdGhpcy5fX3N0YXRlLmhleDsKICB9LAogIHNldDogZnVuY3Rpb24gc2V0JCQxKHYpIHsKICAgIHRoaXMuX19zdGF0ZS5zcGFjZSA9ICdIRVgnOwogICAgdGhpcy5fX3N0YXRlLmhleCA9IHY7CiAgfQp9KTsKCnZhciBDb250cm9sbGVyID0gZnVuY3Rpb24gKCkgewogIGZ1bmN0aW9uIENvbnRyb2xsZXIob2JqZWN0LCBwcm9wZXJ0eSkgewogICAgY2xhc3NDYWxsQ2hlY2sodGhpcywgQ29udHJvbGxlcik7CiAgICB0aGlzLmluaXRpYWxWYWx1ZSA9IG9iamVjdFtwcm9wZXJ0eV07CiAgICB0aGlzLmRvbUVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgIHRoaXMub2JqZWN0ID0gb2JqZWN0OwogICAgdGhpcy5wcm9wZXJ0eSA9IHByb3BlcnR5OwogICAgdGhpcy5fX29uQ2hhbmdlID0gdW5kZWZpbmVkOwogICAgdGhpcy5fX29uRmluaXNoQ2hhbmdlID0gdW5kZWZpbmVkOwogIH0KCiAgY3JlYXRlQ2xhc3MoQ29udHJvbGxlciwgW3sKICAgIGtleTogJ29uQ2hhbmdlJywKICAgIHZhbHVlOiBmdW5jdGlvbiBvbkNoYW5nZShmbmMpIHsKICAgICAgdGhpcy5fX29uQ2hhbmdlID0gZm5jOwogICAgICByZXR1cm4gdGhpczsKICAgIH0KICB9LCB7CiAgICBrZXk6ICdvbkZpbmlzaENoYW5nZScsCiAgICB2YWx1ZTogZnVuY3Rpb24gb25GaW5pc2hDaGFuZ2UoZm5jKSB7CiAgICAgIHRoaXMuX19vbkZpbmlzaENoYW5nZSA9IGZuYzsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgfSwgewogICAga2V5OiAnc2V0VmFsdWUnLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNldFZhbHVlKG5ld1ZhbHVlKSB7CiAgICAgIHRoaXMub2JqZWN0W3RoaXMucHJvcGVydHldID0gbmV3VmFsdWU7CgogICAgICBpZiAodGhpcy5fX29uQ2hhbmdlKSB7CiAgICAgICAgdGhpcy5fX29uQ2hhbmdlLmNhbGwodGhpcywgbmV3VmFsdWUpOwogICAgICB9CgogICAgICB0aGlzLnVwZGF0ZURpc3BsYXkoKTsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgfSwgewogICAga2V5OiAnZ2V0VmFsdWUnLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldFZhbHVlKCkgewogICAgICByZXR1cm4gdGhpcy5vYmplY3RbdGhpcy5wcm9wZXJ0eV07CiAgICB9CiAgfSwgewogICAga2V5OiAndXBkYXRlRGlzcGxheScsCiAgICB2YWx1ZTogZnVuY3Rpb24gdXBkYXRlRGlzcGxheSgpIHsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgfSwgewogICAga2V5OiAnaXNNb2RpZmllZCcsCiAgICB2YWx1ZTogZnVuY3Rpb24gaXNNb2RpZmllZCgpIHsKICAgICAgcmV0dXJuIHRoaXMuaW5pdGlhbFZhbHVlICE9PSB0aGlzLmdldFZhbHVlKCk7CiAgICB9CiAgfV0pOwogIHJldHVybiBDb250cm9sbGVyOwp9KCk7Cgp2YXIgRVZFTlRfTUFQID0gewogIEhUTUxFdmVudHM6IFsnY2hhbmdlJ10sCiAgTW91c2VFdmVudHM6IFsnY2xpY2snLCAnbW91c2Vtb3ZlJywgJ21vdXNlZG93bicsICdtb3VzZXVwJywgJ21vdXNlb3ZlciddLAogIEtleWJvYXJkRXZlbnRzOiBbJ2tleWRvd24nXQp9Owp2YXIgRVZFTlRfTUFQX0lOViA9IHt9OwpDb21tb24uZWFjaChFVkVOVF9NQVAsIGZ1bmN0aW9uICh2LCBrKSB7CiAgQ29tbW9uLmVhY2godiwgZnVuY3Rpb24gKGUpIHsKICAgIEVWRU5UX01BUF9JTlZbZV0gPSBrOwogIH0pOwp9KTsKdmFyIENTU19WQUxVRV9QSVhFTFMgPSAvKFxkKyhcLlxkKyk/KXB4LzsKCmZ1bmN0aW9uIGNzc1ZhbHVlVG9QaXhlbHModmFsKSB7CiAgaWYgKHZhbCA9PT0gJzAnIHx8IENvbW1vbi5pc1VuZGVmaW5lZCh2YWwpKSB7CiAgICByZXR1cm4gMDsKICB9CgogIHZhciBtYXRjaCA9IHZhbC5tYXRjaChDU1NfVkFMVUVfUElYRUxTKTsKCiAgaWYgKCFDb21tb24uaXNOdWxsKG1hdGNoKSkgewogICAgcmV0dXJuIHBhcnNlRmxvYXQobWF0Y2hbMV0pOwogIH0KCiAgcmV0dXJuIDA7Cn0KCnZhciBkb20gPSB7CiAgbWFrZVNlbGVjdGFibGU6IGZ1bmN0aW9uIG1ha2VTZWxlY3RhYmxlKGVsZW0sIHNlbGVjdGFibGUpIHsKICAgIGlmIChlbGVtID09PSB1bmRlZmluZWQgfHwgZWxlbS5zdHlsZSA9PT0gdW5kZWZpbmVkKSByZXR1cm47CiAgICBlbGVtLm9uc2VsZWN0c3RhcnQgPSBzZWxlY3RhYmxlID8gZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gZmFsc2U7CiAgICB9IDogZnVuY3Rpb24gKCkge307CiAgICBlbGVtLnN0eWxlLk1velVzZXJTZWxlY3QgPSBzZWxlY3RhYmxlID8gJ2F1dG8nIDogJ25vbmUnOwogICAgZWxlbS5zdHlsZS5LaHRtbFVzZXJTZWxlY3QgPSBzZWxlY3RhYmxlID8gJ2F1dG8nIDogJ25vbmUnOwogICAgZWxlbS51bnNlbGVjdGFibGUgPSBzZWxlY3RhYmxlID8gJ29uJyA6ICdvZmYnOwogIH0sCiAgbWFrZUZ1bGxzY3JlZW46IGZ1bmN0aW9uIG1ha2VGdWxsc2NyZWVuKGVsZW0sIGhvciwgdmVydCkgewogICAgdmFyIHZlcnRpY2FsID0gdmVydDsKICAgIHZhciBob3Jpem9udGFsID0gaG9yOwoKICAgIGlmIChDb21tb24uaXNVbmRlZmluZWQoaG9yaXpvbnRhbCkpIHsKICAgICAgaG9yaXpvbnRhbCA9IHRydWU7CiAgICB9CgogICAgaWYgKENvbW1vbi5pc1VuZGVmaW5lZCh2ZXJ0aWNhbCkpIHsKICAgICAgdmVydGljYWwgPSB0cnVlOwogICAgfQoKICAgIGVsZW0uc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnOwoKICAgIGlmIChob3Jpem9udGFsKSB7CiAgICAgIGVsZW0uc3R5bGUubGVmdCA9IDA7CiAgICAgIGVsZW0uc3R5bGUucmlnaHQgPSAwOwogICAgfQoKICAgIGlmICh2ZXJ0aWNhbCkgewogICAgICBlbGVtLnN0eWxlLnRvcCA9IDA7CiAgICAgIGVsZW0uc3R5bGUuYm90dG9tID0gMDsKICAgIH0KICB9LAogIGZha2VFdmVudDogZnVuY3Rpb24gZmFrZUV2ZW50KGVsZW0sIGV2ZW50VHlwZSwgcGFycywgYXV4KSB7CiAgICB2YXIgcGFyYW1zID0gcGFycyB8fCB7fTsKICAgIHZhciBjbGFzc05hbWUgPSBFVkVOVF9NQVBfSU5WW2V2ZW50VHlwZV07CgogICAgaWYgKCFjbGFzc05hbWUpIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKCdFdmVudCB0eXBlICcgKyBldmVudFR5cGUgKyAnIG5vdCBzdXBwb3J0ZWQuJyk7CiAgICB9CgogICAgdmFyIGV2dCA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KGNsYXNzTmFtZSk7CgogICAgc3dpdGNoIChjbGFzc05hbWUpIHsKICAgICAgY2FzZSAnTW91c2VFdmVudHMnOgogICAgICAgIHsKICAgICAgICAgIHZhciBjbGllbnRYID0gcGFyYW1zLnggfHwgcGFyYW1zLmNsaWVudFggfHwgMDsKICAgICAgICAgIHZhciBjbGllbnRZID0gcGFyYW1zLnkgfHwgcGFyYW1zLmNsaWVudFkgfHwgMDsKICAgICAgICAgIGV2dC5pbml0TW91c2VFdmVudChldmVudFR5cGUsIHBhcmFtcy5idWJibGVzIHx8IGZhbHNlLCBwYXJhbXMuY2FuY2VsYWJsZSB8fCB0cnVlLCB3aW5kb3csIHBhcmFtcy5jbGlja0NvdW50IHx8IDEsIDAsIDAsIGNsaWVudFgsIGNsaWVudFksIGZhbHNlLCBmYWxzZSwgZmFsc2UsIGZhbHNlLCAwLCBudWxsKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KCiAgICAgIGNhc2UgJ0tleWJvYXJkRXZlbnRzJzoKICAgICAgICB7CiAgICAgICAgICB2YXIgaW5pdCA9IGV2dC5pbml0S2V5Ym9hcmRFdmVudCB8fCBldnQuaW5pdEtleUV2ZW50OwogICAgICAgICAgQ29tbW9uLmRlZmF1bHRzKHBhcmFtcywgewogICAgICAgICAgICBjYW5jZWxhYmxlOiB0cnVlLAogICAgICAgICAgICBjdHJsS2V5OiBmYWxzZSwKICAgICAgICAgICAgYWx0S2V5OiBmYWxzZSwKICAgICAgICAgICAgc2hpZnRLZXk6IGZhbHNlLAogICAgICAgICAgICBtZXRhS2V5OiBmYWxzZSwKICAgICAgICAgICAga2V5Q29kZTogdW5kZWZpbmVkLAogICAgICAgICAgICBjaGFyQ29kZTogdW5kZWZpbmVkCiAgICAgICAgICB9KTsKICAgICAgICAgIGluaXQoZXZlbnRUeXBlLCBwYXJhbXMuYnViYmxlcyB8fCBmYWxzZSwgcGFyYW1zLmNhbmNlbGFibGUsIHdpbmRvdywgcGFyYW1zLmN0cmxLZXksIHBhcmFtcy5hbHRLZXksIHBhcmFtcy5zaGlmdEtleSwgcGFyYW1zLm1ldGFLZXksIHBhcmFtcy5rZXlDb2RlLCBwYXJhbXMuY2hhckNvZGUpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQoKICAgICAgZGVmYXVsdDoKICAgICAgICB7CiAgICAgICAgICBldnQuaW5pdEV2ZW50KGV2ZW50VHlwZSwgcGFyYW1zLmJ1YmJsZXMgfHwgZmFsc2UsIHBhcmFtcy5jYW5jZWxhYmxlIHx8IHRydWUpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgfQoKICAgIENvbW1vbi5kZWZhdWx0cyhldnQsIGF1eCk7CiAgICBlbGVtLmRpc3BhdGNoRXZlbnQoZXZ0KTsKICB9LAogIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoZWxlbSwgZXZlbnQsIGZ1bmMsIG5ld0Jvb2wpIHsKICAgIHZhciBib29sID0gbmV3Qm9vbCB8fCBmYWxzZTsKCiAgICBpZiAoZWxlbS5hZGRFdmVudExpc3RlbmVyKSB7CiAgICAgIGVsZW0uYWRkRXZlbnRMaXN0ZW5lcihldmVudCwgZnVuYywgYm9vbCk7CiAgICB9IGVsc2UgaWYgKGVsZW0uYXR0YWNoRXZlbnQpIHsKICAgICAgZWxlbS5hdHRhY2hFdmVudCgnb24nICsgZXZlbnQsIGZ1bmMpOwogICAgfQoKICAgIHJldHVybiBkb207CiAgfSwKICB1bmJpbmQ6IGZ1bmN0aW9uIHVuYmluZChlbGVtLCBldmVudCwgZnVuYywgbmV3Qm9vbCkgewogICAgdmFyIGJvb2wgPSBuZXdCb29sIHx8IGZhbHNlOwoKICAgIGlmIChlbGVtLnJlbW92ZUV2ZW50TGlzdGVuZXIpIHsKICAgICAgZWxlbS5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50LCBmdW5jLCBib29sKTsKICAgIH0gZWxzZSBpZiAoZWxlbS5kZXRhY2hFdmVudCkgewogICAgICBlbGVtLmRldGFjaEV2ZW50KCdvbicgKyBldmVudCwgZnVuYyk7CiAgICB9CgogICAgcmV0dXJuIGRvbTsKICB9LAogIGFkZENsYXNzOiBmdW5jdGlvbiBhZGRDbGFzcyhlbGVtLCBjbGFzc05hbWUpIHsKICAgIGlmIChlbGVtLmNsYXNzTmFtZSA9PT0gdW5kZWZpbmVkKSB7CiAgICAgIGVsZW0uY2xhc3NOYW1lID0gY2xhc3NOYW1lOwogICAgfSBlbHNlIGlmIChlbGVtLmNsYXNzTmFtZSAhPT0gY2xhc3NOYW1lKSB7CiAgICAgIHZhciBjbGFzc2VzID0gZWxlbS5jbGFzc05hbWUuc3BsaXQoLyArLyk7CgogICAgICBpZiAoY2xhc3Nlcy5pbmRleE9mKGNsYXNzTmFtZSkgPT09IC0xKSB7CiAgICAgICAgY2xhc3Nlcy5wdXNoKGNsYXNzTmFtZSk7CiAgICAgICAgZWxlbS5jbGFzc05hbWUgPSBjbGFzc2VzLmpvaW4oJyAnKS5yZXBsYWNlKC9eXHMrLywgJycpLnJlcGxhY2UoL1xzKyQvLCAnJyk7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gZG9tOwogIH0sCiAgcmVtb3ZlQ2xhc3M6IGZ1bmN0aW9uIHJlbW92ZUNsYXNzKGVsZW0sIGNsYXNzTmFtZSkgewogICAgaWYgKGNsYXNzTmFtZSkgewogICAgICBpZiAoZWxlbS5jbGFzc05hbWUgPT09IGNsYXNzTmFtZSkgewogICAgICAgIGVsZW0ucmVtb3ZlQXR0cmlidXRlKCdjbGFzcycpOwogICAgICB9IGVsc2UgewogICAgICAgIHZhciBjbGFzc2VzID0gZWxlbS5jbGFzc05hbWUuc3BsaXQoLyArLyk7CiAgICAgICAgdmFyIGluZGV4ID0gY2xhc3Nlcy5pbmRleE9mKGNsYXNzTmFtZSk7CgogICAgICAgIGlmIChpbmRleCAhPT0gLTEpIHsKICAgICAgICAgIGNsYXNzZXMuc3BsaWNlKGluZGV4LCAxKTsKICAgICAgICAgIGVsZW0uY2xhc3NOYW1lID0gY2xhc3Nlcy5qb2luKCcgJyk7CiAgICAgICAgfQogICAgICB9CiAgICB9IGVsc2UgewogICAgICBlbGVtLmNsYXNzTmFtZSA9IHVuZGVmaW5lZDsKICAgIH0KCiAgICByZXR1cm4gZG9tOwogIH0sCiAgaGFzQ2xhc3M6IGZ1bmN0aW9uIGhhc0NsYXNzKGVsZW0sIGNsYXNzTmFtZSkgewogICAgcmV0dXJuIG5ldyBSZWdFeHAoJyg/Ol58XFxzKyknICsgY2xhc3NOYW1lICsgJyg/Olxccyt8JCknKS50ZXN0KGVsZW0uY2xhc3NOYW1lKSB8fCBmYWxzZTsKICB9LAogIGdldFdpZHRoOiBmdW5jdGlvbiBnZXRXaWR0aChlbGVtKSB7CiAgICB2YXIgc3R5bGUgPSBnZXRDb21wdXRlZFN0eWxlKGVsZW0pOwogICAgcmV0dXJuIGNzc1ZhbHVlVG9QaXhlbHMoc3R5bGVbJ2JvcmRlci1sZWZ0LXdpZHRoJ10pICsgY3NzVmFsdWVUb1BpeGVscyhzdHlsZVsnYm9yZGVyLXJpZ2h0LXdpZHRoJ10pICsgY3NzVmFsdWVUb1BpeGVscyhzdHlsZVsncGFkZGluZy1sZWZ0J10pICsgY3NzVmFsdWVUb1BpeGVscyhzdHlsZVsncGFkZGluZy1yaWdodCddKSArIGNzc1ZhbHVlVG9QaXhlbHMoc3R5bGUud2lkdGgpOwogIH0sCiAgZ2V0SGVpZ2h0OiBmdW5jdGlvbiBnZXRIZWlnaHQoZWxlbSkgewogICAgdmFyIHN0eWxlID0gZ2V0Q29tcHV0ZWRTdHlsZShlbGVtKTsKICAgIHJldHVybiBjc3NWYWx1ZVRvUGl4ZWxzKHN0eWxlWydib3JkZXItdG9wLXdpZHRoJ10pICsgY3NzVmFsdWVUb1BpeGVscyhzdHlsZVsnYm9yZGVyLWJvdHRvbS13aWR0aCddKSArIGNzc1ZhbHVlVG9QaXhlbHMoc3R5bGVbJ3BhZGRpbmctdG9wJ10pICsgY3NzVmFsdWVUb1BpeGVscyhzdHlsZVsncGFkZGluZy1ib3R0b20nXSkgKyBjc3NWYWx1ZVRvUGl4ZWxzKHN0eWxlLmhlaWdodCk7CiAgfSwKICBnZXRPZmZzZXQ6IGZ1bmN0aW9uIGdldE9mZnNldChlbCkgewogICAgdmFyIGVsZW0gPSBlbDsKICAgIHZhciBvZmZzZXQgPSB7CiAgICAgIGxlZnQ6IDAsCiAgICAgIHRvcDogMAogICAgfTsKCiAgICBpZiAoZWxlbS5vZmZzZXRQYXJlbnQpIHsKICAgICAgZG8gewogICAgICAgIG9mZnNldC5sZWZ0ICs9IGVsZW0ub2Zmc2V0TGVmdDsKICAgICAgICBvZmZzZXQudG9wICs9IGVsZW0ub2Zmc2V0VG9wOwogICAgICAgIGVsZW0gPSBlbGVtLm9mZnNldFBhcmVudDsKICAgICAgfSB3aGlsZSAoZWxlbSk7CiAgICB9CgogICAgcmV0dXJuIG9mZnNldDsKICB9LAogIGlzQWN0aXZlOiBmdW5jdGlvbiBpc0FjdGl2ZShlbGVtKSB7CiAgICByZXR1cm4gZWxlbSA9PT0gZG9jdW1lbnQuYWN0aXZlRWxlbWVudCAmJiAoZWxlbS50eXBlIHx8IGVsZW0uaHJlZik7CiAgfQp9OwoKdmFyIEJvb2xlYW5Db250cm9sbGVyID0gZnVuY3Rpb24gKF9Db250cm9sbGVyKSB7CiAgaW5oZXJpdHMoQm9vbGVhbkNvbnRyb2xsZXIsIF9Db250cm9sbGVyKTsKCiAgZnVuY3Rpb24gQm9vbGVhbkNvbnRyb2xsZXIob2JqZWN0LCBwcm9wZXJ0eSkgewogICAgY2xhc3NDYWxsQ2hlY2sodGhpcywgQm9vbGVhbkNvbnRyb2xsZXIpOwoKICAgIHZhciBfdGhpczIgPSBwb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChCb29sZWFuQ29udHJvbGxlci5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKEJvb2xlYW5Db250cm9sbGVyKSkuY2FsbCh0aGlzLCBvYmplY3QsIHByb3BlcnR5KSk7CgogICAgdmFyIF90aGlzID0gX3RoaXMyOwogICAgX3RoaXMyLl9fcHJldiA9IF90aGlzMi5nZXRWYWx1ZSgpOwogICAgX3RoaXMyLl9fY2hlY2tib3ggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpOwoKICAgIF90aGlzMi5fX2NoZWNrYm94LnNldEF0dHJpYnV0ZSgndHlwZScsICdjaGVja2JveCcpOwoKICAgIGZ1bmN0aW9uIG9uQ2hhbmdlKCkgewogICAgICBfdGhpcy5zZXRWYWx1ZSghX3RoaXMuX19wcmV2KTsKICAgIH0KCiAgICBkb20uYmluZChfdGhpczIuX19jaGVja2JveCwgJ2NoYW5nZScsIG9uQ2hhbmdlLCBmYWxzZSk7CgogICAgX3RoaXMyLmRvbUVsZW1lbnQuYXBwZW5kQ2hpbGQoX3RoaXMyLl9fY2hlY2tib3gpOwoKICAgIF90aGlzMi51cGRhdGVEaXNwbGF5KCk7CgogICAgcmV0dXJuIF90aGlzMjsKICB9CgogIGNyZWF0ZUNsYXNzKEJvb2xlYW5Db250cm9sbGVyLCBbewogICAga2V5OiAnc2V0VmFsdWUnLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNldFZhbHVlKHYpIHsKICAgICAgdmFyIHRvUmV0dXJuID0gZ2V0KEJvb2xlYW5Db250cm9sbGVyLnByb3RvdHlwZS5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKEJvb2xlYW5Db250cm9sbGVyLnByb3RvdHlwZSksICdzZXRWYWx1ZScsIHRoaXMpLmNhbGwodGhpcywgdik7CgogICAgICBpZiAodGhpcy5fX29uRmluaXNoQ2hhbmdlKSB7CiAgICAgICAgdGhpcy5fX29uRmluaXNoQ2hhbmdlLmNhbGwodGhpcywgdGhpcy5nZXRWYWx1ZSgpKTsKICAgICAgfQoKICAgICAgdGhpcy5fX3ByZXYgPSB0aGlzLmdldFZhbHVlKCk7CiAgICAgIHJldHVybiB0b1JldHVybjsKICAgIH0KICB9LCB7CiAgICBrZXk6ICd1cGRhdGVEaXNwbGF5JywKICAgIHZhbHVlOiBmdW5jdGlvbiB1cGRhdGVEaXNwbGF5KCkgewogICAgICBpZiAodGhpcy5nZXRWYWx1ZSgpID09PSB0cnVlKSB7CiAgICAgICAgdGhpcy5fX2NoZWNrYm94LnNldEF0dHJpYnV0ZSgnY2hlY2tlZCcsICdjaGVja2VkJyk7CgogICAgICAgIHRoaXMuX19jaGVja2JveC5jaGVja2VkID0gdHJ1ZTsKICAgICAgICB0aGlzLl9fcHJldiA9IHRydWU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5fX2NoZWNrYm94LmNoZWNrZWQgPSBmYWxzZTsKICAgICAgICB0aGlzLl9fcHJldiA9IGZhbHNlOwogICAgICB9CgogICAgICByZXR1cm4gZ2V0KEJvb2xlYW5Db250cm9sbGVyLnByb3RvdHlwZS5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKEJvb2xlYW5Db250cm9sbGVyLnByb3RvdHlwZSksICd1cGRhdGVEaXNwbGF5JywgdGhpcykuY2FsbCh0aGlzKTsKICAgIH0KICB9XSk7CiAgcmV0dXJuIEJvb2xlYW5Db250cm9sbGVyOwp9KENvbnRyb2xsZXIpOwoKdmFyIE9wdGlvbkNvbnRyb2xsZXIgPSBmdW5jdGlvbiAoX0NvbnRyb2xsZXIpIHsKICBpbmhlcml0cyhPcHRpb25Db250cm9sbGVyLCBfQ29udHJvbGxlcik7CgogIGZ1bmN0aW9uIE9wdGlvbkNvbnRyb2xsZXIob2JqZWN0LCBwcm9wZXJ0eSwgb3B0cykgewogICAgY2xhc3NDYWxsQ2hlY2sodGhpcywgT3B0aW9uQ29udHJvbGxlcik7CgogICAgdmFyIF90aGlzMiA9IHBvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKE9wdGlvbkNvbnRyb2xsZXIuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihPcHRpb25Db250cm9sbGVyKSkuY2FsbCh0aGlzLCBvYmplY3QsIHByb3BlcnR5KSk7CgogICAgdmFyIG9wdGlvbnMgPSBvcHRzOwogICAgdmFyIF90aGlzID0gX3RoaXMyOwogICAgX3RoaXMyLl9fc2VsZWN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2VsZWN0Jyk7CgogICAgaWYgKENvbW1vbi5pc0FycmF5KG9wdGlvbnMpKSB7CiAgICAgIHZhciBtYXAgPSB7fTsKICAgICAgQ29tbW9uLmVhY2gob3B0aW9ucywgZnVuY3Rpb24gKGVsZW1lbnQpIHsKICAgICAgICBtYXBbZWxlbWVudF0gPSBlbGVtZW50OwogICAgICB9KTsKICAgICAgb3B0aW9ucyA9IG1hcDsKICAgIH0KCiAgICBDb21tb24uZWFjaChvcHRpb25zLCBmdW5jdGlvbiAodmFsdWUsIGtleSkgewogICAgICB2YXIgb3B0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb3B0aW9uJyk7CiAgICAgIG9wdC5pbm5lckhUTUwgPSBrZXk7CiAgICAgIG9wdC5zZXRBdHRyaWJ1dGUoJ3ZhbHVlJywgdmFsdWUpOwoKICAgICAgX3RoaXMuX19zZWxlY3QuYXBwZW5kQ2hpbGQob3B0KTsKICAgIH0pOwoKICAgIF90aGlzMi51cGRhdGVEaXNwbGF5KCk7CgogICAgZG9tLmJpbmQoX3RoaXMyLl9fc2VsZWN0LCAnY2hhbmdlJywgZnVuY3Rpb24gKCkgewogICAgICB2YXIgZGVzaXJlZFZhbHVlID0gdGhpcy5vcHRpb25zW3RoaXMuc2VsZWN0ZWRJbmRleF0udmFsdWU7CgogICAgICBfdGhpcy5zZXRWYWx1ZShkZXNpcmVkVmFsdWUpOwogICAgfSk7CgogICAgX3RoaXMyLmRvbUVsZW1lbnQuYXBwZW5kQ2hpbGQoX3RoaXMyLl9fc2VsZWN0KTsKCiAgICByZXR1cm4gX3RoaXMyOwogIH0KCiAgY3JlYXRlQ2xhc3MoT3B0aW9uQ29udHJvbGxlciwgW3sKICAgIGtleTogJ3NldFZhbHVlJywKICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRWYWx1ZSh2KSB7CiAgICAgIHZhciB0b1JldHVybiA9IGdldChPcHRpb25Db250cm9sbGVyLnByb3RvdHlwZS5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKE9wdGlvbkNvbnRyb2xsZXIucHJvdG90eXBlKSwgJ3NldFZhbHVlJywgdGhpcykuY2FsbCh0aGlzLCB2KTsKCiAgICAgIGlmICh0aGlzLl9fb25GaW5pc2hDaGFuZ2UpIHsKICAgICAgICB0aGlzLl9fb25GaW5pc2hDaGFuZ2UuY2FsbCh0aGlzLCB0aGlzLmdldFZhbHVlKCkpOwogICAgICB9CgogICAgICByZXR1cm4gdG9SZXR1cm47CiAgICB9CiAgfSwgewogICAga2V5OiAndXBkYXRlRGlzcGxheScsCiAgICB2YWx1ZTogZnVuY3Rpb24gdXBkYXRlRGlzcGxheSgpIHsKICAgICAgaWYgKGRvbS5pc0FjdGl2ZSh0aGlzLl9fc2VsZWN0KSkgcmV0dXJuIHRoaXM7CiAgICAgIHRoaXMuX19zZWxlY3QudmFsdWUgPSB0aGlzLmdldFZhbHVlKCk7CiAgICAgIHJldHVybiBnZXQoT3B0aW9uQ29udHJvbGxlci5wcm90b3R5cGUuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihPcHRpb25Db250cm9sbGVyLnByb3RvdHlwZSksICd1cGRhdGVEaXNwbGF5JywgdGhpcykuY2FsbCh0aGlzKTsKICAgIH0KICB9XSk7CiAgcmV0dXJuIE9wdGlvbkNvbnRyb2xsZXI7Cn0oQ29udHJvbGxlcik7Cgp2YXIgU3RyaW5nQ29udHJvbGxlciA9IGZ1bmN0aW9uIChfQ29udHJvbGxlcikgewogIGluaGVyaXRzKFN0cmluZ0NvbnRyb2xsZXIsIF9Db250cm9sbGVyKTsKCiAgZnVuY3Rpb24gU3RyaW5nQ29udHJvbGxlcihvYmplY3QsIHByb3BlcnR5KSB7CiAgICBjbGFzc0NhbGxDaGVjayh0aGlzLCBTdHJpbmdDb250cm9sbGVyKTsKCiAgICB2YXIgX3RoaXMyID0gcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoU3RyaW5nQ29udHJvbGxlci5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKFN0cmluZ0NvbnRyb2xsZXIpKS5jYWxsKHRoaXMsIG9iamVjdCwgcHJvcGVydHkpKTsKCiAgICB2YXIgX3RoaXMgPSBfdGhpczI7CgogICAgZnVuY3Rpb24gb25DaGFuZ2UoKSB7CiAgICAgIF90aGlzLnNldFZhbHVlKF90aGlzLl9faW5wdXQudmFsdWUpOwogICAgfQoKICAgIGZ1bmN0aW9uIG9uQmx1cigpIHsKICAgICAgaWYgKF90aGlzLl9fb25GaW5pc2hDaGFuZ2UpIHsKICAgICAgICBfdGhpcy5fX29uRmluaXNoQ2hhbmdlLmNhbGwoX3RoaXMsIF90aGlzLmdldFZhbHVlKCkpOwogICAgICB9CiAgICB9CgogICAgX3RoaXMyLl9faW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpOwoKICAgIF90aGlzMi5fX2lucHV0LnNldEF0dHJpYnV0ZSgndHlwZScsICd0ZXh0Jyk7CgogICAgZG9tLmJpbmQoX3RoaXMyLl9faW5wdXQsICdrZXl1cCcsIG9uQ2hhbmdlKTsKICAgIGRvbS5iaW5kKF90aGlzMi5fX2lucHV0LCAnY2hhbmdlJywgb25DaGFuZ2UpOwogICAgZG9tLmJpbmQoX3RoaXMyLl9faW5wdXQsICdibHVyJywgb25CbHVyKTsKICAgIGRvbS5iaW5kKF90aGlzMi5fX2lucHV0LCAna2V5ZG93bicsIGZ1bmN0aW9uIChlKSB7CiAgICAgIGlmIChlLmtleUNvZGUgPT09IDEzKSB7CiAgICAgICAgdGhpcy5ibHVyKCk7CiAgICAgIH0KICAgIH0pOwoKICAgIF90aGlzMi51cGRhdGVEaXNwbGF5KCk7CgogICAgX3RoaXMyLmRvbUVsZW1lbnQuYXBwZW5kQ2hpbGQoX3RoaXMyLl9faW5wdXQpOwoKICAgIHJldHVybiBfdGhpczI7CiAgfQoKICBjcmVhdGVDbGFzcyhTdHJpbmdDb250cm9sbGVyLCBbewogICAga2V5OiAndXBkYXRlRGlzcGxheScsCiAgICB2YWx1ZTogZnVuY3Rpb24gdXBkYXRlRGlzcGxheSgpIHsKICAgICAgaWYgKCFkb20uaXNBY3RpdmUodGhpcy5fX2lucHV0KSkgewogICAgICAgIHRoaXMuX19pbnB1dC52YWx1ZSA9IHRoaXMuZ2V0VmFsdWUoKTsKICAgICAgfQoKICAgICAgcmV0dXJuIGdldChTdHJpbmdDb250cm9sbGVyLnByb3RvdHlwZS5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKFN0cmluZ0NvbnRyb2xsZXIucHJvdG90eXBlKSwgJ3VwZGF0ZURpc3BsYXknLCB0aGlzKS5jYWxsKHRoaXMpOwogICAgfQogIH1dKTsKICByZXR1cm4gU3RyaW5nQ29udHJvbGxlcjsKfShDb250cm9sbGVyKTsKCmZ1bmN0aW9uIG51bURlY2ltYWxzKHgpIHsKICB2YXIgX3ggPSB4LnRvU3RyaW5nKCk7CgogIGlmIChfeC5pbmRleE9mKCcuJykgPiAtMSkgewogICAgcmV0dXJuIF94Lmxlbmd0aCAtIF94LmluZGV4T2YoJy4nKSAtIDE7CiAgfQoKICByZXR1cm4gMDsKfQoKdmFyIE51bWJlckNvbnRyb2xsZXIgPSBmdW5jdGlvbiAoX0NvbnRyb2xsZXIpIHsKICBpbmhlcml0cyhOdW1iZXJDb250cm9sbGVyLCBfQ29udHJvbGxlcik7CgogIGZ1bmN0aW9uIE51bWJlckNvbnRyb2xsZXIob2JqZWN0LCBwcm9wZXJ0eSwgcGFyYW1zKSB7CiAgICBjbGFzc0NhbGxDaGVjayh0aGlzLCBOdW1iZXJDb250cm9sbGVyKTsKCiAgICB2YXIgX3RoaXMgPSBwb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChOdW1iZXJDb250cm9sbGVyLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoTnVtYmVyQ29udHJvbGxlcikpLmNhbGwodGhpcywgb2JqZWN0LCBwcm9wZXJ0eSkpOwoKICAgIHZhciBfcGFyYW1zID0gcGFyYW1zIHx8IHt9OwoKICAgIF90aGlzLl9fbWluID0gX3BhcmFtcy5taW47CiAgICBfdGhpcy5fX21heCA9IF9wYXJhbXMubWF4OwogICAgX3RoaXMuX19zdGVwID0gX3BhcmFtcy5zdGVwOwoKICAgIGlmIChDb21tb24uaXNVbmRlZmluZWQoX3RoaXMuX19zdGVwKSkgewogICAgICBpZiAoX3RoaXMuaW5pdGlhbFZhbHVlID09PSAwKSB7CiAgICAgICAgX3RoaXMuX19pbXBsaWVkU3RlcCA9IDE7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgX3RoaXMuX19pbXBsaWVkU3RlcCA9IE1hdGgucG93KDEwLCBNYXRoLmZsb29yKE1hdGgubG9nKE1hdGguYWJzKF90aGlzLmluaXRpYWxWYWx1ZSkpIC8gTWF0aC5MTjEwKSkgLyAxMDsKICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgX3RoaXMuX19pbXBsaWVkU3RlcCA9IF90aGlzLl9fc3RlcDsKICAgIH0KCiAgICBfdGhpcy5fX3ByZWNpc2lvbiA9IG51bURlY2ltYWxzKF90aGlzLl9faW1wbGllZFN0ZXApOwogICAgcmV0dXJuIF90aGlzOwogIH0KCiAgY3JlYXRlQ2xhc3MoTnVtYmVyQ29udHJvbGxlciwgW3sKICAgIGtleTogJ3NldFZhbHVlJywKICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRWYWx1ZSh2KSB7CiAgICAgIHZhciBfdiA9IHY7CgogICAgICBpZiAodGhpcy5fX21pbiAhPT0gdW5kZWZpbmVkICYmIF92IDwgdGhpcy5fX21pbikgewogICAgICAgIF92ID0gdGhpcy5fX21pbjsKICAgICAgfSBlbHNlIGlmICh0aGlzLl9fbWF4ICE9PSB1bmRlZmluZWQgJiYgX3YgPiB0aGlzLl9fbWF4KSB7CiAgICAgICAgX3YgPSB0aGlzLl9fbWF4OwogICAgICB9CgogICAgICBpZiAodGhpcy5fX3N0ZXAgIT09IHVuZGVmaW5lZCAmJiBfdiAlIHRoaXMuX19zdGVwICE9PSAwKSB7CiAgICAgICAgX3YgPSBNYXRoLnJvdW5kKF92IC8gdGhpcy5fX3N0ZXApICogdGhpcy5fX3N0ZXA7CiAgICAgIH0KCiAgICAgIHJldHVybiBnZXQoTnVtYmVyQ29udHJvbGxlci5wcm90b3R5cGUuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihOdW1iZXJDb250cm9sbGVyLnByb3RvdHlwZSksICdzZXRWYWx1ZScsIHRoaXMpLmNhbGwodGhpcywgX3YpOwogICAgfQogIH0sIHsKICAgIGtleTogJ21pbicsCiAgICB2YWx1ZTogZnVuY3Rpb24gbWluKG1pblZhbHVlKSB7CiAgICAgIHRoaXMuX19taW4gPSBtaW5WYWx1ZTsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgfSwgewogICAga2V5OiAnbWF4JywKICAgIHZhbHVlOiBmdW5jdGlvbiBtYXgobWF4VmFsdWUpIHsKICAgICAgdGhpcy5fX21heCA9IG1heFZhbHVlOwogICAgICByZXR1cm4gdGhpczsKICAgIH0KICB9LCB7CiAgICBrZXk6ICdzdGVwJywKICAgIHZhbHVlOiBmdW5jdGlvbiBzdGVwKHN0ZXBWYWx1ZSkgewogICAgICB0aGlzLl9fc3RlcCA9IHN0ZXBWYWx1ZTsKICAgICAgdGhpcy5fX2ltcGxpZWRTdGVwID0gc3RlcFZhbHVlOwogICAgICB0aGlzLl9fcHJlY2lzaW9uID0gbnVtRGVjaW1hbHMoc3RlcFZhbHVlKTsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgfV0pOwogIHJldHVybiBOdW1iZXJDb250cm9sbGVyOwp9KENvbnRyb2xsZXIpOwoKZnVuY3Rpb24gcm91bmRUb0RlY2ltYWwodmFsdWUsIGRlY2ltYWxzKSB7CiAgdmFyIHRlblRvID0gTWF0aC5wb3coMTAsIGRlY2ltYWxzKTsKICByZXR1cm4gTWF0aC5yb3VuZCh2YWx1ZSAqIHRlblRvKSAvIHRlblRvOwp9Cgp2YXIgTnVtYmVyQ29udHJvbGxlckJveCA9IGZ1bmN0aW9uIChfTnVtYmVyQ29udHJvbGxlcikgewogIGluaGVyaXRzKE51bWJlckNvbnRyb2xsZXJCb3gsIF9OdW1iZXJDb250cm9sbGVyKTsKCiAgZnVuY3Rpb24gTnVtYmVyQ29udHJvbGxlckJveChvYmplY3QsIHByb3BlcnR5LCBwYXJhbXMpIHsKICAgIGNsYXNzQ2FsbENoZWNrKHRoaXMsIE51bWJlckNvbnRyb2xsZXJCb3gpOwoKICAgIHZhciBfdGhpczIgPSBwb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChOdW1iZXJDb250cm9sbGVyQm94Ll9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoTnVtYmVyQ29udHJvbGxlckJveCkpLmNhbGwodGhpcywgb2JqZWN0LCBwcm9wZXJ0eSwgcGFyYW1zKSk7CgogICAgX3RoaXMyLl9fdHJ1bmNhdGlvblN1c3BlbmRlZCA9IGZhbHNlOwogICAgdmFyIF90aGlzID0gX3RoaXMyOwogICAgdmFyIHByZXZZID0gdm9pZCAwOwoKICAgIGZ1bmN0aW9uIG9uQ2hhbmdlKCkgewogICAgICB2YXIgYXR0ZW1wdGVkID0gcGFyc2VGbG9hdChfdGhpcy5fX2lucHV0LnZhbHVlKTsKCiAgICAgIGlmICghQ29tbW9uLmlzTmFOKGF0dGVtcHRlZCkpIHsKICAgICAgICBfdGhpcy5zZXRWYWx1ZShhdHRlbXB0ZWQpOwogICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gb25GaW5pc2goKSB7CiAgICAgIGlmIChfdGhpcy5fX29uRmluaXNoQ2hhbmdlKSB7CiAgICAgICAgX3RoaXMuX19vbkZpbmlzaENoYW5nZS5jYWxsKF90aGlzLCBfdGhpcy5nZXRWYWx1ZSgpKTsKICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIG9uQmx1cigpIHsKICAgICAgb25GaW5pc2goKTsKICAgIH0KCiAgICBmdW5jdGlvbiBvbk1vdXNlRHJhZyhlKSB7CiAgICAgIHZhciBkaWZmID0gcHJldlkgLSBlLmNsaWVudFk7CgogICAgICBfdGhpcy5zZXRWYWx1ZShfdGhpcy5nZXRWYWx1ZSgpICsgZGlmZiAqIF90aGlzLl9faW1wbGllZFN0ZXApOwoKICAgICAgcHJldlkgPSBlLmNsaWVudFk7CiAgICB9CgogICAgZnVuY3Rpb24gb25Nb3VzZVVwKCkgewogICAgICBkb20udW5iaW5kKHdpbmRvdywgJ21vdXNlbW92ZScsIG9uTW91c2VEcmFnKTsKICAgICAgZG9tLnVuYmluZCh3aW5kb3csICdtb3VzZXVwJywgb25Nb3VzZVVwKTsKICAgICAgb25GaW5pc2goKTsKICAgIH0KCiAgICBmdW5jdGlvbiBvbk1vdXNlRG93bihlKSB7CiAgICAgIGRvbS5iaW5kKHdpbmRvdywgJ21vdXNlbW92ZScsIG9uTW91c2VEcmFnKTsKICAgICAgZG9tLmJpbmQod2luZG93LCAnbW91c2V1cCcsIG9uTW91c2VVcCk7CiAgICAgIHByZXZZID0gZS5jbGllbnRZOwogICAgfQoKICAgIF90aGlzMi5fX2lucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTsKCiAgICBfdGhpczIuX19pbnB1dC5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCAndGV4dCcpOwoKICAgIGRvbS5iaW5kKF90aGlzMi5fX2lucHV0LCAnY2hhbmdlJywgb25DaGFuZ2UpOwogICAgZG9tLmJpbmQoX3RoaXMyLl9faW5wdXQsICdibHVyJywgb25CbHVyKTsKICAgIGRvbS5iaW5kKF90aGlzMi5fX2lucHV0LCAnbW91c2Vkb3duJywgb25Nb3VzZURvd24pOwogICAgZG9tLmJpbmQoX3RoaXMyLl9faW5wdXQsICdrZXlkb3duJywgZnVuY3Rpb24gKGUpIHsKICAgICAgaWYgKGUua2V5Q29kZSA9PT0gMTMpIHsKICAgICAgICBfdGhpcy5fX3RydW5jYXRpb25TdXNwZW5kZWQgPSB0cnVlOwogICAgICAgIHRoaXMuYmx1cigpOwogICAgICAgIF90aGlzLl9fdHJ1bmNhdGlvblN1c3BlbmRlZCA9IGZhbHNlOwogICAgICAgIG9uRmluaXNoKCk7CiAgICAgIH0KICAgIH0pOwoKICAgIF90aGlzMi51cGRhdGVEaXNwbGF5KCk7CgogICAgX3RoaXMyLmRvbUVsZW1lbnQuYXBwZW5kQ2hpbGQoX3RoaXMyLl9faW5wdXQpOwoKICAgIHJldHVybiBfdGhpczI7CiAgfQoKICBjcmVhdGVDbGFzcyhOdW1iZXJDb250cm9sbGVyQm94LCBbewogICAga2V5OiAndXBkYXRlRGlzcGxheScsCiAgICB2YWx1ZTogZnVuY3Rpb24gdXBkYXRlRGlzcGxheSgpIHsKICAgICAgdGhpcy5fX2lucHV0LnZhbHVlID0gdGhpcy5fX3RydW5jYXRpb25TdXNwZW5kZWQgPyB0aGlzLmdldFZhbHVlKCkgOiByb3VuZFRvRGVjaW1hbCh0aGlzLmdldFZhbHVlKCksIHRoaXMuX19wcmVjaXNpb24pOwogICAgICByZXR1cm4gZ2V0KE51bWJlckNvbnRyb2xsZXJCb3gucHJvdG90eXBlLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoTnVtYmVyQ29udHJvbGxlckJveC5wcm90b3R5cGUpLCAndXBkYXRlRGlzcGxheScsIHRoaXMpLmNhbGwodGhpcyk7CiAgICB9CiAgfV0pOwogIHJldHVybiBOdW1iZXJDb250cm9sbGVyQm94Owp9KE51bWJlckNvbnRyb2xsZXIpOwoKZnVuY3Rpb24gbWFwKHYsIGkxLCBpMiwgbzEsIG8yKSB7CiAgcmV0dXJuIG8xICsgKG8yIC0gbzEpICogKCh2IC0gaTEpIC8gKGkyIC0gaTEpKTsKfQoKdmFyIE51bWJlckNvbnRyb2xsZXJTbGlkZXIgPSBmdW5jdGlvbiAoX051bWJlckNvbnRyb2xsZXIpIHsKICBpbmhlcml0cyhOdW1iZXJDb250cm9sbGVyU2xpZGVyLCBfTnVtYmVyQ29udHJvbGxlcik7CgogIGZ1bmN0aW9uIE51bWJlckNvbnRyb2xsZXJTbGlkZXIob2JqZWN0LCBwcm9wZXJ0eSwgbWluLCBtYXgsIHN0ZXApIHsKICAgIGNsYXNzQ2FsbENoZWNrKHRoaXMsIE51bWJlckNvbnRyb2xsZXJTbGlkZXIpOwoKICAgIHZhciBfdGhpczIgPSBwb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChOdW1iZXJDb250cm9sbGVyU2xpZGVyLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoTnVtYmVyQ29udHJvbGxlclNsaWRlcikpLmNhbGwodGhpcywgb2JqZWN0LCBwcm9wZXJ0eSwgewogICAgICBtaW46IG1pbiwKICAgICAgbWF4OiBtYXgsCiAgICAgIHN0ZXA6IHN0ZXAKICAgIH0pKTsKCiAgICB2YXIgX3RoaXMgPSBfdGhpczI7CiAgICBfdGhpczIuX19iYWNrZ3JvdW5kID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICBfdGhpczIuX19mb3JlZ3JvdW5kID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICBkb20uYmluZChfdGhpczIuX19iYWNrZ3JvdW5kLCAnbW91c2Vkb3duJywgb25Nb3VzZURvd24pOwogICAgZG9tLmJpbmQoX3RoaXMyLl9fYmFja2dyb3VuZCwgJ3RvdWNoc3RhcnQnLCBvblRvdWNoU3RhcnQpOwogICAgZG9tLmFkZENsYXNzKF90aGlzMi5fX2JhY2tncm91bmQsICdzbGlkZXInKTsKICAgIGRvbS5hZGRDbGFzcyhfdGhpczIuX19mb3JlZ3JvdW5kLCAnc2xpZGVyLWZnJyk7CgogICAgZnVuY3Rpb24gb25Nb3VzZURvd24oZSkgewogICAgICBkb2N1bWVudC5hY3RpdmVFbGVtZW50LmJsdXIoKTsKICAgICAgZG9tLmJpbmQod2luZG93LCAnbW91c2Vtb3ZlJywgb25Nb3VzZURyYWcpOwogICAgICBkb20uYmluZCh3aW5kb3csICdtb3VzZXVwJywgb25Nb3VzZVVwKTsKICAgICAgb25Nb3VzZURyYWcoZSk7CiAgICB9CgogICAgZnVuY3Rpb24gb25Nb3VzZURyYWcoZSkgewogICAgICBlLnByZXZlbnREZWZhdWx0KCk7CgogICAgICB2YXIgYmdSZWN0ID0gX3RoaXMuX19iYWNrZ3JvdW5kLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOwoKICAgICAgX3RoaXMuc2V0VmFsdWUobWFwKGUuY2xpZW50WCwgYmdSZWN0LmxlZnQsIGJnUmVjdC5yaWdodCwgX3RoaXMuX19taW4sIF90aGlzLl9fbWF4KSk7CgogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CgogICAgZnVuY3Rpb24gb25Nb3VzZVVwKCkgewogICAgICBkb20udW5iaW5kKHdpbmRvdywgJ21vdXNlbW92ZScsIG9uTW91c2VEcmFnKTsKICAgICAgZG9tLnVuYmluZCh3aW5kb3csICdtb3VzZXVwJywgb25Nb3VzZVVwKTsKCiAgICAgIGlmIChfdGhpcy5fX29uRmluaXNoQ2hhbmdlKSB7CiAgICAgICAgX3RoaXMuX19vbkZpbmlzaENoYW5nZS5jYWxsKF90aGlzLCBfdGhpcy5nZXRWYWx1ZSgpKTsKICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIG9uVG91Y2hTdGFydChlKSB7CiAgICAgIGlmIChlLnRvdWNoZXMubGVuZ3RoICE9PSAxKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBkb20uYmluZCh3aW5kb3csICd0b3VjaG1vdmUnLCBvblRvdWNoTW92ZSk7CiAgICAgIGRvbS5iaW5kKHdpbmRvdywgJ3RvdWNoZW5kJywgb25Ub3VjaEVuZCk7CiAgICAgIG9uVG91Y2hNb3ZlKGUpOwogICAgfQoKICAgIGZ1bmN0aW9uIG9uVG91Y2hNb3ZlKGUpIHsKICAgICAgdmFyIGNsaWVudFggPSBlLnRvdWNoZXNbMF0uY2xpZW50WDsKCiAgICAgIHZhciBiZ1JlY3QgPSBfdGhpcy5fX2JhY2tncm91bmQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7CgogICAgICBfdGhpcy5zZXRWYWx1ZShtYXAoY2xpZW50WCwgYmdSZWN0LmxlZnQsIGJnUmVjdC5yaWdodCwgX3RoaXMuX19taW4sIF90aGlzLl9fbWF4KSk7CiAgICB9CgogICAgZnVuY3Rpb24gb25Ub3VjaEVuZCgpIHsKICAgICAgZG9tLnVuYmluZCh3aW5kb3csICd0b3VjaG1vdmUnLCBvblRvdWNoTW92ZSk7CiAgICAgIGRvbS51bmJpbmQod2luZG93LCAndG91Y2hlbmQnLCBvblRvdWNoRW5kKTsKCiAgICAgIGlmIChfdGhpcy5fX29uRmluaXNoQ2hhbmdlKSB7CiAgICAgICAgX3RoaXMuX19vbkZpbmlzaENoYW5nZS5jYWxsKF90aGlzLCBfdGhpcy5nZXRWYWx1ZSgpKTsKICAgICAgfQogICAgfQoKICAgIF90aGlzMi51cGRhdGVEaXNwbGF5KCk7CgogICAgX3RoaXMyLl9fYmFja2dyb3VuZC5hcHBlbmRDaGlsZChfdGhpczIuX19mb3JlZ3JvdW5kKTsKCiAgICBfdGhpczIuZG9tRWxlbWVudC5hcHBlbmRDaGlsZChfdGhpczIuX19iYWNrZ3JvdW5kKTsKCiAgICByZXR1cm4gX3RoaXMyOwogIH0KCiAgY3JlYXRlQ2xhc3MoTnVtYmVyQ29udHJvbGxlclNsaWRlciwgW3sKICAgIGtleTogJ3VwZGF0ZURpc3BsYXknLAogICAgdmFsdWU6IGZ1bmN0aW9uIHVwZGF0ZURpc3BsYXkoKSB7CiAgICAgIHZhciBwY3QgPSAodGhpcy5nZXRWYWx1ZSgpIC0gdGhpcy5fX21pbikgLyAodGhpcy5fX21heCAtIHRoaXMuX19taW4pOwoKICAgICAgdGhpcy5fX2ZvcmVncm91bmQuc3R5bGUud2lkdGggPSBwY3QgKiAxMDAgKyAnJSc7CiAgICAgIHJldHVybiBnZXQoTnVtYmVyQ29udHJvbGxlclNsaWRlci5wcm90b3R5cGUuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihOdW1iZXJDb250cm9sbGVyU2xpZGVyLnByb3RvdHlwZSksICd1cGRhdGVEaXNwbGF5JywgdGhpcykuY2FsbCh0aGlzKTsKICAgIH0KICB9XSk7CiAgcmV0dXJuIE51bWJlckNvbnRyb2xsZXJTbGlkZXI7Cn0oTnVtYmVyQ29udHJvbGxlcik7Cgp2YXIgRnVuY3Rpb25Db250cm9sbGVyID0gZnVuY3Rpb24gKF9Db250cm9sbGVyKSB7CiAgaW5oZXJpdHMoRnVuY3Rpb25Db250cm9sbGVyLCBfQ29udHJvbGxlcik7CgogIGZ1bmN0aW9uIEZ1bmN0aW9uQ29udHJvbGxlcihvYmplY3QsIHByb3BlcnR5LCB0ZXh0KSB7CiAgICBjbGFzc0NhbGxDaGVjayh0aGlzLCBGdW5jdGlvbkNvbnRyb2xsZXIpOwoKICAgIHZhciBfdGhpczIgPSBwb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChGdW5jdGlvbkNvbnRyb2xsZXIuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihGdW5jdGlvbkNvbnRyb2xsZXIpKS5jYWxsKHRoaXMsIG9iamVjdCwgcHJvcGVydHkpKTsKCiAgICB2YXIgX3RoaXMgPSBfdGhpczI7CiAgICBfdGhpczIuX19idXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgIF90aGlzMi5fX2J1dHRvbi5pbm5lckhUTUwgPSB0ZXh0ID09PSB1bmRlZmluZWQgPyAnRmlyZScgOiB0ZXh0OwogICAgZG9tLmJpbmQoX3RoaXMyLl9fYnV0dG9uLCAnY2xpY2snLCBmdW5jdGlvbiAoZSkgewogICAgICBlLnByZXZlbnREZWZhdWx0KCk7CgogICAgICBfdGhpcy5maXJlKCk7CgogICAgICByZXR1cm4gZmFsc2U7CiAgICB9KTsKICAgIGRvbS5hZGRDbGFzcyhfdGhpczIuX19idXR0b24sICdidXR0b24nKTsKCiAgICBfdGhpczIuZG9tRWxlbWVudC5hcHBlbmRDaGlsZChfdGhpczIuX19idXR0b24pOwoKICAgIHJldHVybiBfdGhpczI7CiAgfQoKICBjcmVhdGVDbGFzcyhGdW5jdGlvbkNvbnRyb2xsZXIsIFt7CiAgICBrZXk6ICdmaXJlJywKICAgIHZhbHVlOiBmdW5jdGlvbiBmaXJlKCkgewogICAgICBpZiAodGhpcy5fX29uQ2hhbmdlKSB7CiAgICAgICAgdGhpcy5fX29uQ2hhbmdlLmNhbGwodGhpcyk7CiAgICAgIH0KCiAgICAgIHRoaXMuZ2V0VmFsdWUoKS5jYWxsKHRoaXMub2JqZWN0KTsKCiAgICAgIGlmICh0aGlzLl9fb25GaW5pc2hDaGFuZ2UpIHsKICAgICAgICB0aGlzLl9fb25GaW5pc2hDaGFuZ2UuY2FsbCh0aGlzLCB0aGlzLmdldFZhbHVlKCkpOwogICAgICB9CiAgICB9CiAgfV0pOwogIHJldHVybiBGdW5jdGlvbkNvbnRyb2xsZXI7Cn0oQ29udHJvbGxlcik7Cgp2YXIgQ29sb3JDb250cm9sbGVyID0gZnVuY3Rpb24gKF9Db250cm9sbGVyKSB7CiAgaW5oZXJpdHMoQ29sb3JDb250cm9sbGVyLCBfQ29udHJvbGxlcik7CgogIGZ1bmN0aW9uIENvbG9yQ29udHJvbGxlcihvYmplY3QsIHByb3BlcnR5KSB7CiAgICBjbGFzc0NhbGxDaGVjayh0aGlzLCBDb2xvckNvbnRyb2xsZXIpOwoKICAgIHZhciBfdGhpczIgPSBwb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChDb2xvckNvbnRyb2xsZXIuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihDb2xvckNvbnRyb2xsZXIpKS5jYWxsKHRoaXMsIG9iamVjdCwgcHJvcGVydHkpKTsKCiAgICBfdGhpczIuX19jb2xvciA9IG5ldyBDb2xvcihfdGhpczIuZ2V0VmFsdWUoKSk7CiAgICBfdGhpczIuX190ZW1wID0gbmV3IENvbG9yKDApOwogICAgdmFyIF90aGlzID0gX3RoaXMyOwogICAgX3RoaXMyLmRvbUVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgIGRvbS5tYWtlU2VsZWN0YWJsZShfdGhpczIuZG9tRWxlbWVudCwgZmFsc2UpOwogICAgX3RoaXMyLl9fc2VsZWN0b3IgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgIF90aGlzMi5fX3NlbGVjdG9yLmNsYXNzTmFtZSA9ICdzZWxlY3Rvcic7CiAgICBfdGhpczIuX19zYXR1cmF0aW9uX2ZpZWxkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICBfdGhpczIuX19zYXR1cmF0aW9uX2ZpZWxkLmNsYXNzTmFtZSA9ICdzYXR1cmF0aW9uLWZpZWxkJzsKICAgIF90aGlzMi5fX2ZpZWxkX2tub2IgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgIF90aGlzMi5fX2ZpZWxkX2tub2IuY2xhc3NOYW1lID0gJ2ZpZWxkLWtub2InOwogICAgX3RoaXMyLl9fZmllbGRfa25vYl9ib3JkZXIgPSAnMnB4IHNvbGlkICc7CiAgICBfdGhpczIuX19odWVfa25vYiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgX3RoaXMyLl9faHVlX2tub2IuY2xhc3NOYW1lID0gJ2h1ZS1rbm9iJzsKICAgIF90aGlzMi5fX2h1ZV9maWVsZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgX3RoaXMyLl9faHVlX2ZpZWxkLmNsYXNzTmFtZSA9ICdodWUtZmllbGQnOwogICAgX3RoaXMyLl9faW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpOwogICAgX3RoaXMyLl9faW5wdXQudHlwZSA9ICd0ZXh0JzsKICAgIF90aGlzMi5fX2lucHV0X3RleHRTaGFkb3cgPSAnMCAxcHggMXB4ICc7CiAgICBkb20uYmluZChfdGhpczIuX19pbnB1dCwgJ2tleWRvd24nLCBmdW5jdGlvbiAoZSkgewogICAgICBpZiAoZS5rZXlDb2RlID09PSAxMykgewogICAgICAgIG9uQmx1ci5jYWxsKHRoaXMpOwogICAgICB9CiAgICB9KTsKICAgIGRvbS5iaW5kKF90aGlzMi5fX2lucHV0LCAnYmx1cicsIG9uQmx1cik7CiAgICBkb20uYmluZChfdGhpczIuX19zZWxlY3RvciwgJ21vdXNlZG93bicsIGZ1bmN0aW9uICgpIHsKICAgICAgZG9tLmFkZENsYXNzKHRoaXMsICdkcmFnJykuYmluZCh3aW5kb3csICdtb3VzZXVwJywgZnVuY3Rpb24gKCkgewogICAgICAgIGRvbS5yZW1vdmVDbGFzcyhfdGhpcy5fX3NlbGVjdG9yLCAnZHJhZycpOwogICAgICB9KTsKICAgIH0pOwogICAgZG9tLmJpbmQoX3RoaXMyLl9fc2VsZWN0b3IsICd0b3VjaHN0YXJ0JywgZnVuY3Rpb24gKCkgewogICAgICBkb20uYWRkQ2xhc3ModGhpcywgJ2RyYWcnKS5iaW5kKHdpbmRvdywgJ3RvdWNoZW5kJywgZnVuY3Rpb24gKCkgewogICAgICAgIGRvbS5yZW1vdmVDbGFzcyhfdGhpcy5fX3NlbGVjdG9yLCAnZHJhZycpOwogICAgICB9KTsKICAgIH0pOwogICAgdmFyIHZhbHVlRmllbGQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgIENvbW1vbi5leHRlbmQoX3RoaXMyLl9fc2VsZWN0b3Iuc3R5bGUsIHsKICAgICAgd2lkdGg6ICcxMjJweCcsCiAgICAgIGhlaWdodDogJzEwMnB4JywKICAgICAgcGFkZGluZzogJzNweCcsCiAgICAgIGJhY2tncm91bmRDb2xvcjogJyMyMjInLAogICAgICBib3hTaGFkb3c6ICcwcHggMXB4IDNweCByZ2JhKDAsMCwwLDAuMyknCiAgICB9KTsKICAgIENvbW1vbi5leHRlbmQoX3RoaXMyLl9fZmllbGRfa25vYi5zdHlsZSwgewogICAgICBwb3NpdGlvbjogJ2Fic29sdXRlJywKICAgICAgd2lkdGg6ICcxMnB4JywKICAgICAgaGVpZ2h0OiAnMTJweCcsCiAgICAgIGJvcmRlcjogX3RoaXMyLl9fZmllbGRfa25vYl9ib3JkZXIgKyAoX3RoaXMyLl9fY29sb3IudiA8IDAuNSA/ICcjZmZmJyA6ICcjMDAwJyksCiAgICAgIGJveFNoYWRvdzogJzBweCAxcHggM3B4IHJnYmEoMCwwLDAsMC41KScsCiAgICAgIGJvcmRlclJhZGl1czogJzEycHgnLAogICAgICB6SW5kZXg6IDEKICAgIH0pOwogICAgQ29tbW9uLmV4dGVuZChfdGhpczIuX19odWVfa25vYi5zdHlsZSwgewogICAgICBwb3NpdGlvbjogJ2Fic29sdXRlJywKICAgICAgd2lkdGg6ICcxNXB4JywKICAgICAgaGVpZ2h0OiAnMnB4JywKICAgICAgYm9yZGVyUmlnaHQ6ICc0cHggc29saWQgI2ZmZicsCiAgICAgIHpJbmRleDogMQogICAgfSk7CiAgICBDb21tb24uZXh0ZW5kKF90aGlzMi5fX3NhdHVyYXRpb25fZmllbGQuc3R5bGUsIHsKICAgICAgd2lkdGg6ICcxMDBweCcsCiAgICAgIGhlaWdodDogJzEwMHB4JywKICAgICAgYm9yZGVyOiAnMXB4IHNvbGlkICM1NTUnLAogICAgICBtYXJnaW5SaWdodDogJzNweCcsCiAgICAgIGRpc3BsYXk6ICdpbmxpbmUtYmxvY2snLAogICAgICBjdXJzb3I6ICdwb2ludGVyJwogICAgfSk7CiAgICBDb21tb24uZXh0ZW5kKHZhbHVlRmllbGQuc3R5bGUsIHsKICAgICAgd2lkdGg6ICcxMDAlJywKICAgICAgaGVpZ2h0OiAnMTAwJScsCiAgICAgIGJhY2tncm91bmQ6ICdub25lJwogICAgfSk7CiAgICBsaW5lYXJHcmFkaWVudCh2YWx1ZUZpZWxkLCAndG9wJywgJ3JnYmEoMCwwLDAsMCknLCAnIzAwMCcpOwogICAgQ29tbW9uLmV4dGVuZChfdGhpczIuX19odWVfZmllbGQuc3R5bGUsIHsKICAgICAgd2lkdGg6ICcxNXB4JywKICAgICAgaGVpZ2h0OiAnMTAwcHgnLAogICAgICBib3JkZXI6ICcxcHggc29saWQgIzU1NScsCiAgICAgIGN1cnNvcjogJ25zLXJlc2l6ZScsCiAgICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnLAogICAgICB0b3A6ICczcHgnLAogICAgICByaWdodDogJzNweCcKICAgIH0pOwogICAgaHVlR3JhZGllbnQoX3RoaXMyLl9faHVlX2ZpZWxkKTsKICAgIENvbW1vbi5leHRlbmQoX3RoaXMyLl9faW5wdXQuc3R5bGUsIHsKICAgICAgb3V0bGluZTogJ25vbmUnLAogICAgICB0ZXh0QWxpZ246ICdjZW50ZXInLAogICAgICBjb2xvcjogJyNmZmYnLAogICAgICBib3JkZXI6IDAsCiAgICAgIGZvbnRXZWlnaHQ6ICdib2xkJywKICAgICAgdGV4dFNoYWRvdzogX3RoaXMyLl9faW5wdXRfdGV4dFNoYWRvdyArICdyZ2JhKDAsMCwwLDAuNyknCiAgICB9KTsKICAgIGRvbS5iaW5kKF90aGlzMi5fX3NhdHVyYXRpb25fZmllbGQsICdtb3VzZWRvd24nLCBmaWVsZERvd24pOwogICAgZG9tLmJpbmQoX3RoaXMyLl9fc2F0dXJhdGlvbl9maWVsZCwgJ3RvdWNoc3RhcnQnLCBmaWVsZERvd24pOwogICAgZG9tLmJpbmQoX3RoaXMyLl9fZmllbGRfa25vYiwgJ21vdXNlZG93bicsIGZpZWxkRG93bik7CiAgICBkb20uYmluZChfdGhpczIuX19maWVsZF9rbm9iLCAndG91Y2hzdGFydCcsIGZpZWxkRG93bik7CiAgICBkb20uYmluZChfdGhpczIuX19odWVfZmllbGQsICdtb3VzZWRvd24nLCBmaWVsZERvd25IKTsKICAgIGRvbS5iaW5kKF90aGlzMi5fX2h1ZV9maWVsZCwgJ3RvdWNoc3RhcnQnLCBmaWVsZERvd25IKTsKCiAgICBmdW5jdGlvbiBmaWVsZERvd24oZSkgewogICAgICBzZXRTVihlKTsKICAgICAgZG9tLmJpbmQod2luZG93LCAnbW91c2Vtb3ZlJywgc2V0U1YpOwogICAgICBkb20uYmluZCh3aW5kb3csICd0b3VjaG1vdmUnLCBzZXRTVik7CiAgICAgIGRvbS5iaW5kKHdpbmRvdywgJ21vdXNldXAnLCBmaWVsZFVwU1YpOwogICAgICBkb20uYmluZCh3aW5kb3csICd0b3VjaGVuZCcsIGZpZWxkVXBTVik7CiAgICB9CgogICAgZnVuY3Rpb24gZmllbGREb3duSChlKSB7CiAgICAgIHNldEgoZSk7CiAgICAgIGRvbS5iaW5kKHdpbmRvdywgJ21vdXNlbW92ZScsIHNldEgpOwogICAgICBkb20uYmluZCh3aW5kb3csICd0b3VjaG1vdmUnLCBzZXRIKTsKICAgICAgZG9tLmJpbmQod2luZG93LCAnbW91c2V1cCcsIGZpZWxkVXBIKTsKICAgICAgZG9tLmJpbmQod2luZG93LCAndG91Y2hlbmQnLCBmaWVsZFVwSCk7CiAgICB9CgogICAgZnVuY3Rpb24gZmllbGRVcFNWKCkgewogICAgICBkb20udW5iaW5kKHdpbmRvdywgJ21vdXNlbW92ZScsIHNldFNWKTsKICAgICAgZG9tLnVuYmluZCh3aW5kb3csICd0b3VjaG1vdmUnLCBzZXRTVik7CiAgICAgIGRvbS51bmJpbmQod2luZG93LCAnbW91c2V1cCcsIGZpZWxkVXBTVik7CiAgICAgIGRvbS51bmJpbmQod2luZG93LCAndG91Y2hlbmQnLCBmaWVsZFVwU1YpOwogICAgICBvbkZpbmlzaCgpOwogICAgfQoKICAgIGZ1bmN0aW9uIGZpZWxkVXBIKCkgewogICAgICBkb20udW5iaW5kKHdpbmRvdywgJ21vdXNlbW92ZScsIHNldEgpOwogICAgICBkb20udW5iaW5kKHdpbmRvdywgJ3RvdWNobW92ZScsIHNldEgpOwogICAgICBkb20udW5iaW5kKHdpbmRvdywgJ21vdXNldXAnLCBmaWVsZFVwSCk7CiAgICAgIGRvbS51bmJpbmQod2luZG93LCAndG91Y2hlbmQnLCBmaWVsZFVwSCk7CiAgICAgIG9uRmluaXNoKCk7CiAgICB9CgogICAgZnVuY3Rpb24gb25CbHVyKCkgewogICAgICB2YXIgaSA9IGludGVycHJldCh0aGlzLnZhbHVlKTsKCiAgICAgIGlmIChpICE9PSBmYWxzZSkgewogICAgICAgIF90aGlzLl9fY29sb3IuX19zdGF0ZSA9IGk7CgogICAgICAgIF90aGlzLnNldFZhbHVlKF90aGlzLl9fY29sb3IudG9PcmlnaW5hbCgpKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnZhbHVlID0gX3RoaXMuX19jb2xvci50b1N0cmluZygpOwogICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gb25GaW5pc2goKSB7CiAgICAgIGlmIChfdGhpcy5fX29uRmluaXNoQ2hhbmdlKSB7CiAgICAgICAgX3RoaXMuX19vbkZpbmlzaENoYW5nZS5jYWxsKF90aGlzLCBfdGhpcy5fX2NvbG9yLnRvT3JpZ2luYWwoKSk7CiAgICAgIH0KICAgIH0KCiAgICBfdGhpczIuX19zYXR1cmF0aW9uX2ZpZWxkLmFwcGVuZENoaWxkKHZhbHVlRmllbGQpOwoKICAgIF90aGlzMi5fX3NlbGVjdG9yLmFwcGVuZENoaWxkKF90aGlzMi5fX2ZpZWxkX2tub2IpOwoKICAgIF90aGlzMi5fX3NlbGVjdG9yLmFwcGVuZENoaWxkKF90aGlzMi5fX3NhdHVyYXRpb25fZmllbGQpOwoKICAgIF90aGlzMi5fX3NlbGVjdG9yLmFwcGVuZENoaWxkKF90aGlzMi5fX2h1ZV9maWVsZCk7CgogICAgX3RoaXMyLl9faHVlX2ZpZWxkLmFwcGVuZENoaWxkKF90aGlzMi5fX2h1ZV9rbm9iKTsKCiAgICBfdGhpczIuZG9tRWxlbWVudC5hcHBlbmRDaGlsZChfdGhpczIuX19pbnB1dCk7CgogICAgX3RoaXMyLmRvbUVsZW1lbnQuYXBwZW5kQ2hpbGQoX3RoaXMyLl9fc2VsZWN0b3IpOwoKICAgIF90aGlzMi51cGRhdGVEaXNwbGF5KCk7CgogICAgZnVuY3Rpb24gc2V0U1YoZSkgewogICAgICBpZiAoZS50eXBlLmluZGV4T2YoJ3RvdWNoJykgPT09IC0xKSB7CiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICB9CgogICAgICB2YXIgZmllbGRSZWN0ID0gX3RoaXMuX19zYXR1cmF0aW9uX2ZpZWxkLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOwoKICAgICAgdmFyIF9yZWYgPSBlLnRvdWNoZXMgJiYgZS50b3VjaGVzWzBdIHx8IGUsCiAgICAgICAgICBjbGllbnRYID0gX3JlZi5jbGllbnRYLAogICAgICAgICAgY2xpZW50WSA9IF9yZWYuY2xpZW50WTsKCiAgICAgIHZhciBzID0gKGNsaWVudFggLSBmaWVsZFJlY3QubGVmdCkgLyAoZmllbGRSZWN0LnJpZ2h0IC0gZmllbGRSZWN0LmxlZnQpOwogICAgICB2YXIgdiA9IDEgLSAoY2xpZW50WSAtIGZpZWxkUmVjdC50b3ApIC8gKGZpZWxkUmVjdC5ib3R0b20gLSBmaWVsZFJlY3QudG9wKTsKCiAgICAgIGlmICh2ID4gMSkgewogICAgICAgIHYgPSAxOwogICAgICB9IGVsc2UgaWYgKHYgPCAwKSB7CiAgICAgICAgdiA9IDA7CiAgICAgIH0KCiAgICAgIGlmIChzID4gMSkgewogICAgICAgIHMgPSAxOwogICAgICB9IGVsc2UgaWYgKHMgPCAwKSB7CiAgICAgICAgcyA9IDA7CiAgICAgIH0KCiAgICAgIF90aGlzLl9fY29sb3IudiA9IHY7CiAgICAgIF90aGlzLl9fY29sb3IucyA9IHM7CgogICAgICBfdGhpcy5zZXRWYWx1ZShfdGhpcy5fX2NvbG9yLnRvT3JpZ2luYWwoKSk7CgogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CgogICAgZnVuY3Rpb24gc2V0SChlKSB7CiAgICAgIGlmIChlLnR5cGUuaW5kZXhPZigndG91Y2gnKSA9PT0gLTEpIHsKICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgIH0KCiAgICAgIHZhciBmaWVsZFJlY3QgPSBfdGhpcy5fX2h1ZV9maWVsZC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTsKCiAgICAgIHZhciBfcmVmMiA9IGUudG91Y2hlcyAmJiBlLnRvdWNoZXNbMF0gfHwgZSwKICAgICAgICAgIGNsaWVudFkgPSBfcmVmMi5jbGllbnRZOwoKICAgICAgdmFyIGggPSAxIC0gKGNsaWVudFkgLSBmaWVsZFJlY3QudG9wKSAvIChmaWVsZFJlY3QuYm90dG9tIC0gZmllbGRSZWN0LnRvcCk7CgogICAgICBpZiAoaCA+IDEpIHsKICAgICAgICBoID0gMTsKICAgICAgfSBlbHNlIGlmIChoIDwgMCkgewogICAgICAgIGggPSAwOwogICAgICB9CgogICAgICBfdGhpcy5fX2NvbG9yLmggPSBoICogMzYwOwoKICAgICAgX3RoaXMuc2V0VmFsdWUoX3RoaXMuX19jb2xvci50b09yaWdpbmFsKCkpOwoKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQoKICAgIHJldHVybiBfdGhpczI7CiAgfQoKICBjcmVhdGVDbGFzcyhDb2xvckNvbnRyb2xsZXIsIFt7CiAgICBrZXk6ICd1cGRhdGVEaXNwbGF5JywKICAgIHZhbHVlOiBmdW5jdGlvbiB1cGRhdGVEaXNwbGF5KCkgewogICAgICB2YXIgaSA9IGludGVycHJldCh0aGlzLmdldFZhbHVlKCkpOwoKICAgICAgaWYgKGkgIT09IGZhbHNlKSB7CiAgICAgICAgdmFyIG1pc21hdGNoID0gZmFsc2U7CiAgICAgICAgQ29tbW9uLmVhY2goQ29sb3IuQ09NUE9ORU5UUywgZnVuY3Rpb24gKGNvbXBvbmVudCkgewogICAgICAgICAgaWYgKCFDb21tb24uaXNVbmRlZmluZWQoaVtjb21wb25lbnRdKSAmJiAhQ29tbW9uLmlzVW5kZWZpbmVkKHRoaXMuX19jb2xvci5fX3N0YXRlW2NvbXBvbmVudF0pICYmIGlbY29tcG9uZW50XSAhPT0gdGhpcy5fX2NvbG9yLl9fc3RhdGVbY29tcG9uZW50XSkgewogICAgICAgICAgICBtaXNtYXRjaCA9IHRydWU7CiAgICAgICAgICAgIHJldHVybiB7fTsKICAgICAgICAgIH0KICAgICAgICB9LCB0aGlzKTsKCiAgICAgICAgaWYgKG1pc21hdGNoKSB7CiAgICAgICAgICBDb21tb24uZXh0ZW5kKHRoaXMuX19jb2xvci5fX3N0YXRlLCBpKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIENvbW1vbi5leHRlbmQodGhpcy5fX3RlbXAuX19zdGF0ZSwgdGhpcy5fX2NvbG9yLl9fc3RhdGUpOwogICAgICB0aGlzLl9fdGVtcC5hID0gMTsKICAgICAgdmFyIGZsaXAgPSB0aGlzLl9fY29sb3IudiA8IDAuNSB8fCB0aGlzLl9fY29sb3IucyA+IDAuNSA/IDI1NSA6IDA7CgogICAgICB2YXIgX2ZsaXAgPSAyNTUgLSBmbGlwOwoKICAgICAgQ29tbW9uLmV4dGVuZCh0aGlzLl9fZmllbGRfa25vYi5zdHlsZSwgewogICAgICAgIG1hcmdpbkxlZnQ6IDEwMCAqIHRoaXMuX19jb2xvci5zIC0gNyArICdweCcsCiAgICAgICAgbWFyZ2luVG9wOiAxMDAgKiAoMSAtIHRoaXMuX19jb2xvci52KSAtIDcgKyAncHgnLAogICAgICAgIGJhY2tncm91bmRDb2xvcjogdGhpcy5fX3RlbXAudG9IZXhTdHJpbmcoKSwKICAgICAgICBib3JkZXI6IHRoaXMuX19maWVsZF9rbm9iX2JvcmRlciArICdyZ2IoJyArIGZsaXAgKyAnLCcgKyBmbGlwICsgJywnICsgZmxpcCArICcpJwogICAgICB9KTsKICAgICAgdGhpcy5fX2h1ZV9rbm9iLnN0eWxlLm1hcmdpblRvcCA9ICgxIC0gdGhpcy5fX2NvbG9yLmggLyAzNjApICogMTAwICsgJ3B4JzsKICAgICAgdGhpcy5fX3RlbXAucyA9IDE7CiAgICAgIHRoaXMuX190ZW1wLnYgPSAxOwogICAgICBsaW5lYXJHcmFkaWVudCh0aGlzLl9fc2F0dXJhdGlvbl9maWVsZCwgJ2xlZnQnLCAnI2ZmZicsIHRoaXMuX190ZW1wLnRvSGV4U3RyaW5nKCkpOwogICAgICB0aGlzLl9faW5wdXQudmFsdWUgPSB0aGlzLl9fY29sb3IudG9TdHJpbmcoKTsKICAgICAgQ29tbW9uLmV4dGVuZCh0aGlzLl9faW5wdXQuc3R5bGUsIHsKICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IHRoaXMuX19jb2xvci50b0hleFN0cmluZygpLAogICAgICAgIGNvbG9yOiAncmdiKCcgKyBmbGlwICsgJywnICsgZmxpcCArICcsJyArIGZsaXAgKyAnKScsCiAgICAgICAgdGV4dFNoYWRvdzogdGhpcy5fX2lucHV0X3RleHRTaGFkb3cgKyAncmdiYSgnICsgX2ZsaXAgKyAnLCcgKyBfZmxpcCArICcsJyArIF9mbGlwICsgJywuNyknCiAgICAgIH0pOwogICAgfQogIH1dKTsKICByZXR1cm4gQ29sb3JDb250cm9sbGVyOwp9KENvbnRyb2xsZXIpOwoKdmFyIHZlbmRvcnMgPSBbJy1tb3otJywgJy1vLScsICctd2Via2l0LScsICctbXMtJywgJyddOwoKZnVuY3Rpb24gbGluZWFyR3JhZGllbnQoZWxlbSwgeCwgYSwgYikgewogIGVsZW0uc3R5bGUuYmFja2dyb3VuZCA9ICcnOwogIENvbW1vbi5lYWNoKHZlbmRvcnMsIGZ1bmN0aW9uICh2ZW5kb3IpIHsKICAgIGVsZW0uc3R5bGUuY3NzVGV4dCArPSAnYmFja2dyb3VuZDogJyArIHZlbmRvciArICdsaW5lYXItZ3JhZGllbnQoJyArIHggKyAnLCAnICsgYSArICcgMCUsICcgKyBiICsgJyAxMDAlKTsgJzsKICB9KTsKfQoKZnVuY3Rpb24gaHVlR3JhZGllbnQoZWxlbSkgewogIGVsZW0uc3R5bGUuYmFja2dyb3VuZCA9ICcnOwogIGVsZW0uc3R5bGUuY3NzVGV4dCArPSAnYmFja2dyb3VuZDogLW1vei1saW5lYXItZ3JhZGllbnQodG9wLCAgI2ZmMDAwMCAwJSwgI2ZmMDBmZiAxNyUsICMwMDAwZmYgMzQlLCAjMDBmZmZmIDUwJSwgIzAwZmYwMCA2NyUsICNmZmZmMDAgODQlLCAjZmYwMDAwIDEwMCUpOyc7CiAgZWxlbS5zdHlsZS5jc3NUZXh0ICs9ICdiYWNrZ3JvdW5kOiAtd2Via2l0LWxpbmVhci1ncmFkaWVudCh0b3AsICAjZmYwMDAwIDAlLCNmZjAwZmYgMTclLCMwMDAwZmYgMzQlLCMwMGZmZmYgNTAlLCMwMGZmMDAgNjclLCNmZmZmMDAgODQlLCNmZjAwMDAgMTAwJSk7JzsKICBlbGVtLnN0eWxlLmNzc1RleHQgKz0gJ2JhY2tncm91bmQ6IC1vLWxpbmVhci1ncmFkaWVudCh0b3AsICAjZmYwMDAwIDAlLCNmZjAwZmYgMTclLCMwMDAwZmYgMzQlLCMwMGZmZmYgNTAlLCMwMGZmMDAgNjclLCNmZmZmMDAgODQlLCNmZjAwMDAgMTAwJSk7JzsKICBlbGVtLnN0eWxlLmNzc1RleHQgKz0gJ2JhY2tncm91bmQ6IC1tcy1saW5lYXItZ3JhZGllbnQodG9wLCAgI2ZmMDAwMCAwJSwjZmYwMGZmIDE3JSwjMDAwMGZmIDM0JSwjMDBmZmZmIDUwJSwjMDBmZjAwIDY3JSwjZmZmZjAwIDg0JSwjZmYwMDAwIDEwMCUpOyc7CiAgZWxlbS5zdHlsZS5jc3NUZXh0ICs9ICdiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQodG9wLCAgI2ZmMDAwMCAwJSwjZmYwMGZmIDE3JSwjMDAwMGZmIDM0JSwjMDBmZmZmIDUwJSwjMDBmZjAwIDY3JSwjZmZmZjAwIDg0JSwjZmYwMDAwIDEwMCUpOyc7Cn0KCnZhciBjc3MgPSB7CiAgbG9hZDogZnVuY3Rpb24gbG9hZCh1cmwsIGluZG9jKSB7CiAgICB2YXIgZG9jID0gaW5kb2MgfHwgZG9jdW1lbnQ7CiAgICB2YXIgbGluayA9IGRvYy5jcmVhdGVFbGVtZW50KCdsaW5rJyk7CiAgICBsaW5rLnR5cGUgPSAndGV4dC9jc3MnOwogICAgbGluay5yZWwgPSAnc3R5bGVzaGVldCc7CiAgICBsaW5rLmhyZWYgPSB1cmw7CiAgICBkb2MuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2hlYWQnKVswXS5hcHBlbmRDaGlsZChsaW5rKTsKICB9LAogIGluamVjdDogZnVuY3Rpb24gaW5qZWN0KGNzc0NvbnRlbnQsIGluZG9jKSB7CiAgICB2YXIgZG9jID0gaW5kb2MgfHwgZG9jdW1lbnQ7CiAgICB2YXIgaW5qZWN0ZWQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpOwogICAgaW5qZWN0ZWQudHlwZSA9ICd0ZXh0L2Nzcyc7CiAgICBpbmplY3RlZC5pbm5lckhUTUwgPSBjc3NDb250ZW50OwogICAgdmFyIGhlYWQgPSBkb2MuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2hlYWQnKVswXTsKCiAgICB0cnkgewogICAgICBoZWFkLmFwcGVuZENoaWxkKGluamVjdGVkKTsKICAgIH0gY2F0Y2ggKGUpIHt9CiAgfQp9Owp2YXIgc2F2ZURpYWxvZ0NvbnRlbnRzID0gIjxkaXYgaWQ9XCJkZy1zYXZlXCIgY2xhc3M9XCJkZyBkaWFsb2d1ZVwiPlxuXG4gIEhlcmUncyB0aGUgbmV3IGxvYWQgcGFyYW1ldGVyIGZvciB5b3VyIDxjb2RlPkdVSTwvY29kZT4ncyBjb25zdHJ1Y3RvcjpcblxuICA8dGV4dGFyZWEgaWQ9XCJkZy1uZXctY29uc3RydWN0b3JcIj48L3RleHRhcmVhPlxuXG4gIDxkaXYgaWQ9XCJkZy1zYXZlLWxvY2FsbHlcIj5cblxuICAgIDxpbnB1dCBpZD1cImRnLWxvY2FsLXN0b3JhZ2VcIiB0eXBlPVwiY2hlY2tib3hcIi8+IEF1dG9tYXRpY2FsbHkgc2F2ZVxuICAgIHZhbHVlcyB0byA8Y29kZT5sb2NhbFN0b3JhZ2U8L2NvZGU+IG9uIGV4aXQuXG5cbiAgICA8ZGl2IGlkPVwiZGctbG9jYWwtZXhwbGFpblwiPlRoZSB2YWx1ZXMgc2F2ZWQgdG8gPGNvZGU+bG9jYWxTdG9yYWdlPC9jb2RlPiB3aWxsXG4gICAgICBvdmVycmlkZSB0aG9zZSBwYXNzZWQgdG8gPGNvZGU+ZGF0LkdVSTwvY29kZT4ncyBjb25zdHJ1Y3Rvci4gVGhpcyBtYWtlcyBpdFxuICAgICAgZWFzaWVyIHRvIHdvcmsgaW5jcmVtZW50YWxseSwgYnV0IDxjb2RlPmxvY2FsU3RvcmFnZTwvY29kZT4gaXMgZnJhZ2lsZSxcbiAgICAgIGFuZCB5b3VyIGZyaWVuZHMgbWF5IG5vdCBzZWUgdGhlIHNhbWUgdmFsdWVzIHlvdSBkby5cblxuICAgIDwvZGl2PlxuXG4gIDwvZGl2PlxuXG48L2Rpdj4iOwoKdmFyIENvbnRyb2xsZXJGYWN0b3J5ID0gZnVuY3Rpb24gQ29udHJvbGxlckZhY3Rvcnkob2JqZWN0LCBwcm9wZXJ0eSkgewogIHZhciBpbml0aWFsVmFsdWUgPSBvYmplY3RbcHJvcGVydHldOwoKICBpZiAoQ29tbW9uLmlzQXJyYXkoYXJndW1lbnRzWzJdKSB8fCBDb21tb24uaXNPYmplY3QoYXJndW1lbnRzWzJdKSkgewogICAgcmV0dXJuIG5ldyBPcHRpb25Db250cm9sbGVyKG9iamVjdCwgcHJvcGVydHksIGFyZ3VtZW50c1syXSk7CiAgfQoKICBpZiAoQ29tbW9uLmlzTnVtYmVyKGluaXRpYWxWYWx1ZSkpIHsKICAgIGlmIChDb21tb24uaXNOdW1iZXIoYXJndW1lbnRzWzJdKSAmJiBDb21tb24uaXNOdW1iZXIoYXJndW1lbnRzWzNdKSkgewogICAgICBpZiAoQ29tbW9uLmlzTnVtYmVyKGFyZ3VtZW50c1s0XSkpIHsKICAgICAgICByZXR1cm4gbmV3IE51bWJlckNvbnRyb2xsZXJTbGlkZXIob2JqZWN0LCBwcm9wZXJ0eSwgYXJndW1lbnRzWzJdLCBhcmd1bWVudHNbM10sIGFyZ3VtZW50c1s0XSk7CiAgICAgIH0KCiAgICAgIHJldHVybiBuZXcgTnVtYmVyQ29udHJvbGxlclNsaWRlcihvYmplY3QsIHByb3BlcnR5LCBhcmd1bWVudHNbMl0sIGFyZ3VtZW50c1szXSk7CiAgICB9CgogICAgaWYgKENvbW1vbi5pc051bWJlcihhcmd1bWVudHNbNF0pKSB7CiAgICAgIHJldHVybiBuZXcgTnVtYmVyQ29udHJvbGxlckJveChvYmplY3QsIHByb3BlcnR5LCB7CiAgICAgICAgbWluOiBhcmd1bWVudHNbMl0sCiAgICAgICAgbWF4OiBhcmd1bWVudHNbM10sCiAgICAgICAgc3RlcDogYXJndW1lbnRzWzRdCiAgICAgIH0pOwogICAgfQoKICAgIHJldHVybiBuZXcgTnVtYmVyQ29udHJvbGxlckJveChvYmplY3QsIHByb3BlcnR5LCB7CiAgICAgIG1pbjogYXJndW1lbnRzWzJdLAogICAgICBtYXg6IGFyZ3VtZW50c1szXQogICAgfSk7CiAgfQoKICBpZiAoQ29tbW9uLmlzU3RyaW5nKGluaXRpYWxWYWx1ZSkpIHsKICAgIHJldHVybiBuZXcgU3RyaW5nQ29udHJvbGxlcihvYmplY3QsIHByb3BlcnR5KTsKICB9CgogIGlmIChDb21tb24uaXNGdW5jdGlvbihpbml0aWFsVmFsdWUpKSB7CiAgICByZXR1cm4gbmV3IEZ1bmN0aW9uQ29udHJvbGxlcihvYmplY3QsIHByb3BlcnR5LCAnJyk7CiAgfQoKICBpZiAoQ29tbW9uLmlzQm9vbGVhbihpbml0aWFsVmFsdWUpKSB7CiAgICByZXR1cm4gbmV3IEJvb2xlYW5Db250cm9sbGVyKG9iamVjdCwgcHJvcGVydHkpOwogIH0KCiAgcmV0dXJuIG51bGw7Cn07CgpmdW5jdGlvbiByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoY2FsbGJhY2spIHsKICBzZXRUaW1lb3V0KGNhbGxiYWNrLCAxMDAwIC8gNjApOwp9Cgp2YXIgcmVxdWVzdEFuaW1hdGlvbkZyYW1lJDEgPSB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8IHdpbmRvdy53ZWJraXRSZXF1ZXN0QW5pbWF0aW9uRnJhbWUgfHwgd2luZG93Lm1velJlcXVlc3RBbmltYXRpb25GcmFtZSB8fCB3aW5kb3cub1JlcXVlc3RBbmltYXRpb25GcmFtZSB8fCB3aW5kb3cubXNSZXF1ZXN0QW5pbWF0aW9uRnJhbWUgfHwgcmVxdWVzdEFuaW1hdGlvbkZyYW1lOwoKdmFyIENlbnRlcmVkRGl2ID0gZnVuY3Rpb24gKCkgewogIGZ1bmN0aW9uIENlbnRlcmVkRGl2KCkgewogICAgY2xhc3NDYWxsQ2hlY2sodGhpcywgQ2VudGVyZWREaXYpOwogICAgdGhpcy5iYWNrZ3JvdW5kRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgQ29tbW9uLmV4dGVuZCh0aGlzLmJhY2tncm91bmRFbGVtZW50LnN0eWxlLCB7CiAgICAgIGJhY2tncm91bmRDb2xvcjogJ3JnYmEoMCwwLDAsMC44KScsCiAgICAgIHRvcDogMCwKICAgICAgbGVmdDogMCwKICAgICAgZGlzcGxheTogJ25vbmUnLAogICAgICB6SW5kZXg6ICcxMDAwJywKICAgICAgb3BhY2l0eTogMCwKICAgICAgV2Via2l0VHJhbnNpdGlvbjogJ29wYWNpdHkgMC4ycyBsaW5lYXInLAogICAgICB0cmFuc2l0aW9uOiAnb3BhY2l0eSAwLjJzIGxpbmVhcicKICAgIH0pOwogICAgZG9tLm1ha2VGdWxsc2NyZWVuKHRoaXMuYmFja2dyb3VuZEVsZW1lbnQpOwogICAgdGhpcy5iYWNrZ3JvdW5kRWxlbWVudC5zdHlsZS5wb3NpdGlvbiA9ICdmaXhlZCc7CiAgICB0aGlzLmRvbUVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgIENvbW1vbi5leHRlbmQodGhpcy5kb21FbGVtZW50LnN0eWxlLCB7CiAgICAgIHBvc2l0aW9uOiAnZml4ZWQnLAogICAgICBkaXNwbGF5OiAnbm9uZScsCiAgICAgIHpJbmRleDogJzEwMDEnLAogICAgICBvcGFjaXR5OiAwLAogICAgICBXZWJraXRUcmFuc2l0aW9uOiAnLXdlYmtpdC10cmFuc2Zvcm0gMC4ycyBlYXNlLW91dCwgb3BhY2l0eSAwLjJzIGxpbmVhcicsCiAgICAgIHRyYW5zaXRpb246ICd0cmFuc2Zvcm0gMC4ycyBlYXNlLW91dCwgb3BhY2l0eSAwLjJzIGxpbmVhcicKICAgIH0pOwogICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0aGlzLmJhY2tncm91bmRFbGVtZW50KTsKICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodGhpcy5kb21FbGVtZW50KTsKCiAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgIGRvbS5iaW5kKHRoaXMuYmFja2dyb3VuZEVsZW1lbnQsICdjbGljaycsIGZ1bmN0aW9uICgpIHsKICAgICAgX3RoaXMuaGlkZSgpOwogICAgfSk7CiAgfQoKICBjcmVhdGVDbGFzcyhDZW50ZXJlZERpdiwgW3sKICAgIGtleTogJ3Nob3cnLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNob3coKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB0aGlzLmJhY2tncm91bmRFbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOwogICAgICB0aGlzLmRvbUVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7CiAgICAgIHRoaXMuZG9tRWxlbWVudC5zdHlsZS5vcGFjaXR5ID0gMDsKICAgICAgdGhpcy5kb21FbGVtZW50LnN0eWxlLndlYmtpdFRyYW5zZm9ybSA9ICdzY2FsZSgxLjEpJzsKICAgICAgdGhpcy5sYXlvdXQoKTsKICAgICAgQ29tbW9uLmRlZmVyKGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpcy5iYWNrZ3JvdW5kRWxlbWVudC5zdHlsZS5vcGFjaXR5ID0gMTsKICAgICAgICBfdGhpcy5kb21FbGVtZW50LnN0eWxlLm9wYWNpdHkgPSAxOwogICAgICAgIF90aGlzLmRvbUVsZW1lbnQuc3R5bGUud2Via2l0VHJhbnNmb3JtID0gJ3NjYWxlKDEpJzsKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAnaGlkZScsCiAgICB2YWx1ZTogZnVuY3Rpb24gaGlkZSgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHZhciBoaWRlID0gZnVuY3Rpb24gaGlkZSgpIHsKICAgICAgICBfdGhpcy5kb21FbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICAgICAgX3RoaXMuYmFja2dyb3VuZEVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgICAgICBkb20udW5iaW5kKF90aGlzLmRvbUVsZW1lbnQsICd3ZWJraXRUcmFuc2l0aW9uRW5kJywgaGlkZSk7CiAgICAgICAgZG9tLnVuYmluZChfdGhpcy5kb21FbGVtZW50LCAndHJhbnNpdGlvbmVuZCcsIGhpZGUpOwogICAgICAgIGRvbS51bmJpbmQoX3RoaXMuZG9tRWxlbWVudCwgJ29UcmFuc2l0aW9uRW5kJywgaGlkZSk7CiAgICAgIH07CgogICAgICBkb20uYmluZCh0aGlzLmRvbUVsZW1lbnQsICd3ZWJraXRUcmFuc2l0aW9uRW5kJywgaGlkZSk7CiAgICAgIGRvbS5iaW5kKHRoaXMuZG9tRWxlbWVudCwgJ3RyYW5zaXRpb25lbmQnLCBoaWRlKTsKICAgICAgZG9tLmJpbmQodGhpcy5kb21FbGVtZW50LCAnb1RyYW5zaXRpb25FbmQnLCBoaWRlKTsKICAgICAgdGhpcy5iYWNrZ3JvdW5kRWxlbWVudC5zdHlsZS5vcGFjaXR5ID0gMDsKICAgICAgdGhpcy5kb21FbGVtZW50LnN0eWxlLm9wYWNpdHkgPSAwOwogICAgICB0aGlzLmRvbUVsZW1lbnQuc3R5bGUud2Via2l0VHJhbnNmb3JtID0gJ3NjYWxlKDEuMSknOwogICAgfQogIH0sIHsKICAgIGtleTogJ2xheW91dCcsCiAgICB2YWx1ZTogZnVuY3Rpb24gbGF5b3V0KCkgewogICAgICB0aGlzLmRvbUVsZW1lbnQuc3R5bGUubGVmdCA9IHdpbmRvdy5pbm5lcldpZHRoIC8gMiAtIGRvbS5nZXRXaWR0aCh0aGlzLmRvbUVsZW1lbnQpIC8gMiArICdweCc7CiAgICAgIHRoaXMuZG9tRWxlbWVudC5zdHlsZS50b3AgPSB3aW5kb3cuaW5uZXJIZWlnaHQgLyAyIC0gZG9tLmdldEhlaWdodCh0aGlzLmRvbUVsZW1lbnQpIC8gMiArICdweCc7CiAgICB9CiAgfV0pOwogIHJldHVybiBDZW50ZXJlZERpdjsKfSgpOwoKdmFyIHN0eWxlU2hlZXQgPSBfX18kaW5zZXJ0U3R5bGUoIi5kZyB1bHtsaXN0LXN0eWxlOm5vbmU7bWFyZ2luOjA7cGFkZGluZzowO3dpZHRoOjEwMCU7Y2xlYXI6Ym90aH0uZGcuYWN7cG9zaXRpb246Zml4ZWQ7dG9wOjA7bGVmdDowO3JpZ2h0OjA7aGVpZ2h0OjA7ei1pbmRleDowfS5kZzpub3QoLmFjKSAubWFpbntvdmVyZmxvdzpoaWRkZW59LmRnLm1haW57LXdlYmtpdC10cmFuc2l0aW9uOm9wYWNpdHkgLjFzIGxpbmVhcjstby10cmFuc2l0aW9uOm9wYWNpdHkgLjFzIGxpbmVhcjstbW96LXRyYW5zaXRpb246b3BhY2l0eSAuMXMgbGluZWFyO3RyYW5zaXRpb246b3BhY2l0eSAuMXMgbGluZWFyfS5kZy5tYWluLnRhbGxlci10aGFuLXdpbmRvd3tvdmVyZmxvdy15OmF1dG99LmRnLm1haW4udGFsbGVyLXRoYW4td2luZG93IC5jbG9zZS1idXR0b257b3BhY2l0eToxO21hcmdpbi10b3A6LTFweDtib3JkZXItdG9wOjFweCBzb2xpZCAjMmMyYzJjfS5kZy5tYWluIHVsLmNsb3NlZCAuY2xvc2UtYnV0dG9ue29wYWNpdHk6MSAhaW1wb3J0YW50fS5kZy5tYWluOmhvdmVyIC5jbG9zZS1idXR0b24sLmRnLm1haW4gLmNsb3NlLWJ1dHRvbi5kcmFne29wYWNpdHk6MX0uZGcubWFpbiAuY2xvc2UtYnV0dG9uey13ZWJraXQtdHJhbnNpdGlvbjpvcGFjaXR5IC4xcyBsaW5lYXI7LW8tdHJhbnNpdGlvbjpvcGFjaXR5IC4xcyBsaW5lYXI7LW1vei10cmFuc2l0aW9uOm9wYWNpdHkgLjFzIGxpbmVhcjt0cmFuc2l0aW9uOm9wYWNpdHkgLjFzIGxpbmVhcjtib3JkZXI6MDtsaW5lLWhlaWdodDoxOXB4O2hlaWdodDoyMHB4O2N1cnNvcjpwb2ludGVyO3RleHQtYWxpZ246Y2VudGVyO2JhY2tncm91bmQtY29sb3I6IzAwMH0uZGcubWFpbiAuY2xvc2UtYnV0dG9uLmNsb3NlLXRvcHtwb3NpdGlvbjpyZWxhdGl2ZX0uZGcubWFpbiAuY2xvc2UtYnV0dG9uLmNsb3NlLWJvdHRvbXtwb3NpdGlvbjphYnNvbHV0ZX0uZGcubWFpbiAuY2xvc2UtYnV0dG9uOmhvdmVye2JhY2tncm91bmQtY29sb3I6IzExMX0uZGcuYXtmbG9hdDpyaWdodDttYXJnaW4tcmlnaHQ6MTVweDtvdmVyZmxvdy15OnZpc2libGV9LmRnLmEuaGFzLXNhdmU+dWwuY2xvc2UtdG9we21hcmdpbi10b3A6MH0uZGcuYS5oYXMtc2F2ZT51bC5jbG9zZS1ib3R0b217bWFyZ2luLXRvcDoyN3B4fS5kZy5hLmhhcy1zYXZlPnVsLmNsb3NlZHttYXJnaW4tdG9wOjB9LmRnLmEgLnNhdmUtcm93e3RvcDowO3otaW5kZXg6MTAwMn0uZGcuYSAuc2F2ZS1yb3cuY2xvc2UtdG9we3Bvc2l0aW9uOnJlbGF0aXZlfS5kZy5hIC5zYXZlLXJvdy5jbG9zZS1ib3R0b217cG9zaXRpb246Zml4ZWR9LmRnIGxpey13ZWJraXQtdHJhbnNpdGlvbjpoZWlnaHQgLjFzIGVhc2Utb3V0Oy1vLXRyYW5zaXRpb246aGVpZ2h0IC4xcyBlYXNlLW91dDstbW96LXRyYW5zaXRpb246aGVpZ2h0IC4xcyBlYXNlLW91dDt0cmFuc2l0aW9uOmhlaWdodCAuMXMgZWFzZS1vdXQ7LXdlYmtpdC10cmFuc2l0aW9uOm92ZXJmbG93IC4xcyBsaW5lYXI7LW8tdHJhbnNpdGlvbjpvdmVyZmxvdyAuMXMgbGluZWFyOy1tb3otdHJhbnNpdGlvbjpvdmVyZmxvdyAuMXMgbGluZWFyO3RyYW5zaXRpb246b3ZlcmZsb3cgLjFzIGxpbmVhcn0uZGcgbGk6bm90KC5mb2xkZXIpe2N1cnNvcjphdXRvO2hlaWdodDoyN3B4O2xpbmUtaGVpZ2h0OjI3cHg7cGFkZGluZzowIDRweCAwIDVweH0uZGcgbGkuZm9sZGVye3BhZGRpbmc6MDtib3JkZXItbGVmdDo0cHggc29saWQgcmdiYSgwLDAsMCwwKX0uZGcgbGkudGl0bGV7Y3Vyc29yOnBvaW50ZXI7bWFyZ2luLWxlZnQ6LTRweH0uZGcgLmNsb3NlZCBsaTpub3QoLnRpdGxlKSwuZGcgLmNsb3NlZCB1bCBsaSwuZGcgLmNsb3NlZCB1bCBsaT4qe2hlaWdodDowO292ZXJmbG93OmhpZGRlbjtib3JkZXI6MH0uZGcgLmNye2NsZWFyOmJvdGg7cGFkZGluZy1sZWZ0OjNweDtoZWlnaHQ6MjdweDtvdmVyZmxvdzpoaWRkZW59LmRnIC5wcm9wZXJ0eS1uYW1le2N1cnNvcjpkZWZhdWx0O2Zsb2F0OmxlZnQ7Y2xlYXI6bGVmdDt3aWR0aDo0MCU7b3ZlcmZsb3c6aGlkZGVuO3RleHQtb3ZlcmZsb3c6ZWxsaXBzaXN9LmRnIC5je2Zsb2F0OmxlZnQ7d2lkdGg6NjAlO3Bvc2l0aW9uOnJlbGF0aXZlfS5kZyAuYyBpbnB1dFt0eXBlPXRleHRde2JvcmRlcjowO21hcmdpbi10b3A6NHB4O3BhZGRpbmc6M3B4O3dpZHRoOjEwMCU7ZmxvYXQ6cmlnaHR9LmRnIC5oYXMtc2xpZGVyIGlucHV0W3R5cGU9dGV4dF17d2lkdGg6MzAlO21hcmdpbi1sZWZ0OjB9LmRnIC5zbGlkZXJ7ZmxvYXQ6bGVmdDt3aWR0aDo2NiU7bWFyZ2luLWxlZnQ6LTVweDttYXJnaW4tcmlnaHQ6MDtoZWlnaHQ6MTlweDttYXJnaW4tdG9wOjRweH0uZGcgLnNsaWRlci1mZ3toZWlnaHQ6MTAwJX0uZGcgLmMgaW5wdXRbdHlwZT1jaGVja2JveF17bWFyZ2luLXRvcDo3cHh9LmRnIC5jIHNlbGVjdHttYXJnaW4tdG9wOjVweH0uZGcgLmNyLmZ1bmN0aW9uLC5kZyAuY3IuZnVuY3Rpb24gLnByb3BlcnR5LW5hbWUsLmRnIC5jci5mdW5jdGlvbiAqLC5kZyAuY3IuYm9vbGVhbiwuZGcgLmNyLmJvb2xlYW4gKntjdXJzb3I6cG9pbnRlcn0uZGcgLmNyLmNvbG9ye292ZXJmbG93OnZpc2libGV9LmRnIC5zZWxlY3RvcntkaXNwbGF5Om5vbmU7cG9zaXRpb246YWJzb2x1dGU7bWFyZ2luLWxlZnQ6LTlweDttYXJnaW4tdG9wOjIzcHg7ei1pbmRleDoxMH0uZGcgLmM6aG92ZXIgLnNlbGVjdG9yLC5kZyAuc2VsZWN0b3IuZHJhZ3tkaXNwbGF5OmJsb2NrfS5kZyBsaS5zYXZlLXJvd3twYWRkaW5nOjB9LmRnIGxpLnNhdmUtcm93IC5idXR0b257ZGlzcGxheTppbmxpbmUtYmxvY2s7cGFkZGluZzowcHggNnB4fS5kZy5kaWFsb2d1ZXtiYWNrZ3JvdW5kLWNvbG9yOiMyMjI7d2lkdGg6NDYwcHg7cGFkZGluZzoxNXB4O2ZvbnQtc2l6ZToxM3B4O2xpbmUtaGVpZ2h0OjE1cHh9I2RnLW5ldy1jb25zdHJ1Y3RvcntwYWRkaW5nOjEwcHg7Y29sb3I6IzIyMjtmb250LWZhbWlseTpNb25hY28sIG1vbm9zcGFjZTtmb250LXNpemU6MTBweDtib3JkZXI6MDtyZXNpemU6bm9uZTtib3gtc2hhZG93Omluc2V0IDFweCAxcHggMXB4ICM4ODg7d29yZC13cmFwOmJyZWFrLXdvcmQ7bWFyZ2luOjEycHggMDtkaXNwbGF5OmJsb2NrO3dpZHRoOjQ0MHB4O292ZXJmbG93LXk6c2Nyb2xsO2hlaWdodDoxMDBweDtwb3NpdGlvbjpyZWxhdGl2ZX0jZGctbG9jYWwtZXhwbGFpbntkaXNwbGF5Om5vbmU7Zm9udC1zaXplOjExcHg7bGluZS1oZWlnaHQ6MTdweDtib3JkZXItcmFkaXVzOjNweDtiYWNrZ3JvdW5kLWNvbG9yOiMzMzM7cGFkZGluZzo4cHg7bWFyZ2luLXRvcDoxMHB4fSNkZy1sb2NhbC1leHBsYWluIGNvZGV7Zm9udC1zaXplOjEwcHh9I2RhdC1ndWktc2F2ZS1sb2NhbGx5e2Rpc3BsYXk6bm9uZX0uZGd7Y29sb3I6I2VlZTtmb250OjExcHggJ0x1Y2lkYSBHcmFuZGUnLCBzYW5zLXNlcmlmO3RleHQtc2hhZG93OjAgLTFweCAwICMxMTF9LmRnLm1haW46Oi13ZWJraXQtc2Nyb2xsYmFye3dpZHRoOjVweDtiYWNrZ3JvdW5kOiMxYTFhMWF9LmRnLm1haW46Oi13ZWJraXQtc2Nyb2xsYmFyLWNvcm5lcntoZWlnaHQ6MDtkaXNwbGF5Om5vbmV9LmRnLm1haW46Oi13ZWJraXQtc2Nyb2xsYmFyLXRodW1ie2JvcmRlci1yYWRpdXM6NXB4O2JhY2tncm91bmQ6IzY3Njc2N30uZGcgbGk6bm90KC5mb2xkZXIpe2JhY2tncm91bmQ6IzFhMWExYTtib3JkZXItYm90dG9tOjFweCBzb2xpZCAjMmMyYzJjfS5kZyBsaS5zYXZlLXJvd3tsaW5lLWhlaWdodDoyNXB4O2JhY2tncm91bmQ6I2RhZDVjYjtib3JkZXI6MH0uZGcgbGkuc2F2ZS1yb3cgc2VsZWN0e21hcmdpbi1sZWZ0OjVweDt3aWR0aDoxMDhweH0uZGcgbGkuc2F2ZS1yb3cgLmJ1dHRvbnttYXJnaW4tbGVmdDo1cHg7bWFyZ2luLXRvcDoxcHg7Ym9yZGVyLXJhZGl1czoycHg7Zm9udC1zaXplOjlweDtsaW5lLWhlaWdodDo3cHg7cGFkZGluZzo0cHggNHB4IDVweCA0cHg7YmFja2dyb3VuZDojYzViZGFkO2NvbG9yOiNmZmY7dGV4dC1zaGFkb3c6MCAxcHggMCAjYjBhNThmO2JveC1zaGFkb3c6MCAtMXB4IDAgI2IwYTU4ZjtjdXJzb3I6cG9pbnRlcn0uZGcgbGkuc2F2ZS1yb3cgLmJ1dHRvbi5nZWFyc3tiYWNrZ3JvdW5kOiNjNWJkYWQgdXJsKGRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBQXNBQUFBTkNBWUFBQUIvOVpRN0FBQUFHWFJGV0hSVGIyWjBkMkZ5WlFCQlpHOWlaU0JKYldGblpWSmxZV1I1Y2NsbFBBQUFBUUpKUkVGVWVOcGlZS0FVL1AvL1B3R0lDL0FwQ0FCaUJTQVcrSThBQ2xBY2dLeFE0VDlob01BRVVyeHgyUVNHTjYrZWdEWCsvdldUNGU3TjgyQU1Zb1BBeC9ldndXb1lvU1liQUNYMnM3S3hDeHpjc2V6RGgzZXZGb0RFQllURUVxeWNnZ1dBekE5QXVVU1FRZ2VZUGE5ZlB2Ni9ZV20vQWN4NUlQYjd0eS9mdytRWmJsdzY3dkRzOFIwWUh5UWhnT2J4K3lBSmtCcW1HNWRQUERoMWFQT0dSL2V1Z1cwRzR2bElvVElmeUZjQStRZWtoaEhKaFBkUXhiaUFJZ3VNQlRRWnJQRDcxMDhNNnJvV1lERlFpSUFBdjZBb3cvMWJGd1hnaXMrZjJMVUF5bndvSWFOY3o4WE54M0RsN01FSlVER1FweDlndFE4WUN1ZUIrRDI2T0VDQUFRRGFkdDdlNDZENDJRQUFBQUJKUlU1RXJrSmdnZz09KSAycHggMXB4IG5vLXJlcGVhdDtoZWlnaHQ6N3B4O3dpZHRoOjhweH0uZGcgbGkuc2F2ZS1yb3cgLmJ1dHRvbjpob3ZlcntiYWNrZ3JvdW5kLWNvbG9yOiNiYWIxOWU7Ym94LXNoYWRvdzowIC0xcHggMCAjYjBhNThmfS5kZyBsaS5mb2xkZXJ7Ym9yZGVyLWJvdHRvbTowfS5kZyBsaS50aXRsZXtwYWRkaW5nLWxlZnQ6MTZweDtiYWNrZ3JvdW5kOiMwMDAgdXJsKGRhdGE6aW1hZ2UvZ2lmO2Jhc2U2NCxSMGxHT0RsaEJRQUZBSkVBQVAvLy8vUHo4Ly8vLy8vLy95SDVCQUVBQUFJQUxBQUFBQUFGQUFVQUFBSUlsSStoS2dGeG9DZ0FPdz09KSA2cHggMTBweCBuby1yZXBlYXQ7Y3Vyc29yOnBvaW50ZXI7Ym9yZGVyLWJvdHRvbToxcHggc29saWQgcmdiYSgyNTUsMjU1LDI1NSwwLjIpfS5kZyAuY2xvc2VkIGxpLnRpdGxle2JhY2tncm91bmQtaW1hZ2U6dXJsKGRhdGE6aW1hZ2UvZ2lmO2Jhc2U2NCxSMGxHT0RsaEJRQUZBSkVBQVAvLy8vUHo4Ly8vLy8vLy95SDVCQUVBQUFJQUxBQUFBQUFGQUFVQUFBSUlsR0lXcU1DYldBRUFPdz09KX0uZGcgLmNyLmJvb2xlYW57Ym9yZGVyLWxlZnQ6M3B4IHNvbGlkICM4MDY3ODd9LmRnIC5jci5jb2xvcntib3JkZXItbGVmdDozcHggc29saWR9LmRnIC5jci5mdW5jdGlvbntib3JkZXItbGVmdDozcHggc29saWQgI2U2MWQ1Zn0uZGcgLmNyLm51bWJlcntib3JkZXItbGVmdDozcHggc29saWQgIzJGQTFENn0uZGcgLmNyLm51bWJlciBpbnB1dFt0eXBlPXRleHRde2NvbG9yOiMyRkExRDZ9LmRnIC5jci5zdHJpbmd7Ym9yZGVyLWxlZnQ6M3B4IHNvbGlkICMxZWQzNmZ9LmRnIC5jci5zdHJpbmcgaW5wdXRbdHlwZT10ZXh0XXtjb2xvcjojMWVkMzZmfS5kZyAuY3IuZnVuY3Rpb246aG92ZXIsLmRnIC5jci5ib29sZWFuOmhvdmVye2JhY2tncm91bmQ6IzExMX0uZGcgLmMgaW5wdXRbdHlwZT10ZXh0XXtiYWNrZ3JvdW5kOiMzMDMwMzA7b3V0bGluZTpub25lfS5kZyAuYyBpbnB1dFt0eXBlPXRleHRdOmhvdmVye2JhY2tncm91bmQ6IzNjM2MzY30uZGcgLmMgaW5wdXRbdHlwZT10ZXh0XTpmb2N1c3tiYWNrZ3JvdW5kOiM0OTQ5NDk7Y29sb3I6I2ZmZn0uZGcgLmMgLnNsaWRlcntiYWNrZ3JvdW5kOiMzMDMwMzA7Y3Vyc29yOmV3LXJlc2l6ZX0uZGcgLmMgLnNsaWRlci1mZ3tiYWNrZ3JvdW5kOiMyRkExRDY7bWF4LXdpZHRoOjEwMCV9LmRnIC5jIC5zbGlkZXI6aG92ZXJ7YmFja2dyb3VuZDojM2MzYzNjfS5kZyAuYyAuc2xpZGVyOmhvdmVyIC5zbGlkZXItZmd7YmFja2dyb3VuZDojNDRhYmRhfVxuIik7Cgpjc3MuaW5qZWN0KHN0eWxlU2hlZXQpOwp2YXIgQ1NTX05BTUVTUEFDRSA9ICdkZyc7CnZhciBISURFX0tFWV9DT0RFID0gNzI7CnZhciBDTE9TRV9CVVRUT05fSEVJR0hUID0gMjA7CnZhciBERUZBVUxUX0RFRkFVTFRfUFJFU0VUX05BTUUgPSAnRGVmYXVsdCc7Cgp2YXIgU1VQUE9SVFNfTE9DQUxfU1RPUkFHRSA9IGZ1bmN0aW9uICgpIHsKICB0cnkgewogICAgcmV0dXJuICEhd2luZG93LmxvY2FsU3RvcmFnZTsKICB9IGNhdGNoIChlKSB7CiAgICByZXR1cm4gZmFsc2U7CiAgfQp9KCk7Cgp2YXIgU0FWRV9ESUFMT0dVRSA9IHZvaWQgMDsKdmFyIGF1dG9QbGFjZVZpcmdpbiA9IHRydWU7CnZhciBhdXRvUGxhY2VDb250YWluZXIgPSB2b2lkIDA7CnZhciBoaWRlID0gZmFsc2U7CnZhciBoaWRlYWJsZUd1aXMgPSBbXTsKCnZhciBHVUkgPSBmdW5jdGlvbiBHVUkocGFycykgewogIHZhciBfdGhpcyA9IHRoaXM7CgogIHZhciBwYXJhbXMgPSBwYXJzIHx8IHt9OwogIHRoaXMuZG9tRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogIHRoaXMuX191bCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3VsJyk7CiAgdGhpcy5kb21FbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuX191bCk7CiAgZG9tLmFkZENsYXNzKHRoaXMuZG9tRWxlbWVudCwgQ1NTX05BTUVTUEFDRSk7CiAgdGhpcy5fX2ZvbGRlcnMgPSB7fTsKICB0aGlzLl9fY29udHJvbGxlcnMgPSBbXTsKICB0aGlzLl9fcmVtZW1iZXJlZE9iamVjdHMgPSBbXTsKICB0aGlzLl9fcmVtZW1iZXJlZE9iamVjdEluZGVjZXNUb0NvbnRyb2xsZXJzID0gW107CiAgdGhpcy5fX2xpc3RlbmluZyA9IFtdOwogIHBhcmFtcyA9IENvbW1vbi5kZWZhdWx0cyhwYXJhbXMsIHsKICAgIGNsb3NlT25Ub3A6IGZhbHNlLAogICAgYXV0b1BsYWNlOiB0cnVlLAogICAgd2lkdGg6IEdVSS5ERUZBVUxUX1dJRFRICiAgfSk7CiAgcGFyYW1zID0gQ29tbW9uLmRlZmF1bHRzKHBhcmFtcywgewogICAgcmVzaXphYmxlOiBwYXJhbXMuYXV0b1BsYWNlLAogICAgaGlkZWFibGU6IHBhcmFtcy5hdXRvUGxhY2UKICB9KTsKCiAgaWYgKCFDb21tb24uaXNVbmRlZmluZWQocGFyYW1zLmxvYWQpKSB7CiAgICBpZiAocGFyYW1zLnByZXNldCkgewogICAgICBwYXJhbXMubG9hZC5wcmVzZXQgPSBwYXJhbXMucHJlc2V0OwogICAgfQogIH0gZWxzZSB7CiAgICBwYXJhbXMubG9hZCA9IHsKICAgICAgcHJlc2V0OiBERUZBVUxUX0RFRkFVTFRfUFJFU0VUX05BTUUKICAgIH07CiAgfQoKICBpZiAoQ29tbW9uLmlzVW5kZWZpbmVkKHBhcmFtcy5wYXJlbnQpICYmIHBhcmFtcy5oaWRlYWJsZSkgewogICAgaGlkZWFibGVHdWlzLnB1c2godGhpcyk7CiAgfQoKICBwYXJhbXMucmVzaXphYmxlID0gQ29tbW9uLmlzVW5kZWZpbmVkKHBhcmFtcy5wYXJlbnQpICYmIHBhcmFtcy5yZXNpemFibGU7CgogIGlmIChwYXJhbXMuYXV0b1BsYWNlICYmIENvbW1vbi5pc1VuZGVmaW5lZChwYXJhbXMuc2Nyb2xsYWJsZSkpIHsKICAgIHBhcmFtcy5zY3JvbGxhYmxlID0gdHJ1ZTsKICB9CgogIHZhciB1c2VMb2NhbFN0b3JhZ2UgPSBTVVBQT1JUU19MT0NBTF9TVE9SQUdFICYmIGxvY2FsU3RvcmFnZS5nZXRJdGVtKGdldExvY2FsU3RvcmFnZUhhc2godGhpcywgJ2lzTG9jYWwnKSkgPT09ICd0cnVlJzsKICB2YXIgc2F2ZVRvTG9jYWxTdG9yYWdlID0gdm9pZCAwOwogIHZhciB0aXRsZVJvdyA9IHZvaWQgMDsKICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0aGlzLCB7CiAgICBwYXJlbnQ6IHsKICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQkJDEoKSB7CiAgICAgICAgcmV0dXJuIHBhcmFtcy5wYXJlbnQ7CiAgICAgIH0KICAgIH0sCiAgICBzY3JvbGxhYmxlOiB7CiAgICAgIGdldDogZnVuY3Rpb24gZ2V0JCQxKCkgewogICAgICAgIHJldHVybiBwYXJhbXMuc2Nyb2xsYWJsZTsKICAgICAgfQogICAgfSwKICAgIGF1dG9QbGFjZTogewogICAgICBnZXQ6IGZ1bmN0aW9uIGdldCQkMSgpIHsKICAgICAgICByZXR1cm4gcGFyYW1zLmF1dG9QbGFjZTsKICAgICAgfQogICAgfSwKICAgIGNsb3NlT25Ub3A6IHsKICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQkJDEoKSB7CiAgICAgICAgcmV0dXJuIHBhcmFtcy5jbG9zZU9uVG9wOwogICAgICB9CiAgICB9LAogICAgcHJlc2V0OiB7CiAgICAgIGdldDogZnVuY3Rpb24gZ2V0JCQxKCkgewogICAgICAgIGlmIChfdGhpcy5wYXJlbnQpIHsKICAgICAgICAgIHJldHVybiBfdGhpcy5nZXRSb290KCkucHJlc2V0OwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHBhcmFtcy5sb2FkLnByZXNldDsKICAgICAgfSwKICAgICAgc2V0OiBmdW5jdGlvbiBzZXQkJDEodikgewogICAgICAgIGlmIChfdGhpcy5wYXJlbnQpIHsKICAgICAgICAgIF90aGlzLmdldFJvb3QoKS5wcmVzZXQgPSB2OwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBwYXJhbXMubG9hZC5wcmVzZXQgPSB2OwogICAgICAgIH0KCiAgICAgICAgc2V0UHJlc2V0U2VsZWN0SW5kZXgodGhpcyk7CgogICAgICAgIF90aGlzLnJldmVydCgpOwogICAgICB9CiAgICB9LAogICAgd2lkdGg6IHsKICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQkJDEoKSB7CiAgICAgICAgcmV0dXJuIHBhcmFtcy53aWR0aDsKICAgICAgfSwKICAgICAgc2V0OiBmdW5jdGlvbiBzZXQkJDEodikgewogICAgICAgIHBhcmFtcy53aWR0aCA9IHY7CiAgICAgICAgc2V0V2lkdGgoX3RoaXMsIHYpOwogICAgICB9CiAgICB9LAogICAgbmFtZTogewogICAgICBnZXQ6IGZ1bmN0aW9uIGdldCQkMSgpIHsKICAgICAgICByZXR1cm4gcGFyYW1zLm5hbWU7CiAgICAgIH0sCiAgICAgIHNldDogZnVuY3Rpb24gc2V0JCQxKHYpIHsKICAgICAgICBwYXJhbXMubmFtZSA9IHY7CgogICAgICAgIGlmICh0aXRsZVJvdykgewogICAgICAgICAgdGl0bGVSb3cuaW5uZXJIVE1MID0gcGFyYW1zLm5hbWU7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgY2xvc2VkOiB7CiAgICAgIGdldDogZnVuY3Rpb24gZ2V0JCQxKCkgewogICAgICAgIHJldHVybiBwYXJhbXMuY2xvc2VkOwogICAgICB9LAogICAgICBzZXQ6IGZ1bmN0aW9uIHNldCQkMSh2KSB7CiAgICAgICAgcGFyYW1zLmNsb3NlZCA9IHY7CgogICAgICAgIGlmIChwYXJhbXMuY2xvc2VkKSB7CiAgICAgICAgICBkb20uYWRkQ2xhc3MoX3RoaXMuX191bCwgR1VJLkNMQVNTX0NMT1NFRCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGRvbS5yZW1vdmVDbGFzcyhfdGhpcy5fX3VsLCBHVUkuQ0xBU1NfQ0xPU0VEKTsKICAgICAgICB9CgogICAgICAgIHRoaXMub25SZXNpemUoKTsKCiAgICAgICAgaWYgKF90aGlzLl9fY2xvc2VCdXR0b24pIHsKICAgICAgICAgIF90aGlzLl9fY2xvc2VCdXR0b24uaW5uZXJIVE1MID0gdiA/IEdVSS5URVhUX09QRU4gOiBHVUkuVEVYVF9DTE9TRUQ7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgbG9hZDogewogICAgICBnZXQ6IGZ1bmN0aW9uIGdldCQkMSgpIHsKICAgICAgICByZXR1cm4gcGFyYW1zLmxvYWQ7CiAgICAgIH0KICAgIH0sCiAgICB1c2VMb2NhbFN0b3JhZ2U6IHsKICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQkJDEoKSB7CiAgICAgICAgcmV0dXJuIHVzZUxvY2FsU3RvcmFnZTsKICAgICAgfSwKICAgICAgc2V0OiBmdW5jdGlvbiBzZXQkJDEoYm9vbCkgewogICAgICAgIGlmIChTVVBQT1JUU19MT0NBTF9TVE9SQUdFKSB7CiAgICAgICAgICB1c2VMb2NhbFN0b3JhZ2UgPSBib29sOwoKICAgICAgICAgIGlmIChib29sKSB7CiAgICAgICAgICAgIGRvbS5iaW5kKHdpbmRvdywgJ3VubG9hZCcsIHNhdmVUb0xvY2FsU3RvcmFnZSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBkb20udW5iaW5kKHdpbmRvdywgJ3VubG9hZCcsIHNhdmVUb0xvY2FsU3RvcmFnZSk7CiAgICAgICAgICB9CgogICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oZ2V0TG9jYWxTdG9yYWdlSGFzaChfdGhpcywgJ2lzTG9jYWwnKSwgYm9vbCk7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfSk7CgogIGlmIChDb21tb24uaXNVbmRlZmluZWQocGFyYW1zLnBhcmVudCkpIHsKICAgIHRoaXMuY2xvc2VkID0gcGFyYW1zLmNsb3NlZCB8fCBmYWxzZTsKICAgIGRvbS5hZGRDbGFzcyh0aGlzLmRvbUVsZW1lbnQsIEdVSS5DTEFTU19NQUlOKTsKICAgIGRvbS5tYWtlU2VsZWN0YWJsZSh0aGlzLmRvbUVsZW1lbnQsIGZhbHNlKTsKCiAgICBpZiAoU1VQUE9SVFNfTE9DQUxfU1RPUkFHRSkgewogICAgICBpZiAodXNlTG9jYWxTdG9yYWdlKSB7CiAgICAgICAgX3RoaXMudXNlTG9jYWxTdG9yYWdlID0gdHJ1ZTsKICAgICAgICB2YXIgc2F2ZWRHdWkgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShnZXRMb2NhbFN0b3JhZ2VIYXNoKHRoaXMsICdndWknKSk7CgogICAgICAgIGlmIChzYXZlZEd1aSkgewogICAgICAgICAgcGFyYW1zLmxvYWQgPSBKU09OLnBhcnNlKHNhdmVkR3VpKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICB0aGlzLl9fY2xvc2VCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgIHRoaXMuX19jbG9zZUJ1dHRvbi5pbm5lckhUTUwgPSBHVUkuVEVYVF9DTE9TRUQ7CiAgICBkb20uYWRkQ2xhc3ModGhpcy5fX2Nsb3NlQnV0dG9uLCBHVUkuQ0xBU1NfQ0xPU0VfQlVUVE9OKTsKCiAgICBpZiAocGFyYW1zLmNsb3NlT25Ub3ApIHsKICAgICAgZG9tLmFkZENsYXNzKHRoaXMuX19jbG9zZUJ1dHRvbiwgR1VJLkNMQVNTX0NMT1NFX1RPUCk7CiAgICAgIHRoaXMuZG9tRWxlbWVudC5pbnNlcnRCZWZvcmUodGhpcy5fX2Nsb3NlQnV0dG9uLCB0aGlzLmRvbUVsZW1lbnQuY2hpbGROb2Rlc1swXSk7CiAgICB9IGVsc2UgewogICAgICBkb20uYWRkQ2xhc3ModGhpcy5fX2Nsb3NlQnV0dG9uLCBHVUkuQ0xBU1NfQ0xPU0VfQk9UVE9NKTsKICAgICAgdGhpcy5kb21FbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuX19jbG9zZUJ1dHRvbik7CiAgICB9CgogICAgZG9tLmJpbmQodGhpcy5fX2Nsb3NlQnV0dG9uLCAnY2xpY2snLCBmdW5jdGlvbiAoKSB7CiAgICAgIF90aGlzLmNsb3NlZCA9ICFfdGhpcy5jbG9zZWQ7CiAgICB9KTsKICB9IGVsc2UgewogICAgaWYgKHBhcmFtcy5jbG9zZWQgPT09IHVuZGVmaW5lZCkgewogICAgICBwYXJhbXMuY2xvc2VkID0gdHJ1ZTsKICAgIH0KCiAgICB2YXIgdGl0bGVSb3dOYW1lID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUocGFyYW1zLm5hbWUpOwogICAgZG9tLmFkZENsYXNzKHRpdGxlUm93TmFtZSwgJ2NvbnRyb2xsZXItbmFtZScpOwogICAgdGl0bGVSb3cgPSBhZGRSb3coX3RoaXMsIHRpdGxlUm93TmFtZSk7CgogICAgdmFyIG9uQ2xpY2tUaXRsZSA9IGZ1bmN0aW9uIG9uQ2xpY2tUaXRsZShlKSB7CiAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgX3RoaXMuY2xvc2VkID0gIV90aGlzLmNsb3NlZDsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfTsKCiAgICBkb20uYWRkQ2xhc3ModGhpcy5fX3VsLCBHVUkuQ0xBU1NfQ0xPU0VEKTsKICAgIGRvbS5hZGRDbGFzcyh0aXRsZVJvdywgJ3RpdGxlJyk7CiAgICBkb20uYmluZCh0aXRsZVJvdywgJ2NsaWNrJywgb25DbGlja1RpdGxlKTsKCiAgICBpZiAoIXBhcmFtcy5jbG9zZWQpIHsKICAgICAgdGhpcy5jbG9zZWQgPSBmYWxzZTsKICAgIH0KICB9CgogIGlmIChwYXJhbXMuYXV0b1BsYWNlKSB7CiAgICBpZiAoQ29tbW9uLmlzVW5kZWZpbmVkKHBhcmFtcy5wYXJlbnQpKSB7CiAgICAgIGlmIChhdXRvUGxhY2VWaXJnaW4pIHsKICAgICAgICBhdXRvUGxhY2VDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICBkb20uYWRkQ2xhc3MoYXV0b1BsYWNlQ29udGFpbmVyLCBDU1NfTkFNRVNQQUNFKTsKICAgICAgICBkb20uYWRkQ2xhc3MoYXV0b1BsYWNlQ29udGFpbmVyLCBHVUkuQ0xBU1NfQVVUT19QTEFDRV9DT05UQUlORVIpOwogICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoYXV0b1BsYWNlQ29udGFpbmVyKTsKICAgICAgICBhdXRvUGxhY2VWaXJnaW4gPSBmYWxzZTsKICAgICAgfQoKICAgICAgYXV0b1BsYWNlQ29udGFpbmVyLmFwcGVuZENoaWxkKHRoaXMuZG9tRWxlbWVudCk7CiAgICAgIGRvbS5hZGRDbGFzcyh0aGlzLmRvbUVsZW1lbnQsIEdVSS5DTEFTU19BVVRPX1BMQUNFKTsKICAgIH0KCiAgICBpZiAoIXRoaXMucGFyZW50KSB7CiAgICAgIHNldFdpZHRoKF90aGlzLCBwYXJhbXMud2lkdGgpOwogICAgfQogIH0KCiAgdGhpcy5fX3Jlc2l6ZUhhbmRsZXIgPSBmdW5jdGlvbiAoKSB7CiAgICBfdGhpcy5vblJlc2l6ZURlYm91bmNlZCgpOwogIH07CgogIGRvbS5iaW5kKHdpbmRvdywgJ3Jlc2l6ZScsIHRoaXMuX19yZXNpemVIYW5kbGVyKTsKICBkb20uYmluZCh0aGlzLl9fdWwsICd3ZWJraXRUcmFuc2l0aW9uRW5kJywgdGhpcy5fX3Jlc2l6ZUhhbmRsZXIpOwogIGRvbS5iaW5kKHRoaXMuX191bCwgJ3RyYW5zaXRpb25lbmQnLCB0aGlzLl9fcmVzaXplSGFuZGxlcik7CiAgZG9tLmJpbmQodGhpcy5fX3VsLCAnb1RyYW5zaXRpb25FbmQnLCB0aGlzLl9fcmVzaXplSGFuZGxlcik7CiAgdGhpcy5vblJlc2l6ZSgpOwoKICBpZiAocGFyYW1zLnJlc2l6YWJsZSkgewogICAgYWRkUmVzaXplSGFuZGxlKHRoaXMpOwogIH0KCiAgc2F2ZVRvTG9jYWxTdG9yYWdlID0gZnVuY3Rpb24gc2F2ZVRvTG9jYWxTdG9yYWdlKCkgewogICAgaWYgKFNVUFBPUlRTX0xPQ0FMX1NUT1JBR0UgJiYgbG9jYWxTdG9yYWdlLmdldEl0ZW0oZ2V0TG9jYWxTdG9yYWdlSGFzaChfdGhpcywgJ2lzTG9jYWwnKSkgPT09ICd0cnVlJykgewogICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShnZXRMb2NhbFN0b3JhZ2VIYXNoKF90aGlzLCAnZ3VpJyksIEpTT04uc3RyaW5naWZ5KF90aGlzLmdldFNhdmVPYmplY3QoKSkpOwogICAgfQogIH07CgogIHRoaXMuc2F2ZVRvTG9jYWxTdG9yYWdlSWZQb3NzaWJsZSA9IHNhdmVUb0xvY2FsU3RvcmFnZTsKCiAgZnVuY3Rpb24gcmVzZXRXaWR0aCgpIHsKICAgIHZhciByb290ID0gX3RoaXMuZ2V0Um9vdCgpOwoKICAgIHJvb3Qud2lkdGggKz0gMTsKICAgIENvbW1vbi5kZWZlcihmdW5jdGlvbiAoKSB7CiAgICAgIHJvb3Qud2lkdGggLT0gMTsKICAgIH0pOwogIH0KCiAgaWYgKCFwYXJhbXMucGFyZW50KSB7CiAgICByZXNldFdpZHRoKCk7CiAgfQp9OwoKR1VJLnRvZ2dsZUhpZGUgPSBmdW5jdGlvbiAoKSB7CiAgaGlkZSA9ICFoaWRlOwogIENvbW1vbi5lYWNoKGhpZGVhYmxlR3VpcywgZnVuY3Rpb24gKGd1aSkgewogICAgZ3VpLmRvbUVsZW1lbnQuc3R5bGUuZGlzcGxheSA9IGhpZGUgPyAnbm9uZScgOiAnJzsKICB9KTsKfTsKCkdVSS5DTEFTU19BVVRPX1BMQUNFID0gJ2EnOwpHVUkuQ0xBU1NfQVVUT19QTEFDRV9DT05UQUlORVIgPSAnYWMnOwpHVUkuQ0xBU1NfTUFJTiA9ICdtYWluJzsKR1VJLkNMQVNTX0NPTlRST0xMRVJfUk9XID0gJ2NyJzsKR1VJLkNMQVNTX1RPT19UQUxMID0gJ3RhbGxlci10aGFuLXdpbmRvdyc7CkdVSS5DTEFTU19DTE9TRUQgPSAnY2xvc2VkJzsKR1VJLkNMQVNTX0NMT1NFX0JVVFRPTiA9ICdjbG9zZS1idXR0b24nOwpHVUkuQ0xBU1NfQ0xPU0VfVE9QID0gJ2Nsb3NlLXRvcCc7CkdVSS5DTEFTU19DTE9TRV9CT1RUT00gPSAnY2xvc2UtYm90dG9tJzsKR1VJLkNMQVNTX0RSQUcgPSAnZHJhZyc7CkdVSS5ERUZBVUxUX1dJRFRIID0gMjQ1OwpHVUkuVEVYVF9DTE9TRUQgPSAnQ2xvc2UgQ29udHJvbHMnOwpHVUkuVEVYVF9PUEVOID0gJ09wZW4gQ29udHJvbHMnOwoKR1VJLl9rZXlkb3duSGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7CiAgaWYgKGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQudHlwZSAhPT0gJ3RleHQnICYmIChlLndoaWNoID09PSBISURFX0tFWV9DT0RFIHx8IGUua2V5Q29kZSA9PT0gSElERV9LRVlfQ09ERSkpIHsKICAgIEdVSS50b2dnbGVIaWRlKCk7CiAgfQp9OwoKZG9tLmJpbmQod2luZG93LCAna2V5ZG93bicsIEdVSS5fa2V5ZG93bkhhbmRsZXIsIGZhbHNlKTsKQ29tbW9uLmV4dGVuZChHVUkucHJvdG90eXBlLCB7CiAgYWRkOiBmdW5jdGlvbiBhZGQob2JqZWN0LCBwcm9wZXJ0eSkgewogICAgcmV0dXJuIF9hZGQodGhpcywgb2JqZWN0LCBwcm9wZXJ0eSwgewogICAgICBmYWN0b3J5QXJnczogQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAyKQogICAgfSk7CiAgfSwKICBhZGRDb2xvcjogZnVuY3Rpb24gYWRkQ29sb3Iob2JqZWN0LCBwcm9wZXJ0eSkgewogICAgcmV0dXJuIF9hZGQodGhpcywgb2JqZWN0LCBwcm9wZXJ0eSwgewogICAgICBjb2xvcjogdHJ1ZQogICAgfSk7CiAgfSwKICByZW1vdmU6IGZ1bmN0aW9uIHJlbW92ZShjb250cm9sbGVyKSB7CiAgICB0aGlzLl9fdWwucmVtb3ZlQ2hpbGQoY29udHJvbGxlci5fX2xpKTsKCiAgICB0aGlzLl9fY29udHJvbGxlcnMuc3BsaWNlKHRoaXMuX19jb250cm9sbGVycy5pbmRleE9mKGNvbnRyb2xsZXIpLCAxKTsKCiAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgIENvbW1vbi5kZWZlcihmdW5jdGlvbiAoKSB7CiAgICAgIF90aGlzLm9uUmVzaXplKCk7CiAgICB9KTsKICB9LAogIGRlc3Ryb3k6IGZ1bmN0aW9uIGRlc3Ryb3koKSB7CiAgICBpZiAodGhpcy5wYXJlbnQpIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKCdPbmx5IHRoZSByb290IEdVSSBzaG91bGQgYmUgcmVtb3ZlZCB3aXRoIC5kZXN0cm95KCkuICcgKyAnRm9yIHN1YmZvbGRlcnMsIHVzZSBndWkucmVtb3ZlRm9sZGVyKGZvbGRlcikgaW5zdGVhZC4nKTsKICAgIH0KCiAgICBpZiAodGhpcy5hdXRvUGxhY2UpIHsKICAgICAgYXV0b1BsYWNlQ29udGFpbmVyLnJlbW92ZUNoaWxkKHRoaXMuZG9tRWxlbWVudCk7CiAgICB9CgogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICBDb21tb24uZWFjaCh0aGlzLl9fZm9sZGVycywgZnVuY3Rpb24gKHN1YmZvbGRlcikgewogICAgICBfdGhpcy5yZW1vdmVGb2xkZXIoc3ViZm9sZGVyKTsKICAgIH0pOwogICAgZG9tLnVuYmluZCh3aW5kb3csICdrZXlkb3duJywgR1VJLl9rZXlkb3duSGFuZGxlciwgZmFsc2UpOwogICAgcmVtb3ZlTGlzdGVuZXJzKHRoaXMpOwogIH0sCiAgYWRkRm9sZGVyOiBmdW5jdGlvbiBhZGRGb2xkZXIobmFtZSkgewogICAgaWYgKHRoaXMuX19mb2xkZXJzW25hbWVdICE9PSB1bmRlZmluZWQpIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKCdZb3UgYWxyZWFkeSBoYXZlIGEgZm9sZGVyIGluIHRoaXMgR1VJIGJ5IHRoZScgKyAnIG5hbWUgIicgKyBuYW1lICsgJyInKTsKICAgIH0KCiAgICB2YXIgbmV3R3VpUGFyYW1zID0gewogICAgICBuYW1lOiBuYW1lLAogICAgICBwYXJlbnQ6IHRoaXMKICAgIH07CiAgICBuZXdHdWlQYXJhbXMuYXV0b1BsYWNlID0gdGhpcy5hdXRvUGxhY2U7CgogICAgaWYgKHRoaXMubG9hZCAmJiB0aGlzLmxvYWQuZm9sZGVycyAmJiB0aGlzLmxvYWQuZm9sZGVyc1tuYW1lXSkgewogICAgICBuZXdHdWlQYXJhbXMuY2xvc2VkID0gdGhpcy5sb2FkLmZvbGRlcnNbbmFtZV0uY2xvc2VkOwogICAgICBuZXdHdWlQYXJhbXMubG9hZCA9IHRoaXMubG9hZC5mb2xkZXJzW25hbWVdOwogICAgfQoKICAgIHZhciBndWkgPSBuZXcgR1VJKG5ld0d1aVBhcmFtcyk7CiAgICB0aGlzLl9fZm9sZGVyc1tuYW1lXSA9IGd1aTsKICAgIHZhciBsaSA9IGFkZFJvdyh0aGlzLCBndWkuZG9tRWxlbWVudCk7CiAgICBkb20uYWRkQ2xhc3MobGksICdmb2xkZXInKTsKICAgIHJldHVybiBndWk7CiAgfSwKICByZW1vdmVGb2xkZXI6IGZ1bmN0aW9uIHJlbW92ZUZvbGRlcihmb2xkZXIpIHsKICAgIHRoaXMuX191bC5yZW1vdmVDaGlsZChmb2xkZXIuZG9tRWxlbWVudC5wYXJlbnRFbGVtZW50KTsKCiAgICBkZWxldGUgdGhpcy5fX2ZvbGRlcnNbZm9sZGVyLm5hbWVdOwoKICAgIGlmICh0aGlzLmxvYWQgJiYgdGhpcy5sb2FkLmZvbGRlcnMgJiYgdGhpcy5sb2FkLmZvbGRlcnNbZm9sZGVyLm5hbWVdKSB7CiAgICAgIGRlbGV0ZSB0aGlzLmxvYWQuZm9sZGVyc1tmb2xkZXIubmFtZV07CiAgICB9CgogICAgcmVtb3ZlTGlzdGVuZXJzKGZvbGRlcik7CgogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICBDb21tb24uZWFjaChmb2xkZXIuX19mb2xkZXJzLCBmdW5jdGlvbiAoc3ViZm9sZGVyKSB7CiAgICAgIGZvbGRlci5yZW1vdmVGb2xkZXIoc3ViZm9sZGVyKTsKICAgIH0pOwogICAgQ29tbW9uLmRlZmVyKGZ1bmN0aW9uICgpIHsKICAgICAgX3RoaXMub25SZXNpemUoKTsKICAgIH0pOwogIH0sCiAgb3BlbjogZnVuY3Rpb24gb3BlbigpIHsKICAgIHRoaXMuY2xvc2VkID0gZmFsc2U7CiAgfSwKICBjbG9zZTogZnVuY3Rpb24gY2xvc2UoKSB7CiAgICB0aGlzLmNsb3NlZCA9IHRydWU7CiAgfSwKICBoaWRlOiBmdW5jdGlvbiBoaWRlKCkgewogICAgdGhpcy5kb21FbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgfSwKICBzaG93OiBmdW5jdGlvbiBzaG93KCkgewogICAgdGhpcy5kb21FbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnJzsKICB9LAogIG9uUmVzaXplOiBmdW5jdGlvbiBvblJlc2l6ZSgpIHsKICAgIHZhciByb290ID0gdGhpcy5nZXRSb290KCk7CgogICAgaWYgKHJvb3Quc2Nyb2xsYWJsZSkgewogICAgICB2YXIgdG9wID0gZG9tLmdldE9mZnNldChyb290Ll9fdWwpLnRvcDsKICAgICAgdmFyIGggPSAwOwogICAgICBDb21tb24uZWFjaChyb290Ll9fdWwuY2hpbGROb2RlcywgZnVuY3Rpb24gKG5vZGUpIHsKICAgICAgICBpZiAoIShyb290LmF1dG9QbGFjZSAmJiBub2RlID09PSByb290Ll9fc2F2ZV9yb3cpKSB7CiAgICAgICAgICBoICs9IGRvbS5nZXRIZWlnaHQobm9kZSk7CiAgICAgICAgfQogICAgICB9KTsKCiAgICAgIGlmICh3aW5kb3cuaW5uZXJIZWlnaHQgLSB0b3AgLSBDTE9TRV9CVVRUT05fSEVJR0hUIDwgaCkgewogICAgICAgIGRvbS5hZGRDbGFzcyhyb290LmRvbUVsZW1lbnQsIEdVSS5DTEFTU19UT09fVEFMTCk7CiAgICAgICAgcm9vdC5fX3VsLnN0eWxlLmhlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodCAtIHRvcCAtIENMT1NFX0JVVFRPTl9IRUlHSFQgKyAncHgnOwogICAgICB9IGVsc2UgewogICAgICAgIGRvbS5yZW1vdmVDbGFzcyhyb290LmRvbUVsZW1lbnQsIEdVSS5DTEFTU19UT09fVEFMTCk7CiAgICAgICAgcm9vdC5fX3VsLnN0eWxlLmhlaWdodCA9ICdhdXRvJzsKICAgICAgfQogICAgfQoKICAgIGlmIChyb290Ll9fcmVzaXplX2hhbmRsZSkgewogICAgICBDb21tb24uZGVmZXIoZnVuY3Rpb24gKCkgewogICAgICAgIHJvb3QuX19yZXNpemVfaGFuZGxlLnN0eWxlLmhlaWdodCA9IHJvb3QuX191bC5vZmZzZXRIZWlnaHQgKyAncHgnOwogICAgICB9KTsKICAgIH0KCiAgICBpZiAocm9vdC5fX2Nsb3NlQnV0dG9uKSB7CiAgICAgIHJvb3QuX19jbG9zZUJ1dHRvbi5zdHlsZS53aWR0aCA9IHJvb3Qud2lkdGggKyAncHgnOwogICAgfQogIH0sCiAgb25SZXNpemVEZWJvdW5jZWQ6IENvbW1vbi5kZWJvdW5jZShmdW5jdGlvbiAoKSB7CiAgICB0aGlzLm9uUmVzaXplKCk7CiAgfSwgNTApLAogIHJlbWVtYmVyOiBmdW5jdGlvbiByZW1lbWJlcigpIHsKICAgIGlmIChDb21tb24uaXNVbmRlZmluZWQoU0FWRV9ESUFMT0dVRSkpIHsKICAgICAgU0FWRV9ESUFMT0dVRSA9IG5ldyBDZW50ZXJlZERpdigpOwogICAgICBTQVZFX0RJQUxPR1VFLmRvbUVsZW1lbnQuaW5uZXJIVE1MID0gc2F2ZURpYWxvZ0NvbnRlbnRzOwogICAgfQoKICAgIGlmICh0aGlzLnBhcmVudCkgewogICAgICB0aHJvdyBuZXcgRXJyb3IoJ1lvdSBjYW4gb25seSBjYWxsIHJlbWVtYmVyIG9uIGEgdG9wIGxldmVsIEdVSS4nKTsKICAgIH0KCiAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgIENvbW1vbi5lYWNoKEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cyksIGZ1bmN0aW9uIChvYmplY3QpIHsKICAgICAgaWYgKF90aGlzLl9fcmVtZW1iZXJlZE9iamVjdHMubGVuZ3RoID09PSAwKSB7CiAgICAgICAgYWRkU2F2ZU1lbnUoX3RoaXMpOwogICAgICB9CgogICAgICBpZiAoX3RoaXMuX19yZW1lbWJlcmVkT2JqZWN0cy5pbmRleE9mKG9iamVjdCkgPT09IC0xKSB7CiAgICAgICAgX3RoaXMuX19yZW1lbWJlcmVkT2JqZWN0cy5wdXNoKG9iamVjdCk7CiAgICAgIH0KICAgIH0pOwoKICAgIGlmICh0aGlzLmF1dG9QbGFjZSkgewogICAgICBzZXRXaWR0aCh0aGlzLCB0aGlzLndpZHRoKTsKICAgIH0KICB9LAogIGdldFJvb3Q6IGZ1bmN0aW9uIGdldFJvb3QoKSB7CiAgICB2YXIgZ3VpID0gdGhpczsKCiAgICB3aGlsZSAoZ3VpLnBhcmVudCkgewogICAgICBndWkgPSBndWkucGFyZW50OwogICAgfQoKICAgIHJldHVybiBndWk7CiAgfSwKICBnZXRTYXZlT2JqZWN0OiBmdW5jdGlvbiBnZXRTYXZlT2JqZWN0KCkgewogICAgdmFyIHRvUmV0dXJuID0gdGhpcy5sb2FkOwogICAgdG9SZXR1cm4uY2xvc2VkID0gdGhpcy5jbG9zZWQ7CgogICAgaWYgKHRoaXMuX19yZW1lbWJlcmVkT2JqZWN0cy5sZW5ndGggPiAwKSB7CiAgICAgIHRvUmV0dXJuLnByZXNldCA9IHRoaXMucHJlc2V0OwoKICAgICAgaWYgKCF0b1JldHVybi5yZW1lbWJlcmVkKSB7CiAgICAgICAgdG9SZXR1cm4ucmVtZW1iZXJlZCA9IHt9OwogICAgICB9CgogICAgICB0b1JldHVybi5yZW1lbWJlcmVkW3RoaXMucHJlc2V0XSA9IGdldEN1cnJlbnRQcmVzZXQodGhpcyk7CiAgICB9CgogICAgdG9SZXR1cm4uZm9sZGVycyA9IHt9OwogICAgQ29tbW9uLmVhY2godGhpcy5fX2ZvbGRlcnMsIGZ1bmN0aW9uIChlbGVtZW50LCBrZXkpIHsKICAgICAgdG9SZXR1cm4uZm9sZGVyc1trZXldID0gZWxlbWVudC5nZXRTYXZlT2JqZWN0KCk7CiAgICB9KTsKICAgIHJldHVybiB0b1JldHVybjsKICB9LAogIHNhdmU6IGZ1bmN0aW9uIHNhdmUoKSB7CiAgICBpZiAoIXRoaXMubG9hZC5yZW1lbWJlcmVkKSB7CiAgICAgIHRoaXMubG9hZC5yZW1lbWJlcmVkID0ge307CiAgICB9CgogICAgdGhpcy5sb2FkLnJlbWVtYmVyZWRbdGhpcy5wcmVzZXRdID0gZ2V0Q3VycmVudFByZXNldCh0aGlzKTsKICAgIG1hcmtQcmVzZXRNb2RpZmllZCh0aGlzLCBmYWxzZSk7CiAgICB0aGlzLnNhdmVUb0xvY2FsU3RvcmFnZUlmUG9zc2libGUoKTsKICB9LAogIHNhdmVBczogZnVuY3Rpb24gc2F2ZUFzKHByZXNldE5hbWUpIHsKICAgIGlmICghdGhpcy5sb2FkLnJlbWVtYmVyZWQpIHsKICAgICAgdGhpcy5sb2FkLnJlbWVtYmVyZWQgPSB7fTsKICAgICAgdGhpcy5sb2FkLnJlbWVtYmVyZWRbREVGQVVMVF9ERUZBVUxUX1BSRVNFVF9OQU1FXSA9IGdldEN1cnJlbnRQcmVzZXQodGhpcywgdHJ1ZSk7CiAgICB9CgogICAgdGhpcy5sb2FkLnJlbWVtYmVyZWRbcHJlc2V0TmFtZV0gPSBnZXRDdXJyZW50UHJlc2V0KHRoaXMpOwogICAgdGhpcy5wcmVzZXQgPSBwcmVzZXROYW1lOwogICAgYWRkUHJlc2V0T3B0aW9uKHRoaXMsIHByZXNldE5hbWUsIHRydWUpOwogICAgdGhpcy5zYXZlVG9Mb2NhbFN0b3JhZ2VJZlBvc3NpYmxlKCk7CiAgfSwKICByZXZlcnQ6IGZ1bmN0aW9uIHJldmVydChndWkpIHsKICAgIENvbW1vbi5lYWNoKHRoaXMuX19jb250cm9sbGVycywgZnVuY3Rpb24gKGNvbnRyb2xsZXIpIHsKICAgICAgaWYgKCF0aGlzLmdldFJvb3QoKS5sb2FkLnJlbWVtYmVyZWQpIHsKICAgICAgICBjb250cm9sbGVyLnNldFZhbHVlKGNvbnRyb2xsZXIuaW5pdGlhbFZhbHVlKTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZWNhbGxTYXZlZFZhbHVlKGd1aSB8fCB0aGlzLmdldFJvb3QoKSwgY29udHJvbGxlcik7CiAgICAgIH0KCiAgICAgIGlmIChjb250cm9sbGVyLl9fb25GaW5pc2hDaGFuZ2UpIHsKICAgICAgICBjb250cm9sbGVyLl9fb25GaW5pc2hDaGFuZ2UuY2FsbChjb250cm9sbGVyLCBjb250cm9sbGVyLmdldFZhbHVlKCkpOwogICAgICB9CiAgICB9LCB0aGlzKTsKICAgIENvbW1vbi5lYWNoKHRoaXMuX19mb2xkZXJzLCBmdW5jdGlvbiAoZm9sZGVyKSB7CiAgICAgIGZvbGRlci5yZXZlcnQoZm9sZGVyKTsKICAgIH0pOwoKICAgIGlmICghZ3VpKSB7CiAgICAgIG1hcmtQcmVzZXRNb2RpZmllZCh0aGlzLmdldFJvb3QoKSwgZmFsc2UpOwogICAgfQogIH0sCiAgbGlzdGVuOiBmdW5jdGlvbiBsaXN0ZW4oY29udHJvbGxlcikgewogICAgdmFyIGluaXQgPSB0aGlzLl9fbGlzdGVuaW5nLmxlbmd0aCA9PT0gMDsKCiAgICB0aGlzLl9fbGlzdGVuaW5nLnB1c2goY29udHJvbGxlcik7CgogICAgaWYgKGluaXQpIHsKICAgICAgdXBkYXRlRGlzcGxheXModGhpcy5fX2xpc3RlbmluZyk7CiAgICB9CiAgfSwKICB1cGRhdGVEaXNwbGF5OiBmdW5jdGlvbiB1cGRhdGVEaXNwbGF5KCkgewogICAgQ29tbW9uLmVhY2godGhpcy5fX2NvbnRyb2xsZXJzLCBmdW5jdGlvbiAoY29udHJvbGxlcikgewogICAgICBjb250cm9sbGVyLnVwZGF0ZURpc3BsYXkoKTsKICAgIH0pOwogICAgQ29tbW9uLmVhY2godGhpcy5fX2ZvbGRlcnMsIGZ1bmN0aW9uIChmb2xkZXIpIHsKICAgICAgZm9sZGVyLnVwZGF0ZURpc3BsYXkoKTsKICAgIH0pOwogIH0KfSk7CgpmdW5jdGlvbiBhZGRSb3coZ3VpLCBuZXdEb20sIGxpQmVmb3JlKSB7CiAgdmFyIGxpID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTsKCiAgaWYgKG5ld0RvbSkgewogICAgbGkuYXBwZW5kQ2hpbGQobmV3RG9tKTsKICB9CgogIGlmIChsaUJlZm9yZSkgewogICAgZ3VpLl9fdWwuaW5zZXJ0QmVmb3JlKGxpLCBsaUJlZm9yZSk7CiAgfSBlbHNlIHsKICAgIGd1aS5fX3VsLmFwcGVuZENoaWxkKGxpKTsKICB9CgogIGd1aS5vblJlc2l6ZSgpOwogIHJldHVybiBsaTsKfQoKZnVuY3Rpb24gcmVtb3ZlTGlzdGVuZXJzKGd1aSkgewogIGRvbS51bmJpbmQod2luZG93LCAncmVzaXplJywgZ3VpLl9fcmVzaXplSGFuZGxlcik7CgogIGlmIChndWkuc2F2ZVRvTG9jYWxTdG9yYWdlSWZQb3NzaWJsZSkgewogICAgZG9tLnVuYmluZCh3aW5kb3csICd1bmxvYWQnLCBndWkuc2F2ZVRvTG9jYWxTdG9yYWdlSWZQb3NzaWJsZSk7CiAgfQp9CgpmdW5jdGlvbiBtYXJrUHJlc2V0TW9kaWZpZWQoZ3VpLCBtb2RpZmllZCkgewogIHZhciBvcHQgPSBndWkuX19wcmVzZXRfc2VsZWN0W2d1aS5fX3ByZXNldF9zZWxlY3Quc2VsZWN0ZWRJbmRleF07CgogIGlmIChtb2RpZmllZCkgewogICAgb3B0LmlubmVySFRNTCA9IG9wdC52YWx1ZSArICcqJzsKICB9IGVsc2UgewogICAgb3B0LmlubmVySFRNTCA9IG9wdC52YWx1ZTsKICB9Cn0KCmZ1bmN0aW9uIGF1Z21lbnRDb250cm9sbGVyKGd1aSwgbGksIGNvbnRyb2xsZXIpIHsKICBjb250cm9sbGVyLl9fbGkgPSBsaTsKICBjb250cm9sbGVyLl9fZ3VpID0gZ3VpOwogIENvbW1vbi5leHRlbmQoY29udHJvbGxlciwgewogICAgb3B0aW9uczogZnVuY3Rpb24gb3B0aW9ucyhfb3B0aW9ucykgewogICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIHsKICAgICAgICB2YXIgbmV4dFNpYmxpbmcgPSBjb250cm9sbGVyLl9fbGkubmV4dEVsZW1lbnRTaWJsaW5nOwogICAgICAgIGNvbnRyb2xsZXIucmVtb3ZlKCk7CiAgICAgICAgcmV0dXJuIF9hZGQoZ3VpLCBjb250cm9sbGVyLm9iamVjdCwgY29udHJvbGxlci5wcm9wZXJ0eSwgewogICAgICAgICAgYmVmb3JlOiBuZXh0U2libGluZywKICAgICAgICAgIGZhY3RvcnlBcmdzOiBbQ29tbW9uLnRvQXJyYXkoYXJndW1lbnRzKV0KICAgICAgICB9KTsKICAgICAgfQoKICAgICAgaWYgKENvbW1vbi5pc0FycmF5KF9vcHRpb25zKSB8fCBDb21tb24uaXNPYmplY3QoX29wdGlvbnMpKSB7CiAgICAgICAgdmFyIF9uZXh0U2libGluZyA9IGNvbnRyb2xsZXIuX19saS5uZXh0RWxlbWVudFNpYmxpbmc7CiAgICAgICAgY29udHJvbGxlci5yZW1vdmUoKTsKICAgICAgICByZXR1cm4gX2FkZChndWksIGNvbnRyb2xsZXIub2JqZWN0LCBjb250cm9sbGVyLnByb3BlcnR5LCB7CiAgICAgICAgICBiZWZvcmU6IF9uZXh0U2libGluZywKICAgICAgICAgIGZhY3RvcnlBcmdzOiBbX29wdGlvbnNdCiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICBuYW1lOiBmdW5jdGlvbiBuYW1lKF9uYW1lKSB7CiAgICAgIGNvbnRyb2xsZXIuX19saS5maXJzdEVsZW1lbnRDaGlsZC5maXJzdEVsZW1lbnRDaGlsZC5pbm5lckhUTUwgPSBfbmFtZTsKICAgICAgcmV0dXJuIGNvbnRyb2xsZXI7CiAgICB9LAogICAgbGlzdGVuOiBmdW5jdGlvbiBsaXN0ZW4oKSB7CiAgICAgIGNvbnRyb2xsZXIuX19ndWkubGlzdGVuKGNvbnRyb2xsZXIpOwoKICAgICAgcmV0dXJuIGNvbnRyb2xsZXI7CiAgICB9LAogICAgcmVtb3ZlOiBmdW5jdGlvbiByZW1vdmUoKSB7CiAgICAgIGNvbnRyb2xsZXIuX19ndWkucmVtb3ZlKGNvbnRyb2xsZXIpOwoKICAgICAgcmV0dXJuIGNvbnRyb2xsZXI7CiAgICB9CiAgfSk7CgogIGlmIChjb250cm9sbGVyIGluc3RhbmNlb2YgTnVtYmVyQ29udHJvbGxlclNsaWRlcikgewogICAgdmFyIGJveCA9IG5ldyBOdW1iZXJDb250cm9sbGVyQm94KGNvbnRyb2xsZXIub2JqZWN0LCBjb250cm9sbGVyLnByb3BlcnR5LCB7CiAgICAgIG1pbjogY29udHJvbGxlci5fX21pbiwKICAgICAgbWF4OiBjb250cm9sbGVyLl9fbWF4LAogICAgICBzdGVwOiBjb250cm9sbGVyLl9fc3RlcAogICAgfSk7CiAgICBDb21tb24uZWFjaChbJ3VwZGF0ZURpc3BsYXknLCAnb25DaGFuZ2UnLCAnb25GaW5pc2hDaGFuZ2UnLCAnc3RlcCcsICdtaW4nLCAnbWF4J10sIGZ1bmN0aW9uIChtZXRob2QpIHsKICAgICAgdmFyIHBjID0gY29udHJvbGxlclttZXRob2RdOwogICAgICB2YXIgcGIgPSBib3hbbWV0aG9kXTsKCiAgICAgIGNvbnRyb2xsZXJbbWV0aG9kXSA9IGJveFttZXRob2RdID0gZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBhcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKTsKICAgICAgICBwYi5hcHBseShib3gsIGFyZ3MpOwogICAgICAgIHJldHVybiBwYy5hcHBseShjb250cm9sbGVyLCBhcmdzKTsKICAgICAgfTsKICAgIH0pOwogICAgZG9tLmFkZENsYXNzKGxpLCAnaGFzLXNsaWRlcicpOwogICAgY29udHJvbGxlci5kb21FbGVtZW50Lmluc2VydEJlZm9yZShib3guZG9tRWxlbWVudCwgY29udHJvbGxlci5kb21FbGVtZW50LmZpcnN0RWxlbWVudENoaWxkKTsKICB9IGVsc2UgaWYgKGNvbnRyb2xsZXIgaW5zdGFuY2VvZiBOdW1iZXJDb250cm9sbGVyQm94KSB7CiAgICB2YXIgciA9IGZ1bmN0aW9uIHIocmV0dXJuZWQpIHsKICAgICAgaWYgKENvbW1vbi5pc051bWJlcihjb250cm9sbGVyLl9fbWluKSAmJiBDb21tb24uaXNOdW1iZXIoY29udHJvbGxlci5fX21heCkpIHsKICAgICAgICB2YXIgb2xkTmFtZSA9IGNvbnRyb2xsZXIuX19saS5maXJzdEVsZW1lbnRDaGlsZC5maXJzdEVsZW1lbnRDaGlsZC5pbm5lckhUTUw7CiAgICAgICAgdmFyIHdhc0xpc3RlbmluZyA9IGNvbnRyb2xsZXIuX19ndWkuX19saXN0ZW5pbmcuaW5kZXhPZihjb250cm9sbGVyKSA+IC0xOwogICAgICAgIGNvbnRyb2xsZXIucmVtb3ZlKCk7CgogICAgICAgIHZhciBuZXdDb250cm9sbGVyID0gX2FkZChndWksIGNvbnRyb2xsZXIub2JqZWN0LCBjb250cm9sbGVyLnByb3BlcnR5LCB7CiAgICAgICAgICBiZWZvcmU6IGNvbnRyb2xsZXIuX19saS5uZXh0RWxlbWVudFNpYmxpbmcsCiAgICAgICAgICBmYWN0b3J5QXJnczogW2NvbnRyb2xsZXIuX19taW4sIGNvbnRyb2xsZXIuX19tYXgsIGNvbnRyb2xsZXIuX19zdGVwXQogICAgICAgIH0pOwoKICAgICAgICBuZXdDb250cm9sbGVyLm5hbWUob2xkTmFtZSk7CiAgICAgICAgaWYgKHdhc0xpc3RlbmluZykgbmV3Q29udHJvbGxlci5saXN0ZW4oKTsKICAgICAgICByZXR1cm4gbmV3Q29udHJvbGxlcjsKICAgICAgfQoKICAgICAgcmV0dXJuIHJldHVybmVkOwogICAgfTsKCiAgICBjb250cm9sbGVyLm1pbiA9IENvbW1vbi5jb21wb3NlKHIsIGNvbnRyb2xsZXIubWluKTsKICAgIGNvbnRyb2xsZXIubWF4ID0gQ29tbW9uLmNvbXBvc2UociwgY29udHJvbGxlci5tYXgpOwogIH0gZWxzZSBpZiAoY29udHJvbGxlciBpbnN0YW5jZW9mIEJvb2xlYW5Db250cm9sbGVyKSB7CiAgICBkb20uYmluZChsaSwgJ2NsaWNrJywgZnVuY3Rpb24gKCkgewogICAgICBkb20uZmFrZUV2ZW50KGNvbnRyb2xsZXIuX19jaGVja2JveCwgJ2NsaWNrJyk7CiAgICB9KTsKICAgIGRvbS5iaW5kKGNvbnRyb2xsZXIuX19jaGVja2JveCwgJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHsKICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgIH0pOwogIH0gZWxzZSBpZiAoY29udHJvbGxlciBpbnN0YW5jZW9mIEZ1bmN0aW9uQ29udHJvbGxlcikgewogICAgZG9tLmJpbmQobGksICdjbGljaycsIGZ1bmN0aW9uICgpIHsKICAgICAgZG9tLmZha2VFdmVudChjb250cm9sbGVyLl9fYnV0dG9uLCAnY2xpY2snKTsKICAgIH0pOwogICAgZG9tLmJpbmQobGksICdtb3VzZW92ZXInLCBmdW5jdGlvbiAoKSB7CiAgICAgIGRvbS5hZGRDbGFzcyhjb250cm9sbGVyLl9fYnV0dG9uLCAnaG92ZXInKTsKICAgIH0pOwogICAgZG9tLmJpbmQobGksICdtb3VzZW91dCcsIGZ1bmN0aW9uICgpIHsKICAgICAgZG9tLnJlbW92ZUNsYXNzKGNvbnRyb2xsZXIuX19idXR0b24sICdob3ZlcicpOwogICAgfSk7CiAgfSBlbHNlIGlmIChjb250cm9sbGVyIGluc3RhbmNlb2YgQ29sb3JDb250cm9sbGVyKSB7CiAgICBkb20uYWRkQ2xhc3MobGksICdjb2xvcicpOwogICAgY29udHJvbGxlci51cGRhdGVEaXNwbGF5ID0gQ29tbW9uLmNvbXBvc2UoZnVuY3Rpb24gKHZhbCkgewogICAgICBsaS5zdHlsZS5ib3JkZXJMZWZ0Q29sb3IgPSBjb250cm9sbGVyLl9fY29sb3IudG9TdHJpbmcoKTsKICAgICAgcmV0dXJuIHZhbDsKICAgIH0sIGNvbnRyb2xsZXIudXBkYXRlRGlzcGxheSk7CiAgICBjb250cm9sbGVyLnVwZGF0ZURpc3BsYXkoKTsKICB9CgogIGNvbnRyb2xsZXIuc2V0VmFsdWUgPSBDb21tb24uY29tcG9zZShmdW5jdGlvbiAodmFsKSB7CiAgICBpZiAoZ3VpLmdldFJvb3QoKS5fX3ByZXNldF9zZWxlY3QgJiYgY29udHJvbGxlci5pc01vZGlmaWVkKCkpIHsKICAgICAgbWFya1ByZXNldE1vZGlmaWVkKGd1aS5nZXRSb290KCksIHRydWUpOwogICAgfQoKICAgIHJldHVybiB2YWw7CiAgfSwgY29udHJvbGxlci5zZXRWYWx1ZSk7Cn0KCmZ1bmN0aW9uIHJlY2FsbFNhdmVkVmFsdWUoZ3VpLCBjb250cm9sbGVyKSB7CiAgdmFyIHJvb3QgPSBndWkuZ2V0Um9vdCgpOwoKICB2YXIgbWF0Y2hlZEluZGV4ID0gcm9vdC5fX3JlbWVtYmVyZWRPYmplY3RzLmluZGV4T2YoY29udHJvbGxlci5vYmplY3QpOwoKICBpZiAobWF0Y2hlZEluZGV4ICE9PSAtMSkgewogICAgdmFyIGNvbnRyb2xsZXJNYXAgPSByb290Ll9fcmVtZW1iZXJlZE9iamVjdEluZGVjZXNUb0NvbnRyb2xsZXJzW21hdGNoZWRJbmRleF07CgogICAgaWYgKGNvbnRyb2xsZXJNYXAgPT09IHVuZGVmaW5lZCkgewogICAgICBjb250cm9sbGVyTWFwID0ge307CiAgICAgIHJvb3QuX19yZW1lbWJlcmVkT2JqZWN0SW5kZWNlc1RvQ29udHJvbGxlcnNbbWF0Y2hlZEluZGV4XSA9IGNvbnRyb2xsZXJNYXA7CiAgICB9CgogICAgY29udHJvbGxlck1hcFtjb250cm9sbGVyLnByb3BlcnR5XSA9IGNvbnRyb2xsZXI7CgogICAgaWYgKHJvb3QubG9hZCAmJiByb290LmxvYWQucmVtZW1iZXJlZCkgewogICAgICB2YXIgcHJlc2V0TWFwID0gcm9vdC5sb2FkLnJlbWVtYmVyZWQ7CiAgICAgIHZhciBwcmVzZXQgPSB2b2lkIDA7CgogICAgICBpZiAocHJlc2V0TWFwW2d1aS5wcmVzZXRdKSB7CiAgICAgICAgcHJlc2V0ID0gcHJlc2V0TWFwW2d1aS5wcmVzZXRdOwogICAgICB9IGVsc2UgaWYgKHByZXNldE1hcFtERUZBVUxUX0RFRkFVTFRfUFJFU0VUX05BTUVdKSB7CiAgICAgICAgcHJlc2V0ID0gcHJlc2V0TWFwW0RFRkFVTFRfREVGQVVMVF9QUkVTRVRfTkFNRV07CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAocHJlc2V0W21hdGNoZWRJbmRleF0gJiYgcHJlc2V0W21hdGNoZWRJbmRleF1bY29udHJvbGxlci5wcm9wZXJ0eV0gIT09IHVuZGVmaW5lZCkgewogICAgICAgIHZhciB2YWx1ZSA9IHByZXNldFttYXRjaGVkSW5kZXhdW2NvbnRyb2xsZXIucHJvcGVydHldOwogICAgICAgIGNvbnRyb2xsZXIuaW5pdGlhbFZhbHVlID0gdmFsdWU7CiAgICAgICAgY29udHJvbGxlci5zZXRWYWx1ZSh2YWx1ZSk7CiAgICAgIH0KICAgIH0KICB9Cn0KCmZ1bmN0aW9uIF9hZGQoZ3VpLCBvYmplY3QsIHByb3BlcnR5LCBwYXJhbXMpIHsKICBpZiAob2JqZWN0W3Byb3BlcnR5XSA9PT0gdW5kZWZpbmVkKSB7CiAgICB0aHJvdyBuZXcgRXJyb3IoJ09iamVjdCAiJyArIG9iamVjdCArICciIGhhcyBubyBwcm9wZXJ0eSAiJyArIHByb3BlcnR5ICsgJyInKTsKICB9CgogIHZhciBjb250cm9sbGVyID0gdm9pZCAwOwoKICBpZiAocGFyYW1zLmNvbG9yKSB7CiAgICBjb250cm9sbGVyID0gbmV3IENvbG9yQ29udHJvbGxlcihvYmplY3QsIHByb3BlcnR5KTsKICB9IGVsc2UgewogICAgdmFyIGZhY3RvcnlBcmdzID0gW29iamVjdCwgcHJvcGVydHldLmNvbmNhdChwYXJhbXMuZmFjdG9yeUFyZ3MpOwogICAgY29udHJvbGxlciA9IENvbnRyb2xsZXJGYWN0b3J5LmFwcGx5KGd1aSwgZmFjdG9yeUFyZ3MpOwogIH0KCiAgaWYgKHBhcmFtcy5iZWZvcmUgaW5zdGFuY2VvZiBDb250cm9sbGVyKSB7CiAgICBwYXJhbXMuYmVmb3JlID0gcGFyYW1zLmJlZm9yZS5fX2xpOwogIH0KCiAgcmVjYWxsU2F2ZWRWYWx1ZShndWksIGNvbnRyb2xsZXIpOwogIGRvbS5hZGRDbGFzcyhjb250cm9sbGVyLmRvbUVsZW1lbnQsICdjJyk7CiAgdmFyIG5hbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7CiAgZG9tLmFkZENsYXNzKG5hbWUsICdwcm9wZXJ0eS1uYW1lJyk7CiAgbmFtZS5pbm5lckhUTUwgPSBjb250cm9sbGVyLnByb3BlcnR5OwogIHZhciBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICBjb250YWluZXIuYXBwZW5kQ2hpbGQobmFtZSk7CiAgY29udGFpbmVyLmFwcGVuZENoaWxkKGNvbnRyb2xsZXIuZG9tRWxlbWVudCk7CiAgdmFyIGxpID0gYWRkUm93KGd1aSwgY29udGFpbmVyLCBwYXJhbXMuYmVmb3JlKTsKICBkb20uYWRkQ2xhc3MobGksIEdVSS5DTEFTU19DT05UUk9MTEVSX1JPVyk7CgogIGlmIChjb250cm9sbGVyIGluc3RhbmNlb2YgQ29sb3JDb250cm9sbGVyKSB7CiAgICBkb20uYWRkQ2xhc3MobGksICdjb2xvcicpOwogIH0gZWxzZSB7CiAgICBkb20uYWRkQ2xhc3MobGksIF90eXBlb2YoY29udHJvbGxlci5nZXRWYWx1ZSgpKSk7CiAgfQoKICBhdWdtZW50Q29udHJvbGxlcihndWksIGxpLCBjb250cm9sbGVyKTsKCiAgZ3VpLl9fY29udHJvbGxlcnMucHVzaChjb250cm9sbGVyKTsKCiAgcmV0dXJuIGNvbnRyb2xsZXI7Cn0KCmZ1bmN0aW9uIGdldExvY2FsU3RvcmFnZUhhc2goZ3VpLCBrZXkpIHsKICByZXR1cm4gZG9jdW1lbnQubG9jYXRpb24uaHJlZiArICcuJyArIGtleTsKfQoKZnVuY3Rpb24gYWRkUHJlc2V0T3B0aW9uKGd1aSwgbmFtZSwgc2V0U2VsZWN0ZWQpIHsKICB2YXIgb3B0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb3B0aW9uJyk7CiAgb3B0LmlubmVySFRNTCA9IG5hbWU7CiAgb3B0LnZhbHVlID0gbmFtZTsKCiAgZ3VpLl9fcHJlc2V0X3NlbGVjdC5hcHBlbmRDaGlsZChvcHQpOwoKICBpZiAoc2V0U2VsZWN0ZWQpIHsKICAgIGd1aS5fX3ByZXNldF9zZWxlY3Quc2VsZWN0ZWRJbmRleCA9IGd1aS5fX3ByZXNldF9zZWxlY3QubGVuZ3RoIC0gMTsKICB9Cn0KCmZ1bmN0aW9uIHNob3dIaWRlRXhwbGFpbihndWksIGV4cGxhaW4pIHsKICBleHBsYWluLnN0eWxlLmRpc3BsYXkgPSBndWkudXNlTG9jYWxTdG9yYWdlID8gJ2Jsb2NrJyA6ICdub25lJzsKfQoKZnVuY3Rpb24gYWRkU2F2ZU1lbnUoZ3VpKSB7CiAgdmFyIGRpdiA9IGd1aS5fX3NhdmVfcm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTsKICBkb20uYWRkQ2xhc3MoZ3VpLmRvbUVsZW1lbnQsICdoYXMtc2F2ZScpOwoKICBndWkuX191bC5pbnNlcnRCZWZvcmUoZGl2LCBndWkuX191bC5maXJzdENoaWxkKTsKCiAgZG9tLmFkZENsYXNzKGRpdiwgJ3NhdmUtcm93Jyk7CiAgdmFyIGdlYXJzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpOwogIGdlYXJzLmlubmVySFRNTCA9ICcmbmJzcDsnOwogIGRvbS5hZGRDbGFzcyhnZWFycywgJ2J1dHRvbiBnZWFycycpOwogIHZhciBidXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7CiAgYnV0dG9uLmlubmVySFRNTCA9ICdTYXZlJzsKICBkb20uYWRkQ2xhc3MoYnV0dG9uLCAnYnV0dG9uJyk7CiAgZG9tLmFkZENsYXNzKGJ1dHRvbiwgJ3NhdmUnKTsKICB2YXIgYnV0dG9uMiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTsKICBidXR0b24yLmlubmVySFRNTCA9ICdOZXcnOwogIGRvbS5hZGRDbGFzcyhidXR0b24yLCAnYnV0dG9uJyk7CiAgZG9tLmFkZENsYXNzKGJ1dHRvbjIsICdzYXZlLWFzJyk7CiAgdmFyIGJ1dHRvbjMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7CiAgYnV0dG9uMy5pbm5lckhUTUwgPSAnUmV2ZXJ0JzsKICBkb20uYWRkQ2xhc3MoYnV0dG9uMywgJ2J1dHRvbicpOwogIGRvbS5hZGRDbGFzcyhidXR0b24zLCAncmV2ZXJ0Jyk7CiAgdmFyIHNlbGVjdCA9IGd1aS5fX3ByZXNldF9zZWxlY3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzZWxlY3QnKTsKCiAgaWYgKGd1aS5sb2FkICYmIGd1aS5sb2FkLnJlbWVtYmVyZWQpIHsKICAgIENvbW1vbi5lYWNoKGd1aS5sb2FkLnJlbWVtYmVyZWQsIGZ1bmN0aW9uICh2YWx1ZSwga2V5KSB7CiAgICAgIGFkZFByZXNldE9wdGlvbihndWksIGtleSwga2V5ID09PSBndWkucHJlc2V0KTsKICAgIH0pOwogIH0gZWxzZSB7CiAgICBhZGRQcmVzZXRPcHRpb24oZ3VpLCBERUZBVUxUX0RFRkFVTFRfUFJFU0VUX05BTUUsIGZhbHNlKTsKICB9CgogIGRvbS5iaW5kKHNlbGVjdCwgJ2NoYW5nZScsIGZ1bmN0aW9uICgpIHsKICAgIGZvciAodmFyIGluZGV4ID0gMDsgaW5kZXggPCBndWkuX19wcmVzZXRfc2VsZWN0Lmxlbmd0aDsgaW5kZXgrKykgewogICAgICBndWkuX19wcmVzZXRfc2VsZWN0W2luZGV4XS5pbm5lckhUTUwgPSBndWkuX19wcmVzZXRfc2VsZWN0W2luZGV4XS52YWx1ZTsKICAgIH0KCiAgICBndWkucHJlc2V0ID0gdGhpcy52YWx1ZTsKICB9KTsKICBkaXYuYXBwZW5kQ2hpbGQoc2VsZWN0KTsKICBkaXYuYXBwZW5kQ2hpbGQoZ2VhcnMpOwogIGRpdi5hcHBlbmRDaGlsZChidXR0b24pOwogIGRpdi5hcHBlbmRDaGlsZChidXR0b24yKTsKICBkaXYuYXBwZW5kQ2hpbGQoYnV0dG9uMyk7CgogIGlmIChTVVBQT1JUU19MT0NBTF9TVE9SQUdFKSB7CiAgICB2YXIgZXhwbGFpbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkZy1sb2NhbC1leHBsYWluJyk7CiAgICB2YXIgbG9jYWxTdG9yYWdlQ2hlY2tCb3ggPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGctbG9jYWwtc3RvcmFnZScpOwogICAgdmFyIHNhdmVMb2NhbGx5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2RnLXNhdmUtbG9jYWxseScpOwogICAgc2F2ZUxvY2FsbHkuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7CgogICAgaWYgKGxvY2FsU3RvcmFnZS5nZXRJdGVtKGdldExvY2FsU3RvcmFnZUhhc2goZ3VpLCAnaXNMb2NhbCcpKSA9PT0gJ3RydWUnKSB7CiAgICAgIGxvY2FsU3RvcmFnZUNoZWNrQm94LnNldEF0dHJpYnV0ZSgnY2hlY2tlZCcsICdjaGVja2VkJyk7CiAgICB9CgogICAgc2hvd0hpZGVFeHBsYWluKGd1aSwgZXhwbGFpbik7CiAgICBkb20uYmluZChsb2NhbFN0b3JhZ2VDaGVja0JveCwgJ2NoYW5nZScsIGZ1bmN0aW9uICgpIHsKICAgICAgZ3VpLnVzZUxvY2FsU3RvcmFnZSA9ICFndWkudXNlTG9jYWxTdG9yYWdlOwogICAgICBzaG93SGlkZUV4cGxhaW4oZ3VpLCBleHBsYWluKTsKICAgIH0pOwogIH0KCiAgdmFyIG5ld0NvbnN0cnVjdG9yVGV4dEFyZWEgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGctbmV3LWNvbnN0cnVjdG9yJyk7CiAgZG9tLmJpbmQobmV3Q29uc3RydWN0b3JUZXh0QXJlYSwgJ2tleWRvd24nLCBmdW5jdGlvbiAoZSkgewogICAgaWYgKGUubWV0YUtleSAmJiAoZS53aGljaCA9PT0gNjcgfHwgZS5rZXlDb2RlID09PSA2NykpIHsKICAgICAgU0FWRV9ESUFMT0dVRS5oaWRlKCk7CiAgICB9CiAgfSk7CiAgZG9tLmJpbmQoZ2VhcnMsICdjbGljaycsIGZ1bmN0aW9uICgpIHsKICAgIG5ld0NvbnN0cnVjdG9yVGV4dEFyZWEuaW5uZXJIVE1MID0gSlNPTi5zdHJpbmdpZnkoZ3VpLmdldFNhdmVPYmplY3QoKSwgdW5kZWZpbmVkLCAyKTsKICAgIFNBVkVfRElBTE9HVUUuc2hvdygpOwogICAgbmV3Q29uc3RydWN0b3JUZXh0QXJlYS5mb2N1cygpOwogICAgbmV3Q29uc3RydWN0b3JUZXh0QXJlYS5zZWxlY3QoKTsKICB9KTsKICBkb20uYmluZChidXR0b24sICdjbGljaycsIGZ1bmN0aW9uICgpIHsKICAgIGd1aS5zYXZlKCk7CiAgfSk7CiAgZG9tLmJpbmQoYnV0dG9uMiwgJ2NsaWNrJywgZnVuY3Rpb24gKCkgewogICAgdmFyIHByZXNldE5hbWUgPSBwcm9tcHQoJ0VudGVyIGEgbmV3IHByZXNldCBuYW1lLicpOwoKICAgIGlmIChwcmVzZXROYW1lKSB7CiAgICAgIGd1aS5zYXZlQXMocHJlc2V0TmFtZSk7CiAgICB9CiAgfSk7CiAgZG9tLmJpbmQoYnV0dG9uMywgJ2NsaWNrJywgZnVuY3Rpb24gKCkgewogICAgZ3VpLnJldmVydCgpOwogIH0pOwp9CgpmdW5jdGlvbiBhZGRSZXNpemVIYW5kbGUoZ3VpKSB7CiAgdmFyIHBtb3VzZVggPSB2b2lkIDA7CiAgZ3VpLl9fcmVzaXplX2hhbmRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogIENvbW1vbi5leHRlbmQoZ3VpLl9fcmVzaXplX2hhbmRsZS5zdHlsZSwgewogICAgd2lkdGg6ICc2cHgnLAogICAgbWFyZ2luTGVmdDogJy0zcHgnLAogICAgaGVpZ2h0OiAnMjAwcHgnLAogICAgY3Vyc29yOiAnZXctcmVzaXplJywKICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnCiAgfSk7CgogIGZ1bmN0aW9uIGRyYWcoZSkgewogICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgZ3VpLndpZHRoICs9IHBtb3VzZVggLSBlLmNsaWVudFg7CiAgICBndWkub25SZXNpemUoKTsKICAgIHBtb3VzZVggPSBlLmNsaWVudFg7CiAgICByZXR1cm4gZmFsc2U7CiAgfQoKICBmdW5jdGlvbiBkcmFnU3RvcCgpIHsKICAgIGRvbS5yZW1vdmVDbGFzcyhndWkuX19jbG9zZUJ1dHRvbiwgR1VJLkNMQVNTX0RSQUcpOwogICAgZG9tLnVuYmluZCh3aW5kb3csICdtb3VzZW1vdmUnLCBkcmFnKTsKICAgIGRvbS51bmJpbmQod2luZG93LCAnbW91c2V1cCcsIGRyYWdTdG9wKTsKICB9CgogIGZ1bmN0aW9uIGRyYWdTdGFydChlKSB7CiAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICBwbW91c2VYID0gZS5jbGllbnRYOwogICAgZG9tLmFkZENsYXNzKGd1aS5fX2Nsb3NlQnV0dG9uLCBHVUkuQ0xBU1NfRFJBRyk7CiAgICBkb20uYmluZCh3aW5kb3csICdtb3VzZW1vdmUnLCBkcmFnKTsKICAgIGRvbS5iaW5kKHdpbmRvdywgJ21vdXNldXAnLCBkcmFnU3RvcCk7CiAgICByZXR1cm4gZmFsc2U7CiAgfQoKICBkb20uYmluZChndWkuX19yZXNpemVfaGFuZGxlLCAnbW91c2Vkb3duJywgZHJhZ1N0YXJ0KTsKICBkb20uYmluZChndWkuX19jbG9zZUJ1dHRvbiwgJ21vdXNlZG93bicsIGRyYWdTdGFydCk7CiAgZ3VpLmRvbUVsZW1lbnQuaW5zZXJ0QmVmb3JlKGd1aS5fX3Jlc2l6ZV9oYW5kbGUsIGd1aS5kb21FbGVtZW50LmZpcnN0RWxlbWVudENoaWxkKTsKfQoKZnVuY3Rpb24gc2V0V2lkdGgoZ3VpLCB3KSB7CiAgZ3VpLmRvbUVsZW1lbnQuc3R5bGUud2lkdGggPSB3ICsgJ3B4JzsKCiAgaWYgKGd1aS5fX3NhdmVfcm93ICYmIGd1aS5hdXRvUGxhY2UpIHsKICAgIGd1aS5fX3NhdmVfcm93LnN0eWxlLndpZHRoID0gdyArICdweCc7CiAgfQoKICBpZiAoZ3VpLl9fY2xvc2VCdXR0b24pIHsKICAgIGd1aS5fX2Nsb3NlQnV0dG9uLnN0eWxlLndpZHRoID0gdyArICdweCc7CiAgfQp9CgpmdW5jdGlvbiBnZXRDdXJyZW50UHJlc2V0KGd1aSwgdXNlSW5pdGlhbFZhbHVlcykgewogIHZhciB0b1JldHVybiA9IHt9OwogIENvbW1vbi5lYWNoKGd1aS5fX3JlbWVtYmVyZWRPYmplY3RzLCBmdW5jdGlvbiAodmFsLCBpbmRleCkgewogICAgdmFyIHNhdmVkVmFsdWVzID0ge307CiAgICB2YXIgY29udHJvbGxlck1hcCA9IGd1aS5fX3JlbWVtYmVyZWRPYmplY3RJbmRlY2VzVG9Db250cm9sbGVyc1tpbmRleF07CiAgICBDb21tb24uZWFjaChjb250cm9sbGVyTWFwLCBmdW5jdGlvbiAoY29udHJvbGxlciwgcHJvcGVydHkpIHsKICAgICAgc2F2ZWRWYWx1ZXNbcHJvcGVydHldID0gdXNlSW5pdGlhbFZhbHVlcyA/IGNvbnRyb2xsZXIuaW5pdGlhbFZhbHVlIDogY29udHJvbGxlci5nZXRWYWx1ZSgpOwogICAgfSk7CiAgICB0b1JldHVybltpbmRleF0gPSBzYXZlZFZhbHVlczsKICB9KTsKICByZXR1cm4gdG9SZXR1cm47Cn0KCmZ1bmN0aW9uIHNldFByZXNldFNlbGVjdEluZGV4KGd1aSkgewogIGZvciAodmFyIGluZGV4ID0gMDsgaW5kZXggPCBndWkuX19wcmVzZXRfc2VsZWN0Lmxlbmd0aDsgaW5kZXgrKykgewogICAgaWYgKGd1aS5fX3ByZXNldF9zZWxlY3RbaW5kZXhdLnZhbHVlID09PSBndWkucHJlc2V0KSB7CiAgICAgIGd1aS5fX3ByZXNldF9zZWxlY3Quc2VsZWN0ZWRJbmRleCA9IGluZGV4OwogICAgfQogIH0KfQoKZnVuY3Rpb24gdXBkYXRlRGlzcGxheXMoY29udHJvbGxlckFycmF5KSB7CiAgaWYgKGNvbnRyb2xsZXJBcnJheS5sZW5ndGggIT09IDApIHsKICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSQxLmNhbGwod2luZG93LCBmdW5jdGlvbiAoKSB7CiAgICAgIHVwZGF0ZURpc3BsYXlzKGNvbnRyb2xsZXJBcnJheSk7CiAgICB9KTsKICB9CgogIENvbW1vbi5lYWNoKGNvbnRyb2xsZXJBcnJheSwgZnVuY3Rpb24gKGMpIHsKICAgIGMudXBkYXRlRGlzcGxheSgpOwogIH0pOwp9Cgp2YXIgY29sb3IgPSB7CiAgQ29sb3I6IENvbG9yLAogIG1hdGg6IENvbG9yTWF0aCwKICBpbnRlcnByZXQ6IGludGVycHJldAp9Owp2YXIgY29udHJvbGxlcnMgPSB7CiAgQ29udHJvbGxlcjogQ29udHJvbGxlciwKICBCb29sZWFuQ29udHJvbGxlcjogQm9vbGVhbkNvbnRyb2xsZXIsCiAgT3B0aW9uQ29udHJvbGxlcjogT3B0aW9uQ29udHJvbGxlciwKICBTdHJpbmdDb250cm9sbGVyOiBTdHJpbmdDb250cm9sbGVyLAogIE51bWJlckNvbnRyb2xsZXI6IE51bWJlckNvbnRyb2xsZXIsCiAgTnVtYmVyQ29udHJvbGxlckJveDogTnVtYmVyQ29udHJvbGxlckJveCwKICBOdW1iZXJDb250cm9sbGVyU2xpZGVyOiBOdW1iZXJDb250cm9sbGVyU2xpZGVyLAogIEZ1bmN0aW9uQ29udHJvbGxlcjogRnVuY3Rpb25Db250cm9sbGVyLAogIENvbG9yQ29udHJvbGxlcjogQ29sb3JDb250cm9sbGVyCn07CnZhciBkb20kMSA9IHsKICBkb206IGRvbQp9Owp2YXIgZ3VpID0gewogIEdVSTogR1VJCn07CnZhciBHVUkkMSA9IEdVSTsKdmFyIGluZGV4ID0gewogIGNvbG9yOiBjb2xvciwKICBjb250cm9sbGVyczogY29udHJvbGxlcnMsCiAgZG9tOiBkb20kMSwKICBndWk6IGd1aSwKICBHVUk6IEdVSSQxCn07CmV4cG9ydCB7IGNvbG9yLCBjb250cm9sbGVycywgZG9tJDEgYXMgZG9tLCBndWksIEdVSSQxIGFzIEdVSSB9OwpleHBvcnQgZGVmYXVsdCBpbmRleDs="},{"version":3,"sources":["E:/wuhanligong-java/music/vue-admin-template-master/src/lib/dat.gui.module.js"],"names":["___$insertStyle","css","window","style","document","createElement","setAttribute","innerHTML","head","appendChild","colorToString","color","forceCSSHex","colorFormat","__state","conversionName","toString","r","Math","round","g","b","a","h","s","toFixed","v","str","hex","length","ARR_EACH","Array","prototype","forEach","ARR_SLICE","slice","Common","BREAK","extend","target","each","call","arguments","obj","keys","isObject","Object","key","isUndefined","bind","defaults","compose","toCall","args","i","apply","itr","scope","l","_key","defer","fnc","setTimeout","debounce","func","threshold","callImmediately","timeout","delayed","callNow","clearTimeout","toArray","undefined","isNull","isNaN","_isNaN","isArray","constructor","isNumber","isString","isBoolean","isFunction","Function","INTERPRETATIONS","litmus","conversions","THREE_CHAR_HEX","read","original","test","match","space","parseInt","write","SIX_CHAR_HEX","CSS_RGB","parseFloat","CSS_RGBA","HEX","RGB_ARRAY","RGBA_ARRAY","RGBA_OBJ","RGB_OBJ","HSVA_OBJ","HSV_OBJ","result","toReturn","interpret","family","conversion","tmpComponent","ColorMath","hsv_to_rgb","hi","floor","f","p","q","t","c","rgb_to_hsv","min","max","delta","NaN","rgb_to_hex","hex_with_component","component_from_hex","componentIndex","value","_typeof","Symbol","iterator","classCallCheck","instance","Constructor","TypeError","createClass","defineProperties","props","descriptor","enumerable","configurable","writable","defineProperty","protoProps","staticProps","get","object","property","receiver","desc","getOwnPropertyDescriptor","parent","getPrototypeOf","getter","inherits","subClass","superClass","create","setPrototypeOf","__proto__","possibleConstructorReturn","self","ReferenceError","Color","Error","toHexString","toOriginal","defineRGBComponent","component","componentHexIndex","get$$1","recalculateRGB","set","set$$1","defineHSVComponent","recalculateHSV","COMPONENTS","Controller","initialValue","domElement","__onChange","__onFinishChange","onChange","onFinishChange","setValue","newValue","updateDisplay","getValue","isModified","EVENT_MAP","HTMLEvents","MouseEvents","KeyboardEvents","EVENT_MAP_INV","k","e","CSS_VALUE_PIXELS","cssValueToPixels","val","dom","makeSelectable","elem","selectable","onselectstart","MozUserSelect","KhtmlUserSelect","unselectable","makeFullscreen","hor","vert","vertical","horizontal","position","left","right","top","bottom","fakeEvent","eventType","pars","aux","params","className","evt","createEvent","clientX","x","clientY","y","initMouseEvent","bubbles","cancelable","clickCount","init","initKeyboardEvent","initKeyEvent","ctrlKey","altKey","shiftKey","metaKey","keyCode","charCode","initEvent","dispatchEvent","event","newBool","bool","addEventListener","attachEvent","unbind","removeEventListener","detachEvent","addClass","classes","split","indexOf","push","join","replace","removeClass","removeAttribute","index","splice","hasClass","RegExp","getWidth","getComputedStyle","width","getHeight","height","getOffset","el","offset","offsetParent","offsetLeft","offsetTop","isActive","activeElement","type","href","BooleanController","_Controller","_this2","_this","__prev","__checkbox","checked","OptionController","opts","options","__select","map","element","opt","desiredValue","selectedIndex","StringController","__input","onBlur","blur","numDecimals","_x","NumberController","_params","__min","__max","__step","step","__impliedStep","pow","log","abs","LN10","__precision","_v","minValue","maxValue","stepValue","roundToDecimal","decimals","tenTo","NumberControllerBox","_NumberController","__truncationSuspended","prevY","attempted","onFinish","onMouseDrag","diff","onMouseUp","onMouseDown","i1","i2","o1","o2","NumberControllerSlider","__background","__foreground","onTouchStart","preventDefault","bgRect","getBoundingClientRect","touches","onTouchMove","onTouchEnd","pct","FunctionController","text","__button","fire","ColorController","__color","__temp","__selector","__saturation_field","__field_knob","__field_knob_border","__hue_knob","__hue_field","__input_textShadow","valueField","padding","backgroundColor","boxShadow","border","borderRadius","zIndex","borderRight","marginRight","display","cursor","background","linearGradient","hueGradient","outline","textAlign","fontWeight","textShadow","fieldDown","fieldDownH","setSV","fieldUpSV","setH","fieldUpH","fieldRect","_ref","_ref2","mismatch","flip","_flip","marginLeft","marginTop","vendors","vendor","cssText","load","url","indoc","doc","link","rel","getElementsByTagName","inject","cssContent","injected","saveDialogContents","ControllerFactory","requestAnimationFrame","callback","requestAnimationFrame$1","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame","CenteredDiv","backgroundElement","opacity","WebkitTransition","transition","body","hide","show","webkitTransform","layout","innerWidth","innerHeight","styleSheet","CSS_NAMESPACE","HIDE_KEY_CODE","CLOSE_BUTTON_HEIGHT","DEFAULT_DEFAULT_PRESET_NAME","SUPPORTS_LOCAL_STORAGE","localStorage","SAVE_DIALOGUE","autoPlaceVirgin","autoPlaceContainer","hideableGuis","GUI","__ul","__folders","__controllers","__rememberedObjects","__rememberedObjectIndecesToControllers","__listening","closeOnTop","autoPlace","DEFAULT_WIDTH","resizable","hideable","preset","scrollable","useLocalStorage","getItem","getLocalStorageHash","saveToLocalStorage","titleRow","getRoot","setPresetSelectIndex","revert","setWidth","name","closed","CLASS_CLOSED","onResize","__closeButton","TEXT_OPEN","TEXT_CLOSED","setItem","CLASS_MAIN","savedGui","JSON","parse","CLASS_CLOSE_BUTTON","CLASS_CLOSE_TOP","insertBefore","childNodes","CLASS_CLOSE_BOTTOM","titleRowName","createTextNode","addRow","onClickTitle","CLASS_AUTO_PLACE_CONTAINER","CLASS_AUTO_PLACE","__resizeHandler","onResizeDebounced","addResizeHandle","stringify","getSaveObject","saveToLocalStorageIfPossible","resetWidth","root","toggleHide","gui","CLASS_CONTROLLER_ROW","CLASS_TOO_TALL","CLASS_DRAG","_keydownHandler","which","add","_add","factoryArgs","addColor","remove","controller","removeChild","__li","destroy","subfolder","removeFolder","removeListeners","addFolder","newGuiParams","folders","li","folder","parentElement","open","close","node","__save_row","__resize_handle","offsetHeight","remember","addSaveMenu","remembered","getCurrentPreset","save","markPresetModified","saveAs","presetName","addPresetOption","recallSavedValue","listen","updateDisplays","newDom","liBefore","modified","__preset_select","augmentController","__gui","_options","nextSibling","nextElementSibling","before","_nextSibling","_name","firstElementChild","box","method","pc","pb","returned","oldName","wasListening","newController","stopPropagation","borderLeftColor","matchedIndex","controllerMap","presetMap","concat","container","location","setSelected","showHideExplain","explain","div","firstChild","gears","button","button2","button3","select","getElementById","localStorageCheckBox","saveLocally","newConstructorTextArea","focus","prompt","pmouseX","drag","dragStop","dragStart","w","useInitialValues","savedValues","controllerArray","math","controllers","dom$1","GUI$1"],"mappings":"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","sourcesContent":["/**\n * dat-gui JavaScript Controller Library\n * http://code.google.com/p/dat-gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\nfunction ___$insertStyle( css ) {\n\n\tif ( ! css ) {\n\n\t\treturn;\n\n\t}\n\tif ( typeof window === 'undefined' ) {\n\n\t\treturn;\n\n\t}\n\n\tvar style = document.createElement( 'style' );\n\n\tstyle.setAttribute( 'type', 'text/css' );\n\tstyle.innerHTML = css;\n\tdocument.head.appendChild( style );\n\n\treturn css;\n\n}\n\nfunction colorToString( color, forceCSSHex ) {\n\n\tvar colorFormat = color.__state.conversionName.toString();\n\tvar r = Math.round( color.r );\n\tvar g = Math.round( color.g );\n\tvar b = Math.round( color.b );\n\tvar a = color.a;\n\tvar h = Math.round( color.h );\n\tvar s = color.s.toFixed( 1 );\n\tvar v = color.v.toFixed( 1 );\n\tif ( forceCSSHex || colorFormat === 'THREE_CHAR_HEX' || colorFormat === 'SIX_CHAR_HEX' ) {\n\n\t\tvar str = color.hex.toString( 16 );\n\t\twhile ( str.length < 6 ) {\n\n\t\t\tstr = '0' + str;\n\n\t\t}\n\t\treturn '#' + str;\n\n\t} else if ( colorFormat === 'CSS_RGB' ) {\n\n\t\treturn 'rgb(' + r + ',' + g + ',' + b + ')';\n\n\t} else if ( colorFormat === 'CSS_RGBA' ) {\n\n\t\treturn 'rgba(' + r + ',' + g + ',' + b + ',' + a + ')';\n\n\t} else if ( colorFormat === 'HEX' ) {\n\n\t\treturn '0x' + color.hex.toString( 16 );\n\n\t} else if ( colorFormat === 'RGB_ARRAY' ) {\n\n\t\treturn '[' + r + ',' + g + ',' + b + ']';\n\n\t} else if ( colorFormat === 'RGBA_ARRAY' ) {\n\n\t\treturn '[' + r + ',' + g + ',' + b + ',' + a + ']';\n\n\t} else if ( colorFormat === 'RGB_OBJ' ) {\n\n\t\treturn '{r:' + r + ',g:' + g + ',b:' + b + '}';\n\n\t} else if ( colorFormat === 'RGBA_OBJ' ) {\n\n\t\treturn '{r:' + r + ',g:' + g + ',b:' + b + ',a:' + a + '}';\n\n\t} else if ( colorFormat === 'HSV_OBJ' ) {\n\n\t\treturn '{h:' + h + ',s:' + s + ',v:' + v + '}';\n\n\t} else if ( colorFormat === 'HSVA_OBJ' ) {\n\n\t\treturn '{h:' + h + ',s:' + s + ',v:' + v + ',a:' + a + '}';\n\n\t}\n\treturn 'unknown format';\n\n}\n\nvar ARR_EACH = Array.prototype.forEach;\nvar ARR_SLICE = Array.prototype.slice;\nvar Common = {\n\tBREAK: {},\n\textend: function extend( target ) {\n\n\t\tthis.each( ARR_SLICE.call( arguments, 1 ), function ( obj ) {\n\n\t\t\tvar keys = this.isObject( obj ) ? Object.keys( obj ) : [];\n\t\t\tkeys.forEach( function ( key ) {\n\n\t\t\t\tif ( ! this.isUndefined( obj[ key ] ) ) {\n\n\t\t\t\t\ttarget[ key ] = obj[ key ];\n\n\t\t\t\t}\n\n\t\t\t}.bind( this ) );\n\n\t\t}, this );\n\t\treturn target;\n\n\t},\n\tdefaults: function defaults( target ) {\n\n\t\tthis.each( ARR_SLICE.call( arguments, 1 ), function ( obj ) {\n\n\t\t\tvar keys = this.isObject( obj ) ? Object.keys( obj ) : [];\n\t\t\tkeys.forEach( function ( key ) {\n\n\t\t\t\tif ( this.isUndefined( target[ key ] ) ) {\n\n\t\t\t\t\ttarget[ key ] = obj[ key ];\n\n\t\t\t\t}\n\n\t\t\t}.bind( this ) );\n\n\t\t}, this );\n\t\treturn target;\n\n\t},\n\tcompose: function compose() {\n\n\t\tvar toCall = ARR_SLICE.call( arguments );\n\t\treturn function () {\n\n\t\t\tvar args = ARR_SLICE.call( arguments );\n\t\t\tfor ( var i = toCall.length - 1; i >= 0; i -- ) {\n\n\t\t\t\targs = [ toCall[ i ].apply( this, args ) ];\n\n\t\t\t}\n\t\t\treturn args[ 0 ];\n\n\t\t};\n\n\t},\n\teach: function each( obj, itr, scope ) {\n\n\t\tif ( ! obj ) {\n\n\t\t\treturn;\n\n\t\t}\n\t\tif ( ARR_EACH && obj.forEach && obj.forEach === ARR_EACH ) {\n\n\t\t\tobj.forEach( itr, scope );\n\n\t\t} else if ( obj.length === obj.length + 0 ) {\n\n\t\t\tvar key = void 0;\n\t\t\tvar l = void 0;\n\t\t\tfor ( key = 0, l = obj.length; key < l; key ++ ) {\n\n\t\t\t\tif ( key in obj && itr.call( scope, obj[ key ], key ) === this.BREAK ) {\n\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tfor ( var _key in obj ) {\n\n\t\t\t\tif ( itr.call( scope, obj[ _key ], _key ) === this.BREAK ) {\n\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\tdefer: function defer( fnc ) {\n\n\t\tsetTimeout( fnc, 0 );\n\n\t},\n\tdebounce: function debounce( func, threshold, callImmediately ) {\n\n\t\tvar timeout = void 0;\n\t\treturn function () {\n\n\t\t\tvar obj = this;\n\t\t\tvar args = arguments;\n\t\t\tfunction delayed() {\n\n\t\t\t\ttimeout = null;\n\t\t\t\tif ( ! callImmediately ) func.apply( obj, args );\n\n\t\t\t}\n\t\t\tvar callNow = callImmediately || ! timeout;\n\t\t\tclearTimeout( timeout );\n\t\t\ttimeout = setTimeout( delayed, threshold );\n\t\t\tif ( callNow ) {\n\n\t\t\t\tfunc.apply( obj, args );\n\n\t\t\t}\n\n\t\t};\n\n\t},\n\ttoArray: function toArray( obj ) {\n\n\t\tif ( obj.toArray ) return obj.toArray();\n\t\treturn ARR_SLICE.call( obj );\n\n\t},\n\tisUndefined: function isUndefined( obj ) {\n\n\t\treturn obj === undefined;\n\n\t},\n\tisNull: function isNull( obj ) {\n\n\t\treturn obj === null;\n\n\t},\n\tisNaN: function ( _isNaN ) {\n\n\t\tfunction isNaN() {\n\n\t\t\treturn _isNaN.apply( this, arguments );\n\n\t\t}\n\t\tisNaN.toString = function () {\n\n\t\t\treturn _isNaN.toString();\n\n\t\t};\n\t\treturn isNaN;\n\n\t}( function ( obj ) {\n\n\t\treturn isNaN( obj );\n\n\t} ),\n\tisArray: Array.isArray || function ( obj ) {\n\n\t\treturn obj.constructor === Array;\n\n\t},\n\tisObject: function isObject( obj ) {\n\n\t\treturn obj === Object( obj );\n\n\t},\n\tisNumber: function isNumber( obj ) {\n\n\t\treturn obj === obj + 0;\n\n\t},\n\tisString: function isString( obj ) {\n\n\t\treturn obj === obj + '';\n\n\t},\n\tisBoolean: function isBoolean( obj ) {\n\n\t\treturn obj === false || obj === true;\n\n\t},\n\tisFunction: function isFunction( obj ) {\n\n\t\treturn obj instanceof Function;\n\n\t}\n};\n\nvar INTERPRETATIONS = [\n\t{\n\t\tlitmus: Common.isString,\n\t\tconversions: {\n\t\t\tTHREE_CHAR_HEX: {\n\t\t\t\tread: function read( original ) {\n\n\t\t\t\t\tvar test = original.match( /^#([A-F0-9])([A-F0-9])([A-F0-9])$/i );\n\t\t\t\t\tif ( test === null ) {\n\n\t\t\t\t\t\treturn false;\n\n\t\t\t\t\t}\n\t\t\t\t\treturn {\n\t\t\t\t\t\tspace: 'HEX',\n\t\t\t\t\t\thex: parseInt( '0x' + test[ 1 ].toString() + test[ 1 ].toString() + test[ 2 ].toString() + test[ 2 ].toString() + test[ 3 ].toString() + test[ 3 ].toString(), 0 )\n\t\t\t\t\t};\n\n\t\t\t\t},\n\t\t\t\twrite: colorToString\n\t\t\t},\n\t\t\tSIX_CHAR_HEX: {\n\t\t\t\tread: function read( original ) {\n\n\t\t\t\t\tvar test = original.match( /^#([A-F0-9]{6})$/i );\n\t\t\t\t\tif ( test === null ) {\n\n\t\t\t\t\t\treturn false;\n\n\t\t\t\t\t}\n\t\t\t\t\treturn {\n\t\t\t\t\t\tspace: 'HEX',\n\t\t\t\t\t\thex: parseInt( '0x' + test[ 1 ].toString(), 0 )\n\t\t\t\t\t};\n\n\t\t\t\t},\n\t\t\t\twrite: colorToString\n\t\t\t},\n\t\t\tCSS_RGB: {\n\t\t\t\tread: function read( original ) {\n\n\t\t\t\t\tvar test = original.match( /^rgb\\(\\s*(.+)\\s*,\\s*(.+)\\s*,\\s*(.+)\\s*\\)/ );\n\t\t\t\t\tif ( test === null ) {\n\n\t\t\t\t\t\treturn false;\n\n\t\t\t\t\t}\n\t\t\t\t\treturn {\n\t\t\t\t\t\tspace: 'RGB',\n\t\t\t\t\t\tr: parseFloat( test[ 1 ] ),\n\t\t\t\t\t\tg: parseFloat( test[ 2 ] ),\n\t\t\t\t\t\tb: parseFloat( test[ 3 ] )\n\t\t\t\t\t};\n\n\t\t\t\t},\n\t\t\t\twrite: colorToString\n\t\t\t},\n\t\t\tCSS_RGBA: {\n\t\t\t\tread: function read( original ) {\n\n\t\t\t\t\tvar test = original.match( /^rgba\\(\\s*(.+)\\s*,\\s*(.+)\\s*,\\s*(.+)\\s*,\\s*(.+)\\s*\\)/ );\n\t\t\t\t\tif ( test === null ) {\n\n\t\t\t\t\t\treturn false;\n\n\t\t\t\t\t}\n\t\t\t\t\treturn {\n\t\t\t\t\t\tspace: 'RGB',\n\t\t\t\t\t\tr: parseFloat( test[ 1 ] ),\n\t\t\t\t\t\tg: parseFloat( test[ 2 ] ),\n\t\t\t\t\t\tb: parseFloat( test[ 3 ] ),\n\t\t\t\t\t\ta: parseFloat( test[ 4 ] )\n\t\t\t\t\t};\n\n\t\t\t\t},\n\t\t\t\twrite: colorToString\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\tlitmus: Common.isNumber,\n\t\tconversions: {\n\t\t\tHEX: {\n\t\t\t\tread: function read( original ) {\n\n\t\t\t\t\treturn {\n\t\t\t\t\t\tspace: 'HEX',\n\t\t\t\t\t\thex: original,\n\t\t\t\t\t\tconversionName: 'HEX'\n\t\t\t\t\t};\n\n\t\t\t\t},\n\t\t\t\twrite: function write( color ) {\n\n\t\t\t\t\treturn color.hex;\n\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\tlitmus: Common.isArray,\n\t\tconversions: {\n\t\t\tRGB_ARRAY: {\n\t\t\t\tread: function read( original ) {\n\n\t\t\t\t\tif ( original.length !== 3 ) {\n\n\t\t\t\t\t\treturn false;\n\n\t\t\t\t\t}\n\t\t\t\t\treturn {\n\t\t\t\t\t\tspace: 'RGB',\n\t\t\t\t\t\tr: original[ 0 ],\n\t\t\t\t\t\tg: original[ 1 ],\n\t\t\t\t\t\tb: original[ 2 ]\n\t\t\t\t\t};\n\n\t\t\t\t},\n\t\t\t\twrite: function write( color ) {\n\n\t\t\t\t\treturn [ color.r, color.g, color.b ];\n\n\t\t\t\t}\n\t\t\t},\n\t\t\tRGBA_ARRAY: {\n\t\t\t\tread: function read( original ) {\n\n\t\t\t\t\tif ( original.length !== 4 ) return false;\n\t\t\t\t\treturn {\n\t\t\t\t\t\tspace: 'RGB',\n\t\t\t\t\t\tr: original[ 0 ],\n\t\t\t\t\t\tg: original[ 1 ],\n\t\t\t\t\t\tb: original[ 2 ],\n\t\t\t\t\t\ta: original[ 3 ]\n\t\t\t\t\t};\n\n\t\t\t\t},\n\t\t\t\twrite: function write( color ) {\n\n\t\t\t\t\treturn [ color.r, color.g, color.b, color.a ];\n\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\tlitmus: Common.isObject,\n\t\tconversions: {\n\t\t\tRGBA_OBJ: {\n\t\t\t\tread: function read( original ) {\n\n\t\t\t\t\tif ( Common.isNumber( original.r ) && Common.isNumber( original.g ) && Common.isNumber( original.b ) && Common.isNumber( original.a ) ) {\n\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tspace: 'RGB',\n\t\t\t\t\t\t\tr: original.r,\n\t\t\t\t\t\t\tg: original.g,\n\t\t\t\t\t\t\tb: original.b,\n\t\t\t\t\t\t\ta: original.a\n\t\t\t\t\t\t};\n\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\n\t\t\t\t},\n\t\t\t\twrite: function write( color ) {\n\n\t\t\t\t\treturn {\n\t\t\t\t\t\tr: color.r,\n\t\t\t\t\t\tg: color.g,\n\t\t\t\t\t\tb: color.b,\n\t\t\t\t\t\ta: color.a\n\t\t\t\t\t};\n\n\t\t\t\t}\n\t\t\t},\n\t\t\tRGB_OBJ: {\n\t\t\t\tread: function read( original ) {\n\n\t\t\t\t\tif ( Common.isNumber( original.r ) && Common.isNumber( original.g ) && Common.isNumber( original.b ) ) {\n\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tspace: 'RGB',\n\t\t\t\t\t\t\tr: original.r,\n\t\t\t\t\t\t\tg: original.g,\n\t\t\t\t\t\t\tb: original.b\n\t\t\t\t\t\t};\n\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\n\t\t\t\t},\n\t\t\t\twrite: function write( color ) {\n\n\t\t\t\t\treturn {\n\t\t\t\t\t\tr: color.r,\n\t\t\t\t\t\tg: color.g,\n\t\t\t\t\t\tb: color.b\n\t\t\t\t\t};\n\n\t\t\t\t}\n\t\t\t},\n\t\t\tHSVA_OBJ: {\n\t\t\t\tread: function read( original ) {\n\n\t\t\t\t\tif ( Common.isNumber( original.h ) && Common.isNumber( original.s ) && Common.isNumber( original.v ) && Common.isNumber( original.a ) ) {\n\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tspace: 'HSV',\n\t\t\t\t\t\t\th: original.h,\n\t\t\t\t\t\t\ts: original.s,\n\t\t\t\t\t\t\tv: original.v,\n\t\t\t\t\t\t\ta: original.a\n\t\t\t\t\t\t};\n\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\n\t\t\t\t},\n\t\t\t\twrite: function write( color ) {\n\n\t\t\t\t\treturn {\n\t\t\t\t\t\th: color.h,\n\t\t\t\t\t\ts: color.s,\n\t\t\t\t\t\tv: color.v,\n\t\t\t\t\t\ta: color.a\n\t\t\t\t\t};\n\n\t\t\t\t}\n\t\t\t},\n\t\t\tHSV_OBJ: {\n\t\t\t\tread: function read( original ) {\n\n\t\t\t\t\tif ( Common.isNumber( original.h ) && Common.isNumber( original.s ) && Common.isNumber( original.v ) ) {\n\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tspace: 'HSV',\n\t\t\t\t\t\t\th: original.h,\n\t\t\t\t\t\t\ts: original.s,\n\t\t\t\t\t\t\tv: original.v\n\t\t\t\t\t\t};\n\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\n\t\t\t\t},\n\t\t\t\twrite: function write( color ) {\n\n\t\t\t\t\treturn {\n\t\t\t\t\t\th: color.h,\n\t\t\t\t\t\ts: color.s,\n\t\t\t\t\t\tv: color.v\n\t\t\t\t\t};\n\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t} ];\nvar result = void 0;\nvar toReturn = void 0;\nvar interpret = function interpret() {\n\n\ttoReturn = false;\n\tvar original = arguments.length > 1 ? Common.toArray( arguments ) : arguments[ 0 ];\n\tCommon.each( INTERPRETATIONS, function ( family ) {\n\n\t\tif ( family.litmus( original ) ) {\n\n\t\t\tCommon.each( family.conversions, function ( conversion, conversionName ) {\n\n\t\t\t\tresult = conversion.read( original );\n\t\t\t\tif ( toReturn === false && result !== false ) {\n\n\t\t\t\t\ttoReturn = result;\n\t\t\t\t\tresult.conversionName = conversionName;\n\t\t\t\t\tresult.conversion = conversion;\n\t\t\t\t\treturn Common.BREAK;\n\n\t\t\t\t}\n\n\t\t\t} );\n\t\t\treturn Common.BREAK;\n\n\t\t}\n\n\t} );\n\treturn toReturn;\n\n};\n\nvar tmpComponent = void 0;\nvar ColorMath = {\n\thsv_to_rgb: function hsv_to_rgb( h, s, v ) {\n\n\t\tvar hi = Math.floor( h / 60 ) % 6;\n\t\tvar f = h / 60 - Math.floor( h / 60 );\n\t\tvar p = v * ( 1.0 - s );\n\t\tvar q = v * ( 1.0 - f * s );\n\t\tvar t = v * ( 1.0 - ( 1.0 - f ) * s );\n\t\tvar c = [[ v, t, p ], [ q, v, p ], [ p, v, t ], [ p, q, v ], [ t, p, v ], [ v, p, q ]][ hi ];\n\t\treturn {\n\t\t\tr: c[ 0 ] * 255,\n\t\t\tg: c[ 1 ] * 255,\n\t\t\tb: c[ 2 ] * 255\n\t\t};\n\n\t},\n\trgb_to_hsv: function rgb_to_hsv( r, g, b ) {\n\n\t\tvar min = Math.min( r, g, b );\n\t\tvar max = Math.max( r, g, b );\n\t\tvar delta = max - min;\n\t\tvar h = void 0;\n\t\tvar s = void 0;\n\t\tif ( max !== 0 ) {\n\n\t\t\ts = delta / max;\n\n\t\t} else {\n\n\t\t\treturn {\n\t\t\t\th: NaN,\n\t\t\t\ts: 0,\n\t\t\t\tv: 0\n\t\t\t};\n\n\t\t}\n\t\tif ( r === max ) {\n\n\t\t\th = ( g - b ) / delta;\n\n\t\t} else if ( g === max ) {\n\n\t\t\th = 2 + ( b - r ) / delta;\n\n\t\t} else {\n\n\t\t\th = 4 + ( r - g ) / delta;\n\n\t\t}\n\t\th /= 6;\n\t\tif ( h < 0 ) {\n\n\t\t\th += 1;\n\n\t\t}\n\t\treturn {\n\t\t\th: h * 360,\n\t\t\ts: s,\n\t\t\tv: max / 255\n\t\t};\n\n\t},\n\trgb_to_hex: function rgb_to_hex( r, g, b ) {\n\n\t\tvar hex = this.hex_with_component( 0, 2, r );\n\t\thex = this.hex_with_component( hex, 1, g );\n\t\thex = this.hex_with_component( hex, 0, b );\n\t\treturn hex;\n\n\t},\n\tcomponent_from_hex: function component_from_hex( hex, componentIndex ) {\n\n\t\treturn hex >> componentIndex * 8 & 0xFF;\n\n\t},\n\thex_with_component: function hex_with_component( hex, componentIndex, value ) {\n\n\t\treturn value << ( tmpComponent = componentIndex * 8 ) | hex & ~ ( 0xFF << tmpComponent );\n\n\t}\n};\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function ( obj ) {\n\n\treturn typeof obj;\n\n} : function ( obj ) {\n\n\treturn obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n\n};\n\n\n\n\n\n\n\n\n\n\n\nvar classCallCheck = function ( instance, Constructor ) {\n\n\tif ( ! ( instance instanceof Constructor ) ) {\n\n\t\tthrow new TypeError( \"Cannot call a class as a function\" );\n\n\t}\n\n};\n\nvar createClass = function () {\n\n\tfunction defineProperties( target, props ) {\n\n\t\tfor ( var i = 0; i < props.length; i ++ ) {\n\n\t\t\tvar descriptor = props[ i ];\n\t\t\tdescriptor.enumerable = descriptor.enumerable || false;\n\t\t\tdescriptor.configurable = true;\n\t\t\tif ( \"value\" in descriptor ) descriptor.writable = true;\n\t\t\tObject.defineProperty( target, descriptor.key, descriptor );\n\n\t\t}\n\n\t}\n\n\treturn function ( Constructor, protoProps, staticProps ) {\n\n\t\tif ( protoProps ) defineProperties( Constructor.prototype, protoProps );\n\t\tif ( staticProps ) defineProperties( Constructor, staticProps );\n\t\treturn Constructor;\n\n\t};\n\n}();\n\n\n\n\n\n\n\nvar get = function get( object, property, receiver ) {\n\n\tif ( object === null ) object = Function.prototype;\n\tvar desc = Object.getOwnPropertyDescriptor( object, property );\n\n\tif ( desc === undefined ) {\n\n\t\tvar parent = Object.getPrototypeOf( object );\n\n\t\tif ( parent === null ) {\n\n\t\t\treturn undefined;\n\n\t\t} else {\n\n\t\t\treturn get( parent, property, receiver );\n\n\t\t}\n\n\t} else if ( \"value\" in desc ) {\n\n\t\treturn desc.value;\n\n\t} else {\n\n\t\tvar getter = desc.get;\n\n\t\tif ( getter === undefined ) {\n\n\t\t\treturn undefined;\n\n\t\t}\n\n\t\treturn getter.call( receiver );\n\n\t}\n\n};\n\nvar inherits = function ( subClass, superClass ) {\n\n\tif ( typeof superClass !== \"function\" && superClass !== null ) {\n\n\t\tthrow new TypeError( \"Super expression must either be null or a function, not \" + typeof superClass );\n\n\t}\n\n\tsubClass.prototype = Object.create( superClass && superClass.prototype, {\n\t\tconstructor: {\n\t\t\tvalue: subClass,\n\t\t\tenumerable: false,\n\t\t\twritable: true,\n\t\t\tconfigurable: true\n\t\t}\n\t} );\n\tif ( superClass ) Object.setPrototypeOf ? Object.setPrototypeOf( subClass, superClass ) : subClass.__proto__ = superClass;\n\n};\n\n\n\n\n\n\n\n\n\n\n\nvar possibleConstructorReturn = function ( self, call ) {\n\n\tif ( ! self ) {\n\n\t\tthrow new ReferenceError( \"this hasn't been initialised - super() hasn't been called\" );\n\n\t}\n\n\treturn call && ( typeof call === \"object\" || typeof call === \"function\" ) ? call : self;\n\n};\n\nvar Color = function () {\n\n\tfunction Color() {\n\n\t\tclassCallCheck( this, Color );\n\t\tthis.__state = interpret.apply( this, arguments );\n\t\tif ( this.__state === false ) {\n\n\t\t\tthrow new Error( 'Failed to interpret color arguments' );\n\n\t\t}\n\t\tthis.__state.a = this.__state.a || 1;\n\n\t}\n\tcreateClass( Color, [ {\n\t\tkey: 'toString',\n\t\tvalue: function toString() {\n\n\t\t\treturn colorToString( this );\n\n\t\t}\n\t}, {\n\t\tkey: 'toHexString',\n\t\tvalue: function toHexString() {\n\n\t\t\treturn colorToString( this, true );\n\n\t\t}\n\t}, {\n\t\tkey: 'toOriginal',\n\t\tvalue: function toOriginal() {\n\n\t\t\treturn this.__state.conversion.write( this );\n\n\t\t}\n\t} ] );\n\treturn Color;\n\n}();\nfunction defineRGBComponent( target, component, componentHexIndex ) {\n\n\tObject.defineProperty( target, component, {\n\t\tget: function get$$1() {\n\n\t\t\tif ( this.__state.space === 'RGB' ) {\n\n\t\t\t\treturn this.__state[ component ];\n\n\t\t\t}\n\t\t\tColor.recalculateRGB( this, component, componentHexIndex );\n\t\t\treturn this.__state[ component ];\n\n\t\t},\n\t\tset: function set$$1( v ) {\n\n\t\t\tif ( this.__state.space !== 'RGB' ) {\n\n\t\t\t\tColor.recalculateRGB( this, component, componentHexIndex );\n\t\t\t\tthis.__state.space = 'RGB';\n\n\t\t\t}\n\t\t\tthis.__state[ component ] = v;\n\n\t\t}\n\t} );\n\n}\nfunction defineHSVComponent( target, component ) {\n\n\tObject.defineProperty( target, component, {\n\t\tget: function get$$1() {\n\n\t\t\tif ( this.__state.space === 'HSV' ) {\n\n\t\t\t\treturn this.__state[ component ];\n\n\t\t\t}\n\t\t\tColor.recalculateHSV( this );\n\t\t\treturn this.__state[ component ];\n\n\t\t},\n\t\tset: function set$$1( v ) {\n\n\t\t\tif ( this.__state.space !== 'HSV' ) {\n\n\t\t\t\tColor.recalculateHSV( this );\n\t\t\t\tthis.__state.space = 'HSV';\n\n\t\t\t}\n\t\t\tthis.__state[ component ] = v;\n\n\t\t}\n\t} );\n\n}\nColor.recalculateRGB = function ( color, component, componentHexIndex ) {\n\n\tif ( color.__state.space === 'HEX' ) {\n\n\t\tcolor.__state[ component ] = ColorMath.component_from_hex( color.__state.hex, componentHexIndex );\n\n\t} else if ( color.__state.space === 'HSV' ) {\n\n\t\tCommon.extend( color.__state, ColorMath.hsv_to_rgb( color.__state.h, color.__state.s, color.__state.v ) );\n\n\t} else {\n\n\t\tthrow new Error( 'Corrupted color state' );\n\n\t}\n\n};\nColor.recalculateHSV = function ( color ) {\n\n\tvar result = ColorMath.rgb_to_hsv( color.r, color.g, color.b );\n\tCommon.extend( color.__state, {\n\t\ts: result.s,\n\t\tv: result.v\n\t} );\n\tif ( ! Common.isNaN( result.h ) ) {\n\n\t\tcolor.__state.h = result.h;\n\n\t} else if ( Common.isUndefined( color.__state.h ) ) {\n\n\t\tcolor.__state.h = 0;\n\n\t}\n\n};\nColor.COMPONENTS = [ 'r', 'g', 'b', 'h', 's', 'v', 'hex', 'a' ];\ndefineRGBComponent( Color.prototype, 'r', 2 );\ndefineRGBComponent( Color.prototype, 'g', 1 );\ndefineRGBComponent( Color.prototype, 'b', 0 );\ndefineHSVComponent( Color.prototype, 'h' );\ndefineHSVComponent( Color.prototype, 's' );\ndefineHSVComponent( Color.prototype, 'v' );\nObject.defineProperty( Color.prototype, 'a', {\n\tget: function get$$1() {\n\n\t\treturn this.__state.a;\n\n\t},\n\tset: function set$$1( v ) {\n\n\t\tthis.__state.a = v;\n\n\t}\n} );\nObject.defineProperty( Color.prototype, 'hex', {\n\tget: function get$$1() {\n\n\t\tif ( this.__state.space !== 'HEX' ) {\n\n\t\t\tthis.__state.hex = ColorMath.rgb_to_hex( this.r, this.g, this.b );\n\t\t\tthis.__state.space = 'HEX';\n\n\t\t}\n\t\treturn this.__state.hex;\n\n\t},\n\tset: function set$$1( v ) {\n\n\t\tthis.__state.space = 'HEX';\n\t\tthis.__state.hex = v;\n\n\t}\n} );\n\nvar Controller = function () {\n\n\tfunction Controller( object, property ) {\n\n\t\tclassCallCheck( this, Controller );\n\t\tthis.initialValue = object[ property ];\n\t\tthis.domElement = document.createElement( 'div' );\n\t\tthis.object = object;\n\t\tthis.property = property;\n\t\tthis.__onChange = undefined;\n\t\tthis.__onFinishChange = undefined;\n\n\t}\n\tcreateClass( Controller, [ {\n\t\tkey: 'onChange',\n\t\tvalue: function onChange( fnc ) {\n\n\t\t\tthis.__onChange = fnc;\n\t\t\treturn this;\n\n\t\t}\n\t}, {\n\t\tkey: 'onFinishChange',\n\t\tvalue: function onFinishChange( fnc ) {\n\n\t\t\tthis.__onFinishChange = fnc;\n\t\t\treturn this;\n\n\t\t}\n\t}, {\n\t\tkey: 'setValue',\n\t\tvalue: function setValue( newValue ) {\n\n\t\t\tthis.object[ this.property ] = newValue;\n\t\t\tif ( this.__onChange ) {\n\n\t\t\t\tthis.__onChange.call( this, newValue );\n\n\t\t\t}\n\t\t\tthis.updateDisplay();\n\t\t\treturn this;\n\n\t\t}\n\t}, {\n\t\tkey: 'getValue',\n\t\tvalue: function getValue() {\n\n\t\t\treturn this.object[ this.property ];\n\n\t\t}\n\t}, {\n\t\tkey: 'updateDisplay',\n\t\tvalue: function updateDisplay() {\n\n\t\t\treturn this;\n\n\t\t}\n\t}, {\n\t\tkey: 'isModified',\n\t\tvalue: function isModified() {\n\n\t\t\treturn this.initialValue !== this.getValue();\n\n\t\t}\n\t} ] );\n\treturn Controller;\n\n}();\n\nvar EVENT_MAP = {\n\tHTMLEvents: [ 'change' ],\n\tMouseEvents: [ 'click', 'mousemove', 'mousedown', 'mouseup', 'mouseover' ],\n\tKeyboardEvents: [ 'keydown' ]\n};\nvar EVENT_MAP_INV = {};\nCommon.each( EVENT_MAP, function ( v, k ) {\n\n\tCommon.each( v, function ( e ) {\n\n\t\tEVENT_MAP_INV[ e ] = k;\n\n\t} );\n\n} );\nvar CSS_VALUE_PIXELS = /(\\d+(\\.\\d+)?)px/;\nfunction cssValueToPixels( val ) {\n\n\tif ( val === '0' || Common.isUndefined( val ) ) {\n\n\t\treturn 0;\n\n\t}\n\tvar match = val.match( CSS_VALUE_PIXELS );\n\tif ( ! Common.isNull( match ) ) {\n\n\t\treturn parseFloat( match[ 1 ] );\n\n\t}\n\treturn 0;\n\n}\nvar dom = {\n\tmakeSelectable: function makeSelectable( elem, selectable ) {\n\n\t\tif ( elem === undefined || elem.style === undefined ) return;\n\t\telem.onselectstart = selectable ? function () {\n\n\t\t\treturn false;\n\n\t\t} : function () {};\n\t\telem.style.MozUserSelect = selectable ? 'auto' : 'none';\n\t\telem.style.KhtmlUserSelect = selectable ? 'auto' : 'none';\n\t\telem.unselectable = selectable ? 'on' : 'off';\n\n\t},\n\tmakeFullscreen: function makeFullscreen( elem, hor, vert ) {\n\n\t\tvar vertical = vert;\n\t\tvar horizontal = hor;\n\t\tif ( Common.isUndefined( horizontal ) ) {\n\n\t\t\thorizontal = true;\n\n\t\t}\n\t\tif ( Common.isUndefined( vertical ) ) {\n\n\t\t\tvertical = true;\n\n\t\t}\n\t\telem.style.position = 'absolute';\n\t\tif ( horizontal ) {\n\n\t\t\telem.style.left = 0;\n\t\t\telem.style.right = 0;\n\n\t\t}\n\t\tif ( vertical ) {\n\n\t\t\telem.style.top = 0;\n\t\t\telem.style.bottom = 0;\n\n\t\t}\n\n\t},\n\tfakeEvent: function fakeEvent( elem, eventType, pars, aux ) {\n\n\t\tvar params = pars || {};\n\t\tvar className = EVENT_MAP_INV[ eventType ];\n\t\tif ( ! className ) {\n\n\t\t\tthrow new Error( 'Event type ' + eventType + ' not supported.' );\n\n\t\t}\n\t\tvar evt = document.createEvent( className );\n\t\tswitch ( className ) {\n\n\t\t\tcase 'MouseEvents':\n\t\t\t{\n\n\t\t\t\tvar clientX = params.x || params.clientX || 0;\n\t\t\t\tvar clientY = params.y || params.clientY || 0;\n\t\t\t\tevt.initMouseEvent( eventType, params.bubbles || false, params.cancelable || true, window, params.clickCount || 1, 0,\n\t\t\t\t\t0,\n\t\t\t\t\tclientX,\n\t\t\t\t\tclientY,\n\t\t\t\t\tfalse, false, false, false, 0, null );\n\t\t\t\tbreak;\n\n\t\t\t}\n\t\t\tcase 'KeyboardEvents':\n\t\t\t{\n\n\t\t\t\tvar init = evt.initKeyboardEvent || evt.initKeyEvent;\n\t\t\t\tCommon.defaults( params, {\n\t\t\t\t\tcancelable: true,\n\t\t\t\t\tctrlKey: false,\n\t\t\t\t\taltKey: false,\n\t\t\t\t\tshiftKey: false,\n\t\t\t\t\tmetaKey: false,\n\t\t\t\t\tkeyCode: undefined,\n\t\t\t\t\tcharCode: undefined\n\t\t\t\t} );\n\t\t\t\tinit( eventType, params.bubbles || false, params.cancelable, window, params.ctrlKey, params.altKey, params.shiftKey, params.metaKey, params.keyCode, params.charCode );\n\t\t\t\tbreak;\n\n\t\t\t}\n\t\t\tdefault:\n\t\t\t{\n\n\t\t\t\tevt.initEvent( eventType, params.bubbles || false, params.cancelable || true );\n\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\t\tCommon.defaults( evt, aux );\n\t\telem.dispatchEvent( evt );\n\n\t},\n\tbind: function bind( elem, event, func, newBool ) {\n\n\t\tvar bool = newBool || false;\n\t\tif ( elem.addEventListener ) {\n\n\t\t\telem.addEventListener( event, func, bool );\n\n\t\t} else if ( elem.attachEvent ) {\n\n\t\t\telem.attachEvent( 'on' + event, func );\n\n\t\t}\n\t\treturn dom;\n\n\t},\n\tunbind: function unbind( elem, event, func, newBool ) {\n\n\t\tvar bool = newBool || false;\n\t\tif ( elem.removeEventListener ) {\n\n\t\t\telem.removeEventListener( event, func, bool );\n\n\t\t} else if ( elem.detachEvent ) {\n\n\t\t\telem.detachEvent( 'on' + event, func );\n\n\t\t}\n\t\treturn dom;\n\n\t},\n\taddClass: function addClass( elem, className ) {\n\n\t\tif ( elem.className === undefined ) {\n\n\t\t\telem.className = className;\n\n\t\t} else if ( elem.className !== className ) {\n\n\t\t\tvar classes = elem.className.split( / +/ );\n\t\t\tif ( classes.indexOf( className ) === - 1 ) {\n\n\t\t\t\tclasses.push( className );\n\t\t\t\telem.className = classes.join( ' ' ).replace( /^\\s+/, '' ).replace( /\\s+$/, '' );\n\n\t\t\t}\n\n\t\t}\n\t\treturn dom;\n\n\t},\n\tremoveClass: function removeClass( elem, className ) {\n\n\t\tif ( className ) {\n\n\t\t\tif ( elem.className === className ) {\n\n\t\t\t\telem.removeAttribute( 'class' );\n\n\t\t\t} else {\n\n\t\t\t\tvar classes = elem.className.split( / +/ );\n\t\t\t\tvar index = classes.indexOf( className );\n\t\t\t\tif ( index !== - 1 ) {\n\n\t\t\t\t\tclasses.splice( index, 1 );\n\t\t\t\t\telem.className = classes.join( ' ' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\telem.className = undefined;\n\n\t\t}\n\t\treturn dom;\n\n\t},\n\thasClass: function hasClass( elem, className ) {\n\n\t\treturn new RegExp( '(?:^|\\\\s+)' + className + '(?:\\\\s+|$)' ).test( elem.className ) || false;\n\n\t},\n\tgetWidth: function getWidth( elem ) {\n\n\t\tvar style = getComputedStyle( elem );\n\t\treturn cssValueToPixels( style[ 'border-left-width' ] ) + cssValueToPixels( style[ 'border-right-width' ] ) + cssValueToPixels( style[ 'padding-left' ] ) + cssValueToPixels( style[ 'padding-right' ] ) + cssValueToPixels( style.width );\n\n\t},\n\tgetHeight: function getHeight( elem ) {\n\n\t\tvar style = getComputedStyle( elem );\n\t\treturn cssValueToPixels( style[ 'border-top-width' ] ) + cssValueToPixels( style[ 'border-bottom-width' ] ) + cssValueToPixels( style[ 'padding-top' ] ) + cssValueToPixels( style[ 'padding-bottom' ] ) + cssValueToPixels( style.height );\n\n\t},\n\tgetOffset: function getOffset( el ) {\n\n\t\tvar elem = el;\n\t\tvar offset = { left: 0, top: 0 };\n\t\tif ( elem.offsetParent ) {\n\n\t\t\tdo {\n\n\t\t\t\toffset.left += elem.offsetLeft;\n\t\t\t\toffset.top += elem.offsetTop;\n\t\t\t\telem = elem.offsetParent;\n\n\t\t\t} while ( elem );\n\n\t\t}\n\t\treturn offset;\n\n\t},\n\tisActive: function isActive( elem ) {\n\n\t\treturn elem === document.activeElement && ( elem.type || elem.href );\n\n\t}\n};\n\nvar BooleanController = function ( _Controller ) {\n\n\tinherits( BooleanController, _Controller );\n\tfunction BooleanController( object, property ) {\n\n\t\tclassCallCheck( this, BooleanController );\n\t\tvar _this2 = possibleConstructorReturn( this, ( BooleanController.__proto__ || Object.getPrototypeOf( BooleanController ) ).call( this, object, property ) );\n\t\tvar _this = _this2;\n\t\t_this2.__prev = _this2.getValue();\n\t\t_this2.__checkbox = document.createElement( 'input' );\n\t\t_this2.__checkbox.setAttribute( 'type', 'checkbox' );\n\t\tfunction onChange() {\n\n\t\t\t_this.setValue( ! _this.__prev );\n\n\t\t}\n\t\tdom.bind( _this2.__checkbox, 'change', onChange, false );\n\t\t_this2.domElement.appendChild( _this2.__checkbox );\n\t\t_this2.updateDisplay();\n\t\treturn _this2;\n\n\t}\n\tcreateClass( BooleanController, [ {\n\t\tkey: 'setValue',\n\t\tvalue: function setValue( v ) {\n\n\t\t\tvar toReturn = get( BooleanController.prototype.__proto__ || Object.getPrototypeOf( BooleanController.prototype ), 'setValue', this ).call( this, v );\n\t\t\tif ( this.__onFinishChange ) {\n\n\t\t\t\tthis.__onFinishChange.call( this, this.getValue() );\n\n\t\t\t}\n\t\t\tthis.__prev = this.getValue();\n\t\t\treturn toReturn;\n\n\t\t}\n\t}, {\n\t\tkey: 'updateDisplay',\n\t\tvalue: function updateDisplay() {\n\n\t\t\tif ( this.getValue() === true ) {\n\n\t\t\t\tthis.__checkbox.setAttribute( 'checked', 'checked' );\n\t\t\t\tthis.__checkbox.checked = true;\n\t\t\t\tthis.__prev = true;\n\n\t\t\t} else {\n\n\t\t\t\tthis.__checkbox.checked = false;\n\t\t\t\tthis.__prev = false;\n\n\t\t\t}\n\t\t\treturn get( BooleanController.prototype.__proto__ || Object.getPrototypeOf( BooleanController.prototype ), 'updateDisplay', this ).call( this );\n\n\t\t}\n\t} ] );\n\treturn BooleanController;\n\n}( Controller );\n\nvar OptionController = function ( _Controller ) {\n\n\tinherits( OptionController, _Controller );\n\tfunction OptionController( object, property, opts ) {\n\n\t\tclassCallCheck( this, OptionController );\n\t\tvar _this2 = possibleConstructorReturn( this, ( OptionController.__proto__ || Object.getPrototypeOf( OptionController ) ).call( this, object, property ) );\n\t\tvar options = opts;\n\t\tvar _this = _this2;\n\t\t_this2.__select = document.createElement( 'select' );\n\t\tif ( Common.isArray( options ) ) {\n\n\t\t\tvar map = {};\n\t\t\tCommon.each( options, function ( element ) {\n\n\t\t\t\tmap[ element ] = element;\n\n\t\t\t} );\n\t\t\toptions = map;\n\n\t\t}\n\t\tCommon.each( options, function ( value, key ) {\n\n\t\t\tvar opt = document.createElement( 'option' );\n\t\t\topt.innerHTML = key;\n\t\t\topt.setAttribute( 'value', value );\n\t\t\t_this.__select.appendChild( opt );\n\n\t\t} );\n\t\t_this2.updateDisplay();\n\t\tdom.bind( _this2.__select, 'change', function () {\n\n\t\t\tvar desiredValue = this.options[ this.selectedIndex ].value;\n\t\t\t_this.setValue( desiredValue );\n\n\t\t} );\n\t\t_this2.domElement.appendChild( _this2.__select );\n\t\treturn _this2;\n\n\t}\n\tcreateClass( OptionController, [ {\n\t\tkey: 'setValue',\n\t\tvalue: function setValue( v ) {\n\n\t\t\tvar toReturn = get( OptionController.prototype.__proto__ || Object.getPrototypeOf( OptionController.prototype ), 'setValue', this ).call( this, v );\n\t\t\tif ( this.__onFinishChange ) {\n\n\t\t\t\tthis.__onFinishChange.call( this, this.getValue() );\n\n\t\t\t}\n\t\t\treturn toReturn;\n\n\t\t}\n\t}, {\n\t\tkey: 'updateDisplay',\n\t\tvalue: function updateDisplay() {\n\n\t\t\tif ( dom.isActive( this.__select ) ) return this;\n\t\t\tthis.__select.value = this.getValue();\n\t\t\treturn get( OptionController.prototype.__proto__ || Object.getPrototypeOf( OptionController.prototype ), 'updateDisplay', this ).call( this );\n\n\t\t}\n\t} ] );\n\treturn OptionController;\n\n}( Controller );\n\nvar StringController = function ( _Controller ) {\n\n\tinherits( StringController, _Controller );\n\tfunction StringController( object, property ) {\n\n\t\tclassCallCheck( this, StringController );\n\t\tvar _this2 = possibleConstructorReturn( this, ( StringController.__proto__ || Object.getPrototypeOf( StringController ) ).call( this, object, property ) );\n\t\tvar _this = _this2;\n\t\tfunction onChange() {\n\n\t\t\t_this.setValue( _this.__input.value );\n\n\t\t}\n\t\tfunction onBlur() {\n\n\t\t\tif ( _this.__onFinishChange ) {\n\n\t\t\t\t_this.__onFinishChange.call( _this, _this.getValue() );\n\n\t\t\t}\n\n\t\t}\n\t\t_this2.__input = document.createElement( 'input' );\n\t\t_this2.__input.setAttribute( 'type', 'text' );\n\t\tdom.bind( _this2.__input, 'keyup', onChange );\n\t\tdom.bind( _this2.__input, 'change', onChange );\n\t\tdom.bind( _this2.__input, 'blur', onBlur );\n\t\tdom.bind( _this2.__input, 'keydown', function ( e ) {\n\n\t\t\tif ( e.keyCode === 13 ) {\n\n\t\t\t\tthis.blur();\n\n\t\t\t}\n\n\t\t} );\n\t\t_this2.updateDisplay();\n\t\t_this2.domElement.appendChild( _this2.__input );\n\t\treturn _this2;\n\n\t}\n\tcreateClass( StringController, [ {\n\t\tkey: 'updateDisplay',\n\t\tvalue: function updateDisplay() {\n\n\t\t\tif ( ! dom.isActive( this.__input ) ) {\n\n\t\t\t\tthis.__input.value = this.getValue();\n\n\t\t\t}\n\t\t\treturn get( StringController.prototype.__proto__ || Object.getPrototypeOf( StringController.prototype ), 'updateDisplay', this ).call( this );\n\n\t\t}\n\t} ] );\n\treturn StringController;\n\n}( Controller );\n\nfunction numDecimals( x ) {\n\n\tvar _x = x.toString();\n\tif ( _x.indexOf( '.' ) > - 1 ) {\n\n\t\treturn _x.length - _x.indexOf( '.' ) - 1;\n\n\t}\n\treturn 0;\n\n}\nvar NumberController = function ( _Controller ) {\n\n\tinherits( NumberController, _Controller );\n\tfunction NumberController( object, property, params ) {\n\n\t\tclassCallCheck( this, NumberController );\n\t\tvar _this = possibleConstructorReturn( this, ( NumberController.__proto__ || Object.getPrototypeOf( NumberController ) ).call( this, object, property ) );\n\t\tvar _params = params || {};\n\t\t_this.__min = _params.min;\n\t\t_this.__max = _params.max;\n\t\t_this.__step = _params.step;\n\t\tif ( Common.isUndefined( _this.__step ) ) {\n\n\t\t\tif ( _this.initialValue === 0 ) {\n\n\t\t\t\t_this.__impliedStep = 1;\n\n\t\t\t} else {\n\n\t\t\t\t_this.__impliedStep = Math.pow( 10, Math.floor( Math.log( Math.abs( _this.initialValue ) ) / Math.LN10 ) ) / 10;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t_this.__impliedStep = _this.__step;\n\n\t\t}\n\t\t_this.__precision = numDecimals( _this.__impliedStep );\n\t\treturn _this;\n\n\t}\n\tcreateClass( NumberController, [ {\n\t\tkey: 'setValue',\n\t\tvalue: function setValue( v ) {\n\n\t\t\tvar _v = v;\n\t\t\tif ( this.__min !== undefined && _v < this.__min ) {\n\n\t\t\t\t_v = this.__min;\n\n\t\t\t} else if ( this.__max !== undefined && _v > this.__max ) {\n\n\t\t\t\t_v = this.__max;\n\n\t\t\t}\n\t\t\tif ( this.__step !== undefined && _v % this.__step !== 0 ) {\n\n\t\t\t\t_v = Math.round( _v / this.__step ) * this.__step;\n\n\t\t\t}\n\t\t\treturn get( NumberController.prototype.__proto__ || Object.getPrototypeOf( NumberController.prototype ), 'setValue', this ).call( this, _v );\n\n\t\t}\n\t}, {\n\t\tkey: 'min',\n\t\tvalue: function min( minValue ) {\n\n\t\t\tthis.__min = minValue;\n\t\t\treturn this;\n\n\t\t}\n\t}, {\n\t\tkey: 'max',\n\t\tvalue: function max( maxValue ) {\n\n\t\t\tthis.__max = maxValue;\n\t\t\treturn this;\n\n\t\t}\n\t}, {\n\t\tkey: 'step',\n\t\tvalue: function step( stepValue ) {\n\n\t\t\tthis.__step = stepValue;\n\t\t\tthis.__impliedStep = stepValue;\n\t\t\tthis.__precision = numDecimals( stepValue );\n\t\t\treturn this;\n\n\t\t}\n\t} ] );\n\treturn NumberController;\n\n}( Controller );\n\nfunction roundToDecimal( value, decimals ) {\n\n\tvar tenTo = Math.pow( 10, decimals );\n\treturn Math.round( value * tenTo ) / tenTo;\n\n}\nvar NumberControllerBox = function ( _NumberController ) {\n\n\tinherits( NumberControllerBox, _NumberController );\n\tfunction NumberControllerBox( object, property, params ) {\n\n\t\tclassCallCheck( this, NumberControllerBox );\n\t\tvar _this2 = possibleConstructorReturn( this, ( NumberControllerBox.__proto__ || Object.getPrototypeOf( NumberControllerBox ) ).call( this, object, property, params ) );\n\t\t_this2.__truncationSuspended = false;\n\t\tvar _this = _this2;\n\t\tvar prevY = void 0;\n\t\tfunction onChange() {\n\n\t\t\tvar attempted = parseFloat( _this.__input.value );\n\t\t\tif ( ! Common.isNaN( attempted ) ) {\n\n\t\t\t\t_this.setValue( attempted );\n\n\t\t\t}\n\n\t\t}\n\t\tfunction onFinish() {\n\n\t\t\tif ( _this.__onFinishChange ) {\n\n\t\t\t\t_this.__onFinishChange.call( _this, _this.getValue() );\n\n\t\t\t}\n\n\t\t}\n\t\tfunction onBlur() {\n\n\t\t\tonFinish();\n\n\t\t}\n\t\tfunction onMouseDrag( e ) {\n\n\t\t\tvar diff = prevY - e.clientY;\n\t\t\t_this.setValue( _this.getValue() + diff * _this.__impliedStep );\n\t\t\tprevY = e.clientY;\n\n\t\t}\n\t\tfunction onMouseUp() {\n\n\t\t\tdom.unbind( window, 'mousemove', onMouseDrag );\n\t\t\tdom.unbind( window, 'mouseup', onMouseUp );\n\t\t\tonFinish();\n\n\t\t}\n\t\tfunction onMouseDown( e ) {\n\n\t\t\tdom.bind( window, 'mousemove', onMouseDrag );\n\t\t\tdom.bind( window, 'mouseup', onMouseUp );\n\t\t\tprevY = e.clientY;\n\n\t\t}\n\t\t_this2.__input = document.createElement( 'input' );\n\t\t_this2.__input.setAttribute( 'type', 'text' );\n\t\tdom.bind( _this2.__input, 'change', onChange );\n\t\tdom.bind( _this2.__input, 'blur', onBlur );\n\t\tdom.bind( _this2.__input, 'mousedown', onMouseDown );\n\t\tdom.bind( _this2.__input, 'keydown', function ( e ) {\n\n\t\t\tif ( e.keyCode === 13 ) {\n\n\t\t\t\t_this.__truncationSuspended = true;\n\t\t\t\tthis.blur();\n\t\t\t\t_this.__truncationSuspended = false;\n\t\t\t\tonFinish();\n\n\t\t\t}\n\n\t\t} );\n\t\t_this2.updateDisplay();\n\t\t_this2.domElement.appendChild( _this2.__input );\n\t\treturn _this2;\n\n\t}\n\tcreateClass( NumberControllerBox, [ {\n\t\tkey: 'updateDisplay',\n\t\tvalue: function updateDisplay() {\n\n\t\t\tthis.__input.value = this.__truncationSuspended ? this.getValue() : roundToDecimal( this.getValue(), this.__precision );\n\t\t\treturn get( NumberControllerBox.prototype.__proto__ || Object.getPrototypeOf( NumberControllerBox.prototype ), 'updateDisplay', this ).call( this );\n\n\t\t}\n\t} ] );\n\treturn NumberControllerBox;\n\n}( NumberController );\n\nfunction map( v, i1, i2, o1, o2 ) {\n\n\treturn o1 + ( o2 - o1 ) * ( ( v - i1 ) / ( i2 - i1 ) );\n\n}\nvar NumberControllerSlider = function ( _NumberController ) {\n\n\tinherits( NumberControllerSlider, _NumberController );\n\tfunction NumberControllerSlider( object, property, min, max, step ) {\n\n\t\tclassCallCheck( this, NumberControllerSlider );\n\t\tvar _this2 = possibleConstructorReturn( this, ( NumberControllerSlider.__proto__ || Object.getPrototypeOf( NumberControllerSlider ) ).call( this, object, property, { min: min, max: max, step: step } ) );\n\t\tvar _this = _this2;\n\t\t_this2.__background = document.createElement( 'div' );\n\t\t_this2.__foreground = document.createElement( 'div' );\n\t\tdom.bind( _this2.__background, 'mousedown', onMouseDown );\n\t\tdom.bind( _this2.__background, 'touchstart', onTouchStart );\n\t\tdom.addClass( _this2.__background, 'slider' );\n\t\tdom.addClass( _this2.__foreground, 'slider-fg' );\n\t\tfunction onMouseDown( e ) {\n\n\t\t\tdocument.activeElement.blur();\n\t\t\tdom.bind( window, 'mousemove', onMouseDrag );\n\t\t\tdom.bind( window, 'mouseup', onMouseUp );\n\t\t\tonMouseDrag( e );\n\n\t\t}\n\t\tfunction onMouseDrag( e ) {\n\n\t\t\te.preventDefault();\n\t\t\tvar bgRect = _this.__background.getBoundingClientRect();\n\t\t\t_this.setValue( map( e.clientX, bgRect.left, bgRect.right, _this.__min, _this.__max ) );\n\t\t\treturn false;\n\n\t\t}\n\t\tfunction onMouseUp() {\n\n\t\t\tdom.unbind( window, 'mousemove', onMouseDrag );\n\t\t\tdom.unbind( window, 'mouseup', onMouseUp );\n\t\t\tif ( _this.__onFinishChange ) {\n\n\t\t\t\t_this.__onFinishChange.call( _this, _this.getValue() );\n\n\t\t\t}\n\n\t\t}\n\t\tfunction onTouchStart( e ) {\n\n\t\t\tif ( e.touches.length !== 1 ) {\n\n\t\t\t\treturn;\n\n\t\t\t}\n\t\t\tdom.bind( window, 'touchmove', onTouchMove );\n\t\t\tdom.bind( window, 'touchend', onTouchEnd );\n\t\t\tonTouchMove( e );\n\n\t\t}\n\t\tfunction onTouchMove( e ) {\n\n\t\t\tvar clientX = e.touches[ 0 ].clientX;\n\t\t\tvar bgRect = _this.__background.getBoundingClientRect();\n\t\t\t_this.setValue( map( clientX, bgRect.left, bgRect.right, _this.__min, _this.__max ) );\n\n\t\t}\n\t\tfunction onTouchEnd() {\n\n\t\t\tdom.unbind( window, 'touchmove', onTouchMove );\n\t\t\tdom.unbind( window, 'touchend', onTouchEnd );\n\t\t\tif ( _this.__onFinishChange ) {\n\n\t\t\t\t_this.__onFinishChange.call( _this, _this.getValue() );\n\n\t\t\t}\n\n\t\t}\n\t\t_this2.updateDisplay();\n\t\t_this2.__background.appendChild( _this2.__foreground );\n\t\t_this2.domElement.appendChild( _this2.__background );\n\t\treturn _this2;\n\n\t}\n\tcreateClass( NumberControllerSlider, [ {\n\t\tkey: 'updateDisplay',\n\t\tvalue: function updateDisplay() {\n\n\t\t\tvar pct = ( this.getValue() - this.__min ) / ( this.__max - this.__min );\n\t\t\tthis.__foreground.style.width = pct * 100 + '%';\n\t\t\treturn get( NumberControllerSlider.prototype.__proto__ || Object.getPrototypeOf( NumberControllerSlider.prototype ), 'updateDisplay', this ).call( this );\n\n\t\t}\n\t} ] );\n\treturn NumberControllerSlider;\n\n}( NumberController );\n\nvar FunctionController = function ( _Controller ) {\n\n\tinherits( FunctionController, _Controller );\n\tfunction FunctionController( object, property, text ) {\n\n\t\tclassCallCheck( this, FunctionController );\n\t\tvar _this2 = possibleConstructorReturn( this, ( FunctionController.__proto__ || Object.getPrototypeOf( FunctionController ) ).call( this, object, property ) );\n\t\tvar _this = _this2;\n\t\t_this2.__button = document.createElement( 'div' );\n\t\t_this2.__button.innerHTML = text === undefined ? 'Fire' : text;\n\t\tdom.bind( _this2.__button, 'click', function ( e ) {\n\n\t\t\te.preventDefault();\n\t\t\t_this.fire();\n\t\t\treturn false;\n\n\t\t} );\n\t\tdom.addClass( _this2.__button, 'button' );\n\t\t_this2.domElement.appendChild( _this2.__button );\n\t\treturn _this2;\n\n\t}\n\tcreateClass( FunctionController, [ {\n\t\tkey: 'fire',\n\t\tvalue: function fire() {\n\n\t\t\tif ( this.__onChange ) {\n\n\t\t\t\tthis.__onChange.call( this );\n\n\t\t\t}\n\t\t\tthis.getValue().call( this.object );\n\t\t\tif ( this.__onFinishChange ) {\n\n\t\t\t\tthis.__onFinishChange.call( this, this.getValue() );\n\n\t\t\t}\n\n\t\t}\n\t} ] );\n\treturn FunctionController;\n\n}( Controller );\n\nvar ColorController = function ( _Controller ) {\n\n\tinherits( ColorController, _Controller );\n\tfunction ColorController( object, property ) {\n\n\t\tclassCallCheck( this, ColorController );\n\t\tvar _this2 = possibleConstructorReturn( this, ( ColorController.__proto__ || Object.getPrototypeOf( ColorController ) ).call( this, object, property ) );\n\t\t_this2.__color = new Color( _this2.getValue() );\n\t\t_this2.__temp = new Color( 0 );\n\t\tvar _this = _this2;\n\t\t_this2.domElement = document.createElement( 'div' );\n\t\tdom.makeSelectable( _this2.domElement, false );\n\t\t_this2.__selector = document.createElement( 'div' );\n\t\t_this2.__selector.className = 'selector';\n\t\t_this2.__saturation_field = document.createElement( 'div' );\n\t\t_this2.__saturation_field.className = 'saturation-field';\n\t\t_this2.__field_knob = document.createElement( 'div' );\n\t\t_this2.__field_knob.className = 'field-knob';\n\t\t_this2.__field_knob_border = '2px solid ';\n\t\t_this2.__hue_knob = document.createElement( 'div' );\n\t\t_this2.__hue_knob.className = 'hue-knob';\n\t\t_this2.__hue_field = document.createElement( 'div' );\n\t\t_this2.__hue_field.className = 'hue-field';\n\t\t_this2.__input = document.createElement( 'input' );\n\t\t_this2.__input.type = 'text';\n\t\t_this2.__input_textShadow = '0 1px 1px ';\n\t\tdom.bind( _this2.__input, 'keydown', function ( e ) {\n\n\t\t\tif ( e.keyCode === 13 ) {\n\n\t\t\t\tonBlur.call( this );\n\n\t\t\t}\n\n\t\t} );\n\t\tdom.bind( _this2.__input, 'blur', onBlur );\n\t\tdom.bind( _this2.__selector, 'mousedown', function () {\n\n\t\t\tdom.addClass( this, 'drag' ).bind( window, 'mouseup', function () {\n\n\t\t\t\tdom.removeClass( _this.__selector, 'drag' );\n\n\t\t\t} );\n\n\t\t} );\n\t\tdom.bind( _this2.__selector, 'touchstart', function () {\n\n\t\t\tdom.addClass( this, 'drag' ).bind( window, 'touchend', function () {\n\n\t\t\t\tdom.removeClass( _this.__selector, 'drag' );\n\n\t\t\t} );\n\n\t\t} );\n\t\tvar valueField = document.createElement( 'div' );\n\t\tCommon.extend( _this2.__selector.style, {\n\t\t\twidth: '122px',\n\t\t\theight: '102px',\n\t\t\tpadding: '3px',\n\t\t\tbackgroundColor: '#222',\n\t\t\tboxShadow: '0px 1px 3px rgba(0,0,0,0.3)'\n\t\t} );\n\t\tCommon.extend( _this2.__field_knob.style, {\n\t\t\tposition: 'absolute',\n\t\t\twidth: '12px',\n\t\t\theight: '12px',\n\t\t\tborder: _this2.__field_knob_border + ( _this2.__color.v < 0.5 ? '#fff' : '#000' ),\n\t\t\tboxShadow: '0px 1px 3px rgba(0,0,0,0.5)',\n\t\t\tborderRadius: '12px',\n\t\t\tzIndex: 1\n\t\t} );\n\t\tCommon.extend( _this2.__hue_knob.style, {\n\t\t\tposition: 'absolute',\n\t\t\twidth: '15px',\n\t\t\theight: '2px',\n\t\t\tborderRight: '4px solid #fff',\n\t\t\tzIndex: 1\n\t\t} );\n\t\tCommon.extend( _this2.__saturation_field.style, {\n\t\t\twidth: '100px',\n\t\t\theight: '100px',\n\t\t\tborder: '1px solid #555',\n\t\t\tmarginRight: '3px',\n\t\t\tdisplay: 'inline-block',\n\t\t\tcursor: 'pointer'\n\t\t} );\n\t\tCommon.extend( valueField.style, {\n\t\t\twidth: '100%',\n\t\t\theight: '100%',\n\t\t\tbackground: 'none'\n\t\t} );\n\t\tlinearGradient( valueField, 'top', 'rgba(0,0,0,0)', '#000' );\n\t\tCommon.extend( _this2.__hue_field.style, {\n\t\t\twidth: '15px',\n\t\t\theight: '100px',\n\t\t\tborder: '1px solid #555',\n\t\t\tcursor: 'ns-resize',\n\t\t\tposition: 'absolute',\n\t\t\ttop: '3px',\n\t\t\tright: '3px'\n\t\t} );\n\t\thueGradient( _this2.__hue_field );\n\t\tCommon.extend( _this2.__input.style, {\n\t\t\toutline: 'none',\n\t\t\ttextAlign: 'center',\n\t\t\tcolor: '#fff',\n\t\t\tborder: 0,\n\t\t\tfontWeight: 'bold',\n\t\t\ttextShadow: _this2.__input_textShadow + 'rgba(0,0,0,0.7)'\n\t\t} );\n\t\tdom.bind( _this2.__saturation_field, 'mousedown', fieldDown );\n\t\tdom.bind( _this2.__saturation_field, 'touchstart', fieldDown );\n\t\tdom.bind( _this2.__field_knob, 'mousedown', fieldDown );\n\t\tdom.bind( _this2.__field_knob, 'touchstart', fieldDown );\n\t\tdom.bind( _this2.__hue_field, 'mousedown', fieldDownH );\n\t\tdom.bind( _this2.__hue_field, 'touchstart', fieldDownH );\n\t\tfunction fieldDown( e ) {\n\n\t\t\tsetSV( e );\n\t\t\tdom.bind( window, 'mousemove', setSV );\n\t\t\tdom.bind( window, 'touchmove', setSV );\n\t\t\tdom.bind( window, 'mouseup', fieldUpSV );\n\t\t\tdom.bind( window, 'touchend', fieldUpSV );\n\n\t\t}\n\t\tfunction fieldDownH( e ) {\n\n\t\t\tsetH( e );\n\t\t\tdom.bind( window, 'mousemove', setH );\n\t\t\tdom.bind( window, 'touchmove', setH );\n\t\t\tdom.bind( window, 'mouseup', fieldUpH );\n\t\t\tdom.bind( window, 'touchend', fieldUpH );\n\n\t\t}\n\t\tfunction fieldUpSV() {\n\n\t\t\tdom.unbind( window, 'mousemove', setSV );\n\t\t\tdom.unbind( window, 'touchmove', setSV );\n\t\t\tdom.unbind( window, 'mouseup', fieldUpSV );\n\t\t\tdom.unbind( window, 'touchend', fieldUpSV );\n\t\t\tonFinish();\n\n\t\t}\n\t\tfunction fieldUpH() {\n\n\t\t\tdom.unbind( window, 'mousemove', setH );\n\t\t\tdom.unbind( window, 'touchmove', setH );\n\t\t\tdom.unbind( window, 'mouseup', fieldUpH );\n\t\t\tdom.unbind( window, 'touchend', fieldUpH );\n\t\t\tonFinish();\n\n\t\t}\n\t\tfunction onBlur() {\n\n\t\t\tvar i = interpret( this.value );\n\t\t\tif ( i !== false ) {\n\n\t\t\t\t_this.__color.__state = i;\n\t\t\t\t_this.setValue( _this.__color.toOriginal() );\n\n\t\t\t} else {\n\n\t\t\t\tthis.value = _this.__color.toString();\n\n\t\t\t}\n\n\t\t}\n\t\tfunction onFinish() {\n\n\t\t\tif ( _this.__onFinishChange ) {\n\n\t\t\t\t_this.__onFinishChange.call( _this, _this.__color.toOriginal() );\n\n\t\t\t}\n\n\t\t}\n\t\t_this2.__saturation_field.appendChild( valueField );\n\t\t_this2.__selector.appendChild( _this2.__field_knob );\n\t\t_this2.__selector.appendChild( _this2.__saturation_field );\n\t\t_this2.__selector.appendChild( _this2.__hue_field );\n\t\t_this2.__hue_field.appendChild( _this2.__hue_knob );\n\t\t_this2.domElement.appendChild( _this2.__input );\n\t\t_this2.domElement.appendChild( _this2.__selector );\n\t\t_this2.updateDisplay();\n\t\tfunction setSV( e ) {\n\n\t\t\tif ( e.type.indexOf( 'touch' ) === - 1 ) {\n\n\t\t\t\te.preventDefault();\n\n\t\t\t}\n\t\t\tvar fieldRect = _this.__saturation_field.getBoundingClientRect();\n\t\t\tvar _ref = e.touches && e.touches[ 0 ] || e,\n\t\t\t\tclientX = _ref.clientX,\n\t\t\t\tclientY = _ref.clientY;\n\t\t\tvar s = ( clientX - fieldRect.left ) / ( fieldRect.right - fieldRect.left );\n\t\t\tvar v = 1 - ( clientY - fieldRect.top ) / ( fieldRect.bottom - fieldRect.top );\n\t\t\tif ( v > 1 ) {\n\n\t\t\t\tv = 1;\n\n\t\t\t} else if ( v < 0 ) {\n\n\t\t\t\tv = 0;\n\n\t\t\t}\n\t\t\tif ( s > 1 ) {\n\n\t\t\t\ts = 1;\n\n\t\t\t} else if ( s < 0 ) {\n\n\t\t\t\ts = 0;\n\n\t\t\t}\n\t\t\t_this.__color.v = v;\n\t\t\t_this.__color.s = s;\n\t\t\t_this.setValue( _this.__color.toOriginal() );\n\t\t\treturn false;\n\n\t\t}\n\t\tfunction setH( e ) {\n\n\t\t\tif ( e.type.indexOf( 'touch' ) === - 1 ) {\n\n\t\t\t\te.preventDefault();\n\n\t\t\t}\n\t\t\tvar fieldRect = _this.__hue_field.getBoundingClientRect();\n\t\t\tvar _ref2 = e.touches && e.touches[ 0 ] || e,\n\t\t\t\tclientY = _ref2.clientY;\n\t\t\tvar h = 1 - ( clientY - fieldRect.top ) / ( fieldRect.bottom - fieldRect.top );\n\t\t\tif ( h > 1 ) {\n\n\t\t\t\th = 1;\n\n\t\t\t} else if ( h < 0 ) {\n\n\t\t\t\th = 0;\n\n\t\t\t}\n\t\t\t_this.__color.h = h * 360;\n\t\t\t_this.setValue( _this.__color.toOriginal() );\n\t\t\treturn false;\n\n\t\t}\n\t\treturn _this2;\n\n\t}\n\tcreateClass( ColorController, [ {\n\t\tkey: 'updateDisplay',\n\t\tvalue: function updateDisplay() {\n\n\t\t\tvar i = interpret( this.getValue() );\n\t\t\tif ( i !== false ) {\n\n\t\t\t\tvar mismatch = false;\n\t\t\t\tCommon.each( Color.COMPONENTS, function ( component ) {\n\n\t\t\t\t\tif ( ! Common.isUndefined( i[ component ] ) && ! Common.isUndefined( this.__color.__state[ component ] ) && i[ component ] !== this.__color.__state[ component ] ) {\n\n\t\t\t\t\t\tmismatch = true;\n\t\t\t\t\t\treturn {};\n\n\t\t\t\t\t}\n\n\t\t\t\t}, this );\n\t\t\t\tif ( mismatch ) {\n\n\t\t\t\t\tCommon.extend( this.__color.__state, i );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t\tCommon.extend( this.__temp.__state, this.__color.__state );\n\t\t\tthis.__temp.a = 1;\n\t\t\tvar flip = this.__color.v < 0.5 || this.__color.s > 0.5 ? 255 : 0;\n\t\t\tvar _flip = 255 - flip;\n\t\t\tCommon.extend( this.__field_knob.style, {\n\t\t\t\tmarginLeft: 100 * this.__color.s - 7 + 'px',\n\t\t\t\tmarginTop: 100 * ( 1 - this.__color.v ) - 7 + 'px',\n\t\t\t\tbackgroundColor: this.__temp.toHexString(),\n\t\t\t\tborder: this.__field_knob_border + 'rgb(' + flip + ',' + flip + ',' + flip + ')'\n\t\t\t} );\n\t\t\tthis.__hue_knob.style.marginTop = ( 1 - this.__color.h / 360 ) * 100 + 'px';\n\t\t\tthis.__temp.s = 1;\n\t\t\tthis.__temp.v = 1;\n\t\t\tlinearGradient( this.__saturation_field, 'left', '#fff', this.__temp.toHexString() );\n\t\t\tthis.__input.value = this.__color.toString();\n\t\t\tCommon.extend( this.__input.style, {\n\t\t\t\tbackgroundColor: this.__color.toHexString(),\n\t\t\t\tcolor: 'rgb(' + flip + ',' + flip + ',' + flip + ')',\n\t\t\t\ttextShadow: this.__input_textShadow + 'rgba(' + _flip + ',' + _flip + ',' + _flip + ',.7)'\n\t\t\t} );\n\n\t\t}\n\t} ] );\n\treturn ColorController;\n\n}( Controller );\nvar vendors = [ '-moz-', '-o-', '-webkit-', '-ms-', '' ];\nfunction linearGradient( elem, x, a, b ) {\n\n\telem.style.background = '';\n\tCommon.each( vendors, function ( vendor ) {\n\n\t\telem.style.cssText += 'background: ' + vendor + 'linear-gradient(' + x + ', ' + a + ' 0%, ' + b + ' 100%); ';\n\n\t} );\n\n}\nfunction hueGradient( elem ) {\n\n\telem.style.background = '';\n\telem.style.cssText += 'background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);';\n\telem.style.cssText += 'background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);';\n\telem.style.cssText += 'background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);';\n\telem.style.cssText += 'background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);';\n\telem.style.cssText += 'background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);';\n\n}\n\nvar css = {\n\tload: function load( url, indoc ) {\n\n\t\tvar doc = indoc || document;\n\t\tvar link = doc.createElement( 'link' );\n\t\tlink.type = 'text/css';\n\t\tlink.rel = 'stylesheet';\n\t\tlink.href = url;\n\t\tdoc.getElementsByTagName( 'head' )[ 0 ].appendChild( link );\n\n\t},\n\tinject: function inject( cssContent, indoc ) {\n\n\t\tvar doc = indoc || document;\n\t\tvar injected = document.createElement( 'style' );\n\t\tinjected.type = 'text/css';\n\t\tinjected.innerHTML = cssContent;\n\t\tvar head = doc.getElementsByTagName( 'head' )[ 0 ];\n\t\ttry {\n\n\t\t\thead.appendChild( injected );\n\n\t\t} catch ( e ) {\n\t\t}\n\n\t}\n};\n\nvar saveDialogContents = \"<div id=\\\"dg-save\\\" class=\\\"dg dialogue\\\">\\n\\n  Here's the new load parameter for your <code>GUI</code>'s constructor:\\n\\n  <textarea id=\\\"dg-new-constructor\\\"></textarea>\\n\\n  <div id=\\\"dg-save-locally\\\">\\n\\n    <input id=\\\"dg-local-storage\\\" type=\\\"checkbox\\\"/> Automatically save\\n    values to <code>localStorage</code> on exit.\\n\\n    <div id=\\\"dg-local-explain\\\">The values saved to <code>localStorage</code> will\\n      override those passed to <code>dat.GUI</code>'s constructor. This makes it\\n      easier to work incrementally, but <code>localStorage</code> is fragile,\\n      and your friends may not see the same values you do.\\n\\n    </div>\\n\\n  </div>\\n\\n</div>\";\n\nvar ControllerFactory = function ControllerFactory( object, property ) {\n\n\tvar initialValue = object[ property ];\n\tif ( Common.isArray( arguments[ 2 ] ) || Common.isObject( arguments[ 2 ] ) ) {\n\n\t\treturn new OptionController( object, property, arguments[ 2 ] );\n\n\t}\n\tif ( Common.isNumber( initialValue ) ) {\n\n\t\tif ( Common.isNumber( arguments[ 2 ] ) && Common.isNumber( arguments[ 3 ] ) ) {\n\n\t\t\tif ( Common.isNumber( arguments[ 4 ] ) ) {\n\n\t\t\t\treturn new NumberControllerSlider( object, property, arguments[ 2 ], arguments[ 3 ], arguments[ 4 ] );\n\n\t\t\t}\n\t\t\treturn new NumberControllerSlider( object, property, arguments[ 2 ], arguments[ 3 ] );\n\n\t\t}\n\t\tif ( Common.isNumber( arguments[ 4 ] ) ) {\n\n\t\t\treturn new NumberControllerBox( object, property, { min: arguments[ 2 ], max: arguments[ 3 ], step: arguments[ 4 ] } );\n\n\t\t}\n\t\treturn new NumberControllerBox( object, property, { min: arguments[ 2 ], max: arguments[ 3 ] } );\n\n\t}\n\tif ( Common.isString( initialValue ) ) {\n\n\t\treturn new StringController( object, property );\n\n\t}\n\tif ( Common.isFunction( initialValue ) ) {\n\n\t\treturn new FunctionController( object, property, '' );\n\n\t}\n\tif ( Common.isBoolean( initialValue ) ) {\n\n\t\treturn new BooleanController( object, property );\n\n\t}\n\treturn null;\n\n};\n\nfunction requestAnimationFrame( callback ) {\n\n\tsetTimeout( callback, 1000 / 60 );\n\n}\nvar requestAnimationFrame$1 = window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame || requestAnimationFrame;\n\nvar CenteredDiv = function () {\n\n\tfunction CenteredDiv() {\n\n\t\tclassCallCheck( this, CenteredDiv );\n\t\tthis.backgroundElement = document.createElement( 'div' );\n\t\tCommon.extend( this.backgroundElement.style, {\n\t\t\tbackgroundColor: 'rgba(0,0,0,0.8)',\n\t\t\ttop: 0,\n\t\t\tleft: 0,\n\t\t\tdisplay: 'none',\n\t\t\tzIndex: '1000',\n\t\t\topacity: 0,\n\t\t\tWebkitTransition: 'opacity 0.2s linear',\n\t\t\ttransition: 'opacity 0.2s linear'\n\t\t} );\n\t\tdom.makeFullscreen( this.backgroundElement );\n\t\tthis.backgroundElement.style.position = 'fixed';\n\t\tthis.domElement = document.createElement( 'div' );\n\t\tCommon.extend( this.domElement.style, {\n\t\t\tposition: 'fixed',\n\t\t\tdisplay: 'none',\n\t\t\tzIndex: '1001',\n\t\t\topacity: 0,\n\t\t\tWebkitTransition: '-webkit-transform 0.2s ease-out, opacity 0.2s linear',\n\t\t\ttransition: 'transform 0.2s ease-out, opacity 0.2s linear'\n\t\t} );\n\t\tdocument.body.appendChild( this.backgroundElement );\n\t\tdocument.body.appendChild( this.domElement );\n\t\tvar _this = this;\n\t\tdom.bind( this.backgroundElement, 'click', function () {\n\n\t\t\t_this.hide();\n\n\t\t} );\n\n\t}\n\tcreateClass( CenteredDiv, [ {\n\t\tkey: 'show',\n\t\tvalue: function show() {\n\n\t\t\tvar _this = this;\n\t\t\tthis.backgroundElement.style.display = 'block';\n\t\t\tthis.domElement.style.display = 'block';\n\t\t\tthis.domElement.style.opacity = 0;\n\t\t\tthis.domElement.style.webkitTransform = 'scale(1.1)';\n\t\t\tthis.layout();\n\t\t\tCommon.defer( function () {\n\n\t\t\t\t_this.backgroundElement.style.opacity = 1;\n\t\t\t\t_this.domElement.style.opacity = 1;\n\t\t\t\t_this.domElement.style.webkitTransform = 'scale(1)';\n\n\t\t\t} );\n\n\t\t}\n\t}, {\n\t\tkey: 'hide',\n\t\tvalue: function hide() {\n\n\t\t\tvar _this = this;\n\t\t\tvar hide = function hide() {\n\n\t\t\t\t_this.domElement.style.display = 'none';\n\t\t\t\t_this.backgroundElement.style.display = 'none';\n\t\t\t\tdom.unbind( _this.domElement, 'webkitTransitionEnd', hide );\n\t\t\t\tdom.unbind( _this.domElement, 'transitionend', hide );\n\t\t\t\tdom.unbind( _this.domElement, 'oTransitionEnd', hide );\n\n\t\t\t};\n\t\t\tdom.bind( this.domElement, 'webkitTransitionEnd', hide );\n\t\t\tdom.bind( this.domElement, 'transitionend', hide );\n\t\t\tdom.bind( this.domElement, 'oTransitionEnd', hide );\n\t\t\tthis.backgroundElement.style.opacity = 0;\n\t\t\tthis.domElement.style.opacity = 0;\n\t\t\tthis.domElement.style.webkitTransform = 'scale(1.1)';\n\n\t\t}\n\t}, {\n\t\tkey: 'layout',\n\t\tvalue: function layout() {\n\n\t\t\tthis.domElement.style.left = window.innerWidth / 2 - dom.getWidth( this.domElement ) / 2 + 'px';\n\t\t\tthis.domElement.style.top = window.innerHeight / 2 - dom.getHeight( this.domElement ) / 2 + 'px';\n\n\t\t}\n\t} ] );\n\treturn CenteredDiv;\n\n}();\n\nvar styleSheet = ___$insertStyle( \".dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1 !important}.dg.main:hover .close-button,.dg.main .close-button.drag{opacity:1}.dg.main .close-button{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear;border:0;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button.close-top{position:relative}.dg.main .close-button.close-bottom{position:absolute}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-y:visible}.dg.a.has-save>ul.close-top{margin-top:0}.dg.a.has-save>ul.close-bottom{margin-top:27px}.dg.a.has-save>ul.closed{margin-top:0}.dg.a .save-row{top:0;z-index:1002}.dg.a .save-row.close-top{position:relative}.dg.a .save-row.close-bottom{position:fixed}.dg li{-webkit-transition:height .1s ease-out;-o-transition:height .1s ease-out;-moz-transition:height .1s ease-out;transition:height .1s ease-out;-webkit-transition:overflow .1s linear;-o-transition:overflow .1s linear;-moz-transition:overflow .1s linear;transition:overflow .1s linear}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid rgba(0,0,0,0)}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li>*{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px;overflow:hidden}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .c{float:left;width:60%;position:relative}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:7px}.dg .c select{margin-top:5px}.dg .cr.function,.dg .cr.function .property-name,.dg .cr.function *,.dg .cr.boolean,.dg .cr.boolean *{cursor:pointer}.dg .cr.color{overflow:visible}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0px 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco, monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px 'Lucida Grande', sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px 4px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid rgba(255,255,255,0.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.color{border-left:3px solid}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2FA1D6}.dg .cr.number input[type=text]{color:#2FA1D6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.function:hover,.dg .cr.boolean:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2FA1D6;max-width:100%}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}\\n\" );\n\ncss.inject( styleSheet );\nvar CSS_NAMESPACE = 'dg';\nvar HIDE_KEY_CODE = 72;\nvar CLOSE_BUTTON_HEIGHT = 20;\nvar DEFAULT_DEFAULT_PRESET_NAME = 'Default';\nvar SUPPORTS_LOCAL_STORAGE = function () {\n\n\ttry {\n\n\t\treturn !! window.localStorage;\n\n\t} catch ( e ) {\n\n\t\treturn false;\n\n\t}\n\n}();\nvar SAVE_DIALOGUE = void 0;\nvar autoPlaceVirgin = true;\nvar autoPlaceContainer = void 0;\nvar hide = false;\nvar hideableGuis = [];\nvar GUI = function GUI( pars ) {\n\n\tvar _this = this;\n\tvar params = pars || {};\n\tthis.domElement = document.createElement( 'div' );\n\tthis.__ul = document.createElement( 'ul' );\n\tthis.domElement.appendChild( this.__ul );\n\tdom.addClass( this.domElement, CSS_NAMESPACE );\n\tthis.__folders = {};\n\tthis.__controllers = [];\n\tthis.__rememberedObjects = [];\n\tthis.__rememberedObjectIndecesToControllers = [];\n\tthis.__listening = [];\n\tparams = Common.defaults( params, {\n\t\tcloseOnTop: false,\n\t\tautoPlace: true,\n\t\twidth: GUI.DEFAULT_WIDTH\n\t} );\n\tparams = Common.defaults( params, {\n\t\tresizable: params.autoPlace,\n\t\thideable: params.autoPlace\n\t} );\n\tif ( ! Common.isUndefined( params.load ) ) {\n\n\t\tif ( params.preset ) {\n\n\t\t\tparams.load.preset = params.preset;\n\n\t\t}\n\n\t} else {\n\n\t\tparams.load = { preset: DEFAULT_DEFAULT_PRESET_NAME };\n\n\t}\n\tif ( Common.isUndefined( params.parent ) && params.hideable ) {\n\n\t\thideableGuis.push( this );\n\n\t}\n\tparams.resizable = Common.isUndefined( params.parent ) && params.resizable;\n\tif ( params.autoPlace && Common.isUndefined( params.scrollable ) ) {\n\n\t\tparams.scrollable = true;\n\n\t}\n\tvar useLocalStorage = SUPPORTS_LOCAL_STORAGE && localStorage.getItem( getLocalStorageHash( this, 'isLocal' ) ) === 'true';\n\tvar saveToLocalStorage = void 0;\n\tvar titleRow = void 0;\n\tObject.defineProperties( this,\n\t\t{\n\t\t\tparent: {\n\t\t\t\tget: function get$$1() {\n\n\t\t\t\t\treturn params.parent;\n\n\t\t\t\t}\n\t\t\t},\n\t\t\tscrollable: {\n\t\t\t\tget: function get$$1() {\n\n\t\t\t\t\treturn params.scrollable;\n\n\t\t\t\t}\n\t\t\t},\n\t\t\tautoPlace: {\n\t\t\t\tget: function get$$1() {\n\n\t\t\t\t\treturn params.autoPlace;\n\n\t\t\t\t}\n\t\t\t},\n\t\t\tcloseOnTop: {\n\t\t\t\tget: function get$$1() {\n\n\t\t\t\t\treturn params.closeOnTop;\n\n\t\t\t\t}\n\t\t\t},\n\t\t\tpreset: {\n\t\t\t\tget: function get$$1() {\n\n\t\t\t\t\tif ( _this.parent ) {\n\n\t\t\t\t\t\treturn _this.getRoot().preset;\n\n\t\t\t\t\t}\n\t\t\t\t\treturn params.load.preset;\n\n\t\t\t\t},\n\t\t\t\tset: function set$$1( v ) {\n\n\t\t\t\t\tif ( _this.parent ) {\n\n\t\t\t\t\t\t_this.getRoot().preset = v;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tparams.load.preset = v;\n\n\t\t\t\t\t}\n\t\t\t\t\tsetPresetSelectIndex( this );\n\t\t\t\t\t_this.revert();\n\n\t\t\t\t}\n\t\t\t},\n\t\t\twidth: {\n\t\t\t\tget: function get$$1() {\n\n\t\t\t\t\treturn params.width;\n\n\t\t\t\t},\n\t\t\t\tset: function set$$1( v ) {\n\n\t\t\t\t\tparams.width = v;\n\t\t\t\t\tsetWidth( _this, v );\n\n\t\t\t\t}\n\t\t\t},\n\t\t\tname: {\n\t\t\t\tget: function get$$1() {\n\n\t\t\t\t\treturn params.name;\n\n\t\t\t\t},\n\t\t\t\tset: function set$$1( v ) {\n\n\t\t\t\t\tparams.name = v;\n\t\t\t\t\tif ( titleRow ) {\n\n\t\t\t\t\t\ttitleRow.innerHTML = params.name;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t},\n\t\t\tclosed: {\n\t\t\t\tget: function get$$1() {\n\n\t\t\t\t\treturn params.closed;\n\n\t\t\t\t},\n\t\t\t\tset: function set$$1( v ) {\n\n\t\t\t\t\tparams.closed = v;\n\t\t\t\t\tif ( params.closed ) {\n\n\t\t\t\t\t\tdom.addClass( _this.__ul, GUI.CLASS_CLOSED );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tdom.removeClass( _this.__ul, GUI.CLASS_CLOSED );\n\n\t\t\t\t\t}\n\t\t\t\t\tthis.onResize();\n\t\t\t\t\tif ( _this.__closeButton ) {\n\n\t\t\t\t\t\t_this.__closeButton.innerHTML = v ? GUI.TEXT_OPEN : GUI.TEXT_CLOSED;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t},\n\t\t\tload: {\n\t\t\t\tget: function get$$1() {\n\n\t\t\t\t\treturn params.load;\n\n\t\t\t\t}\n\t\t\t},\n\t\t\tuseLocalStorage: {\n\t\t\t\tget: function get$$1() {\n\n\t\t\t\t\treturn useLocalStorage;\n\n\t\t\t\t},\n\t\t\t\tset: function set$$1( bool ) {\n\n\t\t\t\t\tif ( SUPPORTS_LOCAL_STORAGE ) {\n\n\t\t\t\t\t\tuseLocalStorage = bool;\n\t\t\t\t\t\tif ( bool ) {\n\n\t\t\t\t\t\t\tdom.bind( window, 'unload', saveToLocalStorage );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tdom.unbind( window, 'unload', saveToLocalStorage );\n\n\t\t\t\t\t\t}\n\t\t\t\t\t\tlocalStorage.setItem( getLocalStorageHash( _this, 'isLocal' ), bool );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\tif ( Common.isUndefined( params.parent ) ) {\n\n\t\tthis.closed = params.closed || false;\n\t\tdom.addClass( this.domElement, GUI.CLASS_MAIN );\n\t\tdom.makeSelectable( this.domElement, false );\n\t\tif ( SUPPORTS_LOCAL_STORAGE ) {\n\n\t\t\tif ( useLocalStorage ) {\n\n\t\t\t\t_this.useLocalStorage = true;\n\t\t\t\tvar savedGui = localStorage.getItem( getLocalStorageHash( this, 'gui' ) );\n\t\t\t\tif ( savedGui ) {\n\n\t\t\t\t\tparams.load = JSON.parse( savedGui );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\t\tthis.__closeButton = document.createElement( 'div' );\n\t\tthis.__closeButton.innerHTML = GUI.TEXT_CLOSED;\n\t\tdom.addClass( this.__closeButton, GUI.CLASS_CLOSE_BUTTON );\n\t\tif ( params.closeOnTop ) {\n\n\t\t\tdom.addClass( this.__closeButton, GUI.CLASS_CLOSE_TOP );\n\t\t\tthis.domElement.insertBefore( this.__closeButton, this.domElement.childNodes[ 0 ] );\n\n\t\t} else {\n\n\t\t\tdom.addClass( this.__closeButton, GUI.CLASS_CLOSE_BOTTOM );\n\t\t\tthis.domElement.appendChild( this.__closeButton );\n\n\t\t}\n\t\tdom.bind( this.__closeButton, 'click', function () {\n\n\t\t\t_this.closed = ! _this.closed;\n\n\t\t} );\n\n\t} else {\n\n\t\tif ( params.closed === undefined ) {\n\n\t\t\tparams.closed = true;\n\n\t\t}\n\t\tvar titleRowName = document.createTextNode( params.name );\n\t\tdom.addClass( titleRowName, 'controller-name' );\n\t\ttitleRow = addRow( _this, titleRowName );\n\t\tvar onClickTitle = function onClickTitle( e ) {\n\n\t\t\te.preventDefault();\n\t\t\t_this.closed = ! _this.closed;\n\t\t\treturn false;\n\n\t\t};\n\t\tdom.addClass( this.__ul, GUI.CLASS_CLOSED );\n\t\tdom.addClass( titleRow, 'title' );\n\t\tdom.bind( titleRow, 'click', onClickTitle );\n\t\tif ( ! params.closed ) {\n\n\t\t\tthis.closed = false;\n\n\t\t}\n\n\t}\n\tif ( params.autoPlace ) {\n\n\t\tif ( Common.isUndefined( params.parent ) ) {\n\n\t\t\tif ( autoPlaceVirgin ) {\n\n\t\t\t\tautoPlaceContainer = document.createElement( 'div' );\n\t\t\t\tdom.addClass( autoPlaceContainer, CSS_NAMESPACE );\n\t\t\t\tdom.addClass( autoPlaceContainer, GUI.CLASS_AUTO_PLACE_CONTAINER );\n\t\t\t\tdocument.body.appendChild( autoPlaceContainer );\n\t\t\t\tautoPlaceVirgin = false;\n\n\t\t\t}\n\t\t\tautoPlaceContainer.appendChild( this.domElement );\n\t\t\tdom.addClass( this.domElement, GUI.CLASS_AUTO_PLACE );\n\n\t\t}\n\t\tif ( ! this.parent ) {\n\n\t\t\tsetWidth( _this, params.width );\n\n\t\t}\n\n\t}\n\tthis.__resizeHandler = function () {\n\n\t\t_this.onResizeDebounced();\n\n\t};\n\tdom.bind( window, 'resize', this.__resizeHandler );\n\tdom.bind( this.__ul, 'webkitTransitionEnd', this.__resizeHandler );\n\tdom.bind( this.__ul, 'transitionend', this.__resizeHandler );\n\tdom.bind( this.__ul, 'oTransitionEnd', this.__resizeHandler );\n\tthis.onResize();\n\tif ( params.resizable ) {\n\n\t\taddResizeHandle( this );\n\n\t}\n\tsaveToLocalStorage = function saveToLocalStorage() {\n\n\t\tif ( SUPPORTS_LOCAL_STORAGE && localStorage.getItem( getLocalStorageHash( _this, 'isLocal' ) ) === 'true' ) {\n\n\t\t\tlocalStorage.setItem( getLocalStorageHash( _this, 'gui' ), JSON.stringify( _this.getSaveObject() ) );\n\n\t\t}\n\n\t};\n\tthis.saveToLocalStorageIfPossible = saveToLocalStorage;\n\tfunction resetWidth() {\n\n\t\tvar root = _this.getRoot();\n\t\troot.width += 1;\n\t\tCommon.defer( function () {\n\n\t\t\troot.width -= 1;\n\n\t\t} );\n\n\t}\n\tif ( ! params.parent ) {\n\n\t\tresetWidth();\n\n\t}\n\n};\nGUI.toggleHide = function () {\n\n\thide = ! hide;\n\tCommon.each( hideableGuis, function ( gui ) {\n\n\t\tgui.domElement.style.display = hide ? 'none' : '';\n\n\t} );\n\n};\nGUI.CLASS_AUTO_PLACE = 'a';\nGUI.CLASS_AUTO_PLACE_CONTAINER = 'ac';\nGUI.CLASS_MAIN = 'main';\nGUI.CLASS_CONTROLLER_ROW = 'cr';\nGUI.CLASS_TOO_TALL = 'taller-than-window';\nGUI.CLASS_CLOSED = 'closed';\nGUI.CLASS_CLOSE_BUTTON = 'close-button';\nGUI.CLASS_CLOSE_TOP = 'close-top';\nGUI.CLASS_CLOSE_BOTTOM = 'close-bottom';\nGUI.CLASS_DRAG = 'drag';\nGUI.DEFAULT_WIDTH = 245;\nGUI.TEXT_CLOSED = 'Close Controls';\nGUI.TEXT_OPEN = 'Open Controls';\nGUI._keydownHandler = function ( e ) {\n\n\tif ( document.activeElement.type !== 'text' && ( e.which === HIDE_KEY_CODE || e.keyCode === HIDE_KEY_CODE ) ) {\n\n\t\tGUI.toggleHide();\n\n\t}\n\n};\ndom.bind( window, 'keydown', GUI._keydownHandler, false );\nCommon.extend( GUI.prototype,\n\t{\n\t\tadd: function add( object, property ) {\n\n\t\t\treturn _add( this, object, property, {\n\t\t\t\tfactoryArgs: Array.prototype.slice.call( arguments, 2 )\n\t\t\t} );\n\n\t\t},\n\t\taddColor: function addColor( object, property ) {\n\n\t\t\treturn _add( this, object, property, {\n\t\t\t\tcolor: true\n\t\t\t} );\n\n\t\t},\n\t\tremove: function remove( controller ) {\n\n\t\t\tthis.__ul.removeChild( controller.__li );\n\t\t\tthis.__controllers.splice( this.__controllers.indexOf( controller ), 1 );\n\t\t\tvar _this = this;\n\t\t\tCommon.defer( function () {\n\n\t\t\t\t_this.onResize();\n\n\t\t\t} );\n\n\t\t},\n\t\tdestroy: function destroy() {\n\n\t\t\tif ( this.parent ) {\n\n\t\t\t\tthrow new Error( 'Only the root GUI should be removed with .destroy(). ' + 'For subfolders, use gui.removeFolder(folder) instead.' );\n\n\t\t\t}\n\t\t\tif ( this.autoPlace ) {\n\n\t\t\t\tautoPlaceContainer.removeChild( this.domElement );\n\n\t\t\t}\n\t\t\tvar _this = this;\n\t\t\tCommon.each( this.__folders, function ( subfolder ) {\n\n\t\t\t\t_this.removeFolder( subfolder );\n\n\t\t\t} );\n\t\t\tdom.unbind( window, 'keydown', GUI._keydownHandler, false );\n\t\t\tremoveListeners( this );\n\n\t\t},\n\t\taddFolder: function addFolder( name ) {\n\n\t\t\tif ( this.__folders[ name ] !== undefined ) {\n\n\t\t\t\tthrow new Error( 'You already have a folder in this GUI by the' + ' name \"' + name + '\"' );\n\n\t\t\t}\n\t\t\tvar newGuiParams = { name: name, parent: this };\n\t\t\tnewGuiParams.autoPlace = this.autoPlace;\n\t\t\tif ( this.load &&\n    this.load.folders &&\n    this.load.folders[ name ] ) {\n\n\t\t\t\tnewGuiParams.closed = this.load.folders[ name ].closed;\n\t\t\t\tnewGuiParams.load = this.load.folders[ name ];\n\n\t\t\t}\n\t\t\tvar gui = new GUI( newGuiParams );\n\t\t\tthis.__folders[ name ] = gui;\n\t\t\tvar li = addRow( this, gui.domElement );\n\t\t\tdom.addClass( li, 'folder' );\n\t\t\treturn gui;\n\n\t\t},\n\t\tremoveFolder: function removeFolder( folder ) {\n\n\t\t\tthis.__ul.removeChild( folder.domElement.parentElement );\n\t\t\tdelete this.__folders[ folder.name ];\n\t\t\tif ( this.load &&\n    this.load.folders &&\n    this.load.folders[ folder.name ] ) {\n\n\t\t\t\tdelete this.load.folders[ folder.name ];\n\n\t\t\t}\n\t\t\tremoveListeners( folder );\n\t\t\tvar _this = this;\n\t\t\tCommon.each( folder.__folders, function ( subfolder ) {\n\n\t\t\t\tfolder.removeFolder( subfolder );\n\n\t\t\t} );\n\t\t\tCommon.defer( function () {\n\n\t\t\t\t_this.onResize();\n\n\t\t\t} );\n\n\t\t},\n\t\topen: function open() {\n\n\t\t\tthis.closed = false;\n\n\t\t},\n\t\tclose: function close() {\n\n\t\t\tthis.closed = true;\n\n\t\t},\n\t\thide: function hide() {\n\n\t\t\tthis.domElement.style.display = 'none';\n\n\t\t},\n\t\tshow: function show() {\n\n\t\t\tthis.domElement.style.display = '';\n\n\t\t},\n\t\tonResize: function onResize() {\n\n\t\t\tvar root = this.getRoot();\n\t\t\tif ( root.scrollable ) {\n\n\t\t\t\tvar top = dom.getOffset( root.__ul ).top;\n\t\t\t\tvar h = 0;\n\t\t\t\tCommon.each( root.__ul.childNodes, function ( node ) {\n\n\t\t\t\t\tif ( ! ( root.autoPlace && node === root.__save_row ) ) {\n\n\t\t\t\t\t\th += dom.getHeight( node );\n\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\t\t\t\tif ( window.innerHeight - top - CLOSE_BUTTON_HEIGHT < h ) {\n\n\t\t\t\t\tdom.addClass( root.domElement, GUI.CLASS_TOO_TALL );\n\t\t\t\t\troot.__ul.style.height = window.innerHeight - top - CLOSE_BUTTON_HEIGHT + 'px';\n\n\t\t\t\t} else {\n\n\t\t\t\t\tdom.removeClass( root.domElement, GUI.CLASS_TOO_TALL );\n\t\t\t\t\troot.__ul.style.height = 'auto';\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t\tif ( root.__resize_handle ) {\n\n\t\t\t\tCommon.defer( function () {\n\n\t\t\t\t\troot.__resize_handle.style.height = root.__ul.offsetHeight + 'px';\n\n\t\t\t\t} );\n\n\t\t\t}\n\t\t\tif ( root.__closeButton ) {\n\n\t\t\t\troot.__closeButton.style.width = root.width + 'px';\n\n\t\t\t}\n\n\t\t},\n\t\tonResizeDebounced: Common.debounce( function () {\n\n\t\t\tthis.onResize();\n\n\t\t}, 50 ),\n\t\tremember: function remember() {\n\n\t\t\tif ( Common.isUndefined( SAVE_DIALOGUE ) ) {\n\n\t\t\t\tSAVE_DIALOGUE = new CenteredDiv();\n\t\t\t\tSAVE_DIALOGUE.domElement.innerHTML = saveDialogContents;\n\n\t\t\t}\n\t\t\tif ( this.parent ) {\n\n\t\t\t\tthrow new Error( 'You can only call remember on a top level GUI.' );\n\n\t\t\t}\n\t\t\tvar _this = this;\n\t\t\tCommon.each( Array.prototype.slice.call( arguments ), function ( object ) {\n\n\t\t\t\tif ( _this.__rememberedObjects.length === 0 ) {\n\n\t\t\t\t\taddSaveMenu( _this );\n\n\t\t\t\t}\n\t\t\t\tif ( _this.__rememberedObjects.indexOf( object ) === - 1 ) {\n\n\t\t\t\t\t_this.__rememberedObjects.push( object );\n\n\t\t\t\t}\n\n\t\t\t} );\n\t\t\tif ( this.autoPlace ) {\n\n\t\t\t\tsetWidth( this, this.width );\n\n\t\t\t}\n\n\t\t},\n\t\tgetRoot: function getRoot() {\n\n\t\t\tvar gui = this;\n\t\t\twhile ( gui.parent ) {\n\n\t\t\t\tgui = gui.parent;\n\n\t\t\t}\n\t\t\treturn gui;\n\n\t\t},\n\t\tgetSaveObject: function getSaveObject() {\n\n\t\t\tvar toReturn = this.load;\n\t\t\ttoReturn.closed = this.closed;\n\t\t\tif ( this.__rememberedObjects.length > 0 ) {\n\n\t\t\t\ttoReturn.preset = this.preset;\n\t\t\t\tif ( ! toReturn.remembered ) {\n\n\t\t\t\t\ttoReturn.remembered = {};\n\n\t\t\t\t}\n\t\t\t\ttoReturn.remembered[ this.preset ] = getCurrentPreset( this );\n\n\t\t\t}\n\t\t\ttoReturn.folders = {};\n\t\t\tCommon.each( this.__folders, function ( element, key ) {\n\n\t\t\t\ttoReturn.folders[ key ] = element.getSaveObject();\n\n\t\t\t} );\n\t\t\treturn toReturn;\n\n\t\t},\n\t\tsave: function save() {\n\n\t\t\tif ( ! this.load.remembered ) {\n\n\t\t\t\tthis.load.remembered = {};\n\n\t\t\t}\n\t\t\tthis.load.remembered[ this.preset ] = getCurrentPreset( this );\n\t\t\tmarkPresetModified( this, false );\n\t\t\tthis.saveToLocalStorageIfPossible();\n\n\t\t},\n\t\tsaveAs: function saveAs( presetName ) {\n\n\t\t\tif ( ! this.load.remembered ) {\n\n\t\t\t\tthis.load.remembered = {};\n\t\t\t\tthis.load.remembered[ DEFAULT_DEFAULT_PRESET_NAME ] = getCurrentPreset( this, true );\n\n\t\t\t}\n\t\t\tthis.load.remembered[ presetName ] = getCurrentPreset( this );\n\t\t\tthis.preset = presetName;\n\t\t\taddPresetOption( this, presetName, true );\n\t\t\tthis.saveToLocalStorageIfPossible();\n\n\t\t},\n\t\trevert: function revert( gui ) {\n\n\t\t\tCommon.each( this.__controllers, function ( controller ) {\n\n\t\t\t\tif ( ! this.getRoot().load.remembered ) {\n\n\t\t\t\t\tcontroller.setValue( controller.initialValue );\n\n\t\t\t\t} else {\n\n\t\t\t\t\trecallSavedValue( gui || this.getRoot(), controller );\n\n\t\t\t\t}\n\t\t\t\tif ( controller.__onFinishChange ) {\n\n\t\t\t\t\tcontroller.__onFinishChange.call( controller, controller.getValue() );\n\n\t\t\t\t}\n\n\t\t\t}, this );\n\t\t\tCommon.each( this.__folders, function ( folder ) {\n\n\t\t\t\tfolder.revert( folder );\n\n\t\t\t} );\n\t\t\tif ( ! gui ) {\n\n\t\t\t\tmarkPresetModified( this.getRoot(), false );\n\n\t\t\t}\n\n\t\t},\n\t\tlisten: function listen( controller ) {\n\n\t\t\tvar init = this.__listening.length === 0;\n\t\t\tthis.__listening.push( controller );\n\t\t\tif ( init ) {\n\n\t\t\t\tupdateDisplays( this.__listening );\n\n\t\t\t}\n\n\t\t},\n\t\tupdateDisplay: function updateDisplay() {\n\n\t\t\tCommon.each( this.__controllers, function ( controller ) {\n\n\t\t\t\tcontroller.updateDisplay();\n\n\t\t\t} );\n\t\t\tCommon.each( this.__folders, function ( folder ) {\n\n\t\t\t\tfolder.updateDisplay();\n\n\t\t\t} );\n\n\t\t}\n\t} );\nfunction addRow( gui, newDom, liBefore ) {\n\n\tvar li = document.createElement( 'li' );\n\tif ( newDom ) {\n\n\t\tli.appendChild( newDom );\n\n\t}\n\tif ( liBefore ) {\n\n\t\tgui.__ul.insertBefore( li, liBefore );\n\n\t} else {\n\n\t\tgui.__ul.appendChild( li );\n\n\t}\n\tgui.onResize();\n\treturn li;\n\n}\nfunction removeListeners( gui ) {\n\n\tdom.unbind( window, 'resize', gui.__resizeHandler );\n\tif ( gui.saveToLocalStorageIfPossible ) {\n\n\t\tdom.unbind( window, 'unload', gui.saveToLocalStorageIfPossible );\n\n\t}\n\n}\nfunction markPresetModified( gui, modified ) {\n\n\tvar opt = gui.__preset_select[ gui.__preset_select.selectedIndex ];\n\tif ( modified ) {\n\n\t\topt.innerHTML = opt.value + '*';\n\n\t} else {\n\n\t\topt.innerHTML = opt.value;\n\n\t}\n\n}\nfunction augmentController( gui, li, controller ) {\n\n\tcontroller.__li = li;\n\tcontroller.__gui = gui;\n\tCommon.extend( controller, {\n\t\toptions: function options( _options ) {\n\n\t\t\tif ( arguments.length > 1 ) {\n\n\t\t\t\tvar nextSibling = controller.__li.nextElementSibling;\n\t\t\t\tcontroller.remove();\n\t\t\t\treturn _add( gui, controller.object, controller.property, {\n\t\t\t\t\tbefore: nextSibling,\n\t\t\t\t\tfactoryArgs: [ Common.toArray( arguments ) ]\n\t\t\t\t} );\n\n\t\t\t}\n\t\t\tif ( Common.isArray( _options ) || Common.isObject( _options ) ) {\n\n\t\t\t\tvar _nextSibling = controller.__li.nextElementSibling;\n\t\t\t\tcontroller.remove();\n\t\t\t\treturn _add( gui, controller.object, controller.property, {\n\t\t\t\t\tbefore: _nextSibling,\n\t\t\t\t\tfactoryArgs: [ _options ]\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t},\n\t\tname: function name( _name ) {\n\n\t\t\tcontroller.__li.firstElementChild.firstElementChild.innerHTML = _name;\n\t\t\treturn controller;\n\n\t\t},\n\t\tlisten: function listen() {\n\n\t\t\tcontroller.__gui.listen( controller );\n\t\t\treturn controller;\n\n\t\t},\n\t\tremove: function remove() {\n\n\t\t\tcontroller.__gui.remove( controller );\n\t\t\treturn controller;\n\n\t\t}\n\t} );\n\tif ( controller instanceof NumberControllerSlider ) {\n\n\t\tvar box = new NumberControllerBox( controller.object, controller.property, { min: controller.__min, max: controller.__max, step: controller.__step } );\n\t\tCommon.each( [ 'updateDisplay', 'onChange', 'onFinishChange', 'step', 'min', 'max' ], function ( method ) {\n\n\t\t\tvar pc = controller[ method ];\n\t\t\tvar pb = box[ method ];\n\t\t\tcontroller[ method ] = box[ method ] = function () {\n\n\t\t\t\tvar args = Array.prototype.slice.call( arguments );\n\t\t\t\tpb.apply( box, args );\n\t\t\t\treturn pc.apply( controller, args );\n\n\t\t\t};\n\n\t\t} );\n\t\tdom.addClass( li, 'has-slider' );\n\t\tcontroller.domElement.insertBefore( box.domElement, controller.domElement.firstElementChild );\n\n\t} else if ( controller instanceof NumberControllerBox ) {\n\n\t\tvar r = function r( returned ) {\n\n\t\t\tif ( Common.isNumber( controller.__min ) && Common.isNumber( controller.__max ) ) {\n\n\t\t\t\tvar oldName = controller.__li.firstElementChild.firstElementChild.innerHTML;\n\t\t\t\tvar wasListening = controller.__gui.__listening.indexOf( controller ) > - 1;\n\t\t\t\tcontroller.remove();\n\t\t\t\tvar newController = _add( gui, controller.object, controller.property, {\n\t\t\t\t\tbefore: controller.__li.nextElementSibling,\n\t\t\t\t\tfactoryArgs: [ controller.__min, controller.__max, controller.__step ]\n\t\t\t\t} );\n\t\t\t\tnewController.name( oldName );\n\t\t\t\tif ( wasListening ) newController.listen();\n\t\t\t\treturn newController;\n\n\t\t\t}\n\t\t\treturn returned;\n\n\t\t};\n\t\tcontroller.min = Common.compose( r, controller.min );\n\t\tcontroller.max = Common.compose( r, controller.max );\n\n\t} else if ( controller instanceof BooleanController ) {\n\n\t\tdom.bind( li, 'click', function () {\n\n\t\t\tdom.fakeEvent( controller.__checkbox, 'click' );\n\n\t\t} );\n\t\tdom.bind( controller.__checkbox, 'click', function ( e ) {\n\n\t\t\te.stopPropagation();\n\n\t\t} );\n\n\t} else if ( controller instanceof FunctionController ) {\n\n\t\tdom.bind( li, 'click', function () {\n\n\t\t\tdom.fakeEvent( controller.__button, 'click' );\n\n\t\t} );\n\t\tdom.bind( li, 'mouseover', function () {\n\n\t\t\tdom.addClass( controller.__button, 'hover' );\n\n\t\t} );\n\t\tdom.bind( li, 'mouseout', function () {\n\n\t\t\tdom.removeClass( controller.__button, 'hover' );\n\n\t\t} );\n\n\t} else if ( controller instanceof ColorController ) {\n\n\t\tdom.addClass( li, 'color' );\n\t\tcontroller.updateDisplay = Common.compose( function ( val ) {\n\n\t\t\tli.style.borderLeftColor = controller.__color.toString();\n\t\t\treturn val;\n\n\t\t}, controller.updateDisplay );\n\t\tcontroller.updateDisplay();\n\n\t}\n\tcontroller.setValue = Common.compose( function ( val ) {\n\n\t\tif ( gui.getRoot().__preset_select && controller.isModified() ) {\n\n\t\t\tmarkPresetModified( gui.getRoot(), true );\n\n\t\t}\n\t\treturn val;\n\n\t}, controller.setValue );\n\n}\nfunction recallSavedValue( gui, controller ) {\n\n\tvar root = gui.getRoot();\n\tvar matchedIndex = root.__rememberedObjects.indexOf( controller.object );\n\tif ( matchedIndex !== - 1 ) {\n\n\t\tvar controllerMap = root.__rememberedObjectIndecesToControllers[ matchedIndex ];\n\t\tif ( controllerMap === undefined ) {\n\n\t\t\tcontrollerMap = {};\n\t\t\troot.__rememberedObjectIndecesToControllers[ matchedIndex ] = controllerMap;\n\n\t\t}\n\t\tcontrollerMap[ controller.property ] = controller;\n\t\tif ( root.load && root.load.remembered ) {\n\n\t\t\tvar presetMap = root.load.remembered;\n\t\t\tvar preset = void 0;\n\t\t\tif ( presetMap[ gui.preset ] ) {\n\n\t\t\t\tpreset = presetMap[ gui.preset ];\n\n\t\t\t} else if ( presetMap[ DEFAULT_DEFAULT_PRESET_NAME ] ) {\n\n\t\t\t\tpreset = presetMap[ DEFAULT_DEFAULT_PRESET_NAME ];\n\n\t\t\t} else {\n\n\t\t\t\treturn;\n\n\t\t\t}\n\t\t\tif ( preset[ matchedIndex ] && preset[ matchedIndex ][ controller.property ] !== undefined ) {\n\n\t\t\t\tvar value = preset[ matchedIndex ][ controller.property ];\n\t\t\t\tcontroller.initialValue = value;\n\t\t\t\tcontroller.setValue( value );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n}\nfunction _add( gui, object, property, params ) {\n\n\tif ( object[ property ] === undefined ) {\n\n\t\tthrow new Error( 'Object \"' + object + '\" has no property \"' + property + '\"' );\n\n\t}\n\tvar controller = void 0;\n\tif ( params.color ) {\n\n\t\tcontroller = new ColorController( object, property );\n\n\t} else {\n\n\t\tvar factoryArgs = [ object, property ].concat( params.factoryArgs );\n\t\tcontroller = ControllerFactory.apply( gui, factoryArgs );\n\n\t}\n\tif ( params.before instanceof Controller ) {\n\n\t\tparams.before = params.before.__li;\n\n\t}\n\trecallSavedValue( gui, controller );\n\tdom.addClass( controller.domElement, 'c' );\n\tvar name = document.createElement( 'span' );\n\tdom.addClass( name, 'property-name' );\n\tname.innerHTML = controller.property;\n\tvar container = document.createElement( 'div' );\n\tcontainer.appendChild( name );\n\tcontainer.appendChild( controller.domElement );\n\tvar li = addRow( gui, container, params.before );\n\tdom.addClass( li, GUI.CLASS_CONTROLLER_ROW );\n\tif ( controller instanceof ColorController ) {\n\n\t\tdom.addClass( li, 'color' );\n\n\t} else {\n\n\t\tdom.addClass( li, _typeof( controller.getValue() ) );\n\n\t}\n\taugmentController( gui, li, controller );\n\tgui.__controllers.push( controller );\n\treturn controller;\n\n}\nfunction getLocalStorageHash( gui, key ) {\n\n\treturn document.location.href + '.' + key;\n\n}\nfunction addPresetOption( gui, name, setSelected ) {\n\n\tvar opt = document.createElement( 'option' );\n\topt.innerHTML = name;\n\topt.value = name;\n\tgui.__preset_select.appendChild( opt );\n\tif ( setSelected ) {\n\n\t\tgui.__preset_select.selectedIndex = gui.__preset_select.length - 1;\n\n\t}\n\n}\nfunction showHideExplain( gui, explain ) {\n\n\texplain.style.display = gui.useLocalStorage ? 'block' : 'none';\n\n}\nfunction addSaveMenu( gui ) {\n\n\tvar div = gui.__save_row = document.createElement( 'li' );\n\tdom.addClass( gui.domElement, 'has-save' );\n\tgui.__ul.insertBefore( div, gui.__ul.firstChild );\n\tdom.addClass( div, 'save-row' );\n\tvar gears = document.createElement( 'span' );\n\tgears.innerHTML = '&nbsp;';\n\tdom.addClass( gears, 'button gears' );\n\tvar button = document.createElement( 'span' );\n\tbutton.innerHTML = 'Save';\n\tdom.addClass( button, 'button' );\n\tdom.addClass( button, 'save' );\n\tvar button2 = document.createElement( 'span' );\n\tbutton2.innerHTML = 'New';\n\tdom.addClass( button2, 'button' );\n\tdom.addClass( button2, 'save-as' );\n\tvar button3 = document.createElement( 'span' );\n\tbutton3.innerHTML = 'Revert';\n\tdom.addClass( button3, 'button' );\n\tdom.addClass( button3, 'revert' );\n\tvar select = gui.__preset_select = document.createElement( 'select' );\n\tif ( gui.load && gui.load.remembered ) {\n\n\t\tCommon.each( gui.load.remembered, function ( value, key ) {\n\n\t\t\taddPresetOption( gui, key, key === gui.preset );\n\n\t\t} );\n\n\t} else {\n\n\t\taddPresetOption( gui, DEFAULT_DEFAULT_PRESET_NAME, false );\n\n\t}\n\tdom.bind( select, 'change', function () {\n\n\t\tfor ( var index = 0; index < gui.__preset_select.length; index ++ ) {\n\n\t\t\tgui.__preset_select[ index ].innerHTML = gui.__preset_select[ index ].value;\n\n\t\t}\n\t\tgui.preset = this.value;\n\n\t} );\n\tdiv.appendChild( select );\n\tdiv.appendChild( gears );\n\tdiv.appendChild( button );\n\tdiv.appendChild( button2 );\n\tdiv.appendChild( button3 );\n\tif ( SUPPORTS_LOCAL_STORAGE ) {\n\n\t\tvar explain = document.getElementById( 'dg-local-explain' );\n\t\tvar localStorageCheckBox = document.getElementById( 'dg-local-storage' );\n\t\tvar saveLocally = document.getElementById( 'dg-save-locally' );\n\t\tsaveLocally.style.display = 'block';\n\t\tif ( localStorage.getItem( getLocalStorageHash( gui, 'isLocal' ) ) === 'true' ) {\n\n\t\t\tlocalStorageCheckBox.setAttribute( 'checked', 'checked' );\n\n\t\t}\n\t\tshowHideExplain( gui, explain );\n\t\tdom.bind( localStorageCheckBox, 'change', function () {\n\n\t\t\tgui.useLocalStorage = ! gui.useLocalStorage;\n\t\t\tshowHideExplain( gui, explain );\n\n\t\t} );\n\n\t}\n\tvar newConstructorTextArea = document.getElementById( 'dg-new-constructor' );\n\tdom.bind( newConstructorTextArea, 'keydown', function ( e ) {\n\n\t\tif ( e.metaKey && ( e.which === 67 || e.keyCode === 67 ) ) {\n\n\t\t\tSAVE_DIALOGUE.hide();\n\n\t\t}\n\n\t} );\n\tdom.bind( gears, 'click', function () {\n\n\t\tnewConstructorTextArea.innerHTML = JSON.stringify( gui.getSaveObject(), undefined, 2 );\n\t\tSAVE_DIALOGUE.show();\n\t\tnewConstructorTextArea.focus();\n\t\tnewConstructorTextArea.select();\n\n\t} );\n\tdom.bind( button, 'click', function () {\n\n\t\tgui.save();\n\n\t} );\n\tdom.bind( button2, 'click', function () {\n\n\t\tvar presetName = prompt( 'Enter a new preset name.' );\n\t\tif ( presetName ) {\n\n\t\t\tgui.saveAs( presetName );\n\n\t\t}\n\n\t} );\n\tdom.bind( button3, 'click', function () {\n\n\t\tgui.revert();\n\n\t} );\n\n}\nfunction addResizeHandle( gui ) {\n\n\tvar pmouseX = void 0;\n\tgui.__resize_handle = document.createElement( 'div' );\n\tCommon.extend( gui.__resize_handle.style, {\n\t\twidth: '6px',\n\t\tmarginLeft: '-3px',\n\t\theight: '200px',\n\t\tcursor: 'ew-resize',\n\t\tposition: 'absolute'\n\t} );\n\tfunction drag( e ) {\n\n\t\te.preventDefault();\n\t\tgui.width += pmouseX - e.clientX;\n\t\tgui.onResize();\n\t\tpmouseX = e.clientX;\n\t\treturn false;\n\n\t}\n\tfunction dragStop() {\n\n\t\tdom.removeClass( gui.__closeButton, GUI.CLASS_DRAG );\n\t\tdom.unbind( window, 'mousemove', drag );\n\t\tdom.unbind( window, 'mouseup', dragStop );\n\n\t}\n\tfunction dragStart( e ) {\n\n\t\te.preventDefault();\n\t\tpmouseX = e.clientX;\n\t\tdom.addClass( gui.__closeButton, GUI.CLASS_DRAG );\n\t\tdom.bind( window, 'mousemove', drag );\n\t\tdom.bind( window, 'mouseup', dragStop );\n\t\treturn false;\n\n\t}\n\tdom.bind( gui.__resize_handle, 'mousedown', dragStart );\n\tdom.bind( gui.__closeButton, 'mousedown', dragStart );\n\tgui.domElement.insertBefore( gui.__resize_handle, gui.domElement.firstElementChild );\n\n}\nfunction setWidth( gui, w ) {\n\n\tgui.domElement.style.width = w + 'px';\n\tif ( gui.__save_row && gui.autoPlace ) {\n\n\t\tgui.__save_row.style.width = w + 'px';\n\n\t}\n\tif ( gui.__closeButton ) {\n\n\t\tgui.__closeButton.style.width = w + 'px';\n\n\t}\n\n}\nfunction getCurrentPreset( gui, useInitialValues ) {\n\n\tvar toReturn = {};\n\tCommon.each( gui.__rememberedObjects, function ( val, index ) {\n\n\t\tvar savedValues = {};\n\t\tvar controllerMap = gui.__rememberedObjectIndecesToControllers[ index ];\n\t\tCommon.each( controllerMap, function ( controller, property ) {\n\n\t\t\tsavedValues[ property ] = useInitialValues ? controller.initialValue : controller.getValue();\n\n\t\t} );\n\t\ttoReturn[ index ] = savedValues;\n\n\t} );\n\treturn toReturn;\n\n}\nfunction setPresetSelectIndex( gui ) {\n\n\tfor ( var index = 0; index < gui.__preset_select.length; index ++ ) {\n\n\t\tif ( gui.__preset_select[ index ].value === gui.preset ) {\n\n\t\t\tgui.__preset_select.selectedIndex = index;\n\n\t\t}\n\n\t}\n\n}\nfunction updateDisplays( controllerArray ) {\n\n\tif ( controllerArray.length !== 0 ) {\n\n\t\trequestAnimationFrame$1.call( window, function () {\n\n\t\t\tupdateDisplays( controllerArray );\n\n\t\t} );\n\n\t}\n\tCommon.each( controllerArray, function ( c ) {\n\n\t\tc.updateDisplay();\n\n\t} );\n\n}\n\nvar color = {\n\tColor: Color,\n\tmath: ColorMath,\n\tinterpret: interpret\n};\nvar controllers = {\n\tController: Controller,\n\tBooleanController: BooleanController,\n\tOptionController: OptionController,\n\tStringController: StringController,\n\tNumberController: NumberController,\n\tNumberControllerBox: NumberControllerBox,\n\tNumberControllerSlider: NumberControllerSlider,\n\tFunctionController: FunctionController,\n\tColorController: ColorController\n};\nvar dom$1 = { dom: dom };\nvar gui = { GUI: GUI };\nvar GUI$1 = GUI;\nvar index = {\n\tcolor: color,\n\tcontrollers: controllers,\n\tdom: dom$1,\n\tgui: gui,\n\tGUI: GUI$1\n};\n\nexport { color, controllers, dom$1 as dom, gui, GUI$1 as GUI };\nexport default index;\n"]}]}