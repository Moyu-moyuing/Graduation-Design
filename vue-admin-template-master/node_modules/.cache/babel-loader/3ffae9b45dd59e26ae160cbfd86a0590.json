{"remainingRequest":"E:\\vue\\vue-admin-template-master\\node_modules\\babel-loader\\lib\\index.js!E:\\vue\\vue-admin-template-master\\node_modules\\eslint-loader\\index.js??ref--13-0!E:\\vue\\vue-admin-template-master\\src\\lib\\dat.gui.module.js","dependencies":[{"path":"E:\\vue\\vue-admin-template-master\\src\\lib\\dat.gui.module.js","mtime":1625070368000},{"path":"E:\\vue\\vue-admin-template-master\\babel.config.js","mtime":1637248914000},{"path":"E:\\vue\\vue-admin-template-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\vue\\vue-admin-template-master\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"E:\\vue\\vue-admin-template-master\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90eXBlb2YyIGZyb20gIkU6L3Z1ZS92dWUtYWRtaW4tdGVtcGxhdGUtbWFzdGVyL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS90eXBlb2YuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm51bWJlci50by1maXhlZC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNsaWNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmtleXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcubWF0Y2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zeW1ib2wuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zeW1ib2wuZGVzY3JpcHRpb24uanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zeW1ib2wuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmdldC1vd24tcHJvcGVydHktZGVzY3JpcHRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5nZXQtcHJvdG90eXBlLW9mLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnNldC1wcm90b3R5cGUtb2YuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc3BsaXQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcucmVwbGFjZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmpvaW4uanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zcGxpY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAudGVzdC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5jb25zdHJ1Y3Rvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5zdGlja3kuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuanNvbi5zdHJpbmdpZnkuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5jb25jYXQuanMiOwoKLyoqCiAqIGRhdC1ndWkgSmF2YVNjcmlwdCBDb250cm9sbGVyIExpYnJhcnkKICogaHR0cDovL2NvZGUuZ29vZ2xlLmNvbS9wL2RhdC1ndWkKICoKICogQ29weXJpZ2h0IDIwMTEgRGF0YSBBcnRzIFRlYW0sIEdvb2dsZSBDcmVhdGl2ZSBMYWIKICoKICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKi8KZnVuY3Rpb24gX19fJGluc2VydFN0eWxlKGNzcykgewogIGlmICghY3NzKSB7CiAgICByZXR1cm47CiAgfQoKICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ3VuZGVmaW5lZCcpIHsKICAgIHJldHVybjsKICB9CgogIHZhciBzdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7CiAgc3R5bGUuc2V0QXR0cmlidXRlKCd0eXBlJywgJ3RleHQvY3NzJyk7CiAgc3R5bGUuaW5uZXJIVE1MID0gY3NzOwogIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoc3R5bGUpOwogIHJldHVybiBjc3M7Cn0KCmZ1bmN0aW9uIGNvbG9yVG9TdHJpbmcoY29sb3IsIGZvcmNlQ1NTSGV4KSB7CiAgdmFyIGNvbG9yRm9ybWF0ID0gY29sb3IuX19zdGF0ZS5jb252ZXJzaW9uTmFtZS50b1N0cmluZygpOwoKICB2YXIgciA9IE1hdGgucm91bmQoY29sb3Iucik7CiAgdmFyIGcgPSBNYXRoLnJvdW5kKGNvbG9yLmcpOwogIHZhciBiID0gTWF0aC5yb3VuZChjb2xvci5iKTsKICB2YXIgYSA9IGNvbG9yLmE7CiAgdmFyIGggPSBNYXRoLnJvdW5kKGNvbG9yLmgpOwogIHZhciBzID0gY29sb3Iucy50b0ZpeGVkKDEpOwogIHZhciB2ID0gY29sb3Iudi50b0ZpeGVkKDEpOwoKICBpZiAoZm9yY2VDU1NIZXggfHwgY29sb3JGb3JtYXQgPT09ICdUSFJFRV9DSEFSX0hFWCcgfHwgY29sb3JGb3JtYXQgPT09ICdTSVhfQ0hBUl9IRVgnKSB7CiAgICB2YXIgc3RyID0gY29sb3IuaGV4LnRvU3RyaW5nKDE2KTsKCiAgICB3aGlsZSAoc3RyLmxlbmd0aCA8IDYpIHsKICAgICAgc3RyID0gJzAnICsgc3RyOwogICAgfQoKICAgIHJldHVybiAnIycgKyBzdHI7CiAgfSBlbHNlIGlmIChjb2xvckZvcm1hdCA9PT0gJ0NTU19SR0InKSB7CiAgICByZXR1cm4gJ3JnYignICsgciArICcsJyArIGcgKyAnLCcgKyBiICsgJyknOwogIH0gZWxzZSBpZiAoY29sb3JGb3JtYXQgPT09ICdDU1NfUkdCQScpIHsKICAgIHJldHVybiAncmdiYSgnICsgciArICcsJyArIGcgKyAnLCcgKyBiICsgJywnICsgYSArICcpJzsKICB9IGVsc2UgaWYgKGNvbG9yRm9ybWF0ID09PSAnSEVYJykgewogICAgcmV0dXJuICcweCcgKyBjb2xvci5oZXgudG9TdHJpbmcoMTYpOwogIH0gZWxzZSBpZiAoY29sb3JGb3JtYXQgPT09ICdSR0JfQVJSQVknKSB7CiAgICByZXR1cm4gJ1snICsgciArICcsJyArIGcgKyAnLCcgKyBiICsgJ10nOwogIH0gZWxzZSBpZiAoY29sb3JGb3JtYXQgPT09ICdSR0JBX0FSUkFZJykgewogICAgcmV0dXJuICdbJyArIHIgKyAnLCcgKyBnICsgJywnICsgYiArICcsJyArIGEgKyAnXSc7CiAgfSBlbHNlIGlmIChjb2xvckZvcm1hdCA9PT0gJ1JHQl9PQkonKSB7CiAgICByZXR1cm4gJ3tyOicgKyByICsgJyxnOicgKyBnICsgJyxiOicgKyBiICsgJ30nOwogIH0gZWxzZSBpZiAoY29sb3JGb3JtYXQgPT09ICdSR0JBX09CSicpIHsKICAgIHJldHVybiAne3I6JyArIHIgKyAnLGc6JyArIGcgKyAnLGI6JyArIGIgKyAnLGE6JyArIGEgKyAnfSc7CiAgfSBlbHNlIGlmIChjb2xvckZvcm1hdCA9PT0gJ0hTVl9PQkonKSB7CiAgICByZXR1cm4gJ3toOicgKyBoICsgJyxzOicgKyBzICsgJyx2OicgKyB2ICsgJ30nOwogIH0gZWxzZSBpZiAoY29sb3JGb3JtYXQgPT09ICdIU1ZBX09CSicpIHsKICAgIHJldHVybiAne2g6JyArIGggKyAnLHM6JyArIHMgKyAnLHY6JyArIHYgKyAnLGE6JyArIGEgKyAnfSc7CiAgfQoKICByZXR1cm4gJ3Vua25vd24gZm9ybWF0JzsKfQoKdmFyIEFSUl9FQUNIID0gQXJyYXkucHJvdG90eXBlLmZvckVhY2g7CnZhciBBUlJfU0xJQ0UgPSBBcnJheS5wcm90b3R5cGUuc2xpY2U7CnZhciBDb21tb24gPSB7CiAgQlJFQUs6IHt9LAogIGV4dGVuZDogZnVuY3Rpb24gZXh0ZW5kKHRhcmdldCkgewogICAgdGhpcy5lYWNoKEFSUl9TTElDRS5jYWxsKGFyZ3VtZW50cywgMSksIGZ1bmN0aW9uIChvYmopIHsKICAgICAgdmFyIGtleXMgPSB0aGlzLmlzT2JqZWN0KG9iaikgPyBPYmplY3Qua2V5cyhvYmopIDogW107CiAgICAgIGtleXMuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgaWYgKCF0aGlzLmlzVW5kZWZpbmVkKG9ialtrZXldKSkgewogICAgICAgICAgdGFyZ2V0W2tleV0gPSBvYmpba2V5XTsKICAgICAgICB9CiAgICAgIH0uYmluZCh0aGlzKSk7CiAgICB9LCB0aGlzKTsKICAgIHJldHVybiB0YXJnZXQ7CiAgfSwKICBkZWZhdWx0czogZnVuY3Rpb24gZGVmYXVsdHModGFyZ2V0KSB7CiAgICB0aGlzLmVhY2goQVJSX1NMSUNFLmNhbGwoYXJndW1lbnRzLCAxKSwgZnVuY3Rpb24gKG9iaikgewogICAgICB2YXIga2V5cyA9IHRoaXMuaXNPYmplY3Qob2JqKSA/IE9iamVjdC5rZXlzKG9iaikgOiBbXTsKICAgICAga2V5cy5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsKICAgICAgICBpZiAodGhpcy5pc1VuZGVmaW5lZCh0YXJnZXRba2V5XSkpIHsKICAgICAgICAgIHRhcmdldFtrZXldID0gb2JqW2tleV07CiAgICAgICAgfQogICAgICB9LmJpbmQodGhpcykpOwogICAgfSwgdGhpcyk7CiAgICByZXR1cm4gdGFyZ2V0OwogIH0sCiAgY29tcG9zZTogZnVuY3Rpb24gY29tcG9zZSgpIHsKICAgIHZhciB0b0NhbGwgPSBBUlJfU0xJQ0UuY2FsbChhcmd1bWVudHMpOwogICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIGFyZ3MgPSBBUlJfU0xJQ0UuY2FsbChhcmd1bWVudHMpOwoKICAgICAgZm9yICh2YXIgaSA9IHRvQ2FsbC5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgewogICAgICAgIGFyZ3MgPSBbdG9DYWxsW2ldLmFwcGx5KHRoaXMsIGFyZ3MpXTsKICAgICAgfQoKICAgICAgcmV0dXJuIGFyZ3NbMF07CiAgICB9OwogIH0sCiAgZWFjaDogZnVuY3Rpb24gZWFjaChvYmosIGl0ciwgc2NvcGUpIHsKICAgIGlmICghb2JqKSB7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICBpZiAoQVJSX0VBQ0ggJiYgb2JqLmZvckVhY2ggJiYgb2JqLmZvckVhY2ggPT09IEFSUl9FQUNIKSB7CiAgICAgIG9iai5mb3JFYWNoKGl0ciwgc2NvcGUpOwogICAgfSBlbHNlIGlmIChvYmoubGVuZ3RoID09PSBvYmoubGVuZ3RoICsgMCkgewogICAgICB2YXIga2V5ID0gdm9pZCAwOwogICAgICB2YXIgbCA9IHZvaWQgMDsKCiAgICAgIGZvciAoa2V5ID0gMCwgbCA9IG9iai5sZW5ndGg7IGtleSA8IGw7IGtleSsrKSB7CiAgICAgICAgaWYgKGtleSBpbiBvYmogJiYgaXRyLmNhbGwoc2NvcGUsIG9ialtrZXldLCBrZXkpID09PSB0aGlzLkJSRUFLKSB7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICB9CiAgICB9IGVsc2UgewogICAgICBmb3IgKHZhciBfa2V5IGluIG9iaikgewogICAgICAgIGlmIChpdHIuY2FsbChzY29wZSwgb2JqW19rZXldLCBfa2V5KSA9PT0gdGhpcy5CUkVBSykgewogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgfQogICAgfQogIH0sCiAgZGVmZXI6IGZ1bmN0aW9uIGRlZmVyKGZuYykgewogICAgc2V0VGltZW91dChmbmMsIDApOwogIH0sCiAgZGVib3VuY2U6IGZ1bmN0aW9uIGRlYm91bmNlKGZ1bmMsIHRocmVzaG9sZCwgY2FsbEltbWVkaWF0ZWx5KSB7CiAgICB2YXIgdGltZW91dCA9IHZvaWQgMDsKICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBvYmogPSB0aGlzOwogICAgICB2YXIgYXJncyA9IGFyZ3VtZW50czsKCiAgICAgIGZ1bmN0aW9uIGRlbGF5ZWQoKSB7CiAgICAgICAgdGltZW91dCA9IG51bGw7CiAgICAgICAgaWYgKCFjYWxsSW1tZWRpYXRlbHkpIGZ1bmMuYXBwbHkob2JqLCBhcmdzKTsKICAgICAgfQoKICAgICAgdmFyIGNhbGxOb3cgPSBjYWxsSW1tZWRpYXRlbHkgfHwgIXRpbWVvdXQ7CiAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTsKICAgICAgdGltZW91dCA9IHNldFRpbWVvdXQoZGVsYXllZCwgdGhyZXNob2xkKTsKCiAgICAgIGlmIChjYWxsTm93KSB7CiAgICAgICAgZnVuYy5hcHBseShvYmosIGFyZ3MpOwogICAgICB9CiAgICB9OwogIH0sCiAgdG9BcnJheTogZnVuY3Rpb24gdG9BcnJheShvYmopIHsKICAgIGlmIChvYmoudG9BcnJheSkgcmV0dXJuIG9iai50b0FycmF5KCk7CiAgICByZXR1cm4gQVJSX1NMSUNFLmNhbGwob2JqKTsKICB9LAogIGlzVW5kZWZpbmVkOiBmdW5jdGlvbiBpc1VuZGVmaW5lZChvYmopIHsKICAgIHJldHVybiBvYmogPT09IHVuZGVmaW5lZDsKICB9LAogIGlzTnVsbDogZnVuY3Rpb24gaXNOdWxsKG9iaikgewogICAgcmV0dXJuIG9iaiA9PT0gbnVsbDsKICB9LAogIGlzTmFOOiBmdW5jdGlvbiAoX2lzTmFOKSB7CiAgICBmdW5jdGlvbiBpc05hTigpIHsKICAgICAgcmV0dXJuIF9pc05hTi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgfQoKICAgIGlzTmFOLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gX2lzTmFOLnRvU3RyaW5nKCk7CiAgICB9OwoKICAgIHJldHVybiBpc05hTjsKICB9KGZ1bmN0aW9uIChvYmopIHsKICAgIHJldHVybiBpc05hTihvYmopOwogIH0pLAogIGlzQXJyYXk6IEFycmF5LmlzQXJyYXkgfHwgZnVuY3Rpb24gKG9iaikgewogICAgcmV0dXJuIG9iai5jb25zdHJ1Y3RvciA9PT0gQXJyYXk7CiAgfSwKICBpc09iamVjdDogZnVuY3Rpb24gaXNPYmplY3Qob2JqKSB7CiAgICByZXR1cm4gb2JqID09PSBPYmplY3Qob2JqKTsKICB9LAogIGlzTnVtYmVyOiBmdW5jdGlvbiBpc051bWJlcihvYmopIHsKICAgIHJldHVybiBvYmogPT09IG9iaiArIDA7CiAgfSwKICBpc1N0cmluZzogZnVuY3Rpb24gaXNTdHJpbmcob2JqKSB7CiAgICByZXR1cm4gb2JqID09PSBvYmogKyAnJzsKICB9LAogIGlzQm9vbGVhbjogZnVuY3Rpb24gaXNCb29sZWFuKG9iaikgewogICAgcmV0dXJuIG9iaiA9PT0gZmFsc2UgfHwgb2JqID09PSB0cnVlOwogIH0sCiAgaXNGdW5jdGlvbjogZnVuY3Rpb24gaXNGdW5jdGlvbihvYmopIHsKICAgIHJldHVybiBvYmogaW5zdGFuY2VvZiBGdW5jdGlvbjsKICB9Cn07CnZhciBJTlRFUlBSRVRBVElPTlMgPSBbewogIGxpdG11czogQ29tbW9uLmlzU3RyaW5nLAogIGNvbnZlcnNpb25zOiB7CiAgICBUSFJFRV9DSEFSX0hFWDogewogICAgICByZWFkOiBmdW5jdGlvbiByZWFkKG9yaWdpbmFsKSB7CiAgICAgICAgdmFyIHRlc3QgPSBvcmlnaW5hbC5tYXRjaCgvXiMoW0EtRjAtOV0pKFtBLUYwLTldKShbQS1GMC05XSkkL2kpOwoKICAgICAgICBpZiAodGVzdCA9PT0gbnVsbCkgewogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIHNwYWNlOiAnSEVYJywKICAgICAgICAgIGhleDogcGFyc2VJbnQoJzB4JyArIHRlc3RbMV0udG9TdHJpbmcoKSArIHRlc3RbMV0udG9TdHJpbmcoKSArIHRlc3RbMl0udG9TdHJpbmcoKSArIHRlc3RbMl0udG9TdHJpbmcoKSArIHRlc3RbM10udG9TdHJpbmcoKSArIHRlc3RbM10udG9TdHJpbmcoKSwgMCkKICAgICAgICB9OwogICAgICB9LAogICAgICB3cml0ZTogY29sb3JUb1N0cmluZwogICAgfSwKICAgIFNJWF9DSEFSX0hFWDogewogICAgICByZWFkOiBmdW5jdGlvbiByZWFkKG9yaWdpbmFsKSB7CiAgICAgICAgdmFyIHRlc3QgPSBvcmlnaW5hbC5tYXRjaCgvXiMoW0EtRjAtOV17Nn0pJC9pKTsKCiAgICAgICAgaWYgKHRlc3QgPT09IG51bGwpIHsKICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CgogICAgICAgIHJldHVybiB7CiAgICAgICAgICBzcGFjZTogJ0hFWCcsCiAgICAgICAgICBoZXg6IHBhcnNlSW50KCcweCcgKyB0ZXN0WzFdLnRvU3RyaW5nKCksIDApCiAgICAgICAgfTsKICAgICAgfSwKICAgICAgd3JpdGU6IGNvbG9yVG9TdHJpbmcKICAgIH0sCiAgICBDU1NfUkdCOiB7CiAgICAgIHJlYWQ6IGZ1bmN0aW9uIHJlYWQob3JpZ2luYWwpIHsKICAgICAgICB2YXIgdGVzdCA9IG9yaWdpbmFsLm1hdGNoKC9ecmdiXChccyooLispXHMqLFxzKiguKylccyosXHMqKC4rKVxzKlwpLyk7CgogICAgICAgIGlmICh0ZXN0ID09PSBudWxsKSB7CiAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gewogICAgICAgICAgc3BhY2U6ICdSR0InLAogICAgICAgICAgcjogcGFyc2VGbG9hdCh0ZXN0WzFdKSwKICAgICAgICAgIGc6IHBhcnNlRmxvYXQodGVzdFsyXSksCiAgICAgICAgICBiOiBwYXJzZUZsb2F0KHRlc3RbM10pCiAgICAgICAgfTsKICAgICAgfSwKICAgICAgd3JpdGU6IGNvbG9yVG9TdHJpbmcKICAgIH0sCiAgICBDU1NfUkdCQTogewogICAgICByZWFkOiBmdW5jdGlvbiByZWFkKG9yaWdpbmFsKSB7CiAgICAgICAgdmFyIHRlc3QgPSBvcmlnaW5hbC5tYXRjaCgvXnJnYmFcKFxzKiguKylccyosXHMqKC4rKVxzKixccyooLispXHMqLFxzKiguKylccypcKS8pOwoKICAgICAgICBpZiAodGVzdCA9PT0gbnVsbCkgewogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIHNwYWNlOiAnUkdCJywKICAgICAgICAgIHI6IHBhcnNlRmxvYXQodGVzdFsxXSksCiAgICAgICAgICBnOiBwYXJzZUZsb2F0KHRlc3RbMl0pLAogICAgICAgICAgYjogcGFyc2VGbG9hdCh0ZXN0WzNdKSwKICAgICAgICAgIGE6IHBhcnNlRmxvYXQodGVzdFs0XSkKICAgICAgICB9OwogICAgICB9LAogICAgICB3cml0ZTogY29sb3JUb1N0cmluZwogICAgfQogIH0KfSwgewogIGxpdG11czogQ29tbW9uLmlzTnVtYmVyLAogIGNvbnZlcnNpb25zOiB7CiAgICBIRVg6IHsKICAgICAgcmVhZDogZnVuY3Rpb24gcmVhZChvcmlnaW5hbCkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICBzcGFjZTogJ0hFWCcsCiAgICAgICAgICBoZXg6IG9yaWdpbmFsLAogICAgICAgICAgY29udmVyc2lvbk5hbWU6ICdIRVgnCiAgICAgICAgfTsKICAgICAgfSwKICAgICAgd3JpdGU6IGZ1bmN0aW9uIHdyaXRlKGNvbG9yKSB7CiAgICAgICAgcmV0dXJuIGNvbG9yLmhleDsKICAgICAgfQogICAgfQogIH0KfSwgewogIGxpdG11czogQ29tbW9uLmlzQXJyYXksCiAgY29udmVyc2lvbnM6IHsKICAgIFJHQl9BUlJBWTogewogICAgICByZWFkOiBmdW5jdGlvbiByZWFkKG9yaWdpbmFsKSB7CiAgICAgICAgaWYgKG9yaWdpbmFsLmxlbmd0aCAhPT0gMykgewogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIHNwYWNlOiAnUkdCJywKICAgICAgICAgIHI6IG9yaWdpbmFsWzBdLAogICAgICAgICAgZzogb3JpZ2luYWxbMV0sCiAgICAgICAgICBiOiBvcmlnaW5hbFsyXQogICAgICAgIH07CiAgICAgIH0sCiAgICAgIHdyaXRlOiBmdW5jdGlvbiB3cml0ZShjb2xvcikgewogICAgICAgIHJldHVybiBbY29sb3IuciwgY29sb3IuZywgY29sb3IuYl07CiAgICAgIH0KICAgIH0sCiAgICBSR0JBX0FSUkFZOiB7CiAgICAgIHJlYWQ6IGZ1bmN0aW9uIHJlYWQob3JpZ2luYWwpIHsKICAgICAgICBpZiAob3JpZ2luYWwubGVuZ3RoICE9PSA0KSByZXR1cm4gZmFsc2U7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIHNwYWNlOiAnUkdCJywKICAgICAgICAgIHI6IG9yaWdpbmFsWzBdLAogICAgICAgICAgZzogb3JpZ2luYWxbMV0sCiAgICAgICAgICBiOiBvcmlnaW5hbFsyXSwKICAgICAgICAgIGE6IG9yaWdpbmFsWzNdCiAgICAgICAgfTsKICAgICAgfSwKICAgICAgd3JpdGU6IGZ1bmN0aW9uIHdyaXRlKGNvbG9yKSB7CiAgICAgICAgcmV0dXJuIFtjb2xvci5yLCBjb2xvci5nLCBjb2xvci5iLCBjb2xvci5hXTsKICAgICAgfQogICAgfQogIH0KfSwgewogIGxpdG11czogQ29tbW9uLmlzT2JqZWN0LAogIGNvbnZlcnNpb25zOiB7CiAgICBSR0JBX09CSjogewogICAgICByZWFkOiBmdW5jdGlvbiByZWFkKG9yaWdpbmFsKSB7CiAgICAgICAgaWYgKENvbW1vbi5pc051bWJlcihvcmlnaW5hbC5yKSAmJiBDb21tb24uaXNOdW1iZXIob3JpZ2luYWwuZykgJiYgQ29tbW9uLmlzTnVtYmVyKG9yaWdpbmFsLmIpICYmIENvbW1vbi5pc051bWJlcihvcmlnaW5hbC5hKSkgewogICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgc3BhY2U6ICdSR0InLAogICAgICAgICAgICByOiBvcmlnaW5hbC5yLAogICAgICAgICAgICBnOiBvcmlnaW5hbC5nLAogICAgICAgICAgICBiOiBvcmlnaW5hbC5iLAogICAgICAgICAgICBhOiBvcmlnaW5hbC5hCiAgICAgICAgICB9OwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9LAogICAgICB3cml0ZTogZnVuY3Rpb24gd3JpdGUoY29sb3IpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgcjogY29sb3IuciwKICAgICAgICAgIGc6IGNvbG9yLmcsCiAgICAgICAgICBiOiBjb2xvci5iLAogICAgICAgICAgYTogY29sb3IuYQogICAgICAgIH07CiAgICAgIH0KICAgIH0sCiAgICBSR0JfT0JKOiB7CiAgICAgIHJlYWQ6IGZ1bmN0aW9uIHJlYWQob3JpZ2luYWwpIHsKICAgICAgICBpZiAoQ29tbW9uLmlzTnVtYmVyKG9yaWdpbmFsLnIpICYmIENvbW1vbi5pc051bWJlcihvcmlnaW5hbC5nKSAmJiBDb21tb24uaXNOdW1iZXIob3JpZ2luYWwuYikpIHsKICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIHNwYWNlOiAnUkdCJywKICAgICAgICAgICAgcjogb3JpZ2luYWwuciwKICAgICAgICAgICAgZzogb3JpZ2luYWwuZywKICAgICAgICAgICAgYjogb3JpZ2luYWwuYgogICAgICAgICAgfTsKICAgICAgICB9CgogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfSwKICAgICAgd3JpdGU6IGZ1bmN0aW9uIHdyaXRlKGNvbG9yKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIHI6IGNvbG9yLnIsCiAgICAgICAgICBnOiBjb2xvci5nLAogICAgICAgICAgYjogY29sb3IuYgogICAgICAgIH07CiAgICAgIH0KICAgIH0sCiAgICBIU1ZBX09CSjogewogICAgICByZWFkOiBmdW5jdGlvbiByZWFkKG9yaWdpbmFsKSB7CiAgICAgICAgaWYgKENvbW1vbi5pc051bWJlcihvcmlnaW5hbC5oKSAmJiBDb21tb24uaXNOdW1iZXIob3JpZ2luYWwucykgJiYgQ29tbW9uLmlzTnVtYmVyKG9yaWdpbmFsLnYpICYmIENvbW1vbi5pc051bWJlcihvcmlnaW5hbC5hKSkgewogICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgc3BhY2U6ICdIU1YnLAogICAgICAgICAgICBoOiBvcmlnaW5hbC5oLAogICAgICAgICAgICBzOiBvcmlnaW5hbC5zLAogICAgICAgICAgICB2OiBvcmlnaW5hbC52LAogICAgICAgICAgICBhOiBvcmlnaW5hbC5hCiAgICAgICAgICB9OwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9LAogICAgICB3cml0ZTogZnVuY3Rpb24gd3JpdGUoY29sb3IpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgaDogY29sb3IuaCwKICAgICAgICAgIHM6IGNvbG9yLnMsCiAgICAgICAgICB2OiBjb2xvci52LAogICAgICAgICAgYTogY29sb3IuYQogICAgICAgIH07CiAgICAgIH0KICAgIH0sCiAgICBIU1ZfT0JKOiB7CiAgICAgIHJlYWQ6IGZ1bmN0aW9uIHJlYWQob3JpZ2luYWwpIHsKICAgICAgICBpZiAoQ29tbW9uLmlzTnVtYmVyKG9yaWdpbmFsLmgpICYmIENvbW1vbi5pc051bWJlcihvcmlnaW5hbC5zKSAmJiBDb21tb24uaXNOdW1iZXIob3JpZ2luYWwudikpIHsKICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIHNwYWNlOiAnSFNWJywKICAgICAgICAgICAgaDogb3JpZ2luYWwuaCwKICAgICAgICAgICAgczogb3JpZ2luYWwucywKICAgICAgICAgICAgdjogb3JpZ2luYWwudgogICAgICAgICAgfTsKICAgICAgICB9CgogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfSwKICAgICAgd3JpdGU6IGZ1bmN0aW9uIHdyaXRlKGNvbG9yKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIGg6IGNvbG9yLmgsCiAgICAgICAgICBzOiBjb2xvci5zLAogICAgICAgICAgdjogY29sb3IudgogICAgICAgIH07CiAgICAgIH0KICAgIH0KICB9Cn1dOwp2YXIgcmVzdWx0ID0gdm9pZCAwOwp2YXIgdG9SZXR1cm4gPSB2b2lkIDA7Cgp2YXIgaW50ZXJwcmV0ID0gZnVuY3Rpb24gaW50ZXJwcmV0KCkgewogIHRvUmV0dXJuID0gZmFsc2U7CiAgdmFyIG9yaWdpbmFsID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgPyBDb21tb24udG9BcnJheShhcmd1bWVudHMpIDogYXJndW1lbnRzWzBdOwogIENvbW1vbi5lYWNoKElOVEVSUFJFVEFUSU9OUywgZnVuY3Rpb24gKGZhbWlseSkgewogICAgaWYgKGZhbWlseS5saXRtdXMob3JpZ2luYWwpKSB7CiAgICAgIENvbW1vbi5lYWNoKGZhbWlseS5jb252ZXJzaW9ucywgZnVuY3Rpb24gKGNvbnZlcnNpb24sIGNvbnZlcnNpb25OYW1lKSB7CiAgICAgICAgcmVzdWx0ID0gY29udmVyc2lvbi5yZWFkKG9yaWdpbmFsKTsKCiAgICAgICAgaWYgKHRvUmV0dXJuID09PSBmYWxzZSAmJiByZXN1bHQgIT09IGZhbHNlKSB7CiAgICAgICAgICB0b1JldHVybiA9IHJlc3VsdDsKICAgICAgICAgIHJlc3VsdC5jb252ZXJzaW9uTmFtZSA9IGNvbnZlcnNpb25OYW1lOwogICAgICAgICAgcmVzdWx0LmNvbnZlcnNpb24gPSBjb252ZXJzaW9uOwogICAgICAgICAgcmV0dXJuIENvbW1vbi5CUkVBSzsKICAgICAgICB9CiAgICAgIH0pOwogICAgICByZXR1cm4gQ29tbW9uLkJSRUFLOwogICAgfQogIH0pOwogIHJldHVybiB0b1JldHVybjsKfTsKCnZhciB0bXBDb21wb25lbnQgPSB2b2lkIDA7CnZhciBDb2xvck1hdGggPSB7CiAgaHN2X3RvX3JnYjogZnVuY3Rpb24gaHN2X3RvX3JnYihoLCBzLCB2KSB7CiAgICB2YXIgaGkgPSBNYXRoLmZsb29yKGggLyA2MCkgJSA2OwogICAgdmFyIGYgPSBoIC8gNjAgLSBNYXRoLmZsb29yKGggLyA2MCk7CiAgICB2YXIgcCA9IHYgKiAoMS4wIC0gcyk7CiAgICB2YXIgcSA9IHYgKiAoMS4wIC0gZiAqIHMpOwogICAgdmFyIHQgPSB2ICogKDEuMCAtICgxLjAgLSBmKSAqIHMpOwogICAgdmFyIGMgPSBbW3YsIHQsIHBdLCBbcSwgdiwgcF0sIFtwLCB2LCB0XSwgW3AsIHEsIHZdLCBbdCwgcCwgdl0sIFt2LCBwLCBxXV1baGldOwogICAgcmV0dXJuIHsKICAgICAgcjogY1swXSAqIDI1NSwKICAgICAgZzogY1sxXSAqIDI1NSwKICAgICAgYjogY1syXSAqIDI1NQogICAgfTsKICB9LAogIHJnYl90b19oc3Y6IGZ1bmN0aW9uIHJnYl90b19oc3YociwgZywgYikgewogICAgdmFyIG1pbiA9IE1hdGgubWluKHIsIGcsIGIpOwogICAgdmFyIG1heCA9IE1hdGgubWF4KHIsIGcsIGIpOwogICAgdmFyIGRlbHRhID0gbWF4IC0gbWluOwogICAgdmFyIGggPSB2b2lkIDA7CiAgICB2YXIgcyA9IHZvaWQgMDsKCiAgICBpZiAobWF4ICE9PSAwKSB7CiAgICAgIHMgPSBkZWx0YSAvIG1heDsKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgaDogTmFOLAogICAgICAgIHM6IDAsCiAgICAgICAgdjogMAogICAgICB9OwogICAgfQoKICAgIGlmIChyID09PSBtYXgpIHsKICAgICAgaCA9IChnIC0gYikgLyBkZWx0YTsKICAgIH0gZWxzZSBpZiAoZyA9PT0gbWF4KSB7CiAgICAgIGggPSAyICsgKGIgLSByKSAvIGRlbHRhOwogICAgfSBlbHNlIHsKICAgICAgaCA9IDQgKyAociAtIGcpIC8gZGVsdGE7CiAgICB9CgogICAgaCAvPSA2OwoKICAgIGlmIChoIDwgMCkgewogICAgICBoICs9IDE7CiAgICB9CgogICAgcmV0dXJuIHsKICAgICAgaDogaCAqIDM2MCwKICAgICAgczogcywKICAgICAgdjogbWF4IC8gMjU1CiAgICB9OwogIH0sCiAgcmdiX3RvX2hleDogZnVuY3Rpb24gcmdiX3RvX2hleChyLCBnLCBiKSB7CiAgICB2YXIgaGV4ID0gdGhpcy5oZXhfd2l0aF9jb21wb25lbnQoMCwgMiwgcik7CiAgICBoZXggPSB0aGlzLmhleF93aXRoX2NvbXBvbmVudChoZXgsIDEsIGcpOwogICAgaGV4ID0gdGhpcy5oZXhfd2l0aF9jb21wb25lbnQoaGV4LCAwLCBiKTsKICAgIHJldHVybiBoZXg7CiAgfSwKICBjb21wb25lbnRfZnJvbV9oZXg6IGZ1bmN0aW9uIGNvbXBvbmVudF9mcm9tX2hleChoZXgsIGNvbXBvbmVudEluZGV4KSB7CiAgICByZXR1cm4gaGV4ID4+IGNvbXBvbmVudEluZGV4ICogOCAmIDB4RkY7CiAgfSwKICBoZXhfd2l0aF9jb21wb25lbnQ6IGZ1bmN0aW9uIGhleF93aXRoX2NvbXBvbmVudChoZXgsIGNvbXBvbmVudEluZGV4LCB2YWx1ZSkgewogICAgcmV0dXJuIHZhbHVlIDw8ICh0bXBDb21wb25lbnQgPSBjb21wb25lbnRJbmRleCAqIDgpIHwgaGV4ICYgfigweEZGIDw8IHRtcENvbXBvbmVudCk7CiAgfQp9OwoKdmFyIF90eXBlb2YgPSB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIF90eXBlb2YyKFN5bWJvbC5pdGVyYXRvcikgPT09ICJzeW1ib2wiID8gZnVuY3Rpb24gKG9iaikgewogIHJldHVybiBfdHlwZW9mMihvYmopOwp9IDogZnVuY3Rpb24gKG9iaikgewogIHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyAic3ltYm9sIiA6IF90eXBlb2YyKG9iaik7Cn07Cgp2YXIgY2xhc3NDYWxsQ2hlY2sgPSBmdW5jdGlvbiBjbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsKICBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgewogICAgdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIik7CiAgfQp9OwoKdmFyIGNyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgewogIGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgewogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgewogICAgICB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOwogICAgICBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7CiAgICAgIGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsKICAgICAgaWYgKCJ2YWx1ZSIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7CiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsKICAgIH0KICB9CgogIHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7CiAgICBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOwogICAgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7CiAgICByZXR1cm4gQ29uc3RydWN0b3I7CiAgfTsKfSgpOwoKdmFyIGdldCA9IGZ1bmN0aW9uIGdldChvYmplY3QsIHByb3BlcnR5LCByZWNlaXZlcikgewogIGlmIChvYmplY3QgPT09IG51bGwpIG9iamVjdCA9IEZ1bmN0aW9uLnByb3RvdHlwZTsKICB2YXIgZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBwcm9wZXJ0eSk7CgogIGlmIChkZXNjID09PSB1bmRlZmluZWQpIHsKICAgIHZhciBwYXJlbnQgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2Yob2JqZWN0KTsKCiAgICBpZiAocGFyZW50ID09PSBudWxsKSB7CiAgICAgIHJldHVybiB1bmRlZmluZWQ7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gZ2V0KHBhcmVudCwgcHJvcGVydHksIHJlY2VpdmVyKTsKICAgIH0KICB9IGVsc2UgaWYgKCJ2YWx1ZSIgaW4gZGVzYykgewogICAgcmV0dXJuIGRlc2MudmFsdWU7CiAgfSBlbHNlIHsKICAgIHZhciBnZXR0ZXIgPSBkZXNjLmdldDsKCiAgICBpZiAoZ2V0dGVyID09PSB1bmRlZmluZWQpIHsKICAgICAgcmV0dXJuIHVuZGVmaW5lZDsKICAgIH0KCiAgICByZXR1cm4gZ2V0dGVyLmNhbGwocmVjZWl2ZXIpOwogIH0KfTsKCnZhciBpbmhlcml0cyA9IGZ1bmN0aW9uIGluaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7CiAgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSAiZnVuY3Rpb24iICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsKICAgIHRocm93IG5ldyBUeXBlRXJyb3IoIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgIiArIF90eXBlb2YyKHN1cGVyQ2xhc3MpKTsKICB9CgogIHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgewogICAgY29uc3RydWN0b3I6IHsKICAgICAgdmFsdWU6IHN1YkNsYXNzLAogICAgICBlbnVtZXJhYmxlOiBmYWxzZSwKICAgICAgd3JpdGFibGU6IHRydWUsCiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZQogICAgfQogIH0pOwogIGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsKfTsKCnZhciBwb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuID0gZnVuY3Rpb24gcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7CiAgaWYgKCFzZWxmKSB7CiAgICB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZCIpOwogIH0KCiAgcmV0dXJuIGNhbGwgJiYgKF90eXBlb2YyKGNhbGwpID09PSAib2JqZWN0IiB8fCB0eXBlb2YgY2FsbCA9PT0gImZ1bmN0aW9uIikgPyBjYWxsIDogc2VsZjsKfTsKCnZhciBDb2xvciA9IGZ1bmN0aW9uICgpIHsKICBmdW5jdGlvbiBDb2xvcigpIHsKICAgIGNsYXNzQ2FsbENoZWNrKHRoaXMsIENvbG9yKTsKICAgIHRoaXMuX19zdGF0ZSA9IGludGVycHJldC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwoKICAgIGlmICh0aGlzLl9fc3RhdGUgPT09IGZhbHNlKSB7CiAgICAgIHRocm93IG5ldyBFcnJvcignRmFpbGVkIHRvIGludGVycHJldCBjb2xvciBhcmd1bWVudHMnKTsKICAgIH0KCiAgICB0aGlzLl9fc3RhdGUuYSA9IHRoaXMuX19zdGF0ZS5hIHx8IDE7CiAgfQoKICBjcmVhdGVDbGFzcyhDb2xvciwgW3sKICAgIGtleTogJ3RvU3RyaW5nJywKICAgIHZhbHVlOiBmdW5jdGlvbiB0b1N0cmluZygpIHsKICAgICAgcmV0dXJuIGNvbG9yVG9TdHJpbmcodGhpcyk7CiAgICB9CiAgfSwgewogICAga2V5OiAndG9IZXhTdHJpbmcnLAogICAgdmFsdWU6IGZ1bmN0aW9uIHRvSGV4U3RyaW5nKCkgewogICAgICByZXR1cm4gY29sb3JUb1N0cmluZyh0aGlzLCB0cnVlKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICd0b09yaWdpbmFsJywKICAgIHZhbHVlOiBmdW5jdGlvbiB0b09yaWdpbmFsKCkgewogICAgICByZXR1cm4gdGhpcy5fX3N0YXRlLmNvbnZlcnNpb24ud3JpdGUodGhpcyk7CiAgICB9CiAgfV0pOwogIHJldHVybiBDb2xvcjsKfSgpOwoKZnVuY3Rpb24gZGVmaW5lUkdCQ29tcG9uZW50KHRhcmdldCwgY29tcG9uZW50LCBjb21wb25lbnRIZXhJbmRleCkgewogIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGNvbXBvbmVudCwgewogICAgZ2V0OiBmdW5jdGlvbiBnZXQkJDEoKSB7CiAgICAgIGlmICh0aGlzLl9fc3RhdGUuc3BhY2UgPT09ICdSR0InKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuX19zdGF0ZVtjb21wb25lbnRdOwogICAgICB9CgogICAgICBDb2xvci5yZWNhbGN1bGF0ZVJHQih0aGlzLCBjb21wb25lbnQsIGNvbXBvbmVudEhleEluZGV4KTsKICAgICAgcmV0dXJuIHRoaXMuX19zdGF0ZVtjb21wb25lbnRdOwogICAgfSwKICAgIHNldDogZnVuY3Rpb24gc2V0JCQxKHYpIHsKICAgICAgaWYgKHRoaXMuX19zdGF0ZS5zcGFjZSAhPT0gJ1JHQicpIHsKICAgICAgICBDb2xvci5yZWNhbGN1bGF0ZVJHQih0aGlzLCBjb21wb25lbnQsIGNvbXBvbmVudEhleEluZGV4KTsKICAgICAgICB0aGlzLl9fc3RhdGUuc3BhY2UgPSAnUkdCJzsKICAgICAgfQoKICAgICAgdGhpcy5fX3N0YXRlW2NvbXBvbmVudF0gPSB2OwogICAgfQogIH0pOwp9CgpmdW5jdGlvbiBkZWZpbmVIU1ZDb21wb25lbnQodGFyZ2V0LCBjb21wb25lbnQpIHsKICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBjb21wb25lbnQsIHsKICAgIGdldDogZnVuY3Rpb24gZ2V0JCQxKCkgewogICAgICBpZiAodGhpcy5fX3N0YXRlLnNwYWNlID09PSAnSFNWJykgewogICAgICAgIHJldHVybiB0aGlzLl9fc3RhdGVbY29tcG9uZW50XTsKICAgICAgfQoKICAgICAgQ29sb3IucmVjYWxjdWxhdGVIU1YodGhpcyk7CiAgICAgIHJldHVybiB0aGlzLl9fc3RhdGVbY29tcG9uZW50XTsKICAgIH0sCiAgICBzZXQ6IGZ1bmN0aW9uIHNldCQkMSh2KSB7CiAgICAgIGlmICh0aGlzLl9fc3RhdGUuc3BhY2UgIT09ICdIU1YnKSB7CiAgICAgICAgQ29sb3IucmVjYWxjdWxhdGVIU1YodGhpcyk7CiAgICAgICAgdGhpcy5fX3N0YXRlLnNwYWNlID0gJ0hTVic7CiAgICAgIH0KCiAgICAgIHRoaXMuX19zdGF0ZVtjb21wb25lbnRdID0gdjsKICAgIH0KICB9KTsKfQoKQ29sb3IucmVjYWxjdWxhdGVSR0IgPSBmdW5jdGlvbiAoY29sb3IsIGNvbXBvbmVudCwgY29tcG9uZW50SGV4SW5kZXgpIHsKICBpZiAoY29sb3IuX19zdGF0ZS5zcGFjZSA9PT0gJ0hFWCcpIHsKICAgIGNvbG9yLl9fc3RhdGVbY29tcG9uZW50XSA9IENvbG9yTWF0aC5jb21wb25lbnRfZnJvbV9oZXgoY29sb3IuX19zdGF0ZS5oZXgsIGNvbXBvbmVudEhleEluZGV4KTsKICB9IGVsc2UgaWYgKGNvbG9yLl9fc3RhdGUuc3BhY2UgPT09ICdIU1YnKSB7CiAgICBDb21tb24uZXh0ZW5kKGNvbG9yLl9fc3RhdGUsIENvbG9yTWF0aC5oc3ZfdG9fcmdiKGNvbG9yLl9fc3RhdGUuaCwgY29sb3IuX19zdGF0ZS5zLCBjb2xvci5fX3N0YXRlLnYpKTsKICB9IGVsc2UgewogICAgdGhyb3cgbmV3IEVycm9yKCdDb3JydXB0ZWQgY29sb3Igc3RhdGUnKTsKICB9Cn07CgpDb2xvci5yZWNhbGN1bGF0ZUhTViA9IGZ1bmN0aW9uIChjb2xvcikgewogIHZhciByZXN1bHQgPSBDb2xvck1hdGgucmdiX3RvX2hzdihjb2xvci5yLCBjb2xvci5nLCBjb2xvci5iKTsKICBDb21tb24uZXh0ZW5kKGNvbG9yLl9fc3RhdGUsIHsKICAgIHM6IHJlc3VsdC5zLAogICAgdjogcmVzdWx0LnYKICB9KTsKCiAgaWYgKCFDb21tb24uaXNOYU4ocmVzdWx0LmgpKSB7CiAgICBjb2xvci5fX3N0YXRlLmggPSByZXN1bHQuaDsKICB9IGVsc2UgaWYgKENvbW1vbi5pc1VuZGVmaW5lZChjb2xvci5fX3N0YXRlLmgpKSB7CiAgICBjb2xvci5fX3N0YXRlLmggPSAwOwogIH0KfTsKCkNvbG9yLkNPTVBPTkVOVFMgPSBbJ3InLCAnZycsICdiJywgJ2gnLCAncycsICd2JywgJ2hleCcsICdhJ107CmRlZmluZVJHQkNvbXBvbmVudChDb2xvci5wcm90b3R5cGUsICdyJywgMik7CmRlZmluZVJHQkNvbXBvbmVudChDb2xvci5wcm90b3R5cGUsICdnJywgMSk7CmRlZmluZVJHQkNvbXBvbmVudChDb2xvci5wcm90b3R5cGUsICdiJywgMCk7CmRlZmluZUhTVkNvbXBvbmVudChDb2xvci5wcm90b3R5cGUsICdoJyk7CmRlZmluZUhTVkNvbXBvbmVudChDb2xvci5wcm90b3R5cGUsICdzJyk7CmRlZmluZUhTVkNvbXBvbmVudChDb2xvci5wcm90b3R5cGUsICd2Jyk7Ck9iamVjdC5kZWZpbmVQcm9wZXJ0eShDb2xvci5wcm90b3R5cGUsICdhJywgewogIGdldDogZnVuY3Rpb24gZ2V0JCQxKCkgewogICAgcmV0dXJuIHRoaXMuX19zdGF0ZS5hOwogIH0sCiAgc2V0OiBmdW5jdGlvbiBzZXQkJDEodikgewogICAgdGhpcy5fX3N0YXRlLmEgPSB2OwogIH0KfSk7Ck9iamVjdC5kZWZpbmVQcm9wZXJ0eShDb2xvci5wcm90b3R5cGUsICdoZXgnLCB7CiAgZ2V0OiBmdW5jdGlvbiBnZXQkJDEoKSB7CiAgICBpZiAodGhpcy5fX3N0YXRlLnNwYWNlICE9PSAnSEVYJykgewogICAgICB0aGlzLl9fc3RhdGUuaGV4ID0gQ29sb3JNYXRoLnJnYl90b19oZXgodGhpcy5yLCB0aGlzLmcsIHRoaXMuYik7CiAgICAgIHRoaXMuX19zdGF0ZS5zcGFjZSA9ICdIRVgnOwogICAgfQoKICAgIHJldHVybiB0aGlzLl9fc3RhdGUuaGV4OwogIH0sCiAgc2V0OiBmdW5jdGlvbiBzZXQkJDEodikgewogICAgdGhpcy5fX3N0YXRlLnNwYWNlID0gJ0hFWCc7CiAgICB0aGlzLl9fc3RhdGUuaGV4ID0gdjsKICB9Cn0pOwoKdmFyIENvbnRyb2xsZXIgPSBmdW5jdGlvbiAoKSB7CiAgZnVuY3Rpb24gQ29udHJvbGxlcihvYmplY3QsIHByb3BlcnR5KSB7CiAgICBjbGFzc0NhbGxDaGVjayh0aGlzLCBDb250cm9sbGVyKTsKICAgIHRoaXMuaW5pdGlhbFZhbHVlID0gb2JqZWN0W3Byb3BlcnR5XTsKICAgIHRoaXMuZG9tRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgdGhpcy5vYmplY3QgPSBvYmplY3Q7CiAgICB0aGlzLnByb3BlcnR5ID0gcHJvcGVydHk7CiAgICB0aGlzLl9fb25DaGFuZ2UgPSB1bmRlZmluZWQ7CiAgICB0aGlzLl9fb25GaW5pc2hDaGFuZ2UgPSB1bmRlZmluZWQ7CiAgfQoKICBjcmVhdGVDbGFzcyhDb250cm9sbGVyLCBbewogICAga2V5OiAnb25DaGFuZ2UnLAogICAgdmFsdWU6IGZ1bmN0aW9uIG9uQ2hhbmdlKGZuYykgewogICAgICB0aGlzLl9fb25DaGFuZ2UgPSBmbmM7CiAgICAgIHJldHVybiB0aGlzOwogICAgfQogIH0sIHsKICAgIGtleTogJ29uRmluaXNoQ2hhbmdlJywKICAgIHZhbHVlOiBmdW5jdGlvbiBvbkZpbmlzaENoYW5nZShmbmMpIHsKICAgICAgdGhpcy5fX29uRmluaXNoQ2hhbmdlID0gZm5jOwogICAgICByZXR1cm4gdGhpczsKICAgIH0KICB9LCB7CiAgICBrZXk6ICdzZXRWYWx1ZScsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2V0VmFsdWUobmV3VmFsdWUpIHsKICAgICAgdGhpcy5vYmplY3RbdGhpcy5wcm9wZXJ0eV0gPSBuZXdWYWx1ZTsKCiAgICAgIGlmICh0aGlzLl9fb25DaGFuZ2UpIHsKICAgICAgICB0aGlzLl9fb25DaGFuZ2UuY2FsbCh0aGlzLCBuZXdWYWx1ZSk7CiAgICAgIH0KCiAgICAgIHRoaXMudXBkYXRlRGlzcGxheSgpOwogICAgICByZXR1cm4gdGhpczsKICAgIH0KICB9LCB7CiAgICBrZXk6ICdnZXRWYWx1ZScsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0VmFsdWUoKSB7CiAgICAgIHJldHVybiB0aGlzLm9iamVjdFt0aGlzLnByb3BlcnR5XTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICd1cGRhdGVEaXNwbGF5JywKICAgIHZhbHVlOiBmdW5jdGlvbiB1cGRhdGVEaXNwbGF5KCkgewogICAgICByZXR1cm4gdGhpczsKICAgIH0KICB9LCB7CiAgICBrZXk6ICdpc01vZGlmaWVkJywKICAgIHZhbHVlOiBmdW5jdGlvbiBpc01vZGlmaWVkKCkgewogICAgICByZXR1cm4gdGhpcy5pbml0aWFsVmFsdWUgIT09IHRoaXMuZ2V0VmFsdWUoKTsKICAgIH0KICB9XSk7CiAgcmV0dXJuIENvbnRyb2xsZXI7Cn0oKTsKCnZhciBFVkVOVF9NQVAgPSB7CiAgSFRNTEV2ZW50czogWydjaGFuZ2UnXSwKICBNb3VzZUV2ZW50czogWydjbGljaycsICdtb3VzZW1vdmUnLCAnbW91c2Vkb3duJywgJ21vdXNldXAnLCAnbW91c2VvdmVyJ10sCiAgS2V5Ym9hcmRFdmVudHM6IFsna2V5ZG93biddCn07CnZhciBFVkVOVF9NQVBfSU5WID0ge307CkNvbW1vbi5lYWNoKEVWRU5UX01BUCwgZnVuY3Rpb24gKHYsIGspIHsKICBDb21tb24uZWFjaCh2LCBmdW5jdGlvbiAoZSkgewogICAgRVZFTlRfTUFQX0lOVltlXSA9IGs7CiAgfSk7Cn0pOwp2YXIgQ1NTX1ZBTFVFX1BJWEVMUyA9IC8oXGQrKFwuXGQrKT8pcHgvOwoKZnVuY3Rpb24gY3NzVmFsdWVUb1BpeGVscyh2YWwpIHsKICBpZiAodmFsID09PSAnMCcgfHwgQ29tbW9uLmlzVW5kZWZpbmVkKHZhbCkpIHsKICAgIHJldHVybiAwOwogIH0KCiAgdmFyIG1hdGNoID0gdmFsLm1hdGNoKENTU19WQUxVRV9QSVhFTFMpOwoKICBpZiAoIUNvbW1vbi5pc051bGwobWF0Y2gpKSB7CiAgICByZXR1cm4gcGFyc2VGbG9hdChtYXRjaFsxXSk7CiAgfQoKICByZXR1cm4gMDsKfQoKdmFyIGRvbSA9IHsKICBtYWtlU2VsZWN0YWJsZTogZnVuY3Rpb24gbWFrZVNlbGVjdGFibGUoZWxlbSwgc2VsZWN0YWJsZSkgewogICAgaWYgKGVsZW0gPT09IHVuZGVmaW5lZCB8fCBlbGVtLnN0eWxlID09PSB1bmRlZmluZWQpIHJldHVybjsKICAgIGVsZW0ub25zZWxlY3RzdGFydCA9IHNlbGVjdGFibGUgPyBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0gOiBmdW5jdGlvbiAoKSB7fTsKICAgIGVsZW0uc3R5bGUuTW96VXNlclNlbGVjdCA9IHNlbGVjdGFibGUgPyAnYXV0bycgOiAnbm9uZSc7CiAgICBlbGVtLnN0eWxlLktodG1sVXNlclNlbGVjdCA9IHNlbGVjdGFibGUgPyAnYXV0bycgOiAnbm9uZSc7CiAgICBlbGVtLnVuc2VsZWN0YWJsZSA9IHNlbGVjdGFibGUgPyAnb24nIDogJ29mZic7CiAgfSwKICBtYWtlRnVsbHNjcmVlbjogZnVuY3Rpb24gbWFrZUZ1bGxzY3JlZW4oZWxlbSwgaG9yLCB2ZXJ0KSB7CiAgICB2YXIgdmVydGljYWwgPSB2ZXJ0OwogICAgdmFyIGhvcml6b250YWwgPSBob3I7CgogICAgaWYgKENvbW1vbi5pc1VuZGVmaW5lZChob3Jpem9udGFsKSkgewogICAgICBob3Jpem9udGFsID0gdHJ1ZTsKICAgIH0KCiAgICBpZiAoQ29tbW9uLmlzVW5kZWZpbmVkKHZlcnRpY2FsKSkgewogICAgICB2ZXJ0aWNhbCA9IHRydWU7CiAgICB9CgogICAgZWxlbS5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7CgogICAgaWYgKGhvcml6b250YWwpIHsKICAgICAgZWxlbS5zdHlsZS5sZWZ0ID0gMDsKICAgICAgZWxlbS5zdHlsZS5yaWdodCA9IDA7CiAgICB9CgogICAgaWYgKHZlcnRpY2FsKSB7CiAgICAgIGVsZW0uc3R5bGUudG9wID0gMDsKICAgICAgZWxlbS5zdHlsZS5ib3R0b20gPSAwOwogICAgfQogIH0sCiAgZmFrZUV2ZW50OiBmdW5jdGlvbiBmYWtlRXZlbnQoZWxlbSwgZXZlbnRUeXBlLCBwYXJzLCBhdXgpIHsKICAgIHZhciBwYXJhbXMgPSBwYXJzIHx8IHt9OwogICAgdmFyIGNsYXNzTmFtZSA9IEVWRU5UX01BUF9JTlZbZXZlbnRUeXBlXTsKCiAgICBpZiAoIWNsYXNzTmFtZSkgewogICAgICB0aHJvdyBuZXcgRXJyb3IoJ0V2ZW50IHR5cGUgJyArIGV2ZW50VHlwZSArICcgbm90IHN1cHBvcnRlZC4nKTsKICAgIH0KCiAgICB2YXIgZXZ0ID0gZG9jdW1lbnQuY3JlYXRlRXZlbnQoY2xhc3NOYW1lKTsKCiAgICBzd2l0Y2ggKGNsYXNzTmFtZSkgewogICAgICBjYXNlICdNb3VzZUV2ZW50cyc6CiAgICAgICAgewogICAgICAgICAgdmFyIGNsaWVudFggPSBwYXJhbXMueCB8fCBwYXJhbXMuY2xpZW50WCB8fCAwOwogICAgICAgICAgdmFyIGNsaWVudFkgPSBwYXJhbXMueSB8fCBwYXJhbXMuY2xpZW50WSB8fCAwOwogICAgICAgICAgZXZ0LmluaXRNb3VzZUV2ZW50KGV2ZW50VHlwZSwgcGFyYW1zLmJ1YmJsZXMgfHwgZmFsc2UsIHBhcmFtcy5jYW5jZWxhYmxlIHx8IHRydWUsIHdpbmRvdywgcGFyYW1zLmNsaWNrQ291bnQgfHwgMSwgMCwgMCwgY2xpZW50WCwgY2xpZW50WSwgZmFsc2UsIGZhbHNlLCBmYWxzZSwgZmFsc2UsIDAsIG51bGwpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQoKICAgICAgY2FzZSAnS2V5Ym9hcmRFdmVudHMnOgogICAgICAgIHsKICAgICAgICAgIHZhciBpbml0ID0gZXZ0LmluaXRLZXlib2FyZEV2ZW50IHx8IGV2dC5pbml0S2V5RXZlbnQ7CiAgICAgICAgICBDb21tb24uZGVmYXVsdHMocGFyYW1zLCB7CiAgICAgICAgICAgIGNhbmNlbGFibGU6IHRydWUsCiAgICAgICAgICAgIGN0cmxLZXk6IGZhbHNlLAogICAgICAgICAgICBhbHRLZXk6IGZhbHNlLAogICAgICAgICAgICBzaGlmdEtleTogZmFsc2UsCiAgICAgICAgICAgIG1ldGFLZXk6IGZhbHNlLAogICAgICAgICAgICBrZXlDb2RlOiB1bmRlZmluZWQsCiAgICAgICAgICAgIGNoYXJDb2RlOiB1bmRlZmluZWQKICAgICAgICAgIH0pOwogICAgICAgICAgaW5pdChldmVudFR5cGUsIHBhcmFtcy5idWJibGVzIHx8IGZhbHNlLCBwYXJhbXMuY2FuY2VsYWJsZSwgd2luZG93LCBwYXJhbXMuY3RybEtleSwgcGFyYW1zLmFsdEtleSwgcGFyYW1zLnNoaWZ0S2V5LCBwYXJhbXMubWV0YUtleSwgcGFyYW1zLmtleUNvZGUsIHBhcmFtcy5jaGFyQ29kZSk7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CgogICAgICBkZWZhdWx0OgogICAgICAgIHsKICAgICAgICAgIGV2dC5pbml0RXZlbnQoZXZlbnRUeXBlLCBwYXJhbXMuYnViYmxlcyB8fCBmYWxzZSwgcGFyYW1zLmNhbmNlbGFibGUgfHwgdHJ1ZSk7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICB9CgogICAgQ29tbW9uLmRlZmF1bHRzKGV2dCwgYXV4KTsKICAgIGVsZW0uZGlzcGF0Y2hFdmVudChldnQpOwogIH0sCiAgYmluZDogZnVuY3Rpb24gYmluZChlbGVtLCBldmVudCwgZnVuYywgbmV3Qm9vbCkgewogICAgdmFyIGJvb2wgPSBuZXdCb29sIHx8IGZhbHNlOwoKICAgIGlmIChlbGVtLmFkZEV2ZW50TGlzdGVuZXIpIHsKICAgICAgZWxlbS5hZGRFdmVudExpc3RlbmVyKGV2ZW50LCBmdW5jLCBib29sKTsKICAgIH0gZWxzZSBpZiAoZWxlbS5hdHRhY2hFdmVudCkgewogICAgICBlbGVtLmF0dGFjaEV2ZW50KCdvbicgKyBldmVudCwgZnVuYyk7CiAgICB9CgogICAgcmV0dXJuIGRvbTsKICB9LAogIHVuYmluZDogZnVuY3Rpb24gdW5iaW5kKGVsZW0sIGV2ZW50LCBmdW5jLCBuZXdCb29sKSB7CiAgICB2YXIgYm9vbCA9IG5ld0Jvb2wgfHwgZmFsc2U7CgogICAgaWYgKGVsZW0ucmVtb3ZlRXZlbnRMaXN0ZW5lcikgewogICAgICBlbGVtLnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnQsIGZ1bmMsIGJvb2wpOwogICAgfSBlbHNlIGlmIChlbGVtLmRldGFjaEV2ZW50KSB7CiAgICAgIGVsZW0uZGV0YWNoRXZlbnQoJ29uJyArIGV2ZW50LCBmdW5jKTsKICAgIH0KCiAgICByZXR1cm4gZG9tOwogIH0sCiAgYWRkQ2xhc3M6IGZ1bmN0aW9uIGFkZENsYXNzKGVsZW0sIGNsYXNzTmFtZSkgewogICAgaWYgKGVsZW0uY2xhc3NOYW1lID09PSB1bmRlZmluZWQpIHsKICAgICAgZWxlbS5jbGFzc05hbWUgPSBjbGFzc05hbWU7CiAgICB9IGVsc2UgaWYgKGVsZW0uY2xhc3NOYW1lICE9PSBjbGFzc05hbWUpIHsKICAgICAgdmFyIGNsYXNzZXMgPSBlbGVtLmNsYXNzTmFtZS5zcGxpdCgvICsvKTsKCiAgICAgIGlmIChjbGFzc2VzLmluZGV4T2YoY2xhc3NOYW1lKSA9PT0gLTEpIHsKICAgICAgICBjbGFzc2VzLnB1c2goY2xhc3NOYW1lKTsKICAgICAgICBlbGVtLmNsYXNzTmFtZSA9IGNsYXNzZXMuam9pbignICcpLnJlcGxhY2UoL15ccysvLCAnJykucmVwbGFjZSgvXHMrJC8sICcnKTsKICAgICAgfQogICAgfQoKICAgIHJldHVybiBkb207CiAgfSwKICByZW1vdmVDbGFzczogZnVuY3Rpb24gcmVtb3ZlQ2xhc3MoZWxlbSwgY2xhc3NOYW1lKSB7CiAgICBpZiAoY2xhc3NOYW1lKSB7CiAgICAgIGlmIChlbGVtLmNsYXNzTmFtZSA9PT0gY2xhc3NOYW1lKSB7CiAgICAgICAgZWxlbS5yZW1vdmVBdHRyaWJ1dGUoJ2NsYXNzJyk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdmFyIGNsYXNzZXMgPSBlbGVtLmNsYXNzTmFtZS5zcGxpdCgvICsvKTsKICAgICAgICB2YXIgaW5kZXggPSBjbGFzc2VzLmluZGV4T2YoY2xhc3NOYW1lKTsKCiAgICAgICAgaWYgKGluZGV4ICE9PSAtMSkgewogICAgICAgICAgY2xhc3Nlcy5zcGxpY2UoaW5kZXgsIDEpOwogICAgICAgICAgZWxlbS5jbGFzc05hbWUgPSBjbGFzc2VzLmpvaW4oJyAnKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIGVsZW0uY2xhc3NOYW1lID0gdW5kZWZpbmVkOwogICAgfQoKICAgIHJldHVybiBkb207CiAgfSwKICBoYXNDbGFzczogZnVuY3Rpb24gaGFzQ2xhc3MoZWxlbSwgY2xhc3NOYW1lKSB7CiAgICByZXR1cm4gbmV3IFJlZ0V4cCgnKD86XnxcXHMrKScgKyBjbGFzc05hbWUgKyAnKD86XFxzK3wkKScpLnRlc3QoZWxlbS5jbGFzc05hbWUpIHx8IGZhbHNlOwogIH0sCiAgZ2V0V2lkdGg6IGZ1bmN0aW9uIGdldFdpZHRoKGVsZW0pIHsKICAgIHZhciBzdHlsZSA9IGdldENvbXB1dGVkU3R5bGUoZWxlbSk7CiAgICByZXR1cm4gY3NzVmFsdWVUb1BpeGVscyhzdHlsZVsnYm9yZGVyLWxlZnQtd2lkdGgnXSkgKyBjc3NWYWx1ZVRvUGl4ZWxzKHN0eWxlWydib3JkZXItcmlnaHQtd2lkdGgnXSkgKyBjc3NWYWx1ZVRvUGl4ZWxzKHN0eWxlWydwYWRkaW5nLWxlZnQnXSkgKyBjc3NWYWx1ZVRvUGl4ZWxzKHN0eWxlWydwYWRkaW5nLXJpZ2h0J10pICsgY3NzVmFsdWVUb1BpeGVscyhzdHlsZS53aWR0aCk7CiAgfSwKICBnZXRIZWlnaHQ6IGZ1bmN0aW9uIGdldEhlaWdodChlbGVtKSB7CiAgICB2YXIgc3R5bGUgPSBnZXRDb21wdXRlZFN0eWxlKGVsZW0pOwogICAgcmV0dXJuIGNzc1ZhbHVlVG9QaXhlbHMoc3R5bGVbJ2JvcmRlci10b3Atd2lkdGgnXSkgKyBjc3NWYWx1ZVRvUGl4ZWxzKHN0eWxlWydib3JkZXItYm90dG9tLXdpZHRoJ10pICsgY3NzVmFsdWVUb1BpeGVscyhzdHlsZVsncGFkZGluZy10b3AnXSkgKyBjc3NWYWx1ZVRvUGl4ZWxzKHN0eWxlWydwYWRkaW5nLWJvdHRvbSddKSArIGNzc1ZhbHVlVG9QaXhlbHMoc3R5bGUuaGVpZ2h0KTsKICB9LAogIGdldE9mZnNldDogZnVuY3Rpb24gZ2V0T2Zmc2V0KGVsKSB7CiAgICB2YXIgZWxlbSA9IGVsOwogICAgdmFyIG9mZnNldCA9IHsKICAgICAgbGVmdDogMCwKICAgICAgdG9wOiAwCiAgICB9OwoKICAgIGlmIChlbGVtLm9mZnNldFBhcmVudCkgewogICAgICBkbyB7CiAgICAgICAgb2Zmc2V0LmxlZnQgKz0gZWxlbS5vZmZzZXRMZWZ0OwogICAgICAgIG9mZnNldC50b3AgKz0gZWxlbS5vZmZzZXRUb3A7CiAgICAgICAgZWxlbSA9IGVsZW0ub2Zmc2V0UGFyZW50OwogICAgICB9IHdoaWxlIChlbGVtKTsKICAgIH0KCiAgICByZXR1cm4gb2Zmc2V0OwogIH0sCiAgaXNBY3RpdmU6IGZ1bmN0aW9uIGlzQWN0aXZlKGVsZW0pIHsKICAgIHJldHVybiBlbGVtID09PSBkb2N1bWVudC5hY3RpdmVFbGVtZW50ICYmIChlbGVtLnR5cGUgfHwgZWxlbS5ocmVmKTsKICB9Cn07Cgp2YXIgQm9vbGVhbkNvbnRyb2xsZXIgPSBmdW5jdGlvbiAoX0NvbnRyb2xsZXIpIHsKICBpbmhlcml0cyhCb29sZWFuQ29udHJvbGxlciwgX0NvbnRyb2xsZXIpOwoKICBmdW5jdGlvbiBCb29sZWFuQ29udHJvbGxlcihvYmplY3QsIHByb3BlcnR5KSB7CiAgICBjbGFzc0NhbGxDaGVjayh0aGlzLCBCb29sZWFuQ29udHJvbGxlcik7CgogICAgdmFyIF90aGlzMiA9IHBvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKEJvb2xlYW5Db250cm9sbGVyLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoQm9vbGVhbkNvbnRyb2xsZXIpKS5jYWxsKHRoaXMsIG9iamVjdCwgcHJvcGVydHkpKTsKCiAgICB2YXIgX3RoaXMgPSBfdGhpczI7CiAgICBfdGhpczIuX19wcmV2ID0gX3RoaXMyLmdldFZhbHVlKCk7CiAgICBfdGhpczIuX19jaGVja2JveCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7CgogICAgX3RoaXMyLl9fY2hlY2tib3guc2V0QXR0cmlidXRlKCd0eXBlJywgJ2NoZWNrYm94Jyk7CgogICAgZnVuY3Rpb24gb25DaGFuZ2UoKSB7CiAgICAgIF90aGlzLnNldFZhbHVlKCFfdGhpcy5fX3ByZXYpOwogICAgfQoKICAgIGRvbS5iaW5kKF90aGlzMi5fX2NoZWNrYm94LCAnY2hhbmdlJywgb25DaGFuZ2UsIGZhbHNlKTsKCiAgICBfdGhpczIuZG9tRWxlbWVudC5hcHBlbmRDaGlsZChfdGhpczIuX19jaGVja2JveCk7CgogICAgX3RoaXMyLnVwZGF0ZURpc3BsYXkoKTsKCiAgICByZXR1cm4gX3RoaXMyOwogIH0KCiAgY3JlYXRlQ2xhc3MoQm9vbGVhbkNvbnRyb2xsZXIsIFt7CiAgICBrZXk6ICdzZXRWYWx1ZScsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2V0VmFsdWUodikgewogICAgICB2YXIgdG9SZXR1cm4gPSBnZXQoQm9vbGVhbkNvbnRyb2xsZXIucHJvdG90eXBlLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoQm9vbGVhbkNvbnRyb2xsZXIucHJvdG90eXBlKSwgJ3NldFZhbHVlJywgdGhpcykuY2FsbCh0aGlzLCB2KTsKCiAgICAgIGlmICh0aGlzLl9fb25GaW5pc2hDaGFuZ2UpIHsKICAgICAgICB0aGlzLl9fb25GaW5pc2hDaGFuZ2UuY2FsbCh0aGlzLCB0aGlzLmdldFZhbHVlKCkpOwogICAgICB9CgogICAgICB0aGlzLl9fcHJldiA9IHRoaXMuZ2V0VmFsdWUoKTsKICAgICAgcmV0dXJuIHRvUmV0dXJuOwogICAgfQogIH0sIHsKICAgIGtleTogJ3VwZGF0ZURpc3BsYXknLAogICAgdmFsdWU6IGZ1bmN0aW9uIHVwZGF0ZURpc3BsYXkoKSB7CiAgICAgIGlmICh0aGlzLmdldFZhbHVlKCkgPT09IHRydWUpIHsKICAgICAgICB0aGlzLl9fY2hlY2tib3guc2V0QXR0cmlidXRlKCdjaGVja2VkJywgJ2NoZWNrZWQnKTsKCiAgICAgICAgdGhpcy5fX2NoZWNrYm94LmNoZWNrZWQgPSB0cnVlOwogICAgICAgIHRoaXMuX19wcmV2ID0gdHJ1ZTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLl9fY2hlY2tib3guY2hlY2tlZCA9IGZhbHNlOwogICAgICAgIHRoaXMuX19wcmV2ID0gZmFsc2U7CiAgICAgIH0KCiAgICAgIHJldHVybiBnZXQoQm9vbGVhbkNvbnRyb2xsZXIucHJvdG90eXBlLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoQm9vbGVhbkNvbnRyb2xsZXIucHJvdG90eXBlKSwgJ3VwZGF0ZURpc3BsYXknLCB0aGlzKS5jYWxsKHRoaXMpOwogICAgfQogIH1dKTsKICByZXR1cm4gQm9vbGVhbkNvbnRyb2xsZXI7Cn0oQ29udHJvbGxlcik7Cgp2YXIgT3B0aW9uQ29udHJvbGxlciA9IGZ1bmN0aW9uIChfQ29udHJvbGxlcikgewogIGluaGVyaXRzKE9wdGlvbkNvbnRyb2xsZXIsIF9Db250cm9sbGVyKTsKCiAgZnVuY3Rpb24gT3B0aW9uQ29udHJvbGxlcihvYmplY3QsIHByb3BlcnR5LCBvcHRzKSB7CiAgICBjbGFzc0NhbGxDaGVjayh0aGlzLCBPcHRpb25Db250cm9sbGVyKTsKCiAgICB2YXIgX3RoaXMyID0gcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoT3B0aW9uQ29udHJvbGxlci5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKE9wdGlvbkNvbnRyb2xsZXIpKS5jYWxsKHRoaXMsIG9iamVjdCwgcHJvcGVydHkpKTsKCiAgICB2YXIgb3B0aW9ucyA9IG9wdHM7CiAgICB2YXIgX3RoaXMgPSBfdGhpczI7CiAgICBfdGhpczIuX19zZWxlY3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzZWxlY3QnKTsKCiAgICBpZiAoQ29tbW9uLmlzQXJyYXkob3B0aW9ucykpIHsKICAgICAgdmFyIG1hcCA9IHt9OwogICAgICBDb21tb24uZWFjaChvcHRpb25zLCBmdW5jdGlvbiAoZWxlbWVudCkgewogICAgICAgIG1hcFtlbGVtZW50XSA9IGVsZW1lbnQ7CiAgICAgIH0pOwogICAgICBvcHRpb25zID0gbWFwOwogICAgfQoKICAgIENvbW1vbi5lYWNoKG9wdGlvbnMsIGZ1bmN0aW9uICh2YWx1ZSwga2V5KSB7CiAgICAgIHZhciBvcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdvcHRpb24nKTsKICAgICAgb3B0LmlubmVySFRNTCA9IGtleTsKICAgICAgb3B0LnNldEF0dHJpYnV0ZSgndmFsdWUnLCB2YWx1ZSk7CgogICAgICBfdGhpcy5fX3NlbGVjdC5hcHBlbmRDaGlsZChvcHQpOwogICAgfSk7CgogICAgX3RoaXMyLnVwZGF0ZURpc3BsYXkoKTsKCiAgICBkb20uYmluZChfdGhpczIuX19zZWxlY3QsICdjaGFuZ2UnLCBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBkZXNpcmVkVmFsdWUgPSB0aGlzLm9wdGlvbnNbdGhpcy5zZWxlY3RlZEluZGV4XS52YWx1ZTsKCiAgICAgIF90aGlzLnNldFZhbHVlKGRlc2lyZWRWYWx1ZSk7CiAgICB9KTsKCiAgICBfdGhpczIuZG9tRWxlbWVudC5hcHBlbmRDaGlsZChfdGhpczIuX19zZWxlY3QpOwoKICAgIHJldHVybiBfdGhpczI7CiAgfQoKICBjcmVhdGVDbGFzcyhPcHRpb25Db250cm9sbGVyLCBbewogICAga2V5OiAnc2V0VmFsdWUnLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNldFZhbHVlKHYpIHsKICAgICAgdmFyIHRvUmV0dXJuID0gZ2V0KE9wdGlvbkNvbnRyb2xsZXIucHJvdG90eXBlLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoT3B0aW9uQ29udHJvbGxlci5wcm90b3R5cGUpLCAnc2V0VmFsdWUnLCB0aGlzKS5jYWxsKHRoaXMsIHYpOwoKICAgICAgaWYgKHRoaXMuX19vbkZpbmlzaENoYW5nZSkgewogICAgICAgIHRoaXMuX19vbkZpbmlzaENoYW5nZS5jYWxsKHRoaXMsIHRoaXMuZ2V0VmFsdWUoKSk7CiAgICAgIH0KCiAgICAgIHJldHVybiB0b1JldHVybjsKICAgIH0KICB9LCB7CiAgICBrZXk6ICd1cGRhdGVEaXNwbGF5JywKICAgIHZhbHVlOiBmdW5jdGlvbiB1cGRhdGVEaXNwbGF5KCkgewogICAgICBpZiAoZG9tLmlzQWN0aXZlKHRoaXMuX19zZWxlY3QpKSByZXR1cm4gdGhpczsKICAgICAgdGhpcy5fX3NlbGVjdC52YWx1ZSA9IHRoaXMuZ2V0VmFsdWUoKTsKICAgICAgcmV0dXJuIGdldChPcHRpb25Db250cm9sbGVyLnByb3RvdHlwZS5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKE9wdGlvbkNvbnRyb2xsZXIucHJvdG90eXBlKSwgJ3VwZGF0ZURpc3BsYXknLCB0aGlzKS5jYWxsKHRoaXMpOwogICAgfQogIH1dKTsKICByZXR1cm4gT3B0aW9uQ29udHJvbGxlcjsKfShDb250cm9sbGVyKTsKCnZhciBTdHJpbmdDb250cm9sbGVyID0gZnVuY3Rpb24gKF9Db250cm9sbGVyKSB7CiAgaW5oZXJpdHMoU3RyaW5nQ29udHJvbGxlciwgX0NvbnRyb2xsZXIpOwoKICBmdW5jdGlvbiBTdHJpbmdDb250cm9sbGVyKG9iamVjdCwgcHJvcGVydHkpIHsKICAgIGNsYXNzQ2FsbENoZWNrKHRoaXMsIFN0cmluZ0NvbnRyb2xsZXIpOwoKICAgIHZhciBfdGhpczIgPSBwb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChTdHJpbmdDb250cm9sbGVyLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoU3RyaW5nQ29udHJvbGxlcikpLmNhbGwodGhpcywgb2JqZWN0LCBwcm9wZXJ0eSkpOwoKICAgIHZhciBfdGhpcyA9IF90aGlzMjsKCiAgICBmdW5jdGlvbiBvbkNoYW5nZSgpIHsKICAgICAgX3RoaXMuc2V0VmFsdWUoX3RoaXMuX19pbnB1dC52YWx1ZSk7CiAgICB9CgogICAgZnVuY3Rpb24gb25CbHVyKCkgewogICAgICBpZiAoX3RoaXMuX19vbkZpbmlzaENoYW5nZSkgewogICAgICAgIF90aGlzLl9fb25GaW5pc2hDaGFuZ2UuY2FsbChfdGhpcywgX3RoaXMuZ2V0VmFsdWUoKSk7CiAgICAgIH0KICAgIH0KCiAgICBfdGhpczIuX19pbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7CgogICAgX3RoaXMyLl9faW5wdXQuc2V0QXR0cmlidXRlKCd0eXBlJywgJ3RleHQnKTsKCiAgICBkb20uYmluZChfdGhpczIuX19pbnB1dCwgJ2tleXVwJywgb25DaGFuZ2UpOwogICAgZG9tLmJpbmQoX3RoaXMyLl9faW5wdXQsICdjaGFuZ2UnLCBvbkNoYW5nZSk7CiAgICBkb20uYmluZChfdGhpczIuX19pbnB1dCwgJ2JsdXInLCBvbkJsdXIpOwogICAgZG9tLmJpbmQoX3RoaXMyLl9faW5wdXQsICdrZXlkb3duJywgZnVuY3Rpb24gKGUpIHsKICAgICAgaWYgKGUua2V5Q29kZSA9PT0gMTMpIHsKICAgICAgICB0aGlzLmJsdXIoKTsKICAgICAgfQogICAgfSk7CgogICAgX3RoaXMyLnVwZGF0ZURpc3BsYXkoKTsKCiAgICBfdGhpczIuZG9tRWxlbWVudC5hcHBlbmRDaGlsZChfdGhpczIuX19pbnB1dCk7CgogICAgcmV0dXJuIF90aGlzMjsKICB9CgogIGNyZWF0ZUNsYXNzKFN0cmluZ0NvbnRyb2xsZXIsIFt7CiAgICBrZXk6ICd1cGRhdGVEaXNwbGF5JywKICAgIHZhbHVlOiBmdW5jdGlvbiB1cGRhdGVEaXNwbGF5KCkgewogICAgICBpZiAoIWRvbS5pc0FjdGl2ZSh0aGlzLl9faW5wdXQpKSB7CiAgICAgICAgdGhpcy5fX2lucHV0LnZhbHVlID0gdGhpcy5nZXRWYWx1ZSgpOwogICAgICB9CgogICAgICByZXR1cm4gZ2V0KFN0cmluZ0NvbnRyb2xsZXIucHJvdG90eXBlLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoU3RyaW5nQ29udHJvbGxlci5wcm90b3R5cGUpLCAndXBkYXRlRGlzcGxheScsIHRoaXMpLmNhbGwodGhpcyk7CiAgICB9CiAgfV0pOwogIHJldHVybiBTdHJpbmdDb250cm9sbGVyOwp9KENvbnRyb2xsZXIpOwoKZnVuY3Rpb24gbnVtRGVjaW1hbHMoeCkgewogIHZhciBfeCA9IHgudG9TdHJpbmcoKTsKCiAgaWYgKF94LmluZGV4T2YoJy4nKSA+IC0xKSB7CiAgICByZXR1cm4gX3gubGVuZ3RoIC0gX3guaW5kZXhPZignLicpIC0gMTsKICB9CgogIHJldHVybiAwOwp9Cgp2YXIgTnVtYmVyQ29udHJvbGxlciA9IGZ1bmN0aW9uIChfQ29udHJvbGxlcikgewogIGluaGVyaXRzKE51bWJlckNvbnRyb2xsZXIsIF9Db250cm9sbGVyKTsKCiAgZnVuY3Rpb24gTnVtYmVyQ29udHJvbGxlcihvYmplY3QsIHByb3BlcnR5LCBwYXJhbXMpIHsKICAgIGNsYXNzQ2FsbENoZWNrKHRoaXMsIE51bWJlckNvbnRyb2xsZXIpOwoKICAgIHZhciBfdGhpcyA9IHBvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKE51bWJlckNvbnRyb2xsZXIuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihOdW1iZXJDb250cm9sbGVyKSkuY2FsbCh0aGlzLCBvYmplY3QsIHByb3BlcnR5KSk7CgogICAgdmFyIF9wYXJhbXMgPSBwYXJhbXMgfHwge307CgogICAgX3RoaXMuX19taW4gPSBfcGFyYW1zLm1pbjsKICAgIF90aGlzLl9fbWF4ID0gX3BhcmFtcy5tYXg7CiAgICBfdGhpcy5fX3N0ZXAgPSBfcGFyYW1zLnN0ZXA7CgogICAgaWYgKENvbW1vbi5pc1VuZGVmaW5lZChfdGhpcy5fX3N0ZXApKSB7CiAgICAgIGlmIChfdGhpcy5pbml0aWFsVmFsdWUgPT09IDApIHsKICAgICAgICBfdGhpcy5fX2ltcGxpZWRTdGVwID0gMTsKICAgICAgfSBlbHNlIHsKICAgICAgICBfdGhpcy5fX2ltcGxpZWRTdGVwID0gTWF0aC5wb3coMTAsIE1hdGguZmxvb3IoTWF0aC5sb2coTWF0aC5hYnMoX3RoaXMuaW5pdGlhbFZhbHVlKSkgLyBNYXRoLkxOMTApKSAvIDEwOwogICAgICB9CiAgICB9IGVsc2UgewogICAgICBfdGhpcy5fX2ltcGxpZWRTdGVwID0gX3RoaXMuX19zdGVwOwogICAgfQoKICAgIF90aGlzLl9fcHJlY2lzaW9uID0gbnVtRGVjaW1hbHMoX3RoaXMuX19pbXBsaWVkU3RlcCk7CiAgICByZXR1cm4gX3RoaXM7CiAgfQoKICBjcmVhdGVDbGFzcyhOdW1iZXJDb250cm9sbGVyLCBbewogICAga2V5OiAnc2V0VmFsdWUnLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNldFZhbHVlKHYpIHsKICAgICAgdmFyIF92ID0gdjsKCiAgICAgIGlmICh0aGlzLl9fbWluICE9PSB1bmRlZmluZWQgJiYgX3YgPCB0aGlzLl9fbWluKSB7CiAgICAgICAgX3YgPSB0aGlzLl9fbWluOwogICAgICB9IGVsc2UgaWYgKHRoaXMuX19tYXggIT09IHVuZGVmaW5lZCAmJiBfdiA+IHRoaXMuX19tYXgpIHsKICAgICAgICBfdiA9IHRoaXMuX19tYXg7CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLl9fc3RlcCAhPT0gdW5kZWZpbmVkICYmIF92ICUgdGhpcy5fX3N0ZXAgIT09IDApIHsKICAgICAgICBfdiA9IE1hdGgucm91bmQoX3YgLyB0aGlzLl9fc3RlcCkgKiB0aGlzLl9fc3RlcDsKICAgICAgfQoKICAgICAgcmV0dXJuIGdldChOdW1iZXJDb250cm9sbGVyLnByb3RvdHlwZS5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKE51bWJlckNvbnRyb2xsZXIucHJvdG90eXBlKSwgJ3NldFZhbHVlJywgdGhpcykuY2FsbCh0aGlzLCBfdik7CiAgICB9CiAgfSwgewogICAga2V5OiAnbWluJywKICAgIHZhbHVlOiBmdW5jdGlvbiBtaW4obWluVmFsdWUpIHsKICAgICAgdGhpcy5fX21pbiA9IG1pblZhbHVlOwogICAgICByZXR1cm4gdGhpczsKICAgIH0KICB9LCB7CiAgICBrZXk6ICdtYXgnLAogICAgdmFsdWU6IGZ1bmN0aW9uIG1heChtYXhWYWx1ZSkgewogICAgICB0aGlzLl9fbWF4ID0gbWF4VmFsdWU7CiAgICAgIHJldHVybiB0aGlzOwogICAgfQogIH0sIHsKICAgIGtleTogJ3N0ZXAnLAogICAgdmFsdWU6IGZ1bmN0aW9uIHN0ZXAoc3RlcFZhbHVlKSB7CiAgICAgIHRoaXMuX19zdGVwID0gc3RlcFZhbHVlOwogICAgICB0aGlzLl9faW1wbGllZFN0ZXAgPSBzdGVwVmFsdWU7CiAgICAgIHRoaXMuX19wcmVjaXNpb24gPSBudW1EZWNpbWFscyhzdGVwVmFsdWUpOwogICAgICByZXR1cm4gdGhpczsKICAgIH0KICB9XSk7CiAgcmV0dXJuIE51bWJlckNvbnRyb2xsZXI7Cn0oQ29udHJvbGxlcik7CgpmdW5jdGlvbiByb3VuZFRvRGVjaW1hbCh2YWx1ZSwgZGVjaW1hbHMpIHsKICB2YXIgdGVuVG8gPSBNYXRoLnBvdygxMCwgZGVjaW1hbHMpOwogIHJldHVybiBNYXRoLnJvdW5kKHZhbHVlICogdGVuVG8pIC8gdGVuVG87Cn0KCnZhciBOdW1iZXJDb250cm9sbGVyQm94ID0gZnVuY3Rpb24gKF9OdW1iZXJDb250cm9sbGVyKSB7CiAgaW5oZXJpdHMoTnVtYmVyQ29udHJvbGxlckJveCwgX051bWJlckNvbnRyb2xsZXIpOwoKICBmdW5jdGlvbiBOdW1iZXJDb250cm9sbGVyQm94KG9iamVjdCwgcHJvcGVydHksIHBhcmFtcykgewogICAgY2xhc3NDYWxsQ2hlY2sodGhpcywgTnVtYmVyQ29udHJvbGxlckJveCk7CgogICAgdmFyIF90aGlzMiA9IHBvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKE51bWJlckNvbnRyb2xsZXJCb3guX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihOdW1iZXJDb250cm9sbGVyQm94KSkuY2FsbCh0aGlzLCBvYmplY3QsIHByb3BlcnR5LCBwYXJhbXMpKTsKCiAgICBfdGhpczIuX190cnVuY2F0aW9uU3VzcGVuZGVkID0gZmFsc2U7CiAgICB2YXIgX3RoaXMgPSBfdGhpczI7CiAgICB2YXIgcHJldlkgPSB2b2lkIDA7CgogICAgZnVuY3Rpb24gb25DaGFuZ2UoKSB7CiAgICAgIHZhciBhdHRlbXB0ZWQgPSBwYXJzZUZsb2F0KF90aGlzLl9faW5wdXQudmFsdWUpOwoKICAgICAgaWYgKCFDb21tb24uaXNOYU4oYXR0ZW1wdGVkKSkgewogICAgICAgIF90aGlzLnNldFZhbHVlKGF0dGVtcHRlZCk7CiAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBvbkZpbmlzaCgpIHsKICAgICAgaWYgKF90aGlzLl9fb25GaW5pc2hDaGFuZ2UpIHsKICAgICAgICBfdGhpcy5fX29uRmluaXNoQ2hhbmdlLmNhbGwoX3RoaXMsIF90aGlzLmdldFZhbHVlKCkpOwogICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gb25CbHVyKCkgewogICAgICBvbkZpbmlzaCgpOwogICAgfQoKICAgIGZ1bmN0aW9uIG9uTW91c2VEcmFnKGUpIHsKICAgICAgdmFyIGRpZmYgPSBwcmV2WSAtIGUuY2xpZW50WTsKCiAgICAgIF90aGlzLnNldFZhbHVlKF90aGlzLmdldFZhbHVlKCkgKyBkaWZmICogX3RoaXMuX19pbXBsaWVkU3RlcCk7CgogICAgICBwcmV2WSA9IGUuY2xpZW50WTsKICAgIH0KCiAgICBmdW5jdGlvbiBvbk1vdXNlVXAoKSB7CiAgICAgIGRvbS51bmJpbmQod2luZG93LCAnbW91c2Vtb3ZlJywgb25Nb3VzZURyYWcpOwogICAgICBkb20udW5iaW5kKHdpbmRvdywgJ21vdXNldXAnLCBvbk1vdXNlVXApOwogICAgICBvbkZpbmlzaCgpOwogICAgfQoKICAgIGZ1bmN0aW9uIG9uTW91c2VEb3duKGUpIHsKICAgICAgZG9tLmJpbmQod2luZG93LCAnbW91c2Vtb3ZlJywgb25Nb3VzZURyYWcpOwogICAgICBkb20uYmluZCh3aW5kb3csICdtb3VzZXVwJywgb25Nb3VzZVVwKTsKICAgICAgcHJldlkgPSBlLmNsaWVudFk7CiAgICB9CgogICAgX3RoaXMyLl9faW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpOwoKICAgIF90aGlzMi5fX2lucHV0LnNldEF0dHJpYnV0ZSgndHlwZScsICd0ZXh0Jyk7CgogICAgZG9tLmJpbmQoX3RoaXMyLl9faW5wdXQsICdjaGFuZ2UnLCBvbkNoYW5nZSk7CiAgICBkb20uYmluZChfdGhpczIuX19pbnB1dCwgJ2JsdXInLCBvbkJsdXIpOwogICAgZG9tLmJpbmQoX3RoaXMyLl9faW5wdXQsICdtb3VzZWRvd24nLCBvbk1vdXNlRG93bik7CiAgICBkb20uYmluZChfdGhpczIuX19pbnB1dCwgJ2tleWRvd24nLCBmdW5jdGlvbiAoZSkgewogICAgICBpZiAoZS5rZXlDb2RlID09PSAxMykgewogICAgICAgIF90aGlzLl9fdHJ1bmNhdGlvblN1c3BlbmRlZCA9IHRydWU7CiAgICAgICAgdGhpcy5ibHVyKCk7CiAgICAgICAgX3RoaXMuX190cnVuY2F0aW9uU3VzcGVuZGVkID0gZmFsc2U7CiAgICAgICAgb25GaW5pc2goKTsKICAgICAgfQogICAgfSk7CgogICAgX3RoaXMyLnVwZGF0ZURpc3BsYXkoKTsKCiAgICBfdGhpczIuZG9tRWxlbWVudC5hcHBlbmRDaGlsZChfdGhpczIuX19pbnB1dCk7CgogICAgcmV0dXJuIF90aGlzMjsKICB9CgogIGNyZWF0ZUNsYXNzKE51bWJlckNvbnRyb2xsZXJCb3gsIFt7CiAgICBrZXk6ICd1cGRhdGVEaXNwbGF5JywKICAgIHZhbHVlOiBmdW5jdGlvbiB1cGRhdGVEaXNwbGF5KCkgewogICAgICB0aGlzLl9faW5wdXQudmFsdWUgPSB0aGlzLl9fdHJ1bmNhdGlvblN1c3BlbmRlZCA/IHRoaXMuZ2V0VmFsdWUoKSA6IHJvdW5kVG9EZWNpbWFsKHRoaXMuZ2V0VmFsdWUoKSwgdGhpcy5fX3ByZWNpc2lvbik7CiAgICAgIHJldHVybiBnZXQoTnVtYmVyQ29udHJvbGxlckJveC5wcm90b3R5cGUuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihOdW1iZXJDb250cm9sbGVyQm94LnByb3RvdHlwZSksICd1cGRhdGVEaXNwbGF5JywgdGhpcykuY2FsbCh0aGlzKTsKICAgIH0KICB9XSk7CiAgcmV0dXJuIE51bWJlckNvbnRyb2xsZXJCb3g7Cn0oTnVtYmVyQ29udHJvbGxlcik7CgpmdW5jdGlvbiBtYXAodiwgaTEsIGkyLCBvMSwgbzIpIHsKICByZXR1cm4gbzEgKyAobzIgLSBvMSkgKiAoKHYgLSBpMSkgLyAoaTIgLSBpMSkpOwp9Cgp2YXIgTnVtYmVyQ29udHJvbGxlclNsaWRlciA9IGZ1bmN0aW9uIChfTnVtYmVyQ29udHJvbGxlcikgewogIGluaGVyaXRzKE51bWJlckNvbnRyb2xsZXJTbGlkZXIsIF9OdW1iZXJDb250cm9sbGVyKTsKCiAgZnVuY3Rpb24gTnVtYmVyQ29udHJvbGxlclNsaWRlcihvYmplY3QsIHByb3BlcnR5LCBtaW4sIG1heCwgc3RlcCkgewogICAgY2xhc3NDYWxsQ2hlY2sodGhpcywgTnVtYmVyQ29udHJvbGxlclNsaWRlcik7CgogICAgdmFyIF90aGlzMiA9IHBvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKE51bWJlckNvbnRyb2xsZXJTbGlkZXIuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihOdW1iZXJDb250cm9sbGVyU2xpZGVyKSkuY2FsbCh0aGlzLCBvYmplY3QsIHByb3BlcnR5LCB7CiAgICAgIG1pbjogbWluLAogICAgICBtYXg6IG1heCwKICAgICAgc3RlcDogc3RlcAogICAgfSkpOwoKICAgIHZhciBfdGhpcyA9IF90aGlzMjsKICAgIF90aGlzMi5fX2JhY2tncm91bmQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgIF90aGlzMi5fX2ZvcmVncm91bmQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgIGRvbS5iaW5kKF90aGlzMi5fX2JhY2tncm91bmQsICdtb3VzZWRvd24nLCBvbk1vdXNlRG93bik7CiAgICBkb20uYmluZChfdGhpczIuX19iYWNrZ3JvdW5kLCAndG91Y2hzdGFydCcsIG9uVG91Y2hTdGFydCk7CiAgICBkb20uYWRkQ2xhc3MoX3RoaXMyLl9fYmFja2dyb3VuZCwgJ3NsaWRlcicpOwogICAgZG9tLmFkZENsYXNzKF90aGlzMi5fX2ZvcmVncm91bmQsICdzbGlkZXItZmcnKTsKCiAgICBmdW5jdGlvbiBvbk1vdXNlRG93bihlKSB7CiAgICAgIGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQuYmx1cigpOwogICAgICBkb20uYmluZCh3aW5kb3csICdtb3VzZW1vdmUnLCBvbk1vdXNlRHJhZyk7CiAgICAgIGRvbS5iaW5kKHdpbmRvdywgJ21vdXNldXAnLCBvbk1vdXNlVXApOwogICAgICBvbk1vdXNlRHJhZyhlKTsKICAgIH0KCiAgICBmdW5jdGlvbiBvbk1vdXNlRHJhZyhlKSB7CiAgICAgIGUucHJldmVudERlZmF1bHQoKTsKCiAgICAgIHZhciBiZ1JlY3QgPSBfdGhpcy5fX2JhY2tncm91bmQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7CgogICAgICBfdGhpcy5zZXRWYWx1ZShtYXAoZS5jbGllbnRYLCBiZ1JlY3QubGVmdCwgYmdSZWN0LnJpZ2h0LCBfdGhpcy5fX21pbiwgX3RoaXMuX19tYXgpKTsKCiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KCiAgICBmdW5jdGlvbiBvbk1vdXNlVXAoKSB7CiAgICAgIGRvbS51bmJpbmQod2luZG93LCAnbW91c2Vtb3ZlJywgb25Nb3VzZURyYWcpOwogICAgICBkb20udW5iaW5kKHdpbmRvdywgJ21vdXNldXAnLCBvbk1vdXNlVXApOwoKICAgICAgaWYgKF90aGlzLl9fb25GaW5pc2hDaGFuZ2UpIHsKICAgICAgICBfdGhpcy5fX29uRmluaXNoQ2hhbmdlLmNhbGwoX3RoaXMsIF90aGlzLmdldFZhbHVlKCkpOwogICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gb25Ub3VjaFN0YXJ0KGUpIHsKICAgICAgaWYgKGUudG91Y2hlcy5sZW5ndGggIT09IDEpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGRvbS5iaW5kKHdpbmRvdywgJ3RvdWNobW92ZScsIG9uVG91Y2hNb3ZlKTsKICAgICAgZG9tLmJpbmQod2luZG93LCAndG91Y2hlbmQnLCBvblRvdWNoRW5kKTsKICAgICAgb25Ub3VjaE1vdmUoZSk7CiAgICB9CgogICAgZnVuY3Rpb24gb25Ub3VjaE1vdmUoZSkgewogICAgICB2YXIgY2xpZW50WCA9IGUudG91Y2hlc1swXS5jbGllbnRYOwoKICAgICAgdmFyIGJnUmVjdCA9IF90aGlzLl9fYmFja2dyb3VuZC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTsKCiAgICAgIF90aGlzLnNldFZhbHVlKG1hcChjbGllbnRYLCBiZ1JlY3QubGVmdCwgYmdSZWN0LnJpZ2h0LCBfdGhpcy5fX21pbiwgX3RoaXMuX19tYXgpKTsKICAgIH0KCiAgICBmdW5jdGlvbiBvblRvdWNoRW5kKCkgewogICAgICBkb20udW5iaW5kKHdpbmRvdywgJ3RvdWNobW92ZScsIG9uVG91Y2hNb3ZlKTsKICAgICAgZG9tLnVuYmluZCh3aW5kb3csICd0b3VjaGVuZCcsIG9uVG91Y2hFbmQpOwoKICAgICAgaWYgKF90aGlzLl9fb25GaW5pc2hDaGFuZ2UpIHsKICAgICAgICBfdGhpcy5fX29uRmluaXNoQ2hhbmdlLmNhbGwoX3RoaXMsIF90aGlzLmdldFZhbHVlKCkpOwogICAgICB9CiAgICB9CgogICAgX3RoaXMyLnVwZGF0ZURpc3BsYXkoKTsKCiAgICBfdGhpczIuX19iYWNrZ3JvdW5kLmFwcGVuZENoaWxkKF90aGlzMi5fX2ZvcmVncm91bmQpOwoKICAgIF90aGlzMi5kb21FbGVtZW50LmFwcGVuZENoaWxkKF90aGlzMi5fX2JhY2tncm91bmQpOwoKICAgIHJldHVybiBfdGhpczI7CiAgfQoKICBjcmVhdGVDbGFzcyhOdW1iZXJDb250cm9sbGVyU2xpZGVyLCBbewogICAga2V5OiAndXBkYXRlRGlzcGxheScsCiAgICB2YWx1ZTogZnVuY3Rpb24gdXBkYXRlRGlzcGxheSgpIHsKICAgICAgdmFyIHBjdCA9ICh0aGlzLmdldFZhbHVlKCkgLSB0aGlzLl9fbWluKSAvICh0aGlzLl9fbWF4IC0gdGhpcy5fX21pbik7CgogICAgICB0aGlzLl9fZm9yZWdyb3VuZC5zdHlsZS53aWR0aCA9IHBjdCAqIDEwMCArICclJzsKICAgICAgcmV0dXJuIGdldChOdW1iZXJDb250cm9sbGVyU2xpZGVyLnByb3RvdHlwZS5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKE51bWJlckNvbnRyb2xsZXJTbGlkZXIucHJvdG90eXBlKSwgJ3VwZGF0ZURpc3BsYXknLCB0aGlzKS5jYWxsKHRoaXMpOwogICAgfQogIH1dKTsKICByZXR1cm4gTnVtYmVyQ29udHJvbGxlclNsaWRlcjsKfShOdW1iZXJDb250cm9sbGVyKTsKCnZhciBGdW5jdGlvbkNvbnRyb2xsZXIgPSBmdW5jdGlvbiAoX0NvbnRyb2xsZXIpIHsKICBpbmhlcml0cyhGdW5jdGlvbkNvbnRyb2xsZXIsIF9Db250cm9sbGVyKTsKCiAgZnVuY3Rpb24gRnVuY3Rpb25Db250cm9sbGVyKG9iamVjdCwgcHJvcGVydHksIHRleHQpIHsKICAgIGNsYXNzQ2FsbENoZWNrKHRoaXMsIEZ1bmN0aW9uQ29udHJvbGxlcik7CgogICAgdmFyIF90aGlzMiA9IHBvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKEZ1bmN0aW9uQ29udHJvbGxlci5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKEZ1bmN0aW9uQ29udHJvbGxlcikpLmNhbGwodGhpcywgb2JqZWN0LCBwcm9wZXJ0eSkpOwoKICAgIHZhciBfdGhpcyA9IF90aGlzMjsKICAgIF90aGlzMi5fX2J1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgX3RoaXMyLl9fYnV0dG9uLmlubmVySFRNTCA9IHRleHQgPT09IHVuZGVmaW5lZCA/ICdGaXJlJyA6IHRleHQ7CiAgICBkb20uYmluZChfdGhpczIuX19idXR0b24sICdjbGljaycsIGZ1bmN0aW9uIChlKSB7CiAgICAgIGUucHJldmVudERlZmF1bHQoKTsKCiAgICAgIF90aGlzLmZpcmUoKTsKCiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0pOwogICAgZG9tLmFkZENsYXNzKF90aGlzMi5fX2J1dHRvbiwgJ2J1dHRvbicpOwoKICAgIF90aGlzMi5kb21FbGVtZW50LmFwcGVuZENoaWxkKF90aGlzMi5fX2J1dHRvbik7CgogICAgcmV0dXJuIF90aGlzMjsKICB9CgogIGNyZWF0ZUNsYXNzKEZ1bmN0aW9uQ29udHJvbGxlciwgW3sKICAgIGtleTogJ2ZpcmUnLAogICAgdmFsdWU6IGZ1bmN0aW9uIGZpcmUoKSB7CiAgICAgIGlmICh0aGlzLl9fb25DaGFuZ2UpIHsKICAgICAgICB0aGlzLl9fb25DaGFuZ2UuY2FsbCh0aGlzKTsKICAgICAgfQoKICAgICAgdGhpcy5nZXRWYWx1ZSgpLmNhbGwodGhpcy5vYmplY3QpOwoKICAgICAgaWYgKHRoaXMuX19vbkZpbmlzaENoYW5nZSkgewogICAgICAgIHRoaXMuX19vbkZpbmlzaENoYW5nZS5jYWxsKHRoaXMsIHRoaXMuZ2V0VmFsdWUoKSk7CiAgICAgIH0KICAgIH0KICB9XSk7CiAgcmV0dXJuIEZ1bmN0aW9uQ29udHJvbGxlcjsKfShDb250cm9sbGVyKTsKCnZhciBDb2xvckNvbnRyb2xsZXIgPSBmdW5jdGlvbiAoX0NvbnRyb2xsZXIpIHsKICBpbmhlcml0cyhDb2xvckNvbnRyb2xsZXIsIF9Db250cm9sbGVyKTsKCiAgZnVuY3Rpb24gQ29sb3JDb250cm9sbGVyKG9iamVjdCwgcHJvcGVydHkpIHsKICAgIGNsYXNzQ2FsbENoZWNrKHRoaXMsIENvbG9yQ29udHJvbGxlcik7CgogICAgdmFyIF90aGlzMiA9IHBvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKENvbG9yQ29udHJvbGxlci5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKENvbG9yQ29udHJvbGxlcikpLmNhbGwodGhpcywgb2JqZWN0LCBwcm9wZXJ0eSkpOwoKICAgIF90aGlzMi5fX2NvbG9yID0gbmV3IENvbG9yKF90aGlzMi5nZXRWYWx1ZSgpKTsKICAgIF90aGlzMi5fX3RlbXAgPSBuZXcgQ29sb3IoMCk7CiAgICB2YXIgX3RoaXMgPSBfdGhpczI7CiAgICBfdGhpczIuZG9tRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgZG9tLm1ha2VTZWxlY3RhYmxlKF90aGlzMi5kb21FbGVtZW50LCBmYWxzZSk7CiAgICBfdGhpczIuX19zZWxlY3RvciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgX3RoaXMyLl9fc2VsZWN0b3IuY2xhc3NOYW1lID0gJ3NlbGVjdG9yJzsKICAgIF90aGlzMi5fX3NhdHVyYXRpb25fZmllbGQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgIF90aGlzMi5fX3NhdHVyYXRpb25fZmllbGQuY2xhc3NOYW1lID0gJ3NhdHVyYXRpb24tZmllbGQnOwogICAgX3RoaXMyLl9fZmllbGRfa25vYiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgX3RoaXMyLl9fZmllbGRfa25vYi5jbGFzc05hbWUgPSAnZmllbGQta25vYic7CiAgICBfdGhpczIuX19maWVsZF9rbm9iX2JvcmRlciA9ICcycHggc29saWQgJzsKICAgIF90aGlzMi5fX2h1ZV9rbm9iID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICBfdGhpczIuX19odWVfa25vYi5jbGFzc05hbWUgPSAnaHVlLWtub2InOwogICAgX3RoaXMyLl9faHVlX2ZpZWxkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICBfdGhpczIuX19odWVfZmllbGQuY2xhc3NOYW1lID0gJ2h1ZS1maWVsZCc7CiAgICBfdGhpczIuX19pbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7CiAgICBfdGhpczIuX19pbnB1dC50eXBlID0gJ3RleHQnOwogICAgX3RoaXMyLl9faW5wdXRfdGV4dFNoYWRvdyA9ICcwIDFweCAxcHggJzsKICAgIGRvbS5iaW5kKF90aGlzMi5fX2lucHV0LCAna2V5ZG93bicsIGZ1bmN0aW9uIChlKSB7CiAgICAgIGlmIChlLmtleUNvZGUgPT09IDEzKSB7CiAgICAgICAgb25CbHVyLmNhbGwodGhpcyk7CiAgICAgIH0KICAgIH0pOwogICAgZG9tLmJpbmQoX3RoaXMyLl9faW5wdXQsICdibHVyJywgb25CbHVyKTsKICAgIGRvbS5iaW5kKF90aGlzMi5fX3NlbGVjdG9yLCAnbW91c2Vkb3duJywgZnVuY3Rpb24gKCkgewogICAgICBkb20uYWRkQ2xhc3ModGhpcywgJ2RyYWcnKS5iaW5kKHdpbmRvdywgJ21vdXNldXAnLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgZG9tLnJlbW92ZUNsYXNzKF90aGlzLl9fc2VsZWN0b3IsICdkcmFnJyk7CiAgICAgIH0pOwogICAgfSk7CiAgICBkb20uYmluZChfdGhpczIuX19zZWxlY3RvciwgJ3RvdWNoc3RhcnQnLCBmdW5jdGlvbiAoKSB7CiAgICAgIGRvbS5hZGRDbGFzcyh0aGlzLCAnZHJhZycpLmJpbmQod2luZG93LCAndG91Y2hlbmQnLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgZG9tLnJlbW92ZUNsYXNzKF90aGlzLl9fc2VsZWN0b3IsICdkcmFnJyk7CiAgICAgIH0pOwogICAgfSk7CiAgICB2YXIgdmFsdWVGaWVsZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgQ29tbW9uLmV4dGVuZChfdGhpczIuX19zZWxlY3Rvci5zdHlsZSwgewogICAgICB3aWR0aDogJzEyMnB4JywKICAgICAgaGVpZ2h0OiAnMTAycHgnLAogICAgICBwYWRkaW5nOiAnM3B4JywKICAgICAgYmFja2dyb3VuZENvbG9yOiAnIzIyMicsCiAgICAgIGJveFNoYWRvdzogJzBweCAxcHggM3B4IHJnYmEoMCwwLDAsMC4zKScKICAgIH0pOwogICAgQ29tbW9uLmV4dGVuZChfdGhpczIuX19maWVsZF9rbm9iLnN0eWxlLCB7CiAgICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnLAogICAgICB3aWR0aDogJzEycHgnLAogICAgICBoZWlnaHQ6ICcxMnB4JywKICAgICAgYm9yZGVyOiBfdGhpczIuX19maWVsZF9rbm9iX2JvcmRlciArIChfdGhpczIuX19jb2xvci52IDwgMC41ID8gJyNmZmYnIDogJyMwMDAnKSwKICAgICAgYm94U2hhZG93OiAnMHB4IDFweCAzcHggcmdiYSgwLDAsMCwwLjUpJywKICAgICAgYm9yZGVyUmFkaXVzOiAnMTJweCcsCiAgICAgIHpJbmRleDogMQogICAgfSk7CiAgICBDb21tb24uZXh0ZW5kKF90aGlzMi5fX2h1ZV9rbm9iLnN0eWxlLCB7CiAgICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnLAogICAgICB3aWR0aDogJzE1cHgnLAogICAgICBoZWlnaHQ6ICcycHgnLAogICAgICBib3JkZXJSaWdodDogJzRweCBzb2xpZCAjZmZmJywKICAgICAgekluZGV4OiAxCiAgICB9KTsKICAgIENvbW1vbi5leHRlbmQoX3RoaXMyLl9fc2F0dXJhdGlvbl9maWVsZC5zdHlsZSwgewogICAgICB3aWR0aDogJzEwMHB4JywKICAgICAgaGVpZ2h0OiAnMTAwcHgnLAogICAgICBib3JkZXI6ICcxcHggc29saWQgIzU1NScsCiAgICAgIG1hcmdpblJpZ2h0OiAnM3B4JywKICAgICAgZGlzcGxheTogJ2lubGluZS1ibG9jaycsCiAgICAgIGN1cnNvcjogJ3BvaW50ZXInCiAgICB9KTsKICAgIENvbW1vbi5leHRlbmQodmFsdWVGaWVsZC5zdHlsZSwgewogICAgICB3aWR0aDogJzEwMCUnLAogICAgICBoZWlnaHQ6ICcxMDAlJywKICAgICAgYmFja2dyb3VuZDogJ25vbmUnCiAgICB9KTsKICAgIGxpbmVhckdyYWRpZW50KHZhbHVlRmllbGQsICd0b3AnLCAncmdiYSgwLDAsMCwwKScsICcjMDAwJyk7CiAgICBDb21tb24uZXh0ZW5kKF90aGlzMi5fX2h1ZV9maWVsZC5zdHlsZSwgewogICAgICB3aWR0aDogJzE1cHgnLAogICAgICBoZWlnaHQ6ICcxMDBweCcsCiAgICAgIGJvcmRlcjogJzFweCBzb2xpZCAjNTU1JywKICAgICAgY3Vyc29yOiAnbnMtcmVzaXplJywKICAgICAgcG9zaXRpb246ICdhYnNvbHV0ZScsCiAgICAgIHRvcDogJzNweCcsCiAgICAgIHJpZ2h0OiAnM3B4JwogICAgfSk7CiAgICBodWVHcmFkaWVudChfdGhpczIuX19odWVfZmllbGQpOwogICAgQ29tbW9uLmV4dGVuZChfdGhpczIuX19pbnB1dC5zdHlsZSwgewogICAgICBvdXRsaW5lOiAnbm9uZScsCiAgICAgIHRleHRBbGlnbjogJ2NlbnRlcicsCiAgICAgIGNvbG9yOiAnI2ZmZicsCiAgICAgIGJvcmRlcjogMCwKICAgICAgZm9udFdlaWdodDogJ2JvbGQnLAogICAgICB0ZXh0U2hhZG93OiBfdGhpczIuX19pbnB1dF90ZXh0U2hhZG93ICsgJ3JnYmEoMCwwLDAsMC43KScKICAgIH0pOwogICAgZG9tLmJpbmQoX3RoaXMyLl9fc2F0dXJhdGlvbl9maWVsZCwgJ21vdXNlZG93bicsIGZpZWxkRG93bik7CiAgICBkb20uYmluZChfdGhpczIuX19zYXR1cmF0aW9uX2ZpZWxkLCAndG91Y2hzdGFydCcsIGZpZWxkRG93bik7CiAgICBkb20uYmluZChfdGhpczIuX19maWVsZF9rbm9iLCAnbW91c2Vkb3duJywgZmllbGREb3duKTsKICAgIGRvbS5iaW5kKF90aGlzMi5fX2ZpZWxkX2tub2IsICd0b3VjaHN0YXJ0JywgZmllbGREb3duKTsKICAgIGRvbS5iaW5kKF90aGlzMi5fX2h1ZV9maWVsZCwgJ21vdXNlZG93bicsIGZpZWxkRG93bkgpOwogICAgZG9tLmJpbmQoX3RoaXMyLl9faHVlX2ZpZWxkLCAndG91Y2hzdGFydCcsIGZpZWxkRG93bkgpOwoKICAgIGZ1bmN0aW9uIGZpZWxkRG93bihlKSB7CiAgICAgIHNldFNWKGUpOwogICAgICBkb20uYmluZCh3aW5kb3csICdtb3VzZW1vdmUnLCBzZXRTVik7CiAgICAgIGRvbS5iaW5kKHdpbmRvdywgJ3RvdWNobW92ZScsIHNldFNWKTsKICAgICAgZG9tLmJpbmQod2luZG93LCAnbW91c2V1cCcsIGZpZWxkVXBTVik7CiAgICAgIGRvbS5iaW5kKHdpbmRvdywgJ3RvdWNoZW5kJywgZmllbGRVcFNWKTsKICAgIH0KCiAgICBmdW5jdGlvbiBmaWVsZERvd25IKGUpIHsKICAgICAgc2V0SChlKTsKICAgICAgZG9tLmJpbmQod2luZG93LCAnbW91c2Vtb3ZlJywgc2V0SCk7CiAgICAgIGRvbS5iaW5kKHdpbmRvdywgJ3RvdWNobW92ZScsIHNldEgpOwogICAgICBkb20uYmluZCh3aW5kb3csICdtb3VzZXVwJywgZmllbGRVcEgpOwogICAgICBkb20uYmluZCh3aW5kb3csICd0b3VjaGVuZCcsIGZpZWxkVXBIKTsKICAgIH0KCiAgICBmdW5jdGlvbiBmaWVsZFVwU1YoKSB7CiAgICAgIGRvbS51bmJpbmQod2luZG93LCAnbW91c2Vtb3ZlJywgc2V0U1YpOwogICAgICBkb20udW5iaW5kKHdpbmRvdywgJ3RvdWNobW92ZScsIHNldFNWKTsKICAgICAgZG9tLnVuYmluZCh3aW5kb3csICdtb3VzZXVwJywgZmllbGRVcFNWKTsKICAgICAgZG9tLnVuYmluZCh3aW5kb3csICd0b3VjaGVuZCcsIGZpZWxkVXBTVik7CiAgICAgIG9uRmluaXNoKCk7CiAgICB9CgogICAgZnVuY3Rpb24gZmllbGRVcEgoKSB7CiAgICAgIGRvbS51bmJpbmQod2luZG93LCAnbW91c2Vtb3ZlJywgc2V0SCk7CiAgICAgIGRvbS51bmJpbmQod2luZG93LCAndG91Y2htb3ZlJywgc2V0SCk7CiAgICAgIGRvbS51bmJpbmQod2luZG93LCAnbW91c2V1cCcsIGZpZWxkVXBIKTsKICAgICAgZG9tLnVuYmluZCh3aW5kb3csICd0b3VjaGVuZCcsIGZpZWxkVXBIKTsKICAgICAgb25GaW5pc2goKTsKICAgIH0KCiAgICBmdW5jdGlvbiBvbkJsdXIoKSB7CiAgICAgIHZhciBpID0gaW50ZXJwcmV0KHRoaXMudmFsdWUpOwoKICAgICAgaWYgKGkgIT09IGZhbHNlKSB7CiAgICAgICAgX3RoaXMuX19jb2xvci5fX3N0YXRlID0gaTsKCiAgICAgICAgX3RoaXMuc2V0VmFsdWUoX3RoaXMuX19jb2xvci50b09yaWdpbmFsKCkpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMudmFsdWUgPSBfdGhpcy5fX2NvbG9yLnRvU3RyaW5nKCk7CiAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBvbkZpbmlzaCgpIHsKICAgICAgaWYgKF90aGlzLl9fb25GaW5pc2hDaGFuZ2UpIHsKICAgICAgICBfdGhpcy5fX29uRmluaXNoQ2hhbmdlLmNhbGwoX3RoaXMsIF90aGlzLl9fY29sb3IudG9PcmlnaW5hbCgpKTsKICAgICAgfQogICAgfQoKICAgIF90aGlzMi5fX3NhdHVyYXRpb25fZmllbGQuYXBwZW5kQ2hpbGQodmFsdWVGaWVsZCk7CgogICAgX3RoaXMyLl9fc2VsZWN0b3IuYXBwZW5kQ2hpbGQoX3RoaXMyLl9fZmllbGRfa25vYik7CgogICAgX3RoaXMyLl9fc2VsZWN0b3IuYXBwZW5kQ2hpbGQoX3RoaXMyLl9fc2F0dXJhdGlvbl9maWVsZCk7CgogICAgX3RoaXMyLl9fc2VsZWN0b3IuYXBwZW5kQ2hpbGQoX3RoaXMyLl9faHVlX2ZpZWxkKTsKCiAgICBfdGhpczIuX19odWVfZmllbGQuYXBwZW5kQ2hpbGQoX3RoaXMyLl9faHVlX2tub2IpOwoKICAgIF90aGlzMi5kb21FbGVtZW50LmFwcGVuZENoaWxkKF90aGlzMi5fX2lucHV0KTsKCiAgICBfdGhpczIuZG9tRWxlbWVudC5hcHBlbmRDaGlsZChfdGhpczIuX19zZWxlY3Rvcik7CgogICAgX3RoaXMyLnVwZGF0ZURpc3BsYXkoKTsKCiAgICBmdW5jdGlvbiBzZXRTVihlKSB7CiAgICAgIGlmIChlLnR5cGUuaW5kZXhPZigndG91Y2gnKSA9PT0gLTEpIHsKICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgIH0KCiAgICAgIHZhciBmaWVsZFJlY3QgPSBfdGhpcy5fX3NhdHVyYXRpb25fZmllbGQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7CgogICAgICB2YXIgX3JlZiA9IGUudG91Y2hlcyAmJiBlLnRvdWNoZXNbMF0gfHwgZSwKICAgICAgICAgIGNsaWVudFggPSBfcmVmLmNsaWVudFgsCiAgICAgICAgICBjbGllbnRZID0gX3JlZi5jbGllbnRZOwoKICAgICAgdmFyIHMgPSAoY2xpZW50WCAtIGZpZWxkUmVjdC5sZWZ0KSAvIChmaWVsZFJlY3QucmlnaHQgLSBmaWVsZFJlY3QubGVmdCk7CiAgICAgIHZhciB2ID0gMSAtIChjbGllbnRZIC0gZmllbGRSZWN0LnRvcCkgLyAoZmllbGRSZWN0LmJvdHRvbSAtIGZpZWxkUmVjdC50b3ApOwoKICAgICAgaWYgKHYgPiAxKSB7CiAgICAgICAgdiA9IDE7CiAgICAgIH0gZWxzZSBpZiAodiA8IDApIHsKICAgICAgICB2ID0gMDsKICAgICAgfQoKICAgICAgaWYgKHMgPiAxKSB7CiAgICAgICAgcyA9IDE7CiAgICAgIH0gZWxzZSBpZiAocyA8IDApIHsKICAgICAgICBzID0gMDsKICAgICAgfQoKICAgICAgX3RoaXMuX19jb2xvci52ID0gdjsKICAgICAgX3RoaXMuX19jb2xvci5zID0gczsKCiAgICAgIF90aGlzLnNldFZhbHVlKF90aGlzLl9fY29sb3IudG9PcmlnaW5hbCgpKTsKCiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KCiAgICBmdW5jdGlvbiBzZXRIKGUpIHsKICAgICAgaWYgKGUudHlwZS5pbmRleE9mKCd0b3VjaCcpID09PSAtMSkgewogICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgfQoKICAgICAgdmFyIGZpZWxkUmVjdCA9IF90aGlzLl9faHVlX2ZpZWxkLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOwoKICAgICAgdmFyIF9yZWYyID0gZS50b3VjaGVzICYmIGUudG91Y2hlc1swXSB8fCBlLAogICAgICAgICAgY2xpZW50WSA9IF9yZWYyLmNsaWVudFk7CgogICAgICB2YXIgaCA9IDEgLSAoY2xpZW50WSAtIGZpZWxkUmVjdC50b3ApIC8gKGZpZWxkUmVjdC5ib3R0b20gLSBmaWVsZFJlY3QudG9wKTsKCiAgICAgIGlmIChoID4gMSkgewogICAgICAgIGggPSAxOwogICAgICB9IGVsc2UgaWYgKGggPCAwKSB7CiAgICAgICAgaCA9IDA7CiAgICAgIH0KCiAgICAgIF90aGlzLl9fY29sb3IuaCA9IGggKiAzNjA7CgogICAgICBfdGhpcy5zZXRWYWx1ZShfdGhpcy5fX2NvbG9yLnRvT3JpZ2luYWwoKSk7CgogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CgogICAgcmV0dXJuIF90aGlzMjsKICB9CgogIGNyZWF0ZUNsYXNzKENvbG9yQ29udHJvbGxlciwgW3sKICAgIGtleTogJ3VwZGF0ZURpc3BsYXknLAogICAgdmFsdWU6IGZ1bmN0aW9uIHVwZGF0ZURpc3BsYXkoKSB7CiAgICAgIHZhciBpID0gaW50ZXJwcmV0KHRoaXMuZ2V0VmFsdWUoKSk7CgogICAgICBpZiAoaSAhPT0gZmFsc2UpIHsKICAgICAgICB2YXIgbWlzbWF0Y2ggPSBmYWxzZTsKICAgICAgICBDb21tb24uZWFjaChDb2xvci5DT01QT05FTlRTLCBmdW5jdGlvbiAoY29tcG9uZW50KSB7CiAgICAgICAgICBpZiAoIUNvbW1vbi5pc1VuZGVmaW5lZChpW2NvbXBvbmVudF0pICYmICFDb21tb24uaXNVbmRlZmluZWQodGhpcy5fX2NvbG9yLl9fc3RhdGVbY29tcG9uZW50XSkgJiYgaVtjb21wb25lbnRdICE9PSB0aGlzLl9fY29sb3IuX19zdGF0ZVtjb21wb25lbnRdKSB7CiAgICAgICAgICAgIG1pc21hdGNoID0gdHJ1ZTsKICAgICAgICAgICAgcmV0dXJuIHt9OwogICAgICAgICAgfQogICAgICAgIH0sIHRoaXMpOwoKICAgICAgICBpZiAobWlzbWF0Y2gpIHsKICAgICAgICAgIENvbW1vbi5leHRlbmQodGhpcy5fX2NvbG9yLl9fc3RhdGUsIGkpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgQ29tbW9uLmV4dGVuZCh0aGlzLl9fdGVtcC5fX3N0YXRlLCB0aGlzLl9fY29sb3IuX19zdGF0ZSk7CiAgICAgIHRoaXMuX190ZW1wLmEgPSAxOwogICAgICB2YXIgZmxpcCA9IHRoaXMuX19jb2xvci52IDwgMC41IHx8IHRoaXMuX19jb2xvci5zID4gMC41ID8gMjU1IDogMDsKCiAgICAgIHZhciBfZmxpcCA9IDI1NSAtIGZsaXA7CgogICAgICBDb21tb24uZXh0ZW5kKHRoaXMuX19maWVsZF9rbm9iLnN0eWxlLCB7CiAgICAgICAgbWFyZ2luTGVmdDogMTAwICogdGhpcy5fX2NvbG9yLnMgLSA3ICsgJ3B4JywKICAgICAgICBtYXJnaW5Ub3A6IDEwMCAqICgxIC0gdGhpcy5fX2NvbG9yLnYpIC0gNyArICdweCcsCiAgICAgICAgYmFja2dyb3VuZENvbG9yOiB0aGlzLl9fdGVtcC50b0hleFN0cmluZygpLAogICAgICAgIGJvcmRlcjogdGhpcy5fX2ZpZWxkX2tub2JfYm9yZGVyICsgJ3JnYignICsgZmxpcCArICcsJyArIGZsaXAgKyAnLCcgKyBmbGlwICsgJyknCiAgICAgIH0pOwogICAgICB0aGlzLl9faHVlX2tub2Iuc3R5bGUubWFyZ2luVG9wID0gKDEgLSB0aGlzLl9fY29sb3IuaCAvIDM2MCkgKiAxMDAgKyAncHgnOwogICAgICB0aGlzLl9fdGVtcC5zID0gMTsKICAgICAgdGhpcy5fX3RlbXAudiA9IDE7CiAgICAgIGxpbmVhckdyYWRpZW50KHRoaXMuX19zYXR1cmF0aW9uX2ZpZWxkLCAnbGVmdCcsICcjZmZmJywgdGhpcy5fX3RlbXAudG9IZXhTdHJpbmcoKSk7CiAgICAgIHRoaXMuX19pbnB1dC52YWx1ZSA9IHRoaXMuX19jb2xvci50b1N0cmluZygpOwogICAgICBDb21tb24uZXh0ZW5kKHRoaXMuX19pbnB1dC5zdHlsZSwgewogICAgICAgIGJhY2tncm91bmRDb2xvcjogdGhpcy5fX2NvbG9yLnRvSGV4U3RyaW5nKCksCiAgICAgICAgY29sb3I6ICdyZ2IoJyArIGZsaXAgKyAnLCcgKyBmbGlwICsgJywnICsgZmxpcCArICcpJywKICAgICAgICB0ZXh0U2hhZG93OiB0aGlzLl9faW5wdXRfdGV4dFNoYWRvdyArICdyZ2JhKCcgKyBfZmxpcCArICcsJyArIF9mbGlwICsgJywnICsgX2ZsaXAgKyAnLC43KScKICAgICAgfSk7CiAgICB9CiAgfV0pOwogIHJldHVybiBDb2xvckNvbnRyb2xsZXI7Cn0oQ29udHJvbGxlcik7Cgp2YXIgdmVuZG9ycyA9IFsnLW1vei0nLCAnLW8tJywgJy13ZWJraXQtJywgJy1tcy0nLCAnJ107CgpmdW5jdGlvbiBsaW5lYXJHcmFkaWVudChlbGVtLCB4LCBhLCBiKSB7CiAgZWxlbS5zdHlsZS5iYWNrZ3JvdW5kID0gJyc7CiAgQ29tbW9uLmVhY2godmVuZG9ycywgZnVuY3Rpb24gKHZlbmRvcikgewogICAgZWxlbS5zdHlsZS5jc3NUZXh0ICs9ICdiYWNrZ3JvdW5kOiAnICsgdmVuZG9yICsgJ2xpbmVhci1ncmFkaWVudCgnICsgeCArICcsICcgKyBhICsgJyAwJSwgJyArIGIgKyAnIDEwMCUpOyAnOwogIH0pOwp9CgpmdW5jdGlvbiBodWVHcmFkaWVudChlbGVtKSB7CiAgZWxlbS5zdHlsZS5iYWNrZ3JvdW5kID0gJyc7CiAgZWxlbS5zdHlsZS5jc3NUZXh0ICs9ICdiYWNrZ3JvdW5kOiAtbW96LWxpbmVhci1ncmFkaWVudCh0b3AsICAjZmYwMDAwIDAlLCAjZmYwMGZmIDE3JSwgIzAwMDBmZiAzNCUsICMwMGZmZmYgNTAlLCAjMDBmZjAwIDY3JSwgI2ZmZmYwMCA4NCUsICNmZjAwMDAgMTAwJSk7JzsKICBlbGVtLnN0eWxlLmNzc1RleHQgKz0gJ2JhY2tncm91bmQ6IC13ZWJraXQtbGluZWFyLWdyYWRpZW50KHRvcCwgICNmZjAwMDAgMCUsI2ZmMDBmZiAxNyUsIzAwMDBmZiAzNCUsIzAwZmZmZiA1MCUsIzAwZmYwMCA2NyUsI2ZmZmYwMCA4NCUsI2ZmMDAwMCAxMDAlKTsnOwogIGVsZW0uc3R5bGUuY3NzVGV4dCArPSAnYmFja2dyb3VuZDogLW8tbGluZWFyLWdyYWRpZW50KHRvcCwgICNmZjAwMDAgMCUsI2ZmMDBmZiAxNyUsIzAwMDBmZiAzNCUsIzAwZmZmZiA1MCUsIzAwZmYwMCA2NyUsI2ZmZmYwMCA4NCUsI2ZmMDAwMCAxMDAlKTsnOwogIGVsZW0uc3R5bGUuY3NzVGV4dCArPSAnYmFja2dyb3VuZDogLW1zLWxpbmVhci1ncmFkaWVudCh0b3AsICAjZmYwMDAwIDAlLCNmZjAwZmYgMTclLCMwMDAwZmYgMzQlLCMwMGZmZmYgNTAlLCMwMGZmMDAgNjclLCNmZmZmMDAgODQlLCNmZjAwMDAgMTAwJSk7JzsKICBlbGVtLnN0eWxlLmNzc1RleHQgKz0gJ2JhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCh0b3AsICAjZmYwMDAwIDAlLCNmZjAwZmYgMTclLCMwMDAwZmYgMzQlLCMwMGZmZmYgNTAlLCMwMGZmMDAgNjclLCNmZmZmMDAgODQlLCNmZjAwMDAgMTAwJSk7JzsKfQoKdmFyIGNzcyA9IHsKICBsb2FkOiBmdW5jdGlvbiBsb2FkKHVybCwgaW5kb2MpIHsKICAgIHZhciBkb2MgPSBpbmRvYyB8fCBkb2N1bWVudDsKICAgIHZhciBsaW5rID0gZG9jLmNyZWF0ZUVsZW1lbnQoJ2xpbmsnKTsKICAgIGxpbmsudHlwZSA9ICd0ZXh0L2Nzcyc7CiAgICBsaW5rLnJlbCA9ICdzdHlsZXNoZWV0JzsKICAgIGxpbmsuaHJlZiA9IHVybDsKICAgIGRvYy5nZXRFbGVtZW50c0J5VGFnTmFtZSgnaGVhZCcpWzBdLmFwcGVuZENoaWxkKGxpbmspOwogIH0sCiAgaW5qZWN0OiBmdW5jdGlvbiBpbmplY3QoY3NzQ29udGVudCwgaW5kb2MpIHsKICAgIHZhciBkb2MgPSBpbmRvYyB8fCBkb2N1bWVudDsKICAgIHZhciBpbmplY3RlZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7CiAgICBpbmplY3RlZC50eXBlID0gJ3RleHQvY3NzJzsKICAgIGluamVjdGVkLmlubmVySFRNTCA9IGNzc0NvbnRlbnQ7CiAgICB2YXIgaGVhZCA9IGRvYy5nZXRFbGVtZW50c0J5VGFnTmFtZSgnaGVhZCcpWzBdOwoKICAgIHRyeSB7CiAgICAgIGhlYWQuYXBwZW5kQ2hpbGQoaW5qZWN0ZWQpOwogICAgfSBjYXRjaCAoZSkge30KICB9Cn07CnZhciBzYXZlRGlhbG9nQ29udGVudHMgPSAiPGRpdiBpZD1cImRnLXNhdmVcIiBjbGFzcz1cImRnIGRpYWxvZ3VlXCI+XG5cbiAgSGVyZSdzIHRoZSBuZXcgbG9hZCBwYXJhbWV0ZXIgZm9yIHlvdXIgPGNvZGU+R1VJPC9jb2RlPidzIGNvbnN0cnVjdG9yOlxuXG4gIDx0ZXh0YXJlYSBpZD1cImRnLW5ldy1jb25zdHJ1Y3RvclwiPjwvdGV4dGFyZWE+XG5cbiAgPGRpdiBpZD1cImRnLXNhdmUtbG9jYWxseVwiPlxuXG4gICAgPGlucHV0IGlkPVwiZGctbG9jYWwtc3RvcmFnZVwiIHR5cGU9XCJjaGVja2JveFwiLz4gQXV0b21hdGljYWxseSBzYXZlXG4gICAgdmFsdWVzIHRvIDxjb2RlPmxvY2FsU3RvcmFnZTwvY29kZT4gb24gZXhpdC5cblxuICAgIDxkaXYgaWQ9XCJkZy1sb2NhbC1leHBsYWluXCI+VGhlIHZhbHVlcyBzYXZlZCB0byA8Y29kZT5sb2NhbFN0b3JhZ2U8L2NvZGU+IHdpbGxcbiAgICAgIG92ZXJyaWRlIHRob3NlIHBhc3NlZCB0byA8Y29kZT5kYXQuR1VJPC9jb2RlPidzIGNvbnN0cnVjdG9yLiBUaGlzIG1ha2VzIGl0XG4gICAgICBlYXNpZXIgdG8gd29yayBpbmNyZW1lbnRhbGx5LCBidXQgPGNvZGU+bG9jYWxTdG9yYWdlPC9jb2RlPiBpcyBmcmFnaWxlLFxuICAgICAgYW5kIHlvdXIgZnJpZW5kcyBtYXkgbm90IHNlZSB0aGUgc2FtZSB2YWx1ZXMgeW91IGRvLlxuXG4gICAgPC9kaXY+XG5cbiAgPC9kaXY+XG5cbjwvZGl2PiI7Cgp2YXIgQ29udHJvbGxlckZhY3RvcnkgPSBmdW5jdGlvbiBDb250cm9sbGVyRmFjdG9yeShvYmplY3QsIHByb3BlcnR5KSB7CiAgdmFyIGluaXRpYWxWYWx1ZSA9IG9iamVjdFtwcm9wZXJ0eV07CgogIGlmIChDb21tb24uaXNBcnJheShhcmd1bWVudHNbMl0pIHx8IENvbW1vbi5pc09iamVjdChhcmd1bWVudHNbMl0pKSB7CiAgICByZXR1cm4gbmV3IE9wdGlvbkNvbnRyb2xsZXIob2JqZWN0LCBwcm9wZXJ0eSwgYXJndW1lbnRzWzJdKTsKICB9CgogIGlmIChDb21tb24uaXNOdW1iZXIoaW5pdGlhbFZhbHVlKSkgewogICAgaWYgKENvbW1vbi5pc051bWJlcihhcmd1bWVudHNbMl0pICYmIENvbW1vbi5pc051bWJlcihhcmd1bWVudHNbM10pKSB7CiAgICAgIGlmIChDb21tb24uaXNOdW1iZXIoYXJndW1lbnRzWzRdKSkgewogICAgICAgIHJldHVybiBuZXcgTnVtYmVyQ29udHJvbGxlclNsaWRlcihvYmplY3QsIHByb3BlcnR5LCBhcmd1bWVudHNbMl0sIGFyZ3VtZW50c1szXSwgYXJndW1lbnRzWzRdKTsKICAgICAgfQoKICAgICAgcmV0dXJuIG5ldyBOdW1iZXJDb250cm9sbGVyU2xpZGVyKG9iamVjdCwgcHJvcGVydHksIGFyZ3VtZW50c1syXSwgYXJndW1lbnRzWzNdKTsKICAgIH0KCiAgICBpZiAoQ29tbW9uLmlzTnVtYmVyKGFyZ3VtZW50c1s0XSkpIHsKICAgICAgcmV0dXJuIG5ldyBOdW1iZXJDb250cm9sbGVyQm94KG9iamVjdCwgcHJvcGVydHksIHsKICAgICAgICBtaW46IGFyZ3VtZW50c1syXSwKICAgICAgICBtYXg6IGFyZ3VtZW50c1szXSwKICAgICAgICBzdGVwOiBhcmd1bWVudHNbNF0KICAgICAgfSk7CiAgICB9CgogICAgcmV0dXJuIG5ldyBOdW1iZXJDb250cm9sbGVyQm94KG9iamVjdCwgcHJvcGVydHksIHsKICAgICAgbWluOiBhcmd1bWVudHNbMl0sCiAgICAgIG1heDogYXJndW1lbnRzWzNdCiAgICB9KTsKICB9CgogIGlmIChDb21tb24uaXNTdHJpbmcoaW5pdGlhbFZhbHVlKSkgewogICAgcmV0dXJuIG5ldyBTdHJpbmdDb250cm9sbGVyKG9iamVjdCwgcHJvcGVydHkpOwogIH0KCiAgaWYgKENvbW1vbi5pc0Z1bmN0aW9uKGluaXRpYWxWYWx1ZSkpIHsKICAgIHJldHVybiBuZXcgRnVuY3Rpb25Db250cm9sbGVyKG9iamVjdCwgcHJvcGVydHksICcnKTsKICB9CgogIGlmIChDb21tb24uaXNCb29sZWFuKGluaXRpYWxWYWx1ZSkpIHsKICAgIHJldHVybiBuZXcgQm9vbGVhbkNvbnRyb2xsZXIob2JqZWN0LCBwcm9wZXJ0eSk7CiAgfQoKICByZXR1cm4gbnVsbDsKfTsKCmZ1bmN0aW9uIHJlcXVlc3RBbmltYXRpb25GcmFtZShjYWxsYmFjaykgewogIHNldFRpbWVvdXQoY2FsbGJhY2ssIDEwMDAgLyA2MCk7Cn0KCnZhciByZXF1ZXN0QW5pbWF0aW9uRnJhbWUkMSA9IHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUgfHwgd2luZG93LndlYmtpdFJlcXVlc3RBbmltYXRpb25GcmFtZSB8fCB3aW5kb3cubW96UmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8IHdpbmRvdy5vUmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8IHdpbmRvdy5tc1JlcXVlc3RBbmltYXRpb25GcmFtZSB8fCByZXF1ZXN0QW5pbWF0aW9uRnJhbWU7Cgp2YXIgQ2VudGVyZWREaXYgPSBmdW5jdGlvbiAoKSB7CiAgZnVuY3Rpb24gQ2VudGVyZWREaXYoKSB7CiAgICBjbGFzc0NhbGxDaGVjayh0aGlzLCBDZW50ZXJlZERpdik7CiAgICB0aGlzLmJhY2tncm91bmRFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICBDb21tb24uZXh0ZW5kKHRoaXMuYmFja2dyb3VuZEVsZW1lbnQuc3R5bGUsIHsKICAgICAgYmFja2dyb3VuZENvbG9yOiAncmdiYSgwLDAsMCwwLjgpJywKICAgICAgdG9wOiAwLAogICAgICBsZWZ0OiAwLAogICAgICBkaXNwbGF5OiAnbm9uZScsCiAgICAgIHpJbmRleDogJzEwMDAnLAogICAgICBvcGFjaXR5OiAwLAogICAgICBXZWJraXRUcmFuc2l0aW9uOiAnb3BhY2l0eSAwLjJzIGxpbmVhcicsCiAgICAgIHRyYW5zaXRpb246ICdvcGFjaXR5IDAuMnMgbGluZWFyJwogICAgfSk7CiAgICBkb20ubWFrZUZ1bGxzY3JlZW4odGhpcy5iYWNrZ3JvdW5kRWxlbWVudCk7CiAgICB0aGlzLmJhY2tncm91bmRFbGVtZW50LnN0eWxlLnBvc2l0aW9uID0gJ2ZpeGVkJzsKICAgIHRoaXMuZG9tRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgQ29tbW9uLmV4dGVuZCh0aGlzLmRvbUVsZW1lbnQuc3R5bGUsIHsKICAgICAgcG9zaXRpb246ICdmaXhlZCcsCiAgICAgIGRpc3BsYXk6ICdub25lJywKICAgICAgekluZGV4OiAnMTAwMScsCiAgICAgIG9wYWNpdHk6IDAsCiAgICAgIFdlYmtpdFRyYW5zaXRpb246ICctd2Via2l0LXRyYW5zZm9ybSAwLjJzIGVhc2Utb3V0LCBvcGFjaXR5IDAuMnMgbGluZWFyJywKICAgICAgdHJhbnNpdGlvbjogJ3RyYW5zZm9ybSAwLjJzIGVhc2Utb3V0LCBvcGFjaXR5IDAuMnMgbGluZWFyJwogICAgfSk7CiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRoaXMuYmFja2dyb3VuZEVsZW1lbnQpOwogICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0aGlzLmRvbUVsZW1lbnQpOwoKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgZG9tLmJpbmQodGhpcy5iYWNrZ3JvdW5kRWxlbWVudCwgJ2NsaWNrJywgZnVuY3Rpb24gKCkgewogICAgICBfdGhpcy5oaWRlKCk7CiAgICB9KTsKICB9CgogIGNyZWF0ZUNsYXNzKENlbnRlcmVkRGl2LCBbewogICAga2V5OiAnc2hvdycsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2hvdygpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHRoaXMuYmFja2dyb3VuZEVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7CiAgICAgIHRoaXMuZG9tRWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsKICAgICAgdGhpcy5kb21FbGVtZW50LnN0eWxlLm9wYWNpdHkgPSAwOwogICAgICB0aGlzLmRvbUVsZW1lbnQuc3R5bGUud2Via2l0VHJhbnNmb3JtID0gJ3NjYWxlKDEuMSknOwogICAgICB0aGlzLmxheW91dCgpOwogICAgICBDb21tb24uZGVmZXIoZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzLmJhY2tncm91bmRFbGVtZW50LnN0eWxlLm9wYWNpdHkgPSAxOwogICAgICAgIF90aGlzLmRvbUVsZW1lbnQuc3R5bGUub3BhY2l0eSA9IDE7CiAgICAgICAgX3RoaXMuZG9tRWxlbWVudC5zdHlsZS53ZWJraXRUcmFuc2Zvcm0gPSAnc2NhbGUoMSknOwogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICdoaWRlJywKICAgIHZhbHVlOiBmdW5jdGlvbiBoaWRlKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdmFyIGhpZGUgPSBmdW5jdGlvbiBoaWRlKCkgewogICAgICAgIF90aGlzLmRvbUVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgICAgICBfdGhpcy5iYWNrZ3JvdW5kRWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICAgICAgIGRvbS51bmJpbmQoX3RoaXMuZG9tRWxlbWVudCwgJ3dlYmtpdFRyYW5zaXRpb25FbmQnLCBoaWRlKTsKICAgICAgICBkb20udW5iaW5kKF90aGlzLmRvbUVsZW1lbnQsICd0cmFuc2l0aW9uZW5kJywgaGlkZSk7CiAgICAgICAgZG9tLnVuYmluZChfdGhpcy5kb21FbGVtZW50LCAnb1RyYW5zaXRpb25FbmQnLCBoaWRlKTsKICAgICAgfTsKCiAgICAgIGRvbS5iaW5kKHRoaXMuZG9tRWxlbWVudCwgJ3dlYmtpdFRyYW5zaXRpb25FbmQnLCBoaWRlKTsKICAgICAgZG9tLmJpbmQodGhpcy5kb21FbGVtZW50LCAndHJhbnNpdGlvbmVuZCcsIGhpZGUpOwogICAgICBkb20uYmluZCh0aGlzLmRvbUVsZW1lbnQsICdvVHJhbnNpdGlvbkVuZCcsIGhpZGUpOwogICAgICB0aGlzLmJhY2tncm91bmRFbGVtZW50LnN0eWxlLm9wYWNpdHkgPSAwOwogICAgICB0aGlzLmRvbUVsZW1lbnQuc3R5bGUub3BhY2l0eSA9IDA7CiAgICAgIHRoaXMuZG9tRWxlbWVudC5zdHlsZS53ZWJraXRUcmFuc2Zvcm0gPSAnc2NhbGUoMS4xKSc7CiAgICB9CiAgfSwgewogICAga2V5OiAnbGF5b3V0JywKICAgIHZhbHVlOiBmdW5jdGlvbiBsYXlvdXQoKSB7CiAgICAgIHRoaXMuZG9tRWxlbWVudC5zdHlsZS5sZWZ0ID0gd2luZG93LmlubmVyV2lkdGggLyAyIC0gZG9tLmdldFdpZHRoKHRoaXMuZG9tRWxlbWVudCkgLyAyICsgJ3B4JzsKICAgICAgdGhpcy5kb21FbGVtZW50LnN0eWxlLnRvcCA9IHdpbmRvdy5pbm5lckhlaWdodCAvIDIgLSBkb20uZ2V0SGVpZ2h0KHRoaXMuZG9tRWxlbWVudCkgLyAyICsgJ3B4JzsKICAgIH0KICB9XSk7CiAgcmV0dXJuIENlbnRlcmVkRGl2Owp9KCk7Cgp2YXIgc3R5bGVTaGVldCA9IF9fXyRpbnNlcnRTdHlsZSgiLmRnIHVse2xpc3Qtc3R5bGU6bm9uZTttYXJnaW46MDtwYWRkaW5nOjA7d2lkdGg6MTAwJTtjbGVhcjpib3RofS5kZy5hY3twb3NpdGlvbjpmaXhlZDt0b3A6MDtsZWZ0OjA7cmlnaHQ6MDtoZWlnaHQ6MDt6LWluZGV4OjB9LmRnOm5vdCguYWMpIC5tYWlue292ZXJmbG93OmhpZGRlbn0uZGcubWFpbnstd2Via2l0LXRyYW5zaXRpb246b3BhY2l0eSAuMXMgbGluZWFyOy1vLXRyYW5zaXRpb246b3BhY2l0eSAuMXMgbGluZWFyOy1tb3otdHJhbnNpdGlvbjpvcGFjaXR5IC4xcyBsaW5lYXI7dHJhbnNpdGlvbjpvcGFjaXR5IC4xcyBsaW5lYXJ9LmRnLm1haW4udGFsbGVyLXRoYW4td2luZG93e292ZXJmbG93LXk6YXV0b30uZGcubWFpbi50YWxsZXItdGhhbi13aW5kb3cgLmNsb3NlLWJ1dHRvbntvcGFjaXR5OjE7bWFyZ2luLXRvcDotMXB4O2JvcmRlci10b3A6MXB4IHNvbGlkICMyYzJjMmN9LmRnLm1haW4gdWwuY2xvc2VkIC5jbG9zZS1idXR0b257b3BhY2l0eToxICFpbXBvcnRhbnR9LmRnLm1haW46aG92ZXIgLmNsb3NlLWJ1dHRvbiwuZGcubWFpbiAuY2xvc2UtYnV0dG9uLmRyYWd7b3BhY2l0eToxfS5kZy5tYWluIC5jbG9zZS1idXR0b257LXdlYmtpdC10cmFuc2l0aW9uOm9wYWNpdHkgLjFzIGxpbmVhcjstby10cmFuc2l0aW9uOm9wYWNpdHkgLjFzIGxpbmVhcjstbW96LXRyYW5zaXRpb246b3BhY2l0eSAuMXMgbGluZWFyO3RyYW5zaXRpb246b3BhY2l0eSAuMXMgbGluZWFyO2JvcmRlcjowO2xpbmUtaGVpZ2h0OjE5cHg7aGVpZ2h0OjIwcHg7Y3Vyc29yOnBvaW50ZXI7dGV4dC1hbGlnbjpjZW50ZXI7YmFja2dyb3VuZC1jb2xvcjojMDAwfS5kZy5tYWluIC5jbG9zZS1idXR0b24uY2xvc2UtdG9we3Bvc2l0aW9uOnJlbGF0aXZlfS5kZy5tYWluIC5jbG9zZS1idXR0b24uY2xvc2UtYm90dG9te3Bvc2l0aW9uOmFic29sdXRlfS5kZy5tYWluIC5jbG9zZS1idXR0b246aG92ZXJ7YmFja2dyb3VuZC1jb2xvcjojMTExfS5kZy5he2Zsb2F0OnJpZ2h0O21hcmdpbi1yaWdodDoxNXB4O292ZXJmbG93LXk6dmlzaWJsZX0uZGcuYS5oYXMtc2F2ZT51bC5jbG9zZS10b3B7bWFyZ2luLXRvcDowfS5kZy5hLmhhcy1zYXZlPnVsLmNsb3NlLWJvdHRvbXttYXJnaW4tdG9wOjI3cHh9LmRnLmEuaGFzLXNhdmU+dWwuY2xvc2Vke21hcmdpbi10b3A6MH0uZGcuYSAuc2F2ZS1yb3d7dG9wOjA7ei1pbmRleDoxMDAyfS5kZy5hIC5zYXZlLXJvdy5jbG9zZS10b3B7cG9zaXRpb246cmVsYXRpdmV9LmRnLmEgLnNhdmUtcm93LmNsb3NlLWJvdHRvbXtwb3NpdGlvbjpmaXhlZH0uZGcgbGl7LXdlYmtpdC10cmFuc2l0aW9uOmhlaWdodCAuMXMgZWFzZS1vdXQ7LW8tdHJhbnNpdGlvbjpoZWlnaHQgLjFzIGVhc2Utb3V0Oy1tb3otdHJhbnNpdGlvbjpoZWlnaHQgLjFzIGVhc2Utb3V0O3RyYW5zaXRpb246aGVpZ2h0IC4xcyBlYXNlLW91dDstd2Via2l0LXRyYW5zaXRpb246b3ZlcmZsb3cgLjFzIGxpbmVhcjstby10cmFuc2l0aW9uOm92ZXJmbG93IC4xcyBsaW5lYXI7LW1vei10cmFuc2l0aW9uOm92ZXJmbG93IC4xcyBsaW5lYXI7dHJhbnNpdGlvbjpvdmVyZmxvdyAuMXMgbGluZWFyfS5kZyBsaTpub3QoLmZvbGRlcil7Y3Vyc29yOmF1dG87aGVpZ2h0OjI3cHg7bGluZS1oZWlnaHQ6MjdweDtwYWRkaW5nOjAgNHB4IDAgNXB4fS5kZyBsaS5mb2xkZXJ7cGFkZGluZzowO2JvcmRlci1sZWZ0OjRweCBzb2xpZCByZ2JhKDAsMCwwLDApfS5kZyBsaS50aXRsZXtjdXJzb3I6cG9pbnRlcjttYXJnaW4tbGVmdDotNHB4fS5kZyAuY2xvc2VkIGxpOm5vdCgudGl0bGUpLC5kZyAuY2xvc2VkIHVsIGxpLC5kZyAuY2xvc2VkIHVsIGxpPip7aGVpZ2h0OjA7b3ZlcmZsb3c6aGlkZGVuO2JvcmRlcjowfS5kZyAuY3J7Y2xlYXI6Ym90aDtwYWRkaW5nLWxlZnQ6M3B4O2hlaWdodDoyN3B4O292ZXJmbG93OmhpZGRlbn0uZGcgLnByb3BlcnR5LW5hbWV7Y3Vyc29yOmRlZmF1bHQ7ZmxvYXQ6bGVmdDtjbGVhcjpsZWZ0O3dpZHRoOjQwJTtvdmVyZmxvdzpoaWRkZW47dGV4dC1vdmVyZmxvdzplbGxpcHNpc30uZGcgLmN7ZmxvYXQ6bGVmdDt3aWR0aDo2MCU7cG9zaXRpb246cmVsYXRpdmV9LmRnIC5jIGlucHV0W3R5cGU9dGV4dF17Ym9yZGVyOjA7bWFyZ2luLXRvcDo0cHg7cGFkZGluZzozcHg7d2lkdGg6MTAwJTtmbG9hdDpyaWdodH0uZGcgLmhhcy1zbGlkZXIgaW5wdXRbdHlwZT10ZXh0XXt3aWR0aDozMCU7bWFyZ2luLWxlZnQ6MH0uZGcgLnNsaWRlcntmbG9hdDpsZWZ0O3dpZHRoOjY2JTttYXJnaW4tbGVmdDotNXB4O21hcmdpbi1yaWdodDowO2hlaWdodDoxOXB4O21hcmdpbi10b3A6NHB4fS5kZyAuc2xpZGVyLWZne2hlaWdodDoxMDAlfS5kZyAuYyBpbnB1dFt0eXBlPWNoZWNrYm94XXttYXJnaW4tdG9wOjdweH0uZGcgLmMgc2VsZWN0e21hcmdpbi10b3A6NXB4fS5kZyAuY3IuZnVuY3Rpb24sLmRnIC5jci5mdW5jdGlvbiAucHJvcGVydHktbmFtZSwuZGcgLmNyLmZ1bmN0aW9uICosLmRnIC5jci5ib29sZWFuLC5kZyAuY3IuYm9vbGVhbiAqe2N1cnNvcjpwb2ludGVyfS5kZyAuY3IuY29sb3J7b3ZlcmZsb3c6dmlzaWJsZX0uZGcgLnNlbGVjdG9ye2Rpc3BsYXk6bm9uZTtwb3NpdGlvbjphYnNvbHV0ZTttYXJnaW4tbGVmdDotOXB4O21hcmdpbi10b3A6MjNweDt6LWluZGV4OjEwfS5kZyAuYzpob3ZlciAuc2VsZWN0b3IsLmRnIC5zZWxlY3Rvci5kcmFne2Rpc3BsYXk6YmxvY2t9LmRnIGxpLnNhdmUtcm93e3BhZGRpbmc6MH0uZGcgbGkuc2F2ZS1yb3cgLmJ1dHRvbntkaXNwbGF5OmlubGluZS1ibG9jaztwYWRkaW5nOjBweCA2cHh9LmRnLmRpYWxvZ3Vle2JhY2tncm91bmQtY29sb3I6IzIyMjt3aWR0aDo0NjBweDtwYWRkaW5nOjE1cHg7Zm9udC1zaXplOjEzcHg7bGluZS1oZWlnaHQ6MTVweH0jZGctbmV3LWNvbnN0cnVjdG9ye3BhZGRpbmc6MTBweDtjb2xvcjojMjIyO2ZvbnQtZmFtaWx5Ok1vbmFjbywgbW9ub3NwYWNlO2ZvbnQtc2l6ZToxMHB4O2JvcmRlcjowO3Jlc2l6ZTpub25lO2JveC1zaGFkb3c6aW5zZXQgMXB4IDFweCAxcHggIzg4ODt3b3JkLXdyYXA6YnJlYWstd29yZDttYXJnaW46MTJweCAwO2Rpc3BsYXk6YmxvY2s7d2lkdGg6NDQwcHg7b3ZlcmZsb3cteTpzY3JvbGw7aGVpZ2h0OjEwMHB4O3Bvc2l0aW9uOnJlbGF0aXZlfSNkZy1sb2NhbC1leHBsYWlue2Rpc3BsYXk6bm9uZTtmb250LXNpemU6MTFweDtsaW5lLWhlaWdodDoxN3B4O2JvcmRlci1yYWRpdXM6M3B4O2JhY2tncm91bmQtY29sb3I6IzMzMztwYWRkaW5nOjhweDttYXJnaW4tdG9wOjEwcHh9I2RnLWxvY2FsLWV4cGxhaW4gY29kZXtmb250LXNpemU6MTBweH0jZGF0LWd1aS1zYXZlLWxvY2FsbHl7ZGlzcGxheTpub25lfS5kZ3tjb2xvcjojZWVlO2ZvbnQ6MTFweCAnTHVjaWRhIEdyYW5kZScsIHNhbnMtc2VyaWY7dGV4dC1zaGFkb3c6MCAtMXB4IDAgIzExMX0uZGcubWFpbjo6LXdlYmtpdC1zY3JvbGxiYXJ7d2lkdGg6NXB4O2JhY2tncm91bmQ6IzFhMWExYX0uZGcubWFpbjo6LXdlYmtpdC1zY3JvbGxiYXItY29ybmVye2hlaWdodDowO2Rpc3BsYXk6bm9uZX0uZGcubWFpbjo6LXdlYmtpdC1zY3JvbGxiYXItdGh1bWJ7Ym9yZGVyLXJhZGl1czo1cHg7YmFja2dyb3VuZDojNjc2NzY3fS5kZyBsaTpub3QoLmZvbGRlcil7YmFja2dyb3VuZDojMWExYTFhO2JvcmRlci1ib3R0b206MXB4IHNvbGlkICMyYzJjMmN9LmRnIGxpLnNhdmUtcm93e2xpbmUtaGVpZ2h0OjI1cHg7YmFja2dyb3VuZDojZGFkNWNiO2JvcmRlcjowfS5kZyBsaS5zYXZlLXJvdyBzZWxlY3R7bWFyZ2luLWxlZnQ6NXB4O3dpZHRoOjEwOHB4fS5kZyBsaS5zYXZlLXJvdyAuYnV0dG9ue21hcmdpbi1sZWZ0OjVweDttYXJnaW4tdG9wOjFweDtib3JkZXItcmFkaXVzOjJweDtmb250LXNpemU6OXB4O2xpbmUtaGVpZ2h0OjdweDtwYWRkaW5nOjRweCA0cHggNXB4IDRweDtiYWNrZ3JvdW5kOiNjNWJkYWQ7Y29sb3I6I2ZmZjt0ZXh0LXNoYWRvdzowIDFweCAwICNiMGE1OGY7Ym94LXNoYWRvdzowIC0xcHggMCAjYjBhNThmO2N1cnNvcjpwb2ludGVyfS5kZyBsaS5zYXZlLXJvdyAuYnV0dG9uLmdlYXJze2JhY2tncm91bmQ6I2M1YmRhZCB1cmwoZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFBc0FBQUFOQ0FZQUFBQi85WlE3QUFBQUdYUkZXSFJUYjJaMGQyRnlaUUJCWkc5aVpTQkpiV0ZuWlZKbFlXUjVjY2xsUEFBQUFRSkpSRUZVZU5waVlLQVUvUC8vUHdHSUMvQXBDQUJpQlNBVytJOEFDbEFjZ0t4UTRUOWhvTUFFVXJ4eDJRU0dONitlZ0RYKy92V1Q0ZTdOODJBTVlvUEF4L2V2d1dvWW9TWWJBQ1gyczdLeEN4emNzZXpEaDNldkZvREVCWVRFRXF5Y2dnV0F6QTlBdVVTUVFnZVlQYTlmUHY2L1lXbS9BY3g1SVBiN3R5L2Z3K1FaYmx3Njd2RHM4UjBZSHlRaGdPYngreUFKa0JxbUc1ZFBQRGgxYVBPR1IvZXVnVzBHNHZsSW9USWZ5RmNBK1Fla2hoSEpoUGRReGJpQUlndU1CVFFaclBENzEwOE02cm9XWURGUWlJQUF2NkFvdy8xYkZ3WGdpcytmMkxVQXlud29JYU5jejhYTngzRGw3TUVKVURHUXB4OWd0UThZQ3VlQitEMjZPRUNBQVFEYWR0N2U0NkQ0MlFBQUFBQkpSVTVFcmtKZ2dnPT0pIDJweCAxcHggbm8tcmVwZWF0O2hlaWdodDo3cHg7d2lkdGg6OHB4fS5kZyBsaS5zYXZlLXJvdyAuYnV0dG9uOmhvdmVye2JhY2tncm91bmQtY29sb3I6I2JhYjE5ZTtib3gtc2hhZG93OjAgLTFweCAwICNiMGE1OGZ9LmRnIGxpLmZvbGRlcntib3JkZXItYm90dG9tOjB9LmRnIGxpLnRpdGxle3BhZGRpbmctbGVmdDoxNnB4O2JhY2tncm91bmQ6IzAwMCB1cmwoZGF0YTppbWFnZS9naWY7YmFzZTY0LFIwbEdPRGxoQlFBRkFKRUFBUC8vLy9QejgvLy8vLy8vL3lINUJBRUFBQUlBTEFBQUFBQUZBQVVBQUFJSWxJK2hLZ0Z4b0NnQU93PT0pIDZweCAxMHB4IG5vLXJlcGVhdDtjdXJzb3I6cG9pbnRlcjtib3JkZXItYm90dG9tOjFweCBzb2xpZCByZ2JhKDI1NSwyNTUsMjU1LDAuMil9LmRnIC5jbG9zZWQgbGkudGl0bGV7YmFja2dyb3VuZC1pbWFnZTp1cmwoZGF0YTppbWFnZS9naWY7YmFzZTY0LFIwbEdPRGxoQlFBRkFKRUFBUC8vLy9QejgvLy8vLy8vL3lINUJBRUFBQUlBTEFBQUFBQUZBQVVBQUFJSWxHSVdxTUNiV0FFQU93PT0pfS5kZyAuY3IuYm9vbGVhbntib3JkZXItbGVmdDozcHggc29saWQgIzgwNjc4N30uZGcgLmNyLmNvbG9ye2JvcmRlci1sZWZ0OjNweCBzb2xpZH0uZGcgLmNyLmZ1bmN0aW9ue2JvcmRlci1sZWZ0OjNweCBzb2xpZCAjZTYxZDVmfS5kZyAuY3IubnVtYmVye2JvcmRlci1sZWZ0OjNweCBzb2xpZCAjMkZBMUQ2fS5kZyAuY3IubnVtYmVyIGlucHV0W3R5cGU9dGV4dF17Y29sb3I6IzJGQTFENn0uZGcgLmNyLnN0cmluZ3tib3JkZXItbGVmdDozcHggc29saWQgIzFlZDM2Zn0uZGcgLmNyLnN0cmluZyBpbnB1dFt0eXBlPXRleHRde2NvbG9yOiMxZWQzNmZ9LmRnIC5jci5mdW5jdGlvbjpob3ZlciwuZGcgLmNyLmJvb2xlYW46aG92ZXJ7YmFja2dyb3VuZDojMTExfS5kZyAuYyBpbnB1dFt0eXBlPXRleHRde2JhY2tncm91bmQ6IzMwMzAzMDtvdXRsaW5lOm5vbmV9LmRnIC5jIGlucHV0W3R5cGU9dGV4dF06aG92ZXJ7YmFja2dyb3VuZDojM2MzYzNjfS5kZyAuYyBpbnB1dFt0eXBlPXRleHRdOmZvY3Vze2JhY2tncm91bmQ6IzQ5NDk0OTtjb2xvcjojZmZmfS5kZyAuYyAuc2xpZGVye2JhY2tncm91bmQ6IzMwMzAzMDtjdXJzb3I6ZXctcmVzaXplfS5kZyAuYyAuc2xpZGVyLWZne2JhY2tncm91bmQ6IzJGQTFENjttYXgtd2lkdGg6MTAwJX0uZGcgLmMgLnNsaWRlcjpob3ZlcntiYWNrZ3JvdW5kOiMzYzNjM2N9LmRnIC5jIC5zbGlkZXI6aG92ZXIgLnNsaWRlci1mZ3tiYWNrZ3JvdW5kOiM0NGFiZGF9XG4iKTsKCmNzcy5pbmplY3Qoc3R5bGVTaGVldCk7CnZhciBDU1NfTkFNRVNQQUNFID0gJ2RnJzsKdmFyIEhJREVfS0VZX0NPREUgPSA3MjsKdmFyIENMT1NFX0JVVFRPTl9IRUlHSFQgPSAyMDsKdmFyIERFRkFVTFRfREVGQVVMVF9QUkVTRVRfTkFNRSA9ICdEZWZhdWx0JzsKCnZhciBTVVBQT1JUU19MT0NBTF9TVE9SQUdFID0gZnVuY3Rpb24gKCkgewogIHRyeSB7CiAgICByZXR1cm4gISF3aW5kb3cubG9jYWxTdG9yYWdlOwogIH0gY2F0Y2ggKGUpIHsKICAgIHJldHVybiBmYWxzZTsKICB9Cn0oKTsKCnZhciBTQVZFX0RJQUxPR1VFID0gdm9pZCAwOwp2YXIgYXV0b1BsYWNlVmlyZ2luID0gdHJ1ZTsKdmFyIGF1dG9QbGFjZUNvbnRhaW5lciA9IHZvaWQgMDsKdmFyIGhpZGUgPSBmYWxzZTsKdmFyIGhpZGVhYmxlR3VpcyA9IFtdOwoKdmFyIEdVSSA9IGZ1bmN0aW9uIEdVSShwYXJzKSB7CiAgdmFyIF90aGlzID0gdGhpczsKCiAgdmFyIHBhcmFtcyA9IHBhcnMgfHwge307CiAgdGhpcy5kb21FbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgdGhpcy5fX3VsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndWwnKTsKICB0aGlzLmRvbUVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5fX3VsKTsKICBkb20uYWRkQ2xhc3ModGhpcy5kb21FbGVtZW50LCBDU1NfTkFNRVNQQUNFKTsKICB0aGlzLl9fZm9sZGVycyA9IHt9OwogIHRoaXMuX19jb250cm9sbGVycyA9IFtdOwogIHRoaXMuX19yZW1lbWJlcmVkT2JqZWN0cyA9IFtdOwogIHRoaXMuX19yZW1lbWJlcmVkT2JqZWN0SW5kZWNlc1RvQ29udHJvbGxlcnMgPSBbXTsKICB0aGlzLl9fbGlzdGVuaW5nID0gW107CiAgcGFyYW1zID0gQ29tbW9uLmRlZmF1bHRzKHBhcmFtcywgewogICAgY2xvc2VPblRvcDogZmFsc2UsCiAgICBhdXRvUGxhY2U6IHRydWUsCiAgICB3aWR0aDogR1VJLkRFRkFVTFRfV0lEVEgKICB9KTsKICBwYXJhbXMgPSBDb21tb24uZGVmYXVsdHMocGFyYW1zLCB7CiAgICByZXNpemFibGU6IHBhcmFtcy5hdXRvUGxhY2UsCiAgICBoaWRlYWJsZTogcGFyYW1zLmF1dG9QbGFjZQogIH0pOwoKICBpZiAoIUNvbW1vbi5pc1VuZGVmaW5lZChwYXJhbXMubG9hZCkpIHsKICAgIGlmIChwYXJhbXMucHJlc2V0KSB7CiAgICAgIHBhcmFtcy5sb2FkLnByZXNldCA9IHBhcmFtcy5wcmVzZXQ7CiAgICB9CiAgfSBlbHNlIHsKICAgIHBhcmFtcy5sb2FkID0gewogICAgICBwcmVzZXQ6IERFRkFVTFRfREVGQVVMVF9QUkVTRVRfTkFNRQogICAgfTsKICB9CgogIGlmIChDb21tb24uaXNVbmRlZmluZWQocGFyYW1zLnBhcmVudCkgJiYgcGFyYW1zLmhpZGVhYmxlKSB7CiAgICBoaWRlYWJsZUd1aXMucHVzaCh0aGlzKTsKICB9CgogIHBhcmFtcy5yZXNpemFibGUgPSBDb21tb24uaXNVbmRlZmluZWQocGFyYW1zLnBhcmVudCkgJiYgcGFyYW1zLnJlc2l6YWJsZTsKCiAgaWYgKHBhcmFtcy5hdXRvUGxhY2UgJiYgQ29tbW9uLmlzVW5kZWZpbmVkKHBhcmFtcy5zY3JvbGxhYmxlKSkgewogICAgcGFyYW1zLnNjcm9sbGFibGUgPSB0cnVlOwogIH0KCiAgdmFyIHVzZUxvY2FsU3RvcmFnZSA9IFNVUFBPUlRTX0xPQ0FMX1NUT1JBR0UgJiYgbG9jYWxTdG9yYWdlLmdldEl0ZW0oZ2V0TG9jYWxTdG9yYWdlSGFzaCh0aGlzLCAnaXNMb2NhbCcpKSA9PT0gJ3RydWUnOwogIHZhciBzYXZlVG9Mb2NhbFN0b3JhZ2UgPSB2b2lkIDA7CiAgdmFyIHRpdGxlUm93ID0gdm9pZCAwOwogIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRoaXMsIHsKICAgIHBhcmVudDogewogICAgICBnZXQ6IGZ1bmN0aW9uIGdldCQkMSgpIHsKICAgICAgICByZXR1cm4gcGFyYW1zLnBhcmVudDsKICAgICAgfQogICAgfSwKICAgIHNjcm9sbGFibGU6IHsKICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQkJDEoKSB7CiAgICAgICAgcmV0dXJuIHBhcmFtcy5zY3JvbGxhYmxlOwogICAgICB9CiAgICB9LAogICAgYXV0b1BsYWNlOiB7CiAgICAgIGdldDogZnVuY3Rpb24gZ2V0JCQxKCkgewogICAgICAgIHJldHVybiBwYXJhbXMuYXV0b1BsYWNlOwogICAgICB9CiAgICB9LAogICAgY2xvc2VPblRvcDogewogICAgICBnZXQ6IGZ1bmN0aW9uIGdldCQkMSgpIHsKICAgICAgICByZXR1cm4gcGFyYW1zLmNsb3NlT25Ub3A7CiAgICAgIH0KICAgIH0sCiAgICBwcmVzZXQ6IHsKICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQkJDEoKSB7CiAgICAgICAgaWYgKF90aGlzLnBhcmVudCkgewogICAgICAgICAgcmV0dXJuIF90aGlzLmdldFJvb3QoKS5wcmVzZXQ7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gcGFyYW1zLmxvYWQucHJlc2V0OwogICAgICB9LAogICAgICBzZXQ6IGZ1bmN0aW9uIHNldCQkMSh2KSB7CiAgICAgICAgaWYgKF90aGlzLnBhcmVudCkgewogICAgICAgICAgX3RoaXMuZ2V0Um9vdCgpLnByZXNldCA9IHY7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHBhcmFtcy5sb2FkLnByZXNldCA9IHY7CiAgICAgICAgfQoKICAgICAgICBzZXRQcmVzZXRTZWxlY3RJbmRleCh0aGlzKTsKCiAgICAgICAgX3RoaXMucmV2ZXJ0KCk7CiAgICAgIH0KICAgIH0sCiAgICB3aWR0aDogewogICAgICBnZXQ6IGZ1bmN0aW9uIGdldCQkMSgpIHsKICAgICAgICByZXR1cm4gcGFyYW1zLndpZHRoOwogICAgICB9LAogICAgICBzZXQ6IGZ1bmN0aW9uIHNldCQkMSh2KSB7CiAgICAgICAgcGFyYW1zLndpZHRoID0gdjsKICAgICAgICBzZXRXaWR0aChfdGhpcywgdik7CiAgICAgIH0KICAgIH0sCiAgICBuYW1lOiB7CiAgICAgIGdldDogZnVuY3Rpb24gZ2V0JCQxKCkgewogICAgICAgIHJldHVybiBwYXJhbXMubmFtZTsKICAgICAgfSwKICAgICAgc2V0OiBmdW5jdGlvbiBzZXQkJDEodikgewogICAgICAgIHBhcmFtcy5uYW1lID0gdjsKCiAgICAgICAgaWYgKHRpdGxlUm93KSB7CiAgICAgICAgICB0aXRsZVJvdy5pbm5lckhUTUwgPSBwYXJhbXMubmFtZTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBjbG9zZWQ6IHsKICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQkJDEoKSB7CiAgICAgICAgcmV0dXJuIHBhcmFtcy5jbG9zZWQ7CiAgICAgIH0sCiAgICAgIHNldDogZnVuY3Rpb24gc2V0JCQxKHYpIHsKICAgICAgICBwYXJhbXMuY2xvc2VkID0gdjsKCiAgICAgICAgaWYgKHBhcmFtcy5jbG9zZWQpIHsKICAgICAgICAgIGRvbS5hZGRDbGFzcyhfdGhpcy5fX3VsLCBHVUkuQ0xBU1NfQ0xPU0VEKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgZG9tLnJlbW92ZUNsYXNzKF90aGlzLl9fdWwsIEdVSS5DTEFTU19DTE9TRUQpOwogICAgICAgIH0KCiAgICAgICAgdGhpcy5vblJlc2l6ZSgpOwoKICAgICAgICBpZiAoX3RoaXMuX19jbG9zZUJ1dHRvbikgewogICAgICAgICAgX3RoaXMuX19jbG9zZUJ1dHRvbi5pbm5lckhUTUwgPSB2ID8gR1VJLlRFWFRfT1BFTiA6IEdVSS5URVhUX0NMT1NFRDsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBsb2FkOiB7CiAgICAgIGdldDogZnVuY3Rpb24gZ2V0JCQxKCkgewogICAgICAgIHJldHVybiBwYXJhbXMubG9hZDsKICAgICAgfQogICAgfSwKICAgIHVzZUxvY2FsU3RvcmFnZTogewogICAgICBnZXQ6IGZ1bmN0aW9uIGdldCQkMSgpIHsKICAgICAgICByZXR1cm4gdXNlTG9jYWxTdG9yYWdlOwogICAgICB9LAogICAgICBzZXQ6IGZ1bmN0aW9uIHNldCQkMShib29sKSB7CiAgICAgICAgaWYgKFNVUFBPUlRTX0xPQ0FMX1NUT1JBR0UpIHsKICAgICAgICAgIHVzZUxvY2FsU3RvcmFnZSA9IGJvb2w7CgogICAgICAgICAgaWYgKGJvb2wpIHsKICAgICAgICAgICAgZG9tLmJpbmQod2luZG93LCAndW5sb2FkJywgc2F2ZVRvTG9jYWxTdG9yYWdlKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGRvbS51bmJpbmQod2luZG93LCAndW5sb2FkJywgc2F2ZVRvTG9jYWxTdG9yYWdlKTsKICAgICAgICAgIH0KCiAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShnZXRMb2NhbFN0b3JhZ2VIYXNoKF90aGlzLCAnaXNMb2NhbCcpLCBib29sKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9KTsKCiAgaWYgKENvbW1vbi5pc1VuZGVmaW5lZChwYXJhbXMucGFyZW50KSkgewogICAgdGhpcy5jbG9zZWQgPSBwYXJhbXMuY2xvc2VkIHx8IGZhbHNlOwogICAgZG9tLmFkZENsYXNzKHRoaXMuZG9tRWxlbWVudCwgR1VJLkNMQVNTX01BSU4pOwogICAgZG9tLm1ha2VTZWxlY3RhYmxlKHRoaXMuZG9tRWxlbWVudCwgZmFsc2UpOwoKICAgIGlmIChTVVBQT1JUU19MT0NBTF9TVE9SQUdFKSB7CiAgICAgIGlmICh1c2VMb2NhbFN0b3JhZ2UpIHsKICAgICAgICBfdGhpcy51c2VMb2NhbFN0b3JhZ2UgPSB0cnVlOwogICAgICAgIHZhciBzYXZlZEd1aSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKGdldExvY2FsU3RvcmFnZUhhc2godGhpcywgJ2d1aScpKTsKCiAgICAgICAgaWYgKHNhdmVkR3VpKSB7CiAgICAgICAgICBwYXJhbXMubG9hZCA9IEpTT04ucGFyc2Uoc2F2ZWRHdWkpOwogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIHRoaXMuX19jbG9zZUJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgdGhpcy5fX2Nsb3NlQnV0dG9uLmlubmVySFRNTCA9IEdVSS5URVhUX0NMT1NFRDsKICAgIGRvbS5hZGRDbGFzcyh0aGlzLl9fY2xvc2VCdXR0b24sIEdVSS5DTEFTU19DTE9TRV9CVVRUT04pOwoKICAgIGlmIChwYXJhbXMuY2xvc2VPblRvcCkgewogICAgICBkb20uYWRkQ2xhc3ModGhpcy5fX2Nsb3NlQnV0dG9uLCBHVUkuQ0xBU1NfQ0xPU0VfVE9QKTsKICAgICAgdGhpcy5kb21FbGVtZW50Lmluc2VydEJlZm9yZSh0aGlzLl9fY2xvc2VCdXR0b24sIHRoaXMuZG9tRWxlbWVudC5jaGlsZE5vZGVzWzBdKTsKICAgIH0gZWxzZSB7CiAgICAgIGRvbS5hZGRDbGFzcyh0aGlzLl9fY2xvc2VCdXR0b24sIEdVSS5DTEFTU19DTE9TRV9CT1RUT00pOwogICAgICB0aGlzLmRvbUVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5fX2Nsb3NlQnV0dG9uKTsKICAgIH0KCiAgICBkb20uYmluZCh0aGlzLl9fY2xvc2VCdXR0b24sICdjbGljaycsIGZ1bmN0aW9uICgpIHsKICAgICAgX3RoaXMuY2xvc2VkID0gIV90aGlzLmNsb3NlZDsKICAgIH0pOwogIH0gZWxzZSB7CiAgICBpZiAocGFyYW1zLmNsb3NlZCA9PT0gdW5kZWZpbmVkKSB7CiAgICAgIHBhcmFtcy5jbG9zZWQgPSB0cnVlOwogICAgfQoKICAgIHZhciB0aXRsZVJvd05hbWUgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShwYXJhbXMubmFtZSk7CiAgICBkb20uYWRkQ2xhc3ModGl0bGVSb3dOYW1lLCAnY29udHJvbGxlci1uYW1lJyk7CiAgICB0aXRsZVJvdyA9IGFkZFJvdyhfdGhpcywgdGl0bGVSb3dOYW1lKTsKCiAgICB2YXIgb25DbGlja1RpdGxlID0gZnVuY3Rpb24gb25DbGlja1RpdGxlKGUpIHsKICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICBfdGhpcy5jbG9zZWQgPSAhX3RoaXMuY2xvc2VkOwogICAgICByZXR1cm4gZmFsc2U7CiAgICB9OwoKICAgIGRvbS5hZGRDbGFzcyh0aGlzLl9fdWwsIEdVSS5DTEFTU19DTE9TRUQpOwogICAgZG9tLmFkZENsYXNzKHRpdGxlUm93LCAndGl0bGUnKTsKICAgIGRvbS5iaW5kKHRpdGxlUm93LCAnY2xpY2snLCBvbkNsaWNrVGl0bGUpOwoKICAgIGlmICghcGFyYW1zLmNsb3NlZCkgewogICAgICB0aGlzLmNsb3NlZCA9IGZhbHNlOwogICAgfQogIH0KCiAgaWYgKHBhcmFtcy5hdXRvUGxhY2UpIHsKICAgIGlmIChDb21tb24uaXNVbmRlZmluZWQocGFyYW1zLnBhcmVudCkpIHsKICAgICAgaWYgKGF1dG9QbGFjZVZpcmdpbikgewogICAgICAgIGF1dG9QbGFjZUNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICAgIGRvbS5hZGRDbGFzcyhhdXRvUGxhY2VDb250YWluZXIsIENTU19OQU1FU1BBQ0UpOwogICAgICAgIGRvbS5hZGRDbGFzcyhhdXRvUGxhY2VDb250YWluZXIsIEdVSS5DTEFTU19BVVRPX1BMQUNFX0NPTlRBSU5FUik7CiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChhdXRvUGxhY2VDb250YWluZXIpOwogICAgICAgIGF1dG9QbGFjZVZpcmdpbiA9IGZhbHNlOwogICAgICB9CgogICAgICBhdXRvUGxhY2VDb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy5kb21FbGVtZW50KTsKICAgICAgZG9tLmFkZENsYXNzKHRoaXMuZG9tRWxlbWVudCwgR1VJLkNMQVNTX0FVVE9fUExBQ0UpOwogICAgfQoKICAgIGlmICghdGhpcy5wYXJlbnQpIHsKICAgICAgc2V0V2lkdGgoX3RoaXMsIHBhcmFtcy53aWR0aCk7CiAgICB9CiAgfQoKICB0aGlzLl9fcmVzaXplSGFuZGxlciA9IGZ1bmN0aW9uICgpIHsKICAgIF90aGlzLm9uUmVzaXplRGVib3VuY2VkKCk7CiAgfTsKCiAgZG9tLmJpbmQod2luZG93LCAncmVzaXplJywgdGhpcy5fX3Jlc2l6ZUhhbmRsZXIpOwogIGRvbS5iaW5kKHRoaXMuX191bCwgJ3dlYmtpdFRyYW5zaXRpb25FbmQnLCB0aGlzLl9fcmVzaXplSGFuZGxlcik7CiAgZG9tLmJpbmQodGhpcy5fX3VsLCAndHJhbnNpdGlvbmVuZCcsIHRoaXMuX19yZXNpemVIYW5kbGVyKTsKICBkb20uYmluZCh0aGlzLl9fdWwsICdvVHJhbnNpdGlvbkVuZCcsIHRoaXMuX19yZXNpemVIYW5kbGVyKTsKICB0aGlzLm9uUmVzaXplKCk7CgogIGlmIChwYXJhbXMucmVzaXphYmxlKSB7CiAgICBhZGRSZXNpemVIYW5kbGUodGhpcyk7CiAgfQoKICBzYXZlVG9Mb2NhbFN0b3JhZ2UgPSBmdW5jdGlvbiBzYXZlVG9Mb2NhbFN0b3JhZ2UoKSB7CiAgICBpZiAoU1VQUE9SVFNfTE9DQUxfU1RPUkFHRSAmJiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShnZXRMb2NhbFN0b3JhZ2VIYXNoKF90aGlzLCAnaXNMb2NhbCcpKSA9PT0gJ3RydWUnKSB7CiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGdldExvY2FsU3RvcmFnZUhhc2goX3RoaXMsICdndWknKSwgSlNPTi5zdHJpbmdpZnkoX3RoaXMuZ2V0U2F2ZU9iamVjdCgpKSk7CiAgICB9CiAgfTsKCiAgdGhpcy5zYXZlVG9Mb2NhbFN0b3JhZ2VJZlBvc3NpYmxlID0gc2F2ZVRvTG9jYWxTdG9yYWdlOwoKICBmdW5jdGlvbiByZXNldFdpZHRoKCkgewogICAgdmFyIHJvb3QgPSBfdGhpcy5nZXRSb290KCk7CgogICAgcm9vdC53aWR0aCArPSAxOwogICAgQ29tbW9uLmRlZmVyKGZ1bmN0aW9uICgpIHsKICAgICAgcm9vdC53aWR0aCAtPSAxOwogICAgfSk7CiAgfQoKICBpZiAoIXBhcmFtcy5wYXJlbnQpIHsKICAgIHJlc2V0V2lkdGgoKTsKICB9Cn07CgpHVUkudG9nZ2xlSGlkZSA9IGZ1bmN0aW9uICgpIHsKICBoaWRlID0gIWhpZGU7CiAgQ29tbW9uLmVhY2goaGlkZWFibGVHdWlzLCBmdW5jdGlvbiAoZ3VpKSB7CiAgICBndWkuZG9tRWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gaGlkZSA/ICdub25lJyA6ICcnOwogIH0pOwp9OwoKR1VJLkNMQVNTX0FVVE9fUExBQ0UgPSAnYSc7CkdVSS5DTEFTU19BVVRPX1BMQUNFX0NPTlRBSU5FUiA9ICdhYyc7CkdVSS5DTEFTU19NQUlOID0gJ21haW4nOwpHVUkuQ0xBU1NfQ09OVFJPTExFUl9ST1cgPSAnY3InOwpHVUkuQ0xBU1NfVE9PX1RBTEwgPSAndGFsbGVyLXRoYW4td2luZG93JzsKR1VJLkNMQVNTX0NMT1NFRCA9ICdjbG9zZWQnOwpHVUkuQ0xBU1NfQ0xPU0VfQlVUVE9OID0gJ2Nsb3NlLWJ1dHRvbic7CkdVSS5DTEFTU19DTE9TRV9UT1AgPSAnY2xvc2UtdG9wJzsKR1VJLkNMQVNTX0NMT1NFX0JPVFRPTSA9ICdjbG9zZS1ib3R0b20nOwpHVUkuQ0xBU1NfRFJBRyA9ICdkcmFnJzsKR1VJLkRFRkFVTFRfV0lEVEggPSAyNDU7CkdVSS5URVhUX0NMT1NFRCA9ICdDbG9zZSBDb250cm9scyc7CkdVSS5URVhUX09QRU4gPSAnT3BlbiBDb250cm9scyc7CgpHVUkuX2tleWRvd25IYW5kbGVyID0gZnVuY3Rpb24gKGUpIHsKICBpZiAoZG9jdW1lbnQuYWN0aXZlRWxlbWVudC50eXBlICE9PSAndGV4dCcgJiYgKGUud2hpY2ggPT09IEhJREVfS0VZX0NPREUgfHwgZS5rZXlDb2RlID09PSBISURFX0tFWV9DT0RFKSkgewogICAgR1VJLnRvZ2dsZUhpZGUoKTsKICB9Cn07Cgpkb20uYmluZCh3aW5kb3csICdrZXlkb3duJywgR1VJLl9rZXlkb3duSGFuZGxlciwgZmFsc2UpOwpDb21tb24uZXh0ZW5kKEdVSS5wcm90b3R5cGUsIHsKICBhZGQ6IGZ1bmN0aW9uIGFkZChvYmplY3QsIHByb3BlcnR5KSB7CiAgICByZXR1cm4gX2FkZCh0aGlzLCBvYmplY3QsIHByb3BlcnR5LCB7CiAgICAgIGZhY3RvcnlBcmdzOiBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDIpCiAgICB9KTsKICB9LAogIGFkZENvbG9yOiBmdW5jdGlvbiBhZGRDb2xvcihvYmplY3QsIHByb3BlcnR5KSB7CiAgICByZXR1cm4gX2FkZCh0aGlzLCBvYmplY3QsIHByb3BlcnR5LCB7CiAgICAgIGNvbG9yOiB0cnVlCiAgICB9KTsKICB9LAogIHJlbW92ZTogZnVuY3Rpb24gcmVtb3ZlKGNvbnRyb2xsZXIpIHsKICAgIHRoaXMuX191bC5yZW1vdmVDaGlsZChjb250cm9sbGVyLl9fbGkpOwoKICAgIHRoaXMuX19jb250cm9sbGVycy5zcGxpY2UodGhpcy5fX2NvbnRyb2xsZXJzLmluZGV4T2YoY29udHJvbGxlciksIDEpOwoKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgQ29tbW9uLmRlZmVyKGZ1bmN0aW9uICgpIHsKICAgICAgX3RoaXMub25SZXNpemUoKTsKICAgIH0pOwogIH0sCiAgZGVzdHJveTogZnVuY3Rpb24gZGVzdHJveSgpIHsKICAgIGlmICh0aGlzLnBhcmVudCkgewogICAgICB0aHJvdyBuZXcgRXJyb3IoJ09ubHkgdGhlIHJvb3QgR1VJIHNob3VsZCBiZSByZW1vdmVkIHdpdGggLmRlc3Ryb3koKS4gJyArICdGb3Igc3ViZm9sZGVycywgdXNlIGd1aS5yZW1vdmVGb2xkZXIoZm9sZGVyKSBpbnN0ZWFkLicpOwogICAgfQoKICAgIGlmICh0aGlzLmF1dG9QbGFjZSkgewogICAgICBhdXRvUGxhY2VDb250YWluZXIucmVtb3ZlQ2hpbGQodGhpcy5kb21FbGVtZW50KTsKICAgIH0KCiAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgIENvbW1vbi5lYWNoKHRoaXMuX19mb2xkZXJzLCBmdW5jdGlvbiAoc3ViZm9sZGVyKSB7CiAgICAgIF90aGlzLnJlbW92ZUZvbGRlcihzdWJmb2xkZXIpOwogICAgfSk7CiAgICBkb20udW5iaW5kKHdpbmRvdywgJ2tleWRvd24nLCBHVUkuX2tleWRvd25IYW5kbGVyLCBmYWxzZSk7CiAgICByZW1vdmVMaXN0ZW5lcnModGhpcyk7CiAgfSwKICBhZGRGb2xkZXI6IGZ1bmN0aW9uIGFkZEZvbGRlcihuYW1lKSB7CiAgICBpZiAodGhpcy5fX2ZvbGRlcnNbbmFtZV0gIT09IHVuZGVmaW5lZCkgewogICAgICB0aHJvdyBuZXcgRXJyb3IoJ1lvdSBhbHJlYWR5IGhhdmUgYSBmb2xkZXIgaW4gdGhpcyBHVUkgYnkgdGhlJyArICcgbmFtZSAiJyArIG5hbWUgKyAnIicpOwogICAgfQoKICAgIHZhciBuZXdHdWlQYXJhbXMgPSB7CiAgICAgIG5hbWU6IG5hbWUsCiAgICAgIHBhcmVudDogdGhpcwogICAgfTsKICAgIG5ld0d1aVBhcmFtcy5hdXRvUGxhY2UgPSB0aGlzLmF1dG9QbGFjZTsKCiAgICBpZiAodGhpcy5sb2FkICYmIHRoaXMubG9hZC5mb2xkZXJzICYmIHRoaXMubG9hZC5mb2xkZXJzW25hbWVdKSB7CiAgICAgIG5ld0d1aVBhcmFtcy5jbG9zZWQgPSB0aGlzLmxvYWQuZm9sZGVyc1tuYW1lXS5jbG9zZWQ7CiAgICAgIG5ld0d1aVBhcmFtcy5sb2FkID0gdGhpcy5sb2FkLmZvbGRlcnNbbmFtZV07CiAgICB9CgogICAgdmFyIGd1aSA9IG5ldyBHVUkobmV3R3VpUGFyYW1zKTsKICAgIHRoaXMuX19mb2xkZXJzW25hbWVdID0gZ3VpOwogICAgdmFyIGxpID0gYWRkUm93KHRoaXMsIGd1aS5kb21FbGVtZW50KTsKICAgIGRvbS5hZGRDbGFzcyhsaSwgJ2ZvbGRlcicpOwogICAgcmV0dXJuIGd1aTsKICB9LAogIHJlbW92ZUZvbGRlcjogZnVuY3Rpb24gcmVtb3ZlRm9sZGVyKGZvbGRlcikgewogICAgdGhpcy5fX3VsLnJlbW92ZUNoaWxkKGZvbGRlci5kb21FbGVtZW50LnBhcmVudEVsZW1lbnQpOwoKICAgIGRlbGV0ZSB0aGlzLl9fZm9sZGVyc1tmb2xkZXIubmFtZV07CgogICAgaWYgKHRoaXMubG9hZCAmJiB0aGlzLmxvYWQuZm9sZGVycyAmJiB0aGlzLmxvYWQuZm9sZGVyc1tmb2xkZXIubmFtZV0pIHsKICAgICAgZGVsZXRlIHRoaXMubG9hZC5mb2xkZXJzW2ZvbGRlci5uYW1lXTsKICAgIH0KCiAgICByZW1vdmVMaXN0ZW5lcnMoZm9sZGVyKTsKCiAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgIENvbW1vbi5lYWNoKGZvbGRlci5fX2ZvbGRlcnMsIGZ1bmN0aW9uIChzdWJmb2xkZXIpIHsKICAgICAgZm9sZGVyLnJlbW92ZUZvbGRlcihzdWJmb2xkZXIpOwogICAgfSk7CiAgICBDb21tb24uZGVmZXIoZnVuY3Rpb24gKCkgewogICAgICBfdGhpcy5vblJlc2l6ZSgpOwogICAgfSk7CiAgfSwKICBvcGVuOiBmdW5jdGlvbiBvcGVuKCkgewogICAgdGhpcy5jbG9zZWQgPSBmYWxzZTsKICB9LAogIGNsb3NlOiBmdW5jdGlvbiBjbG9zZSgpIHsKICAgIHRoaXMuY2xvc2VkID0gdHJ1ZTsKICB9LAogIGhpZGU6IGZ1bmN0aW9uIGhpZGUoKSB7CiAgICB0aGlzLmRvbUVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICB9LAogIHNob3c6IGZ1bmN0aW9uIHNob3coKSB7CiAgICB0aGlzLmRvbUVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICcnOwogIH0sCiAgb25SZXNpemU6IGZ1bmN0aW9uIG9uUmVzaXplKCkgewogICAgdmFyIHJvb3QgPSB0aGlzLmdldFJvb3QoKTsKCiAgICBpZiAocm9vdC5zY3JvbGxhYmxlKSB7CiAgICAgIHZhciB0b3AgPSBkb20uZ2V0T2Zmc2V0KHJvb3QuX191bCkudG9wOwogICAgICB2YXIgaCA9IDA7CiAgICAgIENvbW1vbi5lYWNoKHJvb3QuX191bC5jaGlsZE5vZGVzLCBmdW5jdGlvbiAobm9kZSkgewogICAgICAgIGlmICghKHJvb3QuYXV0b1BsYWNlICYmIG5vZGUgPT09IHJvb3QuX19zYXZlX3JvdykpIHsKICAgICAgICAgIGggKz0gZG9tLmdldEhlaWdodChub2RlKTsKICAgICAgICB9CiAgICAgIH0pOwoKICAgICAgaWYgKHdpbmRvdy5pbm5lckhlaWdodCAtIHRvcCAtIENMT1NFX0JVVFRPTl9IRUlHSFQgPCBoKSB7CiAgICAgICAgZG9tLmFkZENsYXNzKHJvb3QuZG9tRWxlbWVudCwgR1VJLkNMQVNTX1RPT19UQUxMKTsKICAgICAgICByb290Ll9fdWwuc3R5bGUuaGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0IC0gdG9wIC0gQ0xPU0VfQlVUVE9OX0hFSUdIVCArICdweCc7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZG9tLnJlbW92ZUNsYXNzKHJvb3QuZG9tRWxlbWVudCwgR1VJLkNMQVNTX1RPT19UQUxMKTsKICAgICAgICByb290Ll9fdWwuc3R5bGUuaGVpZ2h0ID0gJ2F1dG8nOwogICAgICB9CiAgICB9CgogICAgaWYgKHJvb3QuX19yZXNpemVfaGFuZGxlKSB7CiAgICAgIENvbW1vbi5kZWZlcihmdW5jdGlvbiAoKSB7CiAgICAgICAgcm9vdC5fX3Jlc2l6ZV9oYW5kbGUuc3R5bGUuaGVpZ2h0ID0gcm9vdC5fX3VsLm9mZnNldEhlaWdodCArICdweCc7CiAgICAgIH0pOwogICAgfQoKICAgIGlmIChyb290Ll9fY2xvc2VCdXR0b24pIHsKICAgICAgcm9vdC5fX2Nsb3NlQnV0dG9uLnN0eWxlLndpZHRoID0gcm9vdC53aWR0aCArICdweCc7CiAgICB9CiAgfSwKICBvblJlc2l6ZURlYm91bmNlZDogQ29tbW9uLmRlYm91bmNlKGZ1bmN0aW9uICgpIHsKICAgIHRoaXMub25SZXNpemUoKTsKICB9LCA1MCksCiAgcmVtZW1iZXI6IGZ1bmN0aW9uIHJlbWVtYmVyKCkgewogICAgaWYgKENvbW1vbi5pc1VuZGVmaW5lZChTQVZFX0RJQUxPR1VFKSkgewogICAgICBTQVZFX0RJQUxPR1VFID0gbmV3IENlbnRlcmVkRGl2KCk7CiAgICAgIFNBVkVfRElBTE9HVUUuZG9tRWxlbWVudC5pbm5lckhUTUwgPSBzYXZlRGlhbG9nQ29udGVudHM7CiAgICB9CgogICAgaWYgKHRoaXMucGFyZW50KSB7CiAgICAgIHRocm93IG5ldyBFcnJvcignWW91IGNhbiBvbmx5IGNhbGwgcmVtZW1iZXIgb24gYSB0b3AgbGV2ZWwgR1VJLicpOwogICAgfQoKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgQ29tbW9uLmVhY2goQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKSwgZnVuY3Rpb24gKG9iamVjdCkgewogICAgICBpZiAoX3RoaXMuX19yZW1lbWJlcmVkT2JqZWN0cy5sZW5ndGggPT09IDApIHsKICAgICAgICBhZGRTYXZlTWVudShfdGhpcyk7CiAgICAgIH0KCiAgICAgIGlmIChfdGhpcy5fX3JlbWVtYmVyZWRPYmplY3RzLmluZGV4T2Yob2JqZWN0KSA9PT0gLTEpIHsKICAgICAgICBfdGhpcy5fX3JlbWVtYmVyZWRPYmplY3RzLnB1c2gob2JqZWN0KTsKICAgICAgfQogICAgfSk7CgogICAgaWYgKHRoaXMuYXV0b1BsYWNlKSB7CiAgICAgIHNldFdpZHRoKHRoaXMsIHRoaXMud2lkdGgpOwogICAgfQogIH0sCiAgZ2V0Um9vdDogZnVuY3Rpb24gZ2V0Um9vdCgpIHsKICAgIHZhciBndWkgPSB0aGlzOwoKICAgIHdoaWxlIChndWkucGFyZW50KSB7CiAgICAgIGd1aSA9IGd1aS5wYXJlbnQ7CiAgICB9CgogICAgcmV0dXJuIGd1aTsKICB9LAogIGdldFNhdmVPYmplY3Q6IGZ1bmN0aW9uIGdldFNhdmVPYmplY3QoKSB7CiAgICB2YXIgdG9SZXR1cm4gPSB0aGlzLmxvYWQ7CiAgICB0b1JldHVybi5jbG9zZWQgPSB0aGlzLmNsb3NlZDsKCiAgICBpZiAodGhpcy5fX3JlbWVtYmVyZWRPYmplY3RzLmxlbmd0aCA+IDApIHsKICAgICAgdG9SZXR1cm4ucHJlc2V0ID0gdGhpcy5wcmVzZXQ7CgogICAgICBpZiAoIXRvUmV0dXJuLnJlbWVtYmVyZWQpIHsKICAgICAgICB0b1JldHVybi5yZW1lbWJlcmVkID0ge307CiAgICAgIH0KCiAgICAgIHRvUmV0dXJuLnJlbWVtYmVyZWRbdGhpcy5wcmVzZXRdID0gZ2V0Q3VycmVudFByZXNldCh0aGlzKTsKICAgIH0KCiAgICB0b1JldHVybi5mb2xkZXJzID0ge307CiAgICBDb21tb24uZWFjaCh0aGlzLl9fZm9sZGVycywgZnVuY3Rpb24gKGVsZW1lbnQsIGtleSkgewogICAgICB0b1JldHVybi5mb2xkZXJzW2tleV0gPSBlbGVtZW50LmdldFNhdmVPYmplY3QoKTsKICAgIH0pOwogICAgcmV0dXJuIHRvUmV0dXJuOwogIH0sCiAgc2F2ZTogZnVuY3Rpb24gc2F2ZSgpIHsKICAgIGlmICghdGhpcy5sb2FkLnJlbWVtYmVyZWQpIHsKICAgICAgdGhpcy5sb2FkLnJlbWVtYmVyZWQgPSB7fTsKICAgIH0KCiAgICB0aGlzLmxvYWQucmVtZW1iZXJlZFt0aGlzLnByZXNldF0gPSBnZXRDdXJyZW50UHJlc2V0KHRoaXMpOwogICAgbWFya1ByZXNldE1vZGlmaWVkKHRoaXMsIGZhbHNlKTsKICAgIHRoaXMuc2F2ZVRvTG9jYWxTdG9yYWdlSWZQb3NzaWJsZSgpOwogIH0sCiAgc2F2ZUFzOiBmdW5jdGlvbiBzYXZlQXMocHJlc2V0TmFtZSkgewogICAgaWYgKCF0aGlzLmxvYWQucmVtZW1iZXJlZCkgewogICAgICB0aGlzLmxvYWQucmVtZW1iZXJlZCA9IHt9OwogICAgICB0aGlzLmxvYWQucmVtZW1iZXJlZFtERUZBVUxUX0RFRkFVTFRfUFJFU0VUX05BTUVdID0gZ2V0Q3VycmVudFByZXNldCh0aGlzLCB0cnVlKTsKICAgIH0KCiAgICB0aGlzLmxvYWQucmVtZW1iZXJlZFtwcmVzZXROYW1lXSA9IGdldEN1cnJlbnRQcmVzZXQodGhpcyk7CiAgICB0aGlzLnByZXNldCA9IHByZXNldE5hbWU7CiAgICBhZGRQcmVzZXRPcHRpb24odGhpcywgcHJlc2V0TmFtZSwgdHJ1ZSk7CiAgICB0aGlzLnNhdmVUb0xvY2FsU3RvcmFnZUlmUG9zc2libGUoKTsKICB9LAogIHJldmVydDogZnVuY3Rpb24gcmV2ZXJ0KGd1aSkgewogICAgQ29tbW9uLmVhY2godGhpcy5fX2NvbnRyb2xsZXJzLCBmdW5jdGlvbiAoY29udHJvbGxlcikgewogICAgICBpZiAoIXRoaXMuZ2V0Um9vdCgpLmxvYWQucmVtZW1iZXJlZCkgewogICAgICAgIGNvbnRyb2xsZXIuc2V0VmFsdWUoY29udHJvbGxlci5pbml0aWFsVmFsdWUpOwogICAgICB9IGVsc2UgewogICAgICAgIHJlY2FsbFNhdmVkVmFsdWUoZ3VpIHx8IHRoaXMuZ2V0Um9vdCgpLCBjb250cm9sbGVyKTsKICAgICAgfQoKICAgICAgaWYgKGNvbnRyb2xsZXIuX19vbkZpbmlzaENoYW5nZSkgewogICAgICAgIGNvbnRyb2xsZXIuX19vbkZpbmlzaENoYW5nZS5jYWxsKGNvbnRyb2xsZXIsIGNvbnRyb2xsZXIuZ2V0VmFsdWUoKSk7CiAgICAgIH0KICAgIH0sIHRoaXMpOwogICAgQ29tbW9uLmVhY2godGhpcy5fX2ZvbGRlcnMsIGZ1bmN0aW9uIChmb2xkZXIpIHsKICAgICAgZm9sZGVyLnJldmVydChmb2xkZXIpOwogICAgfSk7CgogICAgaWYgKCFndWkpIHsKICAgICAgbWFya1ByZXNldE1vZGlmaWVkKHRoaXMuZ2V0Um9vdCgpLCBmYWxzZSk7CiAgICB9CiAgfSwKICBsaXN0ZW46IGZ1bmN0aW9uIGxpc3Rlbihjb250cm9sbGVyKSB7CiAgICB2YXIgaW5pdCA9IHRoaXMuX19saXN0ZW5pbmcubGVuZ3RoID09PSAwOwoKICAgIHRoaXMuX19saXN0ZW5pbmcucHVzaChjb250cm9sbGVyKTsKCiAgICBpZiAoaW5pdCkgewogICAgICB1cGRhdGVEaXNwbGF5cyh0aGlzLl9fbGlzdGVuaW5nKTsKICAgIH0KICB9LAogIHVwZGF0ZURpc3BsYXk6IGZ1bmN0aW9uIHVwZGF0ZURpc3BsYXkoKSB7CiAgICBDb21tb24uZWFjaCh0aGlzLl9fY29udHJvbGxlcnMsIGZ1bmN0aW9uIChjb250cm9sbGVyKSB7CiAgICAgIGNvbnRyb2xsZXIudXBkYXRlRGlzcGxheSgpOwogICAgfSk7CiAgICBDb21tb24uZWFjaCh0aGlzLl9fZm9sZGVycywgZnVuY3Rpb24gKGZvbGRlcikgewogICAgICBmb2xkZXIudXBkYXRlRGlzcGxheSgpOwogICAgfSk7CiAgfQp9KTsKCmZ1bmN0aW9uIGFkZFJvdyhndWksIG5ld0RvbSwgbGlCZWZvcmUpIHsKICB2YXIgbGkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpOwoKICBpZiAobmV3RG9tKSB7CiAgICBsaS5hcHBlbmRDaGlsZChuZXdEb20pOwogIH0KCiAgaWYgKGxpQmVmb3JlKSB7CiAgICBndWkuX191bC5pbnNlcnRCZWZvcmUobGksIGxpQmVmb3JlKTsKICB9IGVsc2UgewogICAgZ3VpLl9fdWwuYXBwZW5kQ2hpbGQobGkpOwogIH0KCiAgZ3VpLm9uUmVzaXplKCk7CiAgcmV0dXJuIGxpOwp9CgpmdW5jdGlvbiByZW1vdmVMaXN0ZW5lcnMoZ3VpKSB7CiAgZG9tLnVuYmluZCh3aW5kb3csICdyZXNpemUnLCBndWkuX19yZXNpemVIYW5kbGVyKTsKCiAgaWYgKGd1aS5zYXZlVG9Mb2NhbFN0b3JhZ2VJZlBvc3NpYmxlKSB7CiAgICBkb20udW5iaW5kKHdpbmRvdywgJ3VubG9hZCcsIGd1aS5zYXZlVG9Mb2NhbFN0b3JhZ2VJZlBvc3NpYmxlKTsKICB9Cn0KCmZ1bmN0aW9uIG1hcmtQcmVzZXRNb2RpZmllZChndWksIG1vZGlmaWVkKSB7CiAgdmFyIG9wdCA9IGd1aS5fX3ByZXNldF9zZWxlY3RbZ3VpLl9fcHJlc2V0X3NlbGVjdC5zZWxlY3RlZEluZGV4XTsKCiAgaWYgKG1vZGlmaWVkKSB7CiAgICBvcHQuaW5uZXJIVE1MID0gb3B0LnZhbHVlICsgJyonOwogIH0gZWxzZSB7CiAgICBvcHQuaW5uZXJIVE1MID0gb3B0LnZhbHVlOwogIH0KfQoKZnVuY3Rpb24gYXVnbWVudENvbnRyb2xsZXIoZ3VpLCBsaSwgY29udHJvbGxlcikgewogIGNvbnRyb2xsZXIuX19saSA9IGxpOwogIGNvbnRyb2xsZXIuX19ndWkgPSBndWk7CiAgQ29tbW9uLmV4dGVuZChjb250cm9sbGVyLCB7CiAgICBvcHRpb25zOiBmdW5jdGlvbiBvcHRpb25zKF9vcHRpb25zKSB7CiAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMSkgewogICAgICAgIHZhciBuZXh0U2libGluZyA9IGNvbnRyb2xsZXIuX19saS5uZXh0RWxlbWVudFNpYmxpbmc7CiAgICAgICAgY29udHJvbGxlci5yZW1vdmUoKTsKICAgICAgICByZXR1cm4gX2FkZChndWksIGNvbnRyb2xsZXIub2JqZWN0LCBjb250cm9sbGVyLnByb3BlcnR5LCB7CiAgICAgICAgICBiZWZvcmU6IG5leHRTaWJsaW5nLAogICAgICAgICAgZmFjdG9yeUFyZ3M6IFtDb21tb24udG9BcnJheShhcmd1bWVudHMpXQogICAgICAgIH0pOwogICAgICB9CgogICAgICBpZiAoQ29tbW9uLmlzQXJyYXkoX29wdGlvbnMpIHx8IENvbW1vbi5pc09iamVjdChfb3B0aW9ucykpIHsKICAgICAgICB2YXIgX25leHRTaWJsaW5nID0gY29udHJvbGxlci5fX2xpLm5leHRFbGVtZW50U2libGluZzsKICAgICAgICBjb250cm9sbGVyLnJlbW92ZSgpOwogICAgICAgIHJldHVybiBfYWRkKGd1aSwgY29udHJvbGxlci5vYmplY3QsIGNvbnRyb2xsZXIucHJvcGVydHksIHsKICAgICAgICAgIGJlZm9yZTogX25leHRTaWJsaW5nLAogICAgICAgICAgZmFjdG9yeUFyZ3M6IFtfb3B0aW9uc10KICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIG5hbWU6IGZ1bmN0aW9uIG5hbWUoX25hbWUpIHsKICAgICAgY29udHJvbGxlci5fX2xpLmZpcnN0RWxlbWVudENoaWxkLmZpcnN0RWxlbWVudENoaWxkLmlubmVySFRNTCA9IF9uYW1lOwogICAgICByZXR1cm4gY29udHJvbGxlcjsKICAgIH0sCiAgICBsaXN0ZW46IGZ1bmN0aW9uIGxpc3RlbigpIHsKICAgICAgY29udHJvbGxlci5fX2d1aS5saXN0ZW4oY29udHJvbGxlcik7CgogICAgICByZXR1cm4gY29udHJvbGxlcjsKICAgIH0sCiAgICByZW1vdmU6IGZ1bmN0aW9uIHJlbW92ZSgpIHsKICAgICAgY29udHJvbGxlci5fX2d1aS5yZW1vdmUoY29udHJvbGxlcik7CgogICAgICByZXR1cm4gY29udHJvbGxlcjsKICAgIH0KICB9KTsKCiAgaWYgKGNvbnRyb2xsZXIgaW5zdGFuY2VvZiBOdW1iZXJDb250cm9sbGVyU2xpZGVyKSB7CiAgICB2YXIgYm94ID0gbmV3IE51bWJlckNvbnRyb2xsZXJCb3goY29udHJvbGxlci5vYmplY3QsIGNvbnRyb2xsZXIucHJvcGVydHksIHsKICAgICAgbWluOiBjb250cm9sbGVyLl9fbWluLAogICAgICBtYXg6IGNvbnRyb2xsZXIuX19tYXgsCiAgICAgIHN0ZXA6IGNvbnRyb2xsZXIuX19zdGVwCiAgICB9KTsKICAgIENvbW1vbi5lYWNoKFsndXBkYXRlRGlzcGxheScsICdvbkNoYW5nZScsICdvbkZpbmlzaENoYW5nZScsICdzdGVwJywgJ21pbicsICdtYXgnXSwgZnVuY3Rpb24gKG1ldGhvZCkgewogICAgICB2YXIgcGMgPSBjb250cm9sbGVyW21ldGhvZF07CiAgICAgIHZhciBwYiA9IGJveFttZXRob2RdOwoKICAgICAgY29udHJvbGxlclttZXRob2RdID0gYm94W21ldGhvZF0gPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIGFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpOwogICAgICAgIHBiLmFwcGx5KGJveCwgYXJncyk7CiAgICAgICAgcmV0dXJuIHBjLmFwcGx5KGNvbnRyb2xsZXIsIGFyZ3MpOwogICAgICB9OwogICAgfSk7CiAgICBkb20uYWRkQ2xhc3MobGksICdoYXMtc2xpZGVyJyk7CiAgICBjb250cm9sbGVyLmRvbUVsZW1lbnQuaW5zZXJ0QmVmb3JlKGJveC5kb21FbGVtZW50LCBjb250cm9sbGVyLmRvbUVsZW1lbnQuZmlyc3RFbGVtZW50Q2hpbGQpOwogIH0gZWxzZSBpZiAoY29udHJvbGxlciBpbnN0YW5jZW9mIE51bWJlckNvbnRyb2xsZXJCb3gpIHsKICAgIHZhciByID0gZnVuY3Rpb24gcihyZXR1cm5lZCkgewogICAgICBpZiAoQ29tbW9uLmlzTnVtYmVyKGNvbnRyb2xsZXIuX19taW4pICYmIENvbW1vbi5pc051bWJlcihjb250cm9sbGVyLl9fbWF4KSkgewogICAgICAgIHZhciBvbGROYW1lID0gY29udHJvbGxlci5fX2xpLmZpcnN0RWxlbWVudENoaWxkLmZpcnN0RWxlbWVudENoaWxkLmlubmVySFRNTDsKICAgICAgICB2YXIgd2FzTGlzdGVuaW5nID0gY29udHJvbGxlci5fX2d1aS5fX2xpc3RlbmluZy5pbmRleE9mKGNvbnRyb2xsZXIpID4gLTE7CiAgICAgICAgY29udHJvbGxlci5yZW1vdmUoKTsKCiAgICAgICAgdmFyIG5ld0NvbnRyb2xsZXIgPSBfYWRkKGd1aSwgY29udHJvbGxlci5vYmplY3QsIGNvbnRyb2xsZXIucHJvcGVydHksIHsKICAgICAgICAgIGJlZm9yZTogY29udHJvbGxlci5fX2xpLm5leHRFbGVtZW50U2libGluZywKICAgICAgICAgIGZhY3RvcnlBcmdzOiBbY29udHJvbGxlci5fX21pbiwgY29udHJvbGxlci5fX21heCwgY29udHJvbGxlci5fX3N0ZXBdCiAgICAgICAgfSk7CgogICAgICAgIG5ld0NvbnRyb2xsZXIubmFtZShvbGROYW1lKTsKICAgICAgICBpZiAod2FzTGlzdGVuaW5nKSBuZXdDb250cm9sbGVyLmxpc3RlbigpOwogICAgICAgIHJldHVybiBuZXdDb250cm9sbGVyOwogICAgICB9CgogICAgICByZXR1cm4gcmV0dXJuZWQ7CiAgICB9OwoKICAgIGNvbnRyb2xsZXIubWluID0gQ29tbW9uLmNvbXBvc2UociwgY29udHJvbGxlci5taW4pOwogICAgY29udHJvbGxlci5tYXggPSBDb21tb24uY29tcG9zZShyLCBjb250cm9sbGVyLm1heCk7CiAgfSBlbHNlIGlmIChjb250cm9sbGVyIGluc3RhbmNlb2YgQm9vbGVhbkNvbnRyb2xsZXIpIHsKICAgIGRvbS5iaW5kKGxpLCAnY2xpY2snLCBmdW5jdGlvbiAoKSB7CiAgICAgIGRvbS5mYWtlRXZlbnQoY29udHJvbGxlci5fX2NoZWNrYm94LCAnY2xpY2snKTsKICAgIH0pOwogICAgZG9tLmJpbmQoY29udHJvbGxlci5fX2NoZWNrYm94LCAnY2xpY2snLCBmdW5jdGlvbiAoZSkgewogICAgICBlLnN0b3BQcm9wYWdhdGlvbigpOwogICAgfSk7CiAgfSBlbHNlIGlmIChjb250cm9sbGVyIGluc3RhbmNlb2YgRnVuY3Rpb25Db250cm9sbGVyKSB7CiAgICBkb20uYmluZChsaSwgJ2NsaWNrJywgZnVuY3Rpb24gKCkgewogICAgICBkb20uZmFrZUV2ZW50KGNvbnRyb2xsZXIuX19idXR0b24sICdjbGljaycpOwogICAgfSk7CiAgICBkb20uYmluZChsaSwgJ21vdXNlb3ZlcicsIGZ1bmN0aW9uICgpIHsKICAgICAgZG9tLmFkZENsYXNzKGNvbnRyb2xsZXIuX19idXR0b24sICdob3ZlcicpOwogICAgfSk7CiAgICBkb20uYmluZChsaSwgJ21vdXNlb3V0JywgZnVuY3Rpb24gKCkgewogICAgICBkb20ucmVtb3ZlQ2xhc3MoY29udHJvbGxlci5fX2J1dHRvbiwgJ2hvdmVyJyk7CiAgICB9KTsKICB9IGVsc2UgaWYgKGNvbnRyb2xsZXIgaW5zdGFuY2VvZiBDb2xvckNvbnRyb2xsZXIpIHsKICAgIGRvbS5hZGRDbGFzcyhsaSwgJ2NvbG9yJyk7CiAgICBjb250cm9sbGVyLnVwZGF0ZURpc3BsYXkgPSBDb21tb24uY29tcG9zZShmdW5jdGlvbiAodmFsKSB7CiAgICAgIGxpLnN0eWxlLmJvcmRlckxlZnRDb2xvciA9IGNvbnRyb2xsZXIuX19jb2xvci50b1N0cmluZygpOwogICAgICByZXR1cm4gdmFsOwogICAgfSwgY29udHJvbGxlci51cGRhdGVEaXNwbGF5KTsKICAgIGNvbnRyb2xsZXIudXBkYXRlRGlzcGxheSgpOwogIH0KCiAgY29udHJvbGxlci5zZXRWYWx1ZSA9IENvbW1vbi5jb21wb3NlKGZ1bmN0aW9uICh2YWwpIHsKICAgIGlmIChndWkuZ2V0Um9vdCgpLl9fcHJlc2V0X3NlbGVjdCAmJiBjb250cm9sbGVyLmlzTW9kaWZpZWQoKSkgewogICAgICBtYXJrUHJlc2V0TW9kaWZpZWQoZ3VpLmdldFJvb3QoKSwgdHJ1ZSk7CiAgICB9CgogICAgcmV0dXJuIHZhbDsKICB9LCBjb250cm9sbGVyLnNldFZhbHVlKTsKfQoKZnVuY3Rpb24gcmVjYWxsU2F2ZWRWYWx1ZShndWksIGNvbnRyb2xsZXIpIHsKICB2YXIgcm9vdCA9IGd1aS5nZXRSb290KCk7CgogIHZhciBtYXRjaGVkSW5kZXggPSByb290Ll9fcmVtZW1iZXJlZE9iamVjdHMuaW5kZXhPZihjb250cm9sbGVyLm9iamVjdCk7CgogIGlmIChtYXRjaGVkSW5kZXggIT09IC0xKSB7CiAgICB2YXIgY29udHJvbGxlck1hcCA9IHJvb3QuX19yZW1lbWJlcmVkT2JqZWN0SW5kZWNlc1RvQ29udHJvbGxlcnNbbWF0Y2hlZEluZGV4XTsKCiAgICBpZiAoY29udHJvbGxlck1hcCA9PT0gdW5kZWZpbmVkKSB7CiAgICAgIGNvbnRyb2xsZXJNYXAgPSB7fTsKICAgICAgcm9vdC5fX3JlbWVtYmVyZWRPYmplY3RJbmRlY2VzVG9Db250cm9sbGVyc1ttYXRjaGVkSW5kZXhdID0gY29udHJvbGxlck1hcDsKICAgIH0KCiAgICBjb250cm9sbGVyTWFwW2NvbnRyb2xsZXIucHJvcGVydHldID0gY29udHJvbGxlcjsKCiAgICBpZiAocm9vdC5sb2FkICYmIHJvb3QubG9hZC5yZW1lbWJlcmVkKSB7CiAgICAgIHZhciBwcmVzZXRNYXAgPSByb290LmxvYWQucmVtZW1iZXJlZDsKICAgICAgdmFyIHByZXNldCA9IHZvaWQgMDsKCiAgICAgIGlmIChwcmVzZXRNYXBbZ3VpLnByZXNldF0pIHsKICAgICAgICBwcmVzZXQgPSBwcmVzZXRNYXBbZ3VpLnByZXNldF07CiAgICAgIH0gZWxzZSBpZiAocHJlc2V0TWFwW0RFRkFVTFRfREVGQVVMVF9QUkVTRVRfTkFNRV0pIHsKICAgICAgICBwcmVzZXQgPSBwcmVzZXRNYXBbREVGQVVMVF9ERUZBVUxUX1BSRVNFVF9OQU1FXTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGlmIChwcmVzZXRbbWF0Y2hlZEluZGV4XSAmJiBwcmVzZXRbbWF0Y2hlZEluZGV4XVtjb250cm9sbGVyLnByb3BlcnR5XSAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgdmFyIHZhbHVlID0gcHJlc2V0W21hdGNoZWRJbmRleF1bY29udHJvbGxlci5wcm9wZXJ0eV07CiAgICAgICAgY29udHJvbGxlci5pbml0aWFsVmFsdWUgPSB2YWx1ZTsKICAgICAgICBjb250cm9sbGVyLnNldFZhbHVlKHZhbHVlKTsKICAgICAgfQogICAgfQogIH0KfQoKZnVuY3Rpb24gX2FkZChndWksIG9iamVjdCwgcHJvcGVydHksIHBhcmFtcykgewogIGlmIChvYmplY3RbcHJvcGVydHldID09PSB1bmRlZmluZWQpIHsKICAgIHRocm93IG5ldyBFcnJvcignT2JqZWN0ICInICsgb2JqZWN0ICsgJyIgaGFzIG5vIHByb3BlcnR5ICInICsgcHJvcGVydHkgKyAnIicpOwogIH0KCiAgdmFyIGNvbnRyb2xsZXIgPSB2b2lkIDA7CgogIGlmIChwYXJhbXMuY29sb3IpIHsKICAgIGNvbnRyb2xsZXIgPSBuZXcgQ29sb3JDb250cm9sbGVyKG9iamVjdCwgcHJvcGVydHkpOwogIH0gZWxzZSB7CiAgICB2YXIgZmFjdG9yeUFyZ3MgPSBbb2JqZWN0LCBwcm9wZXJ0eV0uY29uY2F0KHBhcmFtcy5mYWN0b3J5QXJncyk7CiAgICBjb250cm9sbGVyID0gQ29udHJvbGxlckZhY3RvcnkuYXBwbHkoZ3VpLCBmYWN0b3J5QXJncyk7CiAgfQoKICBpZiAocGFyYW1zLmJlZm9yZSBpbnN0YW5jZW9mIENvbnRyb2xsZXIpIHsKICAgIHBhcmFtcy5iZWZvcmUgPSBwYXJhbXMuYmVmb3JlLl9fbGk7CiAgfQoKICByZWNhbGxTYXZlZFZhbHVlKGd1aSwgY29udHJvbGxlcik7CiAgZG9tLmFkZENsYXNzKGNvbnRyb2xsZXIuZG9tRWxlbWVudCwgJ2MnKTsKICB2YXIgbmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTsKICBkb20uYWRkQ2xhc3MobmFtZSwgJ3Byb3BlcnR5LW5hbWUnKTsKICBuYW1lLmlubmVySFRNTCA9IGNvbnRyb2xsZXIucHJvcGVydHk7CiAgdmFyIGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogIGNvbnRhaW5lci5hcHBlbmRDaGlsZChuYW1lKTsKICBjb250YWluZXIuYXBwZW5kQ2hpbGQoY29udHJvbGxlci5kb21FbGVtZW50KTsKICB2YXIgbGkgPSBhZGRSb3coZ3VpLCBjb250YWluZXIsIHBhcmFtcy5iZWZvcmUpOwogIGRvbS5hZGRDbGFzcyhsaSwgR1VJLkNMQVNTX0NPTlRST0xMRVJfUk9XKTsKCiAgaWYgKGNvbnRyb2xsZXIgaW5zdGFuY2VvZiBDb2xvckNvbnRyb2xsZXIpIHsKICAgIGRvbS5hZGRDbGFzcyhsaSwgJ2NvbG9yJyk7CiAgfSBlbHNlIHsKICAgIGRvbS5hZGRDbGFzcyhsaSwgX3R5cGVvZihjb250cm9sbGVyLmdldFZhbHVlKCkpKTsKICB9CgogIGF1Z21lbnRDb250cm9sbGVyKGd1aSwgbGksIGNvbnRyb2xsZXIpOwoKICBndWkuX19jb250cm9sbGVycy5wdXNoKGNvbnRyb2xsZXIpOwoKICByZXR1cm4gY29udHJvbGxlcjsKfQoKZnVuY3Rpb24gZ2V0TG9jYWxTdG9yYWdlSGFzaChndWksIGtleSkgewogIHJldHVybiBkb2N1bWVudC5sb2NhdGlvbi5ocmVmICsgJy4nICsga2V5Owp9CgpmdW5jdGlvbiBhZGRQcmVzZXRPcHRpb24oZ3VpLCBuYW1lLCBzZXRTZWxlY3RlZCkgewogIHZhciBvcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdvcHRpb24nKTsKICBvcHQuaW5uZXJIVE1MID0gbmFtZTsKICBvcHQudmFsdWUgPSBuYW1lOwoKICBndWkuX19wcmVzZXRfc2VsZWN0LmFwcGVuZENoaWxkKG9wdCk7CgogIGlmIChzZXRTZWxlY3RlZCkgewogICAgZ3VpLl9fcHJlc2V0X3NlbGVjdC5zZWxlY3RlZEluZGV4ID0gZ3VpLl9fcHJlc2V0X3NlbGVjdC5sZW5ndGggLSAxOwogIH0KfQoKZnVuY3Rpb24gc2hvd0hpZGVFeHBsYWluKGd1aSwgZXhwbGFpbikgewogIGV4cGxhaW4uc3R5bGUuZGlzcGxheSA9IGd1aS51c2VMb2NhbFN0b3JhZ2UgPyAnYmxvY2snIDogJ25vbmUnOwp9CgpmdW5jdGlvbiBhZGRTYXZlTWVudShndWkpIHsKICB2YXIgZGl2ID0gZ3VpLl9fc2F2ZV9yb3cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpOwogIGRvbS5hZGRDbGFzcyhndWkuZG9tRWxlbWVudCwgJ2hhcy1zYXZlJyk7CgogIGd1aS5fX3VsLmluc2VydEJlZm9yZShkaXYsIGd1aS5fX3VsLmZpcnN0Q2hpbGQpOwoKICBkb20uYWRkQ2xhc3MoZGl2LCAnc2F2ZS1yb3cnKTsKICB2YXIgZ2VhcnMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7CiAgZ2VhcnMuaW5uZXJIVE1MID0gJyZuYnNwOyc7CiAgZG9tLmFkZENsYXNzKGdlYXJzLCAnYnV0dG9uIGdlYXJzJyk7CiAgdmFyIGJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTsKICBidXR0b24uaW5uZXJIVE1MID0gJ1NhdmUnOwogIGRvbS5hZGRDbGFzcyhidXR0b24sICdidXR0b24nKTsKICBkb20uYWRkQ2xhc3MoYnV0dG9uLCAnc2F2ZScpOwogIHZhciBidXR0b24yID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpOwogIGJ1dHRvbjIuaW5uZXJIVE1MID0gJ05ldyc7CiAgZG9tLmFkZENsYXNzKGJ1dHRvbjIsICdidXR0b24nKTsKICBkb20uYWRkQ2xhc3MoYnV0dG9uMiwgJ3NhdmUtYXMnKTsKICB2YXIgYnV0dG9uMyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTsKICBidXR0b24zLmlubmVySFRNTCA9ICdSZXZlcnQnOwogIGRvbS5hZGRDbGFzcyhidXR0b24zLCAnYnV0dG9uJyk7CiAgZG9tLmFkZENsYXNzKGJ1dHRvbjMsICdyZXZlcnQnKTsKICB2YXIgc2VsZWN0ID0gZ3VpLl9fcHJlc2V0X3NlbGVjdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NlbGVjdCcpOwoKICBpZiAoZ3VpLmxvYWQgJiYgZ3VpLmxvYWQucmVtZW1iZXJlZCkgewogICAgQ29tbW9uLmVhY2goZ3VpLmxvYWQucmVtZW1iZXJlZCwgZnVuY3Rpb24gKHZhbHVlLCBrZXkpIHsKICAgICAgYWRkUHJlc2V0T3B0aW9uKGd1aSwga2V5LCBrZXkgPT09IGd1aS5wcmVzZXQpOwogICAgfSk7CiAgfSBlbHNlIHsKICAgIGFkZFByZXNldE9wdGlvbihndWksIERFRkFVTFRfREVGQVVMVF9QUkVTRVRfTkFNRSwgZmFsc2UpOwogIH0KCiAgZG9tLmJpbmQoc2VsZWN0LCAnY2hhbmdlJywgZnVuY3Rpb24gKCkgewogICAgZm9yICh2YXIgaW5kZXggPSAwOyBpbmRleCA8IGd1aS5fX3ByZXNldF9zZWxlY3QubGVuZ3RoOyBpbmRleCsrKSB7CiAgICAgIGd1aS5fX3ByZXNldF9zZWxlY3RbaW5kZXhdLmlubmVySFRNTCA9IGd1aS5fX3ByZXNldF9zZWxlY3RbaW5kZXhdLnZhbHVlOwogICAgfQoKICAgIGd1aS5wcmVzZXQgPSB0aGlzLnZhbHVlOwogIH0pOwogIGRpdi5hcHBlbmRDaGlsZChzZWxlY3QpOwogIGRpdi5hcHBlbmRDaGlsZChnZWFycyk7CiAgZGl2LmFwcGVuZENoaWxkKGJ1dHRvbik7CiAgZGl2LmFwcGVuZENoaWxkKGJ1dHRvbjIpOwogIGRpdi5hcHBlbmRDaGlsZChidXR0b24zKTsKCiAgaWYgKFNVUFBPUlRTX0xPQ0FMX1NUT1JBR0UpIHsKICAgIHZhciBleHBsYWluID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2RnLWxvY2FsLWV4cGxhaW4nKTsKICAgIHZhciBsb2NhbFN0b3JhZ2VDaGVja0JveCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkZy1sb2NhbC1zdG9yYWdlJyk7CiAgICB2YXIgc2F2ZUxvY2FsbHkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGctc2F2ZS1sb2NhbGx5Jyk7CiAgICBzYXZlTG9jYWxseS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsKCiAgICBpZiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oZ2V0TG9jYWxTdG9yYWdlSGFzaChndWksICdpc0xvY2FsJykpID09PSAndHJ1ZScpIHsKICAgICAgbG9jYWxTdG9yYWdlQ2hlY2tCb3guc2V0QXR0cmlidXRlKCdjaGVja2VkJywgJ2NoZWNrZWQnKTsKICAgIH0KCiAgICBzaG93SGlkZUV4cGxhaW4oZ3VpLCBleHBsYWluKTsKICAgIGRvbS5iaW5kKGxvY2FsU3RvcmFnZUNoZWNrQm94LCAnY2hhbmdlJywgZnVuY3Rpb24gKCkgewogICAgICBndWkudXNlTG9jYWxTdG9yYWdlID0gIWd1aS51c2VMb2NhbFN0b3JhZ2U7CiAgICAgIHNob3dIaWRlRXhwbGFpbihndWksIGV4cGxhaW4pOwogICAgfSk7CiAgfQoKICB2YXIgbmV3Q29uc3RydWN0b3JUZXh0QXJlYSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkZy1uZXctY29uc3RydWN0b3InKTsKICBkb20uYmluZChuZXdDb25zdHJ1Y3RvclRleHRBcmVhLCAna2V5ZG93bicsIGZ1bmN0aW9uIChlKSB7CiAgICBpZiAoZS5tZXRhS2V5ICYmIChlLndoaWNoID09PSA2NyB8fCBlLmtleUNvZGUgPT09IDY3KSkgewogICAgICBTQVZFX0RJQUxPR1VFLmhpZGUoKTsKICAgIH0KICB9KTsKICBkb20uYmluZChnZWFycywgJ2NsaWNrJywgZnVuY3Rpb24gKCkgewogICAgbmV3Q29uc3RydWN0b3JUZXh0QXJlYS5pbm5lckhUTUwgPSBKU09OLnN0cmluZ2lmeShndWkuZ2V0U2F2ZU9iamVjdCgpLCB1bmRlZmluZWQsIDIpOwogICAgU0FWRV9ESUFMT0dVRS5zaG93KCk7CiAgICBuZXdDb25zdHJ1Y3RvclRleHRBcmVhLmZvY3VzKCk7CiAgICBuZXdDb25zdHJ1Y3RvclRleHRBcmVhLnNlbGVjdCgpOwogIH0pOwogIGRvbS5iaW5kKGJ1dHRvbiwgJ2NsaWNrJywgZnVuY3Rpb24gKCkgewogICAgZ3VpLnNhdmUoKTsKICB9KTsKICBkb20uYmluZChidXR0b24yLCAnY2xpY2snLCBmdW5jdGlvbiAoKSB7CiAgICB2YXIgcHJlc2V0TmFtZSA9IHByb21wdCgnRW50ZXIgYSBuZXcgcHJlc2V0IG5hbWUuJyk7CgogICAgaWYgKHByZXNldE5hbWUpIHsKICAgICAgZ3VpLnNhdmVBcyhwcmVzZXROYW1lKTsKICAgIH0KICB9KTsKICBkb20uYmluZChidXR0b24zLCAnY2xpY2snLCBmdW5jdGlvbiAoKSB7CiAgICBndWkucmV2ZXJ0KCk7CiAgfSk7Cn0KCmZ1bmN0aW9uIGFkZFJlc2l6ZUhhbmRsZShndWkpIHsKICB2YXIgcG1vdXNlWCA9IHZvaWQgMDsKICBndWkuX19yZXNpemVfaGFuZGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgQ29tbW9uLmV4dGVuZChndWkuX19yZXNpemVfaGFuZGxlLnN0eWxlLCB7CiAgICB3aWR0aDogJzZweCcsCiAgICBtYXJnaW5MZWZ0OiAnLTNweCcsCiAgICBoZWlnaHQ6ICcyMDBweCcsCiAgICBjdXJzb3I6ICdldy1yZXNpemUnLAogICAgcG9zaXRpb246ICdhYnNvbHV0ZScKICB9KTsKCiAgZnVuY3Rpb24gZHJhZyhlKSB7CiAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICBndWkud2lkdGggKz0gcG1vdXNlWCAtIGUuY2xpZW50WDsKICAgIGd1aS5vblJlc2l6ZSgpOwogICAgcG1vdXNlWCA9IGUuY2xpZW50WDsKICAgIHJldHVybiBmYWxzZTsKICB9CgogIGZ1bmN0aW9uIGRyYWdTdG9wKCkgewogICAgZG9tLnJlbW92ZUNsYXNzKGd1aS5fX2Nsb3NlQnV0dG9uLCBHVUkuQ0xBU1NfRFJBRyk7CiAgICBkb20udW5iaW5kKHdpbmRvdywgJ21vdXNlbW92ZScsIGRyYWcpOwogICAgZG9tLnVuYmluZCh3aW5kb3csICdtb3VzZXVwJywgZHJhZ1N0b3ApOwogIH0KCiAgZnVuY3Rpb24gZHJhZ1N0YXJ0KGUpIHsKICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgIHBtb3VzZVggPSBlLmNsaWVudFg7CiAgICBkb20uYWRkQ2xhc3MoZ3VpLl9fY2xvc2VCdXR0b24sIEdVSS5DTEFTU19EUkFHKTsKICAgIGRvbS5iaW5kKHdpbmRvdywgJ21vdXNlbW92ZScsIGRyYWcpOwogICAgZG9tLmJpbmQod2luZG93LCAnbW91c2V1cCcsIGRyYWdTdG9wKTsKICAgIHJldHVybiBmYWxzZTsKICB9CgogIGRvbS5iaW5kKGd1aS5fX3Jlc2l6ZV9oYW5kbGUsICdtb3VzZWRvd24nLCBkcmFnU3RhcnQpOwogIGRvbS5iaW5kKGd1aS5fX2Nsb3NlQnV0dG9uLCAnbW91c2Vkb3duJywgZHJhZ1N0YXJ0KTsKICBndWkuZG9tRWxlbWVudC5pbnNlcnRCZWZvcmUoZ3VpLl9fcmVzaXplX2hhbmRsZSwgZ3VpLmRvbUVsZW1lbnQuZmlyc3RFbGVtZW50Q2hpbGQpOwp9CgpmdW5jdGlvbiBzZXRXaWR0aChndWksIHcpIHsKICBndWkuZG9tRWxlbWVudC5zdHlsZS53aWR0aCA9IHcgKyAncHgnOwoKICBpZiAoZ3VpLl9fc2F2ZV9yb3cgJiYgZ3VpLmF1dG9QbGFjZSkgewogICAgZ3VpLl9fc2F2ZV9yb3cuc3R5bGUud2lkdGggPSB3ICsgJ3B4JzsKICB9CgogIGlmIChndWkuX19jbG9zZUJ1dHRvbikgewogICAgZ3VpLl9fY2xvc2VCdXR0b24uc3R5bGUud2lkdGggPSB3ICsgJ3B4JzsKICB9Cn0KCmZ1bmN0aW9uIGdldEN1cnJlbnRQcmVzZXQoZ3VpLCB1c2VJbml0aWFsVmFsdWVzKSB7CiAgdmFyIHRvUmV0dXJuID0ge307CiAgQ29tbW9uLmVhY2goZ3VpLl9fcmVtZW1iZXJlZE9iamVjdHMsIGZ1bmN0aW9uICh2YWwsIGluZGV4KSB7CiAgICB2YXIgc2F2ZWRWYWx1ZXMgPSB7fTsKICAgIHZhciBjb250cm9sbGVyTWFwID0gZ3VpLl9fcmVtZW1iZXJlZE9iamVjdEluZGVjZXNUb0NvbnRyb2xsZXJzW2luZGV4XTsKICAgIENvbW1vbi5lYWNoKGNvbnRyb2xsZXJNYXAsIGZ1bmN0aW9uIChjb250cm9sbGVyLCBwcm9wZXJ0eSkgewogICAgICBzYXZlZFZhbHVlc1twcm9wZXJ0eV0gPSB1c2VJbml0aWFsVmFsdWVzID8gY29udHJvbGxlci5pbml0aWFsVmFsdWUgOiBjb250cm9sbGVyLmdldFZhbHVlKCk7CiAgICB9KTsKICAgIHRvUmV0dXJuW2luZGV4XSA9IHNhdmVkVmFsdWVzOwogIH0pOwogIHJldHVybiB0b1JldHVybjsKfQoKZnVuY3Rpb24gc2V0UHJlc2V0U2VsZWN0SW5kZXgoZ3VpKSB7CiAgZm9yICh2YXIgaW5kZXggPSAwOyBpbmRleCA8IGd1aS5fX3ByZXNldF9zZWxlY3QubGVuZ3RoOyBpbmRleCsrKSB7CiAgICBpZiAoZ3VpLl9fcHJlc2V0X3NlbGVjdFtpbmRleF0udmFsdWUgPT09IGd1aS5wcmVzZXQpIHsKICAgICAgZ3VpLl9fcHJlc2V0X3NlbGVjdC5zZWxlY3RlZEluZGV4ID0gaW5kZXg7CiAgICB9CiAgfQp9CgpmdW5jdGlvbiB1cGRhdGVEaXNwbGF5cyhjb250cm9sbGVyQXJyYXkpIHsKICBpZiAoY29udHJvbGxlckFycmF5Lmxlbmd0aCAhPT0gMCkgewogICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lJDEuY2FsbCh3aW5kb3csIGZ1bmN0aW9uICgpIHsKICAgICAgdXBkYXRlRGlzcGxheXMoY29udHJvbGxlckFycmF5KTsKICAgIH0pOwogIH0KCiAgQ29tbW9uLmVhY2goY29udHJvbGxlckFycmF5LCBmdW5jdGlvbiAoYykgewogICAgYy51cGRhdGVEaXNwbGF5KCk7CiAgfSk7Cn0KCnZhciBjb2xvciA9IHsKICBDb2xvcjogQ29sb3IsCiAgbWF0aDogQ29sb3JNYXRoLAogIGludGVycHJldDogaW50ZXJwcmV0Cn07CnZhciBjb250cm9sbGVycyA9IHsKICBDb250cm9sbGVyOiBDb250cm9sbGVyLAogIEJvb2xlYW5Db250cm9sbGVyOiBCb29sZWFuQ29udHJvbGxlciwKICBPcHRpb25Db250cm9sbGVyOiBPcHRpb25Db250cm9sbGVyLAogIFN0cmluZ0NvbnRyb2xsZXI6IFN0cmluZ0NvbnRyb2xsZXIsCiAgTnVtYmVyQ29udHJvbGxlcjogTnVtYmVyQ29udHJvbGxlciwKICBOdW1iZXJDb250cm9sbGVyQm94OiBOdW1iZXJDb250cm9sbGVyQm94LAogIE51bWJlckNvbnRyb2xsZXJTbGlkZXI6IE51bWJlckNvbnRyb2xsZXJTbGlkZXIsCiAgRnVuY3Rpb25Db250cm9sbGVyOiBGdW5jdGlvbkNvbnRyb2xsZXIsCiAgQ29sb3JDb250cm9sbGVyOiBDb2xvckNvbnRyb2xsZXIKfTsKdmFyIGRvbSQxID0gewogIGRvbTogZG9tCn07CnZhciBndWkgPSB7CiAgR1VJOiBHVUkKfTsKdmFyIEdVSSQxID0gR1VJOwp2YXIgaW5kZXggPSB7CiAgY29sb3I6IGNvbG9yLAogIGNvbnRyb2xsZXJzOiBjb250cm9sbGVycywKICBkb206IGRvbSQxLAogIGd1aTogZ3VpLAogIEdVSTogR1VJJDEKfTsKZXhwb3J0IHsgY29sb3IsIGNvbnRyb2xsZXJzLCBkb20kMSBhcyBkb20sIGd1aSwgR1VJJDEgYXMgR1VJIH07CmV4cG9ydCBkZWZhdWx0IGluZGV4Ow=="},{"version":3,"sources":["E:/vue/vue-admin-template-master/src/lib/dat.gui.module.js"],"names":["___$insertStyle","css","window","style","document","createElement","setAttribute","innerHTML","head","appendChild","colorToString","color","forceCSSHex","colorFormat","__state","conversionName","toString","r","Math","round","g","b","a","h","s","toFixed","v","str","hex","length","ARR_EACH","Array","prototype","forEach","ARR_SLICE","slice","Common","BREAK","extend","target","each","call","arguments","obj","keys","isObject","Object","key","isUndefined","bind","defaults","compose","toCall","args","i","apply","itr","scope","l","_key","defer","fnc","setTimeout","debounce","func","threshold","callImmediately","timeout","delayed","callNow","clearTimeout","toArray","undefined","isNull","isNaN","_isNaN","isArray","constructor","isNumber","isString","isBoolean","isFunction","Function","INTERPRETATIONS","litmus","conversions","THREE_CHAR_HEX","read","original","test","match","space","parseInt","write","SIX_CHAR_HEX","CSS_RGB","parseFloat","CSS_RGBA","HEX","RGB_ARRAY","RGBA_ARRAY","RGBA_OBJ","RGB_OBJ","HSVA_OBJ","HSV_OBJ","result","toReturn","interpret","family","conversion","tmpComponent","ColorMath","hsv_to_rgb","hi","floor","f","p","q","t","c","rgb_to_hsv","min","max","delta","NaN","rgb_to_hex","hex_with_component","component_from_hex","componentIndex","value","_typeof","Symbol","iterator","classCallCheck","instance","Constructor","TypeError","createClass","defineProperties","props","descriptor","enumerable","configurable","writable","defineProperty","protoProps","staticProps","get","object","property","receiver","desc","getOwnPropertyDescriptor","parent","getPrototypeOf","getter","inherits","subClass","superClass","create","setPrototypeOf","__proto__","possibleConstructorReturn","self","ReferenceError","Color","Error","toHexString","toOriginal","defineRGBComponent","component","componentHexIndex","get$$1","recalculateRGB","set","set$$1","defineHSVComponent","recalculateHSV","COMPONENTS","Controller","initialValue","domElement","__onChange","__onFinishChange","onChange","onFinishChange","setValue","newValue","updateDisplay","getValue","isModified","EVENT_MAP","HTMLEvents","MouseEvents","KeyboardEvents","EVENT_MAP_INV","k","e","CSS_VALUE_PIXELS","cssValueToPixels","val","dom","makeSelectable","elem","selectable","onselectstart","MozUserSelect","KhtmlUserSelect","unselectable","makeFullscreen","hor","vert","vertical","horizontal","position","left","right","top","bottom","fakeEvent","eventType","pars","aux","params","className","evt","createEvent","clientX","x","clientY","y","initMouseEvent","bubbles","cancelable","clickCount","init","initKeyboardEvent","initKeyEvent","ctrlKey","altKey","shiftKey","metaKey","keyCode","charCode","initEvent","dispatchEvent","event","newBool","bool","addEventListener","attachEvent","unbind","removeEventListener","detachEvent","addClass","classes","split","indexOf","push","join","replace","removeClass","removeAttribute","index","splice","hasClass","RegExp","getWidth","getComputedStyle","width","getHeight","height","getOffset","el","offset","offsetParent","offsetLeft","offsetTop","isActive","activeElement","type","href","BooleanController","_Controller","_this2","_this","__prev","__checkbox","checked","OptionController","opts","options","__select","map","element","opt","desiredValue","selectedIndex","StringController","__input","onBlur","blur","numDecimals","_x","NumberController","_params","__min","__max","__step","step","__impliedStep","pow","log","abs","LN10","__precision","_v","minValue","maxValue","stepValue","roundToDecimal","decimals","tenTo","NumberControllerBox","_NumberController","__truncationSuspended","prevY","attempted","onFinish","onMouseDrag","diff","onMouseUp","onMouseDown","i1","i2","o1","o2","NumberControllerSlider","__background","__foreground","onTouchStart","preventDefault","bgRect","getBoundingClientRect","touches","onTouchMove","onTouchEnd","pct","FunctionController","text","__button","fire","ColorController","__color","__temp","__selector","__saturation_field","__field_knob","__field_knob_border","__hue_knob","__hue_field","__input_textShadow","valueField","padding","backgroundColor","boxShadow","border","borderRadius","zIndex","borderRight","marginRight","display","cursor","background","linearGradient","hueGradient","outline","textAlign","fontWeight","textShadow","fieldDown","fieldDownH","setSV","fieldUpSV","setH","fieldUpH","fieldRect","_ref","_ref2","mismatch","flip","_flip","marginLeft","marginTop","vendors","vendor","cssText","load","url","indoc","doc","link","rel","getElementsByTagName","inject","cssContent","injected","saveDialogContents","ControllerFactory","requestAnimationFrame","callback","requestAnimationFrame$1","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame","CenteredDiv","backgroundElement","opacity","WebkitTransition","transition","body","hide","show","webkitTransform","layout","innerWidth","innerHeight","styleSheet","CSS_NAMESPACE","HIDE_KEY_CODE","CLOSE_BUTTON_HEIGHT","DEFAULT_DEFAULT_PRESET_NAME","SUPPORTS_LOCAL_STORAGE","localStorage","SAVE_DIALOGUE","autoPlaceVirgin","autoPlaceContainer","hideableGuis","GUI","__ul","__folders","__controllers","__rememberedObjects","__rememberedObjectIndecesToControllers","__listening","closeOnTop","autoPlace","DEFAULT_WIDTH","resizable","hideable","preset","scrollable","useLocalStorage","getItem","getLocalStorageHash","saveToLocalStorage","titleRow","getRoot","setPresetSelectIndex","revert","setWidth","name","closed","CLASS_CLOSED","onResize","__closeButton","TEXT_OPEN","TEXT_CLOSED","setItem","CLASS_MAIN","savedGui","JSON","parse","CLASS_CLOSE_BUTTON","CLASS_CLOSE_TOP","insertBefore","childNodes","CLASS_CLOSE_BOTTOM","titleRowName","createTextNode","addRow","onClickTitle","CLASS_AUTO_PLACE_CONTAINER","CLASS_AUTO_PLACE","__resizeHandler","onResizeDebounced","addResizeHandle","stringify","getSaveObject","saveToLocalStorageIfPossible","resetWidth","root","toggleHide","gui","CLASS_CONTROLLER_ROW","CLASS_TOO_TALL","CLASS_DRAG","_keydownHandler","which","add","_add","factoryArgs","addColor","remove","controller","removeChild","__li","destroy","subfolder","removeFolder","removeListeners","addFolder","newGuiParams","folders","li","folder","parentElement","open","close","node","__save_row","__resize_handle","offsetHeight","remember","addSaveMenu","remembered","getCurrentPreset","save","markPresetModified","saveAs","presetName","addPresetOption","recallSavedValue","listen","updateDisplays","newDom","liBefore","modified","__preset_select","augmentController","__gui","_options","nextSibling","nextElementSibling","before","_nextSibling","_name","firstElementChild","box","method","pc","pb","returned","oldName","wasListening","newController","stopPropagation","borderLeftColor","matchedIndex","controllerMap","presetMap","concat","container","location","setSelected","showHideExplain","explain","div","firstChild","gears","button","button2","button3","select","getElementById","localStorageCheckBox","saveLocally","newConstructorTextArea","focus","prompt","pmouseX","drag","dragStop","dragStart","w","useInitialValues","savedValues","controllerArray","math","controllers","dom$1","GUI$1"],"mappings":"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","sourcesContent":["/**\n * dat-gui JavaScript Controller Library\n * http://code.google.com/p/dat-gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\nfunction ___$insertStyle( css ) {\n\n\tif ( ! css ) {\n\n\t\treturn;\n\n\t}\n\tif ( typeof window === 'undefined' ) {\n\n\t\treturn;\n\n\t}\n\n\tvar style = document.createElement( 'style' );\n\n\tstyle.setAttribute( 'type', 'text/css' );\n\tstyle.innerHTML = css;\n\tdocument.head.appendChild( style );\n\n\treturn css;\n\n}\n\nfunction colorToString( color, forceCSSHex ) {\n\n\tvar colorFormat = color.__state.conversionName.toString();\n\tvar r = Math.round( color.r );\n\tvar g = Math.round( color.g );\n\tvar b = Math.round( color.b );\n\tvar a = color.a;\n\tvar h = Math.round( color.h );\n\tvar s = color.s.toFixed( 1 );\n\tvar v = color.v.toFixed( 1 );\n\tif ( forceCSSHex || colorFormat === 'THREE_CHAR_HEX' || colorFormat === 'SIX_CHAR_HEX' ) {\n\n\t\tvar str = color.hex.toString( 16 );\n\t\twhile ( str.length < 6 ) {\n\n\t\t\tstr = '0' + str;\n\n\t\t}\n\t\treturn '#' + str;\n\n\t} else if ( colorFormat === 'CSS_RGB' ) {\n\n\t\treturn 'rgb(' + r + ',' + g + ',' + b + ')';\n\n\t} else if ( colorFormat === 'CSS_RGBA' ) {\n\n\t\treturn 'rgba(' + r + ',' + g + ',' + b + ',' + a + ')';\n\n\t} else if ( colorFormat === 'HEX' ) {\n\n\t\treturn '0x' + color.hex.toString( 16 );\n\n\t} else if ( colorFormat === 'RGB_ARRAY' ) {\n\n\t\treturn '[' + r + ',' + g + ',' + b + ']';\n\n\t} else if ( colorFormat === 'RGBA_ARRAY' ) {\n\n\t\treturn '[' + r + ',' + g + ',' + b + ',' + a + ']';\n\n\t} else if ( colorFormat === 'RGB_OBJ' ) {\n\n\t\treturn '{r:' + r + ',g:' + g + ',b:' + b + '}';\n\n\t} else if ( colorFormat === 'RGBA_OBJ' ) {\n\n\t\treturn '{r:' + r + ',g:' + g + ',b:' + b + ',a:' + a + '}';\n\n\t} else if ( colorFormat === 'HSV_OBJ' ) {\n\n\t\treturn '{h:' + h + ',s:' + s + ',v:' + v + '}';\n\n\t} else if ( colorFormat === 'HSVA_OBJ' ) {\n\n\t\treturn '{h:' + h + ',s:' + s + ',v:' + v + ',a:' + a + '}';\n\n\t}\n\treturn 'unknown format';\n\n}\n\nvar ARR_EACH = Array.prototype.forEach;\nvar ARR_SLICE = Array.prototype.slice;\nvar Common = {\n\tBREAK: {},\n\textend: function extend( target ) {\n\n\t\tthis.each( ARR_SLICE.call( arguments, 1 ), function ( obj ) {\n\n\t\t\tvar keys = this.isObject( obj ) ? Object.keys( obj ) : [];\n\t\t\tkeys.forEach( function ( key ) {\n\n\t\t\t\tif ( ! this.isUndefined( obj[ key ] ) ) {\n\n\t\t\t\t\ttarget[ key ] = obj[ key ];\n\n\t\t\t\t}\n\n\t\t\t}.bind( this ) );\n\n\t\t}, this );\n\t\treturn target;\n\n\t},\n\tdefaults: function defaults( target ) {\n\n\t\tthis.each( ARR_SLICE.call( arguments, 1 ), function ( obj ) {\n\n\t\t\tvar keys = this.isObject( obj ) ? Object.keys( obj ) : [];\n\t\t\tkeys.forEach( function ( key ) {\n\n\t\t\t\tif ( this.isUndefined( target[ key ] ) ) {\n\n\t\t\t\t\ttarget[ key ] = obj[ key ];\n\n\t\t\t\t}\n\n\t\t\t}.bind( this ) );\n\n\t\t}, this );\n\t\treturn target;\n\n\t},\n\tcompose: function compose() {\n\n\t\tvar toCall = ARR_SLICE.call( arguments );\n\t\treturn function () {\n\n\t\t\tvar args = ARR_SLICE.call( arguments );\n\t\t\tfor ( var i = toCall.length - 1; i >= 0; i -- ) {\n\n\t\t\t\targs = [ toCall[ i ].apply( this, args ) ];\n\n\t\t\t}\n\t\t\treturn args[ 0 ];\n\n\t\t};\n\n\t},\n\teach: function each( obj, itr, scope ) {\n\n\t\tif ( ! obj ) {\n\n\t\t\treturn;\n\n\t\t}\n\t\tif ( ARR_EACH && obj.forEach && obj.forEach === ARR_EACH ) {\n\n\t\t\tobj.forEach( itr, scope );\n\n\t\t} else if ( obj.length === obj.length + 0 ) {\n\n\t\t\tvar key = void 0;\n\t\t\tvar l = void 0;\n\t\t\tfor ( key = 0, l = obj.length; key < l; key ++ ) {\n\n\t\t\t\tif ( key in obj && itr.call( scope, obj[ key ], key ) === this.BREAK ) {\n\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tfor ( var _key in obj ) {\n\n\t\t\t\tif ( itr.call( scope, obj[ _key ], _key ) === this.BREAK ) {\n\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\tdefer: function defer( fnc ) {\n\n\t\tsetTimeout( fnc, 0 );\n\n\t},\n\tdebounce: function debounce( func, threshold, callImmediately ) {\n\n\t\tvar timeout = void 0;\n\t\treturn function () {\n\n\t\t\tvar obj = this;\n\t\t\tvar args = arguments;\n\t\t\tfunction delayed() {\n\n\t\t\t\ttimeout = null;\n\t\t\t\tif ( ! callImmediately ) func.apply( obj, args );\n\n\t\t\t}\n\t\t\tvar callNow = callImmediately || ! timeout;\n\t\t\tclearTimeout( timeout );\n\t\t\ttimeout = setTimeout( delayed, threshold );\n\t\t\tif ( callNow ) {\n\n\t\t\t\tfunc.apply( obj, args );\n\n\t\t\t}\n\n\t\t};\n\n\t},\n\ttoArray: function toArray( obj ) {\n\n\t\tif ( obj.toArray ) return obj.toArray();\n\t\treturn ARR_SLICE.call( obj );\n\n\t},\n\tisUndefined: function isUndefined( obj ) {\n\n\t\treturn obj === undefined;\n\n\t},\n\tisNull: function isNull( obj ) {\n\n\t\treturn obj === null;\n\n\t},\n\tisNaN: function ( _isNaN ) {\n\n\t\tfunction isNaN() {\n\n\t\t\treturn _isNaN.apply( this, arguments );\n\n\t\t}\n\t\tisNaN.toString = function () {\n\n\t\t\treturn _isNaN.toString();\n\n\t\t};\n\t\treturn isNaN;\n\n\t}( function ( obj ) {\n\n\t\treturn isNaN( obj );\n\n\t} ),\n\tisArray: Array.isArray || function ( obj ) {\n\n\t\treturn obj.constructor === Array;\n\n\t},\n\tisObject: function isObject( obj ) {\n\n\t\treturn obj === Object( obj );\n\n\t},\n\tisNumber: function isNumber( obj ) {\n\n\t\treturn obj === obj + 0;\n\n\t},\n\tisString: function isString( obj ) {\n\n\t\treturn obj === obj + '';\n\n\t},\n\tisBoolean: function isBoolean( obj ) {\n\n\t\treturn obj === false || obj === true;\n\n\t},\n\tisFunction: function isFunction( obj ) {\n\n\t\treturn obj instanceof Function;\n\n\t}\n};\n\nvar INTERPRETATIONS = [\n\t{\n\t\tlitmus: Common.isString,\n\t\tconversions: {\n\t\t\tTHREE_CHAR_HEX: {\n\t\t\t\tread: function read( original ) {\n\n\t\t\t\t\tvar test = original.match( /^#([A-F0-9])([A-F0-9])([A-F0-9])$/i );\n\t\t\t\t\tif ( test === null ) {\n\n\t\t\t\t\t\treturn false;\n\n\t\t\t\t\t}\n\t\t\t\t\treturn {\n\t\t\t\t\t\tspace: 'HEX',\n\t\t\t\t\t\thex: parseInt( '0x' + test[ 1 ].toString() + test[ 1 ].toString() + test[ 2 ].toString() + test[ 2 ].toString() + test[ 3 ].toString() + test[ 3 ].toString(), 0 )\n\t\t\t\t\t};\n\n\t\t\t\t},\n\t\t\t\twrite: colorToString\n\t\t\t},\n\t\t\tSIX_CHAR_HEX: {\n\t\t\t\tread: function read( original ) {\n\n\t\t\t\t\tvar test = original.match( /^#([A-F0-9]{6})$/i );\n\t\t\t\t\tif ( test === null ) {\n\n\t\t\t\t\t\treturn false;\n\n\t\t\t\t\t}\n\t\t\t\t\treturn {\n\t\t\t\t\t\tspace: 'HEX',\n\t\t\t\t\t\thex: parseInt( '0x' + test[ 1 ].toString(), 0 )\n\t\t\t\t\t};\n\n\t\t\t\t},\n\t\t\t\twrite: colorToString\n\t\t\t},\n\t\t\tCSS_RGB: {\n\t\t\t\tread: function read( original ) {\n\n\t\t\t\t\tvar test = original.match( /^rgb\\(\\s*(.+)\\s*,\\s*(.+)\\s*,\\s*(.+)\\s*\\)/ );\n\t\t\t\t\tif ( test === null ) {\n\n\t\t\t\t\t\treturn false;\n\n\t\t\t\t\t}\n\t\t\t\t\treturn {\n\t\t\t\t\t\tspace: 'RGB',\n\t\t\t\t\t\tr: parseFloat( test[ 1 ] ),\n\t\t\t\t\t\tg: parseFloat( test[ 2 ] ),\n\t\t\t\t\t\tb: parseFloat( test[ 3 ] )\n\t\t\t\t\t};\n\n\t\t\t\t},\n\t\t\t\twrite: colorToString\n\t\t\t},\n\t\t\tCSS_RGBA: {\n\t\t\t\tread: function read( original ) {\n\n\t\t\t\t\tvar test = original.match( /^rgba\\(\\s*(.+)\\s*,\\s*(.+)\\s*,\\s*(.+)\\s*,\\s*(.+)\\s*\\)/ );\n\t\t\t\t\tif ( test === null ) {\n\n\t\t\t\t\t\treturn false;\n\n\t\t\t\t\t}\n\t\t\t\t\treturn {\n\t\t\t\t\t\tspace: 'RGB',\n\t\t\t\t\t\tr: parseFloat( test[ 1 ] ),\n\t\t\t\t\t\tg: parseFloat( test[ 2 ] ),\n\t\t\t\t\t\tb: parseFloat( test[ 3 ] ),\n\t\t\t\t\t\ta: parseFloat( test[ 4 ] )\n\t\t\t\t\t};\n\n\t\t\t\t},\n\t\t\t\twrite: colorToString\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\tlitmus: Common.isNumber,\n\t\tconversions: {\n\t\t\tHEX: {\n\t\t\t\tread: function read( original ) {\n\n\t\t\t\t\treturn {\n\t\t\t\t\t\tspace: 'HEX',\n\t\t\t\t\t\thex: original,\n\t\t\t\t\t\tconversionName: 'HEX'\n\t\t\t\t\t};\n\n\t\t\t\t},\n\t\t\t\twrite: function write( color ) {\n\n\t\t\t\t\treturn color.hex;\n\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\tlitmus: Common.isArray,\n\t\tconversions: {\n\t\t\tRGB_ARRAY: {\n\t\t\t\tread: function read( original ) {\n\n\t\t\t\t\tif ( original.length !== 3 ) {\n\n\t\t\t\t\t\treturn false;\n\n\t\t\t\t\t}\n\t\t\t\t\treturn {\n\t\t\t\t\t\tspace: 'RGB',\n\t\t\t\t\t\tr: original[ 0 ],\n\t\t\t\t\t\tg: original[ 1 ],\n\t\t\t\t\t\tb: original[ 2 ]\n\t\t\t\t\t};\n\n\t\t\t\t},\n\t\t\t\twrite: function write( color ) {\n\n\t\t\t\t\treturn [ color.r, color.g, color.b ];\n\n\t\t\t\t}\n\t\t\t},\n\t\t\tRGBA_ARRAY: {\n\t\t\t\tread: function read( original ) {\n\n\t\t\t\t\tif ( original.length !== 4 ) return false;\n\t\t\t\t\treturn {\n\t\t\t\t\t\tspace: 'RGB',\n\t\t\t\t\t\tr: original[ 0 ],\n\t\t\t\t\t\tg: original[ 1 ],\n\t\t\t\t\t\tb: original[ 2 ],\n\t\t\t\t\t\ta: original[ 3 ]\n\t\t\t\t\t};\n\n\t\t\t\t},\n\t\t\t\twrite: function write( color ) {\n\n\t\t\t\t\treturn [ color.r, color.g, color.b, color.a ];\n\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\tlitmus: Common.isObject,\n\t\tconversions: {\n\t\t\tRGBA_OBJ: {\n\t\t\t\tread: function read( original ) {\n\n\t\t\t\t\tif ( Common.isNumber( original.r ) && Common.isNumber( original.g ) && Common.isNumber( original.b ) && Common.isNumber( original.a ) ) {\n\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tspace: 'RGB',\n\t\t\t\t\t\t\tr: original.r,\n\t\t\t\t\t\t\tg: original.g,\n\t\t\t\t\t\t\tb: original.b,\n\t\t\t\t\t\t\ta: original.a\n\t\t\t\t\t\t};\n\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\n\t\t\t\t},\n\t\t\t\twrite: function write( color ) {\n\n\t\t\t\t\treturn {\n\t\t\t\t\t\tr: color.r,\n\t\t\t\t\t\tg: color.g,\n\t\t\t\t\t\tb: color.b,\n\t\t\t\t\t\ta: color.a\n\t\t\t\t\t};\n\n\t\t\t\t}\n\t\t\t},\n\t\t\tRGB_OBJ: {\n\t\t\t\tread: function read( original ) {\n\n\t\t\t\t\tif ( Common.isNumber( original.r ) && Common.isNumber( original.g ) && Common.isNumber( original.b ) ) {\n\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tspace: 'RGB',\n\t\t\t\t\t\t\tr: original.r,\n\t\t\t\t\t\t\tg: original.g,\n\t\t\t\t\t\t\tb: original.b\n\t\t\t\t\t\t};\n\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\n\t\t\t\t},\n\t\t\t\twrite: function write( color ) {\n\n\t\t\t\t\treturn {\n\t\t\t\t\t\tr: color.r,\n\t\t\t\t\t\tg: color.g,\n\t\t\t\t\t\tb: color.b\n\t\t\t\t\t};\n\n\t\t\t\t}\n\t\t\t},\n\t\t\tHSVA_OBJ: {\n\t\t\t\tread: function read( original ) {\n\n\t\t\t\t\tif ( Common.isNumber( original.h ) && Common.isNumber( original.s ) && Common.isNumber( original.v ) && Common.isNumber( original.a ) ) {\n\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tspace: 'HSV',\n\t\t\t\t\t\t\th: original.h,\n\t\t\t\t\t\t\ts: original.s,\n\t\t\t\t\t\t\tv: original.v,\n\t\t\t\t\t\t\ta: original.a\n\t\t\t\t\t\t};\n\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\n\t\t\t\t},\n\t\t\t\twrite: function write( color ) {\n\n\t\t\t\t\treturn {\n\t\t\t\t\t\th: color.h,\n\t\t\t\t\t\ts: color.s,\n\t\t\t\t\t\tv: color.v,\n\t\t\t\t\t\ta: color.a\n\t\t\t\t\t};\n\n\t\t\t\t}\n\t\t\t},\n\t\t\tHSV_OBJ: {\n\t\t\t\tread: function read( original ) {\n\n\t\t\t\t\tif ( Common.isNumber( original.h ) && Common.isNumber( original.s ) && Common.isNumber( original.v ) ) {\n\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tspace: 'HSV',\n\t\t\t\t\t\t\th: original.h,\n\t\t\t\t\t\t\ts: original.s,\n\t\t\t\t\t\t\tv: original.v\n\t\t\t\t\t\t};\n\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\n\t\t\t\t},\n\t\t\t\twrite: function write( color ) {\n\n\t\t\t\t\treturn {\n\t\t\t\t\t\th: color.h,\n\t\t\t\t\t\ts: color.s,\n\t\t\t\t\t\tv: color.v\n\t\t\t\t\t};\n\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t} ];\nvar result = void 0;\nvar toReturn = void 0;\nvar interpret = function interpret() {\n\n\ttoReturn = false;\n\tvar original = arguments.length > 1 ? Common.toArray( arguments ) : arguments[ 0 ];\n\tCommon.each( INTERPRETATIONS, function ( family ) {\n\n\t\tif ( family.litmus( original ) ) {\n\n\t\t\tCommon.each( family.conversions, function ( conversion, conversionName ) {\n\n\t\t\t\tresult = conversion.read( original );\n\t\t\t\tif ( toReturn === false && result !== false ) {\n\n\t\t\t\t\ttoReturn = result;\n\t\t\t\t\tresult.conversionName = conversionName;\n\t\t\t\t\tresult.conversion = conversion;\n\t\t\t\t\treturn Common.BREAK;\n\n\t\t\t\t}\n\n\t\t\t} );\n\t\t\treturn Common.BREAK;\n\n\t\t}\n\n\t} );\n\treturn toReturn;\n\n};\n\nvar tmpComponent = void 0;\nvar ColorMath = {\n\thsv_to_rgb: function hsv_to_rgb( h, s, v ) {\n\n\t\tvar hi = Math.floor( h / 60 ) % 6;\n\t\tvar f = h / 60 - Math.floor( h / 60 );\n\t\tvar p = v * ( 1.0 - s );\n\t\tvar q = v * ( 1.0 - f * s );\n\t\tvar t = v * ( 1.0 - ( 1.0 - f ) * s );\n\t\tvar c = [[ v, t, p ], [ q, v, p ], [ p, v, t ], [ p, q, v ], [ t, p, v ], [ v, p, q ]][ hi ];\n\t\treturn {\n\t\t\tr: c[ 0 ] * 255,\n\t\t\tg: c[ 1 ] * 255,\n\t\t\tb: c[ 2 ] * 255\n\t\t};\n\n\t},\n\trgb_to_hsv: function rgb_to_hsv( r, g, b ) {\n\n\t\tvar min = Math.min( r, g, b );\n\t\tvar max = Math.max( r, g, b );\n\t\tvar delta = max - min;\n\t\tvar h = void 0;\n\t\tvar s = void 0;\n\t\tif ( max !== 0 ) {\n\n\t\t\ts = delta / max;\n\n\t\t} else {\n\n\t\t\treturn {\n\t\t\t\th: NaN,\n\t\t\t\ts: 0,\n\t\t\t\tv: 0\n\t\t\t};\n\n\t\t}\n\t\tif ( r === max ) {\n\n\t\t\th = ( g - b ) / delta;\n\n\t\t} else if ( g === max ) {\n\n\t\t\th = 2 + ( b - r ) / delta;\n\n\t\t} else {\n\n\t\t\th = 4 + ( r - g ) / delta;\n\n\t\t}\n\t\th /= 6;\n\t\tif ( h < 0 ) {\n\n\t\t\th += 1;\n\n\t\t}\n\t\treturn {\n\t\t\th: h * 360,\n\t\t\ts: s,\n\t\t\tv: max / 255\n\t\t};\n\n\t},\n\trgb_to_hex: function rgb_to_hex( r, g, b ) {\n\n\t\tvar hex = this.hex_with_component( 0, 2, r );\n\t\thex = this.hex_with_component( hex, 1, g );\n\t\thex = this.hex_with_component( hex, 0, b );\n\t\treturn hex;\n\n\t},\n\tcomponent_from_hex: function component_from_hex( hex, componentIndex ) {\n\n\t\treturn hex >> componentIndex * 8 & 0xFF;\n\n\t},\n\thex_with_component: function hex_with_component( hex, componentIndex, value ) {\n\n\t\treturn value << ( tmpComponent = componentIndex * 8 ) | hex & ~ ( 0xFF << tmpComponent );\n\n\t}\n};\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function ( obj ) {\n\n\treturn typeof obj;\n\n} : function ( obj ) {\n\n\treturn obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n\n};\n\n\n\n\n\n\n\n\n\n\n\nvar classCallCheck = function ( instance, Constructor ) {\n\n\tif ( ! ( instance instanceof Constructor ) ) {\n\n\t\tthrow new TypeError( \"Cannot call a class as a function\" );\n\n\t}\n\n};\n\nvar createClass = function () {\n\n\tfunction defineProperties( target, props ) {\n\n\t\tfor ( var i = 0; i < props.length; i ++ ) {\n\n\t\t\tvar descriptor = props[ i ];\n\t\t\tdescriptor.enumerable = descriptor.enumerable || false;\n\t\t\tdescriptor.configurable = true;\n\t\t\tif ( \"value\" in descriptor ) descriptor.writable = true;\n\t\t\tObject.defineProperty( target, descriptor.key, descriptor );\n\n\t\t}\n\n\t}\n\n\treturn function ( Constructor, protoProps, staticProps ) {\n\n\t\tif ( protoProps ) defineProperties( Constructor.prototype, protoProps );\n\t\tif ( staticProps ) defineProperties( Constructor, staticProps );\n\t\treturn Constructor;\n\n\t};\n\n}();\n\n\n\n\n\n\n\nvar get = function get( object, property, receiver ) {\n\n\tif ( object === null ) object = Function.prototype;\n\tvar desc = Object.getOwnPropertyDescriptor( object, property );\n\n\tif ( desc === undefined ) {\n\n\t\tvar parent = Object.getPrototypeOf( object );\n\n\t\tif ( parent === null ) {\n\n\t\t\treturn undefined;\n\n\t\t} else {\n\n\t\t\treturn get( parent, property, receiver );\n\n\t\t}\n\n\t} else if ( \"value\" in desc ) {\n\n\t\treturn desc.value;\n\n\t} else {\n\n\t\tvar getter = desc.get;\n\n\t\tif ( getter === undefined ) {\n\n\t\t\treturn undefined;\n\n\t\t}\n\n\t\treturn getter.call( receiver );\n\n\t}\n\n};\n\nvar inherits = function ( subClass, superClass ) {\n\n\tif ( typeof superClass !== \"function\" && superClass !== null ) {\n\n\t\tthrow new TypeError( \"Super expression must either be null or a function, not \" + typeof superClass );\n\n\t}\n\n\tsubClass.prototype = Object.create( superClass && superClass.prototype, {\n\t\tconstructor: {\n\t\t\tvalue: subClass,\n\t\t\tenumerable: false,\n\t\t\twritable: true,\n\t\t\tconfigurable: true\n\t\t}\n\t} );\n\tif ( superClass ) Object.setPrototypeOf ? Object.setPrototypeOf( subClass, superClass ) : subClass.__proto__ = superClass;\n\n};\n\n\n\n\n\n\n\n\n\n\n\nvar possibleConstructorReturn = function ( self, call ) {\n\n\tif ( ! self ) {\n\n\t\tthrow new ReferenceError( \"this hasn't been initialised - super() hasn't been called\" );\n\n\t}\n\n\treturn call && ( typeof call === \"object\" || typeof call === \"function\" ) ? call : self;\n\n};\n\nvar Color = function () {\n\n\tfunction Color() {\n\n\t\tclassCallCheck( this, Color );\n\t\tthis.__state = interpret.apply( this, arguments );\n\t\tif ( this.__state === false ) {\n\n\t\t\tthrow new Error( 'Failed to interpret color arguments' );\n\n\t\t}\n\t\tthis.__state.a = this.__state.a || 1;\n\n\t}\n\tcreateClass( Color, [ {\n\t\tkey: 'toString',\n\t\tvalue: function toString() {\n\n\t\t\treturn colorToString( this );\n\n\t\t}\n\t}, {\n\t\tkey: 'toHexString',\n\t\tvalue: function toHexString() {\n\n\t\t\treturn colorToString( this, true );\n\n\t\t}\n\t}, {\n\t\tkey: 'toOriginal',\n\t\tvalue: function toOriginal() {\n\n\t\t\treturn this.__state.conversion.write( this );\n\n\t\t}\n\t} ] );\n\treturn Color;\n\n}();\nfunction defineRGBComponent( target, component, componentHexIndex ) {\n\n\tObject.defineProperty( target, component, {\n\t\tget: function get$$1() {\n\n\t\t\tif ( this.__state.space === 'RGB' ) {\n\n\t\t\t\treturn this.__state[ component ];\n\n\t\t\t}\n\t\t\tColor.recalculateRGB( this, component, componentHexIndex );\n\t\t\treturn this.__state[ component ];\n\n\t\t},\n\t\tset: function set$$1( v ) {\n\n\t\t\tif ( this.__state.space !== 'RGB' ) {\n\n\t\t\t\tColor.recalculateRGB( this, component, componentHexIndex );\n\t\t\t\tthis.__state.space = 'RGB';\n\n\t\t\t}\n\t\t\tthis.__state[ component ] = v;\n\n\t\t}\n\t} );\n\n}\nfunction defineHSVComponent( target, component ) {\n\n\tObject.defineProperty( target, component, {\n\t\tget: function get$$1() {\n\n\t\t\tif ( this.__state.space === 'HSV' ) {\n\n\t\t\t\treturn this.__state[ component ];\n\n\t\t\t}\n\t\t\tColor.recalculateHSV( this );\n\t\t\treturn this.__state[ component ];\n\n\t\t},\n\t\tset: function set$$1( v ) {\n\n\t\t\tif ( this.__state.space !== 'HSV' ) {\n\n\t\t\t\tColor.recalculateHSV( this );\n\t\t\t\tthis.__state.space = 'HSV';\n\n\t\t\t}\n\t\t\tthis.__state[ component ] = v;\n\n\t\t}\n\t} );\n\n}\nColor.recalculateRGB = function ( color, component, componentHexIndex ) {\n\n\tif ( color.__state.space === 'HEX' ) {\n\n\t\tcolor.__state[ component ] = ColorMath.component_from_hex( color.__state.hex, componentHexIndex );\n\n\t} else if ( color.__state.space === 'HSV' ) {\n\n\t\tCommon.extend( color.__state, ColorMath.hsv_to_rgb( color.__state.h, color.__state.s, color.__state.v ) );\n\n\t} else {\n\n\t\tthrow new Error( 'Corrupted color state' );\n\n\t}\n\n};\nColor.recalculateHSV = function ( color ) {\n\n\tvar result = ColorMath.rgb_to_hsv( color.r, color.g, color.b );\n\tCommon.extend( color.__state, {\n\t\ts: result.s,\n\t\tv: result.v\n\t} );\n\tif ( ! Common.isNaN( result.h ) ) {\n\n\t\tcolor.__state.h = result.h;\n\n\t} else if ( Common.isUndefined( color.__state.h ) ) {\n\n\t\tcolor.__state.h = 0;\n\n\t}\n\n};\nColor.COMPONENTS = [ 'r', 'g', 'b', 'h', 's', 'v', 'hex', 'a' ];\ndefineRGBComponent( Color.prototype, 'r', 2 );\ndefineRGBComponent( Color.prototype, 'g', 1 );\ndefineRGBComponent( Color.prototype, 'b', 0 );\ndefineHSVComponent( Color.prototype, 'h' );\ndefineHSVComponent( Color.prototype, 's' );\ndefineHSVComponent( Color.prototype, 'v' );\nObject.defineProperty( Color.prototype, 'a', {\n\tget: function get$$1() {\n\n\t\treturn this.__state.a;\n\n\t},\n\tset: function set$$1( v ) {\n\n\t\tthis.__state.a = v;\n\n\t}\n} );\nObject.defineProperty( Color.prototype, 'hex', {\n\tget: function get$$1() {\n\n\t\tif ( this.__state.space !== 'HEX' ) {\n\n\t\t\tthis.__state.hex = ColorMath.rgb_to_hex( this.r, this.g, this.b );\n\t\t\tthis.__state.space = 'HEX';\n\n\t\t}\n\t\treturn this.__state.hex;\n\n\t},\n\tset: function set$$1( v ) {\n\n\t\tthis.__state.space = 'HEX';\n\t\tthis.__state.hex = v;\n\n\t}\n} );\n\nvar Controller = function () {\n\n\tfunction Controller( object, property ) {\n\n\t\tclassCallCheck( this, Controller );\n\t\tthis.initialValue = object[ property ];\n\t\tthis.domElement = document.createElement( 'div' );\n\t\tthis.object = object;\n\t\tthis.property = property;\n\t\tthis.__onChange = undefined;\n\t\tthis.__onFinishChange = undefined;\n\n\t}\n\tcreateClass( Controller, [ {\n\t\tkey: 'onChange',\n\t\tvalue: function onChange( fnc ) {\n\n\t\t\tthis.__onChange = fnc;\n\t\t\treturn this;\n\n\t\t}\n\t}, {\n\t\tkey: 'onFinishChange',\n\t\tvalue: function onFinishChange( fnc ) {\n\n\t\t\tthis.__onFinishChange = fnc;\n\t\t\treturn this;\n\n\t\t}\n\t}, {\n\t\tkey: 'setValue',\n\t\tvalue: function setValue( newValue ) {\n\n\t\t\tthis.object[ this.property ] = newValue;\n\t\t\tif ( this.__onChange ) {\n\n\t\t\t\tthis.__onChange.call( this, newValue );\n\n\t\t\t}\n\t\t\tthis.updateDisplay();\n\t\t\treturn this;\n\n\t\t}\n\t}, {\n\t\tkey: 'getValue',\n\t\tvalue: function getValue() {\n\n\t\t\treturn this.object[ this.property ];\n\n\t\t}\n\t}, {\n\t\tkey: 'updateDisplay',\n\t\tvalue: function updateDisplay() {\n\n\t\t\treturn this;\n\n\t\t}\n\t}, {\n\t\tkey: 'isModified',\n\t\tvalue: function isModified() {\n\n\t\t\treturn this.initialValue !== this.getValue();\n\n\t\t}\n\t} ] );\n\treturn Controller;\n\n}();\n\nvar EVENT_MAP = {\n\tHTMLEvents: [ 'change' ],\n\tMouseEvents: [ 'click', 'mousemove', 'mousedown', 'mouseup', 'mouseover' ],\n\tKeyboardEvents: [ 'keydown' ]\n};\nvar EVENT_MAP_INV = {};\nCommon.each( EVENT_MAP, function ( v, k ) {\n\n\tCommon.each( v, function ( e ) {\n\n\t\tEVENT_MAP_INV[ e ] = k;\n\n\t} );\n\n} );\nvar CSS_VALUE_PIXELS = /(\\d+(\\.\\d+)?)px/;\nfunction cssValueToPixels( val ) {\n\n\tif ( val === '0' || Common.isUndefined( val ) ) {\n\n\t\treturn 0;\n\n\t}\n\tvar match = val.match( CSS_VALUE_PIXELS );\n\tif ( ! Common.isNull( match ) ) {\n\n\t\treturn parseFloat( match[ 1 ] );\n\n\t}\n\treturn 0;\n\n}\nvar dom = {\n\tmakeSelectable: function makeSelectable( elem, selectable ) {\n\n\t\tif ( elem === undefined || elem.style === undefined ) return;\n\t\telem.onselectstart = selectable ? function () {\n\n\t\t\treturn false;\n\n\t\t} : function () {};\n\t\telem.style.MozUserSelect = selectable ? 'auto' : 'none';\n\t\telem.style.KhtmlUserSelect = selectable ? 'auto' : 'none';\n\t\telem.unselectable = selectable ? 'on' : 'off';\n\n\t},\n\tmakeFullscreen: function makeFullscreen( elem, hor, vert ) {\n\n\t\tvar vertical = vert;\n\t\tvar horizontal = hor;\n\t\tif ( Common.isUndefined( horizontal ) ) {\n\n\t\t\thorizontal = true;\n\n\t\t}\n\t\tif ( Common.isUndefined( vertical ) ) {\n\n\t\t\tvertical = true;\n\n\t\t}\n\t\telem.style.position = 'absolute';\n\t\tif ( horizontal ) {\n\n\t\t\telem.style.left = 0;\n\t\t\telem.style.right = 0;\n\n\t\t}\n\t\tif ( vertical ) {\n\n\t\t\telem.style.top = 0;\n\t\t\telem.style.bottom = 0;\n\n\t\t}\n\n\t},\n\tfakeEvent: function fakeEvent( elem, eventType, pars, aux ) {\n\n\t\tvar params = pars || {};\n\t\tvar className = EVENT_MAP_INV[ eventType ];\n\t\tif ( ! className ) {\n\n\t\t\tthrow new Error( 'Event type ' + eventType + ' not supported.' );\n\n\t\t}\n\t\tvar evt = document.createEvent( className );\n\t\tswitch ( className ) {\n\n\t\t\tcase 'MouseEvents':\n\t\t\t{\n\n\t\t\t\tvar clientX = params.x || params.clientX || 0;\n\t\t\t\tvar clientY = params.y || params.clientY || 0;\n\t\t\t\tevt.initMouseEvent( eventType, params.bubbles || false, params.cancelable || true, window, params.clickCount || 1, 0,\n\t\t\t\t\t0,\n\t\t\t\t\tclientX,\n\t\t\t\t\tclientY,\n\t\t\t\t\tfalse, false, false, false, 0, null );\n\t\t\t\tbreak;\n\n\t\t\t}\n\t\t\tcase 'KeyboardEvents':\n\t\t\t{\n\n\t\t\t\tvar init = evt.initKeyboardEvent || evt.initKeyEvent;\n\t\t\t\tCommon.defaults( params, {\n\t\t\t\t\tcancelable: true,\n\t\t\t\t\tctrlKey: false,\n\t\t\t\t\taltKey: false,\n\t\t\t\t\tshiftKey: false,\n\t\t\t\t\tmetaKey: false,\n\t\t\t\t\tkeyCode: undefined,\n\t\t\t\t\tcharCode: undefined\n\t\t\t\t} );\n\t\t\t\tinit( eventType, params.bubbles || false, params.cancelable, window, params.ctrlKey, params.altKey, params.shiftKey, params.metaKey, params.keyCode, params.charCode );\n\t\t\t\tbreak;\n\n\t\t\t}\n\t\t\tdefault:\n\t\t\t{\n\n\t\t\t\tevt.initEvent( eventType, params.bubbles || false, params.cancelable || true );\n\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\t\tCommon.defaults( evt, aux );\n\t\telem.dispatchEvent( evt );\n\n\t},\n\tbind: function bind( elem, event, func, newBool ) {\n\n\t\tvar bool = newBool || false;\n\t\tif ( elem.addEventListener ) {\n\n\t\t\telem.addEventListener( event, func, bool );\n\n\t\t} else if ( elem.attachEvent ) {\n\n\t\t\telem.attachEvent( 'on' + event, func );\n\n\t\t}\n\t\treturn dom;\n\n\t},\n\tunbind: function unbind( elem, event, func, newBool ) {\n\n\t\tvar bool = newBool || false;\n\t\tif ( elem.removeEventListener ) {\n\n\t\t\telem.removeEventListener( event, func, bool );\n\n\t\t} else if ( elem.detachEvent ) {\n\n\t\t\telem.detachEvent( 'on' + event, func );\n\n\t\t}\n\t\treturn dom;\n\n\t},\n\taddClass: function addClass( elem, className ) {\n\n\t\tif ( elem.className === undefined ) {\n\n\t\t\telem.className = className;\n\n\t\t} else if ( elem.className !== className ) {\n\n\t\t\tvar classes = elem.className.split( / +/ );\n\t\t\tif ( classes.indexOf( className ) === - 1 ) {\n\n\t\t\t\tclasses.push( className );\n\t\t\t\telem.className = classes.join( ' ' ).replace( /^\\s+/, '' ).replace( /\\s+$/, '' );\n\n\t\t\t}\n\n\t\t}\n\t\treturn dom;\n\n\t},\n\tremoveClass: function removeClass( elem, className ) {\n\n\t\tif ( className ) {\n\n\t\t\tif ( elem.className === className ) {\n\n\t\t\t\telem.removeAttribute( 'class' );\n\n\t\t\t} else {\n\n\t\t\t\tvar classes = elem.className.split( / +/ );\n\t\t\t\tvar index = classes.indexOf( className );\n\t\t\t\tif ( index !== - 1 ) {\n\n\t\t\t\t\tclasses.splice( index, 1 );\n\t\t\t\t\telem.className = classes.join( ' ' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\telem.className = undefined;\n\n\t\t}\n\t\treturn dom;\n\n\t},\n\thasClass: function hasClass( elem, className ) {\n\n\t\treturn new RegExp( '(?:^|\\\\s+)' + className + '(?:\\\\s+|$)' ).test( elem.className ) || false;\n\n\t},\n\tgetWidth: function getWidth( elem ) {\n\n\t\tvar style = getComputedStyle( elem );\n\t\treturn cssValueToPixels( style[ 'border-left-width' ] ) + cssValueToPixels( style[ 'border-right-width' ] ) + cssValueToPixels( style[ 'padding-left' ] ) + cssValueToPixels( style[ 'padding-right' ] ) + cssValueToPixels( style.width );\n\n\t},\n\tgetHeight: function getHeight( elem ) {\n\n\t\tvar style = getComputedStyle( elem );\n\t\treturn cssValueToPixels( style[ 'border-top-width' ] ) + cssValueToPixels( style[ 'border-bottom-width' ] ) + cssValueToPixels( style[ 'padding-top' ] ) + cssValueToPixels( style[ 'padding-bottom' ] ) + cssValueToPixels( style.height );\n\n\t},\n\tgetOffset: function getOffset( el ) {\n\n\t\tvar elem = el;\n\t\tvar offset = { left: 0, top: 0 };\n\t\tif ( elem.offsetParent ) {\n\n\t\t\tdo {\n\n\t\t\t\toffset.left += elem.offsetLeft;\n\t\t\t\toffset.top += elem.offsetTop;\n\t\t\t\telem = elem.offsetParent;\n\n\t\t\t} while ( elem );\n\n\t\t}\n\t\treturn offset;\n\n\t},\n\tisActive: function isActive( elem ) {\n\n\t\treturn elem === document.activeElement && ( elem.type || elem.href );\n\n\t}\n};\n\nvar BooleanController = function ( _Controller ) {\n\n\tinherits( BooleanController, _Controller );\n\tfunction BooleanController( object, property ) {\n\n\t\tclassCallCheck( this, BooleanController );\n\t\tvar _this2 = possibleConstructorReturn( this, ( BooleanController.__proto__ || Object.getPrototypeOf( BooleanController ) ).call( this, object, property ) );\n\t\tvar _this = _this2;\n\t\t_this2.__prev = _this2.getValue();\n\t\t_this2.__checkbox = document.createElement( 'input' );\n\t\t_this2.__checkbox.setAttribute( 'type', 'checkbox' );\n\t\tfunction onChange() {\n\n\t\t\t_this.setValue( ! _this.__prev );\n\n\t\t}\n\t\tdom.bind( _this2.__checkbox, 'change', onChange, false );\n\t\t_this2.domElement.appendChild( _this2.__checkbox );\n\t\t_this2.updateDisplay();\n\t\treturn _this2;\n\n\t}\n\tcreateClass( BooleanController, [ {\n\t\tkey: 'setValue',\n\t\tvalue: function setValue( v ) {\n\n\t\t\tvar toReturn = get( BooleanController.prototype.__proto__ || Object.getPrototypeOf( BooleanController.prototype ), 'setValue', this ).call( this, v );\n\t\t\tif ( this.__onFinishChange ) {\n\n\t\t\t\tthis.__onFinishChange.call( this, this.getValue() );\n\n\t\t\t}\n\t\t\tthis.__prev = this.getValue();\n\t\t\treturn toReturn;\n\n\t\t}\n\t}, {\n\t\tkey: 'updateDisplay',\n\t\tvalue: function updateDisplay() {\n\n\t\t\tif ( this.getValue() === true ) {\n\n\t\t\t\tthis.__checkbox.setAttribute( 'checked', 'checked' );\n\t\t\t\tthis.__checkbox.checked = true;\n\t\t\t\tthis.__prev = true;\n\n\t\t\t} else {\n\n\t\t\t\tthis.__checkbox.checked = false;\n\t\t\t\tthis.__prev = false;\n\n\t\t\t}\n\t\t\treturn get( BooleanController.prototype.__proto__ || Object.getPrototypeOf( BooleanController.prototype ), 'updateDisplay', this ).call( this );\n\n\t\t}\n\t} ] );\n\treturn BooleanController;\n\n}( Controller );\n\nvar OptionController = function ( _Controller ) {\n\n\tinherits( OptionController, _Controller );\n\tfunction OptionController( object, property, opts ) {\n\n\t\tclassCallCheck( this, OptionController );\n\t\tvar _this2 = possibleConstructorReturn( this, ( OptionController.__proto__ || Object.getPrototypeOf( OptionController ) ).call( this, object, property ) );\n\t\tvar options = opts;\n\t\tvar _this = _this2;\n\t\t_this2.__select = document.createElement( 'select' );\n\t\tif ( Common.isArray( options ) ) {\n\n\t\t\tvar map = {};\n\t\t\tCommon.each( options, function ( element ) {\n\n\t\t\t\tmap[ element ] = element;\n\n\t\t\t} );\n\t\t\toptions = map;\n\n\t\t}\n\t\tCommon.each( options, function ( value, key ) {\n\n\t\t\tvar opt = document.createElement( 'option' );\n\t\t\topt.innerHTML = key;\n\t\t\topt.setAttribute( 'value', value );\n\t\t\t_this.__select.appendChild( opt );\n\n\t\t} );\n\t\t_this2.updateDisplay();\n\t\tdom.bind( _this2.__select, 'change', function () {\n\n\t\t\tvar desiredValue = this.options[ this.selectedIndex ].value;\n\t\t\t_this.setValue( desiredValue );\n\n\t\t} );\n\t\t_this2.domElement.appendChild( _this2.__select );\n\t\treturn _this2;\n\n\t}\n\tcreateClass( OptionController, [ {\n\t\tkey: 'setValue',\n\t\tvalue: function setValue( v ) {\n\n\t\t\tvar toReturn = get( OptionController.prototype.__proto__ || Object.getPrototypeOf( OptionController.prototype ), 'setValue', this ).call( this, v );\n\t\t\tif ( this.__onFinishChange ) {\n\n\t\t\t\tthis.__onFinishChange.call( this, this.getValue() );\n\n\t\t\t}\n\t\t\treturn toReturn;\n\n\t\t}\n\t}, {\n\t\tkey: 'updateDisplay',\n\t\tvalue: function updateDisplay() {\n\n\t\t\tif ( dom.isActive( this.__select ) ) return this;\n\t\t\tthis.__select.value = this.getValue();\n\t\t\treturn get( OptionController.prototype.__proto__ || Object.getPrototypeOf( OptionController.prototype ), 'updateDisplay', this ).call( this );\n\n\t\t}\n\t} ] );\n\treturn OptionController;\n\n}( Controller );\n\nvar StringController = function ( _Controller ) {\n\n\tinherits( StringController, _Controller );\n\tfunction StringController( object, property ) {\n\n\t\tclassCallCheck( this, StringController );\n\t\tvar _this2 = possibleConstructorReturn( this, ( StringController.__proto__ || Object.getPrototypeOf( StringController ) ).call( this, object, property ) );\n\t\tvar _this = _this2;\n\t\tfunction onChange() {\n\n\t\t\t_this.setValue( _this.__input.value );\n\n\t\t}\n\t\tfunction onBlur() {\n\n\t\t\tif ( _this.__onFinishChange ) {\n\n\t\t\t\t_this.__onFinishChange.call( _this, _this.getValue() );\n\n\t\t\t}\n\n\t\t}\n\t\t_this2.__input = document.createElement( 'input' );\n\t\t_this2.__input.setAttribute( 'type', 'text' );\n\t\tdom.bind( _this2.__input, 'keyup', onChange );\n\t\tdom.bind( _this2.__input, 'change', onChange );\n\t\tdom.bind( _this2.__input, 'blur', onBlur );\n\t\tdom.bind( _this2.__input, 'keydown', function ( e ) {\n\n\t\t\tif ( e.keyCode === 13 ) {\n\n\t\t\t\tthis.blur();\n\n\t\t\t}\n\n\t\t} );\n\t\t_this2.updateDisplay();\n\t\t_this2.domElement.appendChild( _this2.__input );\n\t\treturn _this2;\n\n\t}\n\tcreateClass( StringController, [ {\n\t\tkey: 'updateDisplay',\n\t\tvalue: function updateDisplay() {\n\n\t\t\tif ( ! dom.isActive( this.__input ) ) {\n\n\t\t\t\tthis.__input.value = this.getValue();\n\n\t\t\t}\n\t\t\treturn get( StringController.prototype.__proto__ || Object.getPrototypeOf( StringController.prototype ), 'updateDisplay', this ).call( this );\n\n\t\t}\n\t} ] );\n\treturn StringController;\n\n}( Controller );\n\nfunction numDecimals( x ) {\n\n\tvar _x = x.toString();\n\tif ( _x.indexOf( '.' ) > - 1 ) {\n\n\t\treturn _x.length - _x.indexOf( '.' ) - 1;\n\n\t}\n\treturn 0;\n\n}\nvar NumberController = function ( _Controller ) {\n\n\tinherits( NumberController, _Controller );\n\tfunction NumberController( object, property, params ) {\n\n\t\tclassCallCheck( this, NumberController );\n\t\tvar _this = possibleConstructorReturn( this, ( NumberController.__proto__ || Object.getPrototypeOf( NumberController ) ).call( this, object, property ) );\n\t\tvar _params = params || {};\n\t\t_this.__min = _params.min;\n\t\t_this.__max = _params.max;\n\t\t_this.__step = _params.step;\n\t\tif ( Common.isUndefined( _this.__step ) ) {\n\n\t\t\tif ( _this.initialValue === 0 ) {\n\n\t\t\t\t_this.__impliedStep = 1;\n\n\t\t\t} else {\n\n\t\t\t\t_this.__impliedStep = Math.pow( 10, Math.floor( Math.log( Math.abs( _this.initialValue ) ) / Math.LN10 ) ) / 10;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t_this.__impliedStep = _this.__step;\n\n\t\t}\n\t\t_this.__precision = numDecimals( _this.__impliedStep );\n\t\treturn _this;\n\n\t}\n\tcreateClass( NumberController, [ {\n\t\tkey: 'setValue',\n\t\tvalue: function setValue( v ) {\n\n\t\t\tvar _v = v;\n\t\t\tif ( this.__min !== undefined && _v < this.__min ) {\n\n\t\t\t\t_v = this.__min;\n\n\t\t\t} else if ( this.__max !== undefined && _v > this.__max ) {\n\n\t\t\t\t_v = this.__max;\n\n\t\t\t}\n\t\t\tif ( this.__step !== undefined && _v % this.__step !== 0 ) {\n\n\t\t\t\t_v = Math.round( _v / this.__step ) * this.__step;\n\n\t\t\t}\n\t\t\treturn get( NumberController.prototype.__proto__ || Object.getPrototypeOf( NumberController.prototype ), 'setValue', this ).call( this, _v );\n\n\t\t}\n\t}, {\n\t\tkey: 'min',\n\t\tvalue: function min( minValue ) {\n\n\t\t\tthis.__min = minValue;\n\t\t\treturn this;\n\n\t\t}\n\t}, {\n\t\tkey: 'max',\n\t\tvalue: function max( maxValue ) {\n\n\t\t\tthis.__max = maxValue;\n\t\t\treturn this;\n\n\t\t}\n\t}, {\n\t\tkey: 'step',\n\t\tvalue: function step( stepValue ) {\n\n\t\t\tthis.__step = stepValue;\n\t\t\tthis.__impliedStep = stepValue;\n\t\t\tthis.__precision = numDecimals( stepValue );\n\t\t\treturn this;\n\n\t\t}\n\t} ] );\n\treturn NumberController;\n\n}( Controller );\n\nfunction roundToDecimal( value, decimals ) {\n\n\tvar tenTo = Math.pow( 10, decimals );\n\treturn Math.round( value * tenTo ) / tenTo;\n\n}\nvar NumberControllerBox = function ( _NumberController ) {\n\n\tinherits( NumberControllerBox, _NumberController );\n\tfunction NumberControllerBox( object, property, params ) {\n\n\t\tclassCallCheck( this, NumberControllerBox );\n\t\tvar _this2 = possibleConstructorReturn( this, ( NumberControllerBox.__proto__ || Object.getPrototypeOf( NumberControllerBox ) ).call( this, object, property, params ) );\n\t\t_this2.__truncationSuspended = false;\n\t\tvar _this = _this2;\n\t\tvar prevY = void 0;\n\t\tfunction onChange() {\n\n\t\t\tvar attempted = parseFloat( _this.__input.value );\n\t\t\tif ( ! Common.isNaN( attempted ) ) {\n\n\t\t\t\t_this.setValue( attempted );\n\n\t\t\t}\n\n\t\t}\n\t\tfunction onFinish() {\n\n\t\t\tif ( _this.__onFinishChange ) {\n\n\t\t\t\t_this.__onFinishChange.call( _this, _this.getValue() );\n\n\t\t\t}\n\n\t\t}\n\t\tfunction onBlur() {\n\n\t\t\tonFinish();\n\n\t\t}\n\t\tfunction onMouseDrag( e ) {\n\n\t\t\tvar diff = prevY - e.clientY;\n\t\t\t_this.setValue( _this.getValue() + diff * _this.__impliedStep );\n\t\t\tprevY = e.clientY;\n\n\t\t}\n\t\tfunction onMouseUp() {\n\n\t\t\tdom.unbind( window, 'mousemove', onMouseDrag );\n\t\t\tdom.unbind( window, 'mouseup', onMouseUp );\n\t\t\tonFinish();\n\n\t\t}\n\t\tfunction onMouseDown( e ) {\n\n\t\t\tdom.bind( window, 'mousemove', onMouseDrag );\n\t\t\tdom.bind( window, 'mouseup', onMouseUp );\n\t\t\tprevY = e.clientY;\n\n\t\t}\n\t\t_this2.__input = document.createElement( 'input' );\n\t\t_this2.__input.setAttribute( 'type', 'text' );\n\t\tdom.bind( _this2.__input, 'change', onChange );\n\t\tdom.bind( _this2.__input, 'blur', onBlur );\n\t\tdom.bind( _this2.__input, 'mousedown', onMouseDown );\n\t\tdom.bind( _this2.__input, 'keydown', function ( e ) {\n\n\t\t\tif ( e.keyCode === 13 ) {\n\n\t\t\t\t_this.__truncationSuspended = true;\n\t\t\t\tthis.blur();\n\t\t\t\t_this.__truncationSuspended = false;\n\t\t\t\tonFinish();\n\n\t\t\t}\n\n\t\t} );\n\t\t_this2.updateDisplay();\n\t\t_this2.domElement.appendChild( _this2.__input );\n\t\treturn _this2;\n\n\t}\n\tcreateClass( NumberControllerBox, [ {\n\t\tkey: 'updateDisplay',\n\t\tvalue: function updateDisplay() {\n\n\t\t\tthis.__input.value = this.__truncationSuspended ? this.getValue() : roundToDecimal( this.getValue(), this.__precision );\n\t\t\treturn get( NumberControllerBox.prototype.__proto__ || Object.getPrototypeOf( NumberControllerBox.prototype ), 'updateDisplay', this ).call( this );\n\n\t\t}\n\t} ] );\n\treturn NumberControllerBox;\n\n}( NumberController );\n\nfunction map( v, i1, i2, o1, o2 ) {\n\n\treturn o1 + ( o2 - o1 ) * ( ( v - i1 ) / ( i2 - i1 ) );\n\n}\nvar NumberControllerSlider = function ( _NumberController ) {\n\n\tinherits( NumberControllerSlider, _NumberController );\n\tfunction NumberControllerSlider( object, property, min, max, step ) {\n\n\t\tclassCallCheck( this, NumberControllerSlider );\n\t\tvar _this2 = possibleConstructorReturn( this, ( NumberControllerSlider.__proto__ || Object.getPrototypeOf( NumberControllerSlider ) ).call( this, object, property, { min: min, max: max, step: step } ) );\n\t\tvar _this = _this2;\n\t\t_this2.__background = document.createElement( 'div' );\n\t\t_this2.__foreground = document.createElement( 'div' );\n\t\tdom.bind( _this2.__background, 'mousedown', onMouseDown );\n\t\tdom.bind( _this2.__background, 'touchstart', onTouchStart );\n\t\tdom.addClass( _this2.__background, 'slider' );\n\t\tdom.addClass( _this2.__foreground, 'slider-fg' );\n\t\tfunction onMouseDown( e ) {\n\n\t\t\tdocument.activeElement.blur();\n\t\t\tdom.bind( window, 'mousemove', onMouseDrag );\n\t\t\tdom.bind( window, 'mouseup', onMouseUp );\n\t\t\tonMouseDrag( e );\n\n\t\t}\n\t\tfunction onMouseDrag( e ) {\n\n\t\t\te.preventDefault();\n\t\t\tvar bgRect = _this.__background.getBoundingClientRect();\n\t\t\t_this.setValue( map( e.clientX, bgRect.left, bgRect.right, _this.__min, _this.__max ) );\n\t\t\treturn false;\n\n\t\t}\n\t\tfunction onMouseUp() {\n\n\t\t\tdom.unbind( window, 'mousemove', onMouseDrag );\n\t\t\tdom.unbind( window, 'mouseup', onMouseUp );\n\t\t\tif ( _this.__onFinishChange ) {\n\n\t\t\t\t_this.__onFinishChange.call( _this, _this.getValue() );\n\n\t\t\t}\n\n\t\t}\n\t\tfunction onTouchStart( e ) {\n\n\t\t\tif ( e.touches.length !== 1 ) {\n\n\t\t\t\treturn;\n\n\t\t\t}\n\t\t\tdom.bind( window, 'touchmove', onTouchMove );\n\t\t\tdom.bind( window, 'touchend', onTouchEnd );\n\t\t\tonTouchMove( e );\n\n\t\t}\n\t\tfunction onTouchMove( e ) {\n\n\t\t\tvar clientX = e.touches[ 0 ].clientX;\n\t\t\tvar bgRect = _this.__background.getBoundingClientRect();\n\t\t\t_this.setValue( map( clientX, bgRect.left, bgRect.right, _this.__min, _this.__max ) );\n\n\t\t}\n\t\tfunction onTouchEnd() {\n\n\t\t\tdom.unbind( window, 'touchmove', onTouchMove );\n\t\t\tdom.unbind( window, 'touchend', onTouchEnd );\n\t\t\tif ( _this.__onFinishChange ) {\n\n\t\t\t\t_this.__onFinishChange.call( _this, _this.getValue() );\n\n\t\t\t}\n\n\t\t}\n\t\t_this2.updateDisplay();\n\t\t_this2.__background.appendChild( _this2.__foreground );\n\t\t_this2.domElement.appendChild( _this2.__background );\n\t\treturn _this2;\n\n\t}\n\tcreateClass( NumberControllerSlider, [ {\n\t\tkey: 'updateDisplay',\n\t\tvalue: function updateDisplay() {\n\n\t\t\tvar pct = ( this.getValue() - this.__min ) / ( this.__max - this.__min );\n\t\t\tthis.__foreground.style.width = pct * 100 + '%';\n\t\t\treturn get( NumberControllerSlider.prototype.__proto__ || Object.getPrototypeOf( NumberControllerSlider.prototype ), 'updateDisplay', this ).call( this );\n\n\t\t}\n\t} ] );\n\treturn NumberControllerSlider;\n\n}( NumberController );\n\nvar FunctionController = function ( _Controller ) {\n\n\tinherits( FunctionController, _Controller );\n\tfunction FunctionController( object, property, text ) {\n\n\t\tclassCallCheck( this, FunctionController );\n\t\tvar _this2 = possibleConstructorReturn( this, ( FunctionController.__proto__ || Object.getPrototypeOf( FunctionController ) ).call( this, object, property ) );\n\t\tvar _this = _this2;\n\t\t_this2.__button = document.createElement( 'div' );\n\t\t_this2.__button.innerHTML = text === undefined ? 'Fire' : text;\n\t\tdom.bind( _this2.__button, 'click', function ( e ) {\n\n\t\t\te.preventDefault();\n\t\t\t_this.fire();\n\t\t\treturn false;\n\n\t\t} );\n\t\tdom.addClass( _this2.__button, 'button' );\n\t\t_this2.domElement.appendChild( _this2.__button );\n\t\treturn _this2;\n\n\t}\n\tcreateClass( FunctionController, [ {\n\t\tkey: 'fire',\n\t\tvalue: function fire() {\n\n\t\t\tif ( this.__onChange ) {\n\n\t\t\t\tthis.__onChange.call( this );\n\n\t\t\t}\n\t\t\tthis.getValue().call( this.object );\n\t\t\tif ( this.__onFinishChange ) {\n\n\t\t\t\tthis.__onFinishChange.call( this, this.getValue() );\n\n\t\t\t}\n\n\t\t}\n\t} ] );\n\treturn FunctionController;\n\n}( Controller );\n\nvar ColorController = function ( _Controller ) {\n\n\tinherits( ColorController, _Controller );\n\tfunction ColorController( object, property ) {\n\n\t\tclassCallCheck( this, ColorController );\n\t\tvar _this2 = possibleConstructorReturn( this, ( ColorController.__proto__ || Object.getPrototypeOf( ColorController ) ).call( this, object, property ) );\n\t\t_this2.__color = new Color( _this2.getValue() );\n\t\t_this2.__temp = new Color( 0 );\n\t\tvar _this = _this2;\n\t\t_this2.domElement = document.createElement( 'div' );\n\t\tdom.makeSelectable( _this2.domElement, false );\n\t\t_this2.__selector = document.createElement( 'div' );\n\t\t_this2.__selector.className = 'selector';\n\t\t_this2.__saturation_field = document.createElement( 'div' );\n\t\t_this2.__saturation_field.className = 'saturation-field';\n\t\t_this2.__field_knob = document.createElement( 'div' );\n\t\t_this2.__field_knob.className = 'field-knob';\n\t\t_this2.__field_knob_border = '2px solid ';\n\t\t_this2.__hue_knob = document.createElement( 'div' );\n\t\t_this2.__hue_knob.className = 'hue-knob';\n\t\t_this2.__hue_field = document.createElement( 'div' );\n\t\t_this2.__hue_field.className = 'hue-field';\n\t\t_this2.__input = document.createElement( 'input' );\n\t\t_this2.__input.type = 'text';\n\t\t_this2.__input_textShadow = '0 1px 1px ';\n\t\tdom.bind( _this2.__input, 'keydown', function ( e ) {\n\n\t\t\tif ( e.keyCode === 13 ) {\n\n\t\t\t\tonBlur.call( this );\n\n\t\t\t}\n\n\t\t} );\n\t\tdom.bind( _this2.__input, 'blur', onBlur );\n\t\tdom.bind( _this2.__selector, 'mousedown', function () {\n\n\t\t\tdom.addClass( this, 'drag' ).bind( window, 'mouseup', function () {\n\n\t\t\t\tdom.removeClass( _this.__selector, 'drag' );\n\n\t\t\t} );\n\n\t\t} );\n\t\tdom.bind( _this2.__selector, 'touchstart', function () {\n\n\t\t\tdom.addClass( this, 'drag' ).bind( window, 'touchend', function () {\n\n\t\t\t\tdom.removeClass( _this.__selector, 'drag' );\n\n\t\t\t} );\n\n\t\t} );\n\t\tvar valueField = document.createElement( 'div' );\n\t\tCommon.extend( _this2.__selector.style, {\n\t\t\twidth: '122px',\n\t\t\theight: '102px',\n\t\t\tpadding: '3px',\n\t\t\tbackgroundColor: '#222',\n\t\t\tboxShadow: '0px 1px 3px rgba(0,0,0,0.3)'\n\t\t} );\n\t\tCommon.extend( _this2.__field_knob.style, {\n\t\t\tposition: 'absolute',\n\t\t\twidth: '12px',\n\t\t\theight: '12px',\n\t\t\tborder: _this2.__field_knob_border + ( _this2.__color.v < 0.5 ? '#fff' : '#000' ),\n\t\t\tboxShadow: '0px 1px 3px rgba(0,0,0,0.5)',\n\t\t\tborderRadius: '12px',\n\t\t\tzIndex: 1\n\t\t} );\n\t\tCommon.extend( _this2.__hue_knob.style, {\n\t\t\tposition: 'absolute',\n\t\t\twidth: '15px',\n\t\t\theight: '2px',\n\t\t\tborderRight: '4px solid #fff',\n\t\t\tzIndex: 1\n\t\t} );\n\t\tCommon.extend( _this2.__saturation_field.style, {\n\t\t\twidth: '100px',\n\t\t\theight: '100px',\n\t\t\tborder: '1px solid #555',\n\t\t\tmarginRight: '3px',\n\t\t\tdisplay: 'inline-block',\n\t\t\tcursor: 'pointer'\n\t\t} );\n\t\tCommon.extend( valueField.style, {\n\t\t\twidth: '100%',\n\t\t\theight: '100%',\n\t\t\tbackground: 'none'\n\t\t} );\n\t\tlinearGradient( valueField, 'top', 'rgba(0,0,0,0)', '#000' );\n\t\tCommon.extend( _this2.__hue_field.style, {\n\t\t\twidth: '15px',\n\t\t\theight: '100px',\n\t\t\tborder: '1px solid #555',\n\t\t\tcursor: 'ns-resize',\n\t\t\tposition: 'absolute',\n\t\t\ttop: '3px',\n\t\t\tright: '3px'\n\t\t} );\n\t\thueGradient( _this2.__hue_field );\n\t\tCommon.extend( _this2.__input.style, {\n\t\t\toutline: 'none',\n\t\t\ttextAlign: 'center',\n\t\t\tcolor: '#fff',\n\t\t\tborder: 0,\n\t\t\tfontWeight: 'bold',\n\t\t\ttextShadow: _this2.__input_textShadow + 'rgba(0,0,0,0.7)'\n\t\t} );\n\t\tdom.bind( _this2.__saturation_field, 'mousedown', fieldDown );\n\t\tdom.bind( _this2.__saturation_field, 'touchstart', fieldDown );\n\t\tdom.bind( _this2.__field_knob, 'mousedown', fieldDown );\n\t\tdom.bind( _this2.__field_knob, 'touchstart', fieldDown );\n\t\tdom.bind( _this2.__hue_field, 'mousedown', fieldDownH );\n\t\tdom.bind( _this2.__hue_field, 'touchstart', fieldDownH );\n\t\tfunction fieldDown( e ) {\n\n\t\t\tsetSV( e );\n\t\t\tdom.bind( window, 'mousemove', setSV );\n\t\t\tdom.bind( window, 'touchmove', setSV );\n\t\t\tdom.bind( window, 'mouseup', fieldUpSV );\n\t\t\tdom.bind( window, 'touchend', fieldUpSV );\n\n\t\t}\n\t\tfunction fieldDownH( e ) {\n\n\t\t\tsetH( e );\n\t\t\tdom.bind( window, 'mousemove', setH );\n\t\t\tdom.bind( window, 'touchmove', setH );\n\t\t\tdom.bind( window, 'mouseup', fieldUpH );\n\t\t\tdom.bind( window, 'touchend', fieldUpH );\n\n\t\t}\n\t\tfunction fieldUpSV() {\n\n\t\t\tdom.unbind( window, 'mousemove', setSV );\n\t\t\tdom.unbind( window, 'touchmove', setSV );\n\t\t\tdom.unbind( window, 'mouseup', fieldUpSV );\n\t\t\tdom.unbind( window, 'touchend', fieldUpSV );\n\t\t\tonFinish();\n\n\t\t}\n\t\tfunction fieldUpH() {\n\n\t\t\tdom.unbind( window, 'mousemove', setH );\n\t\t\tdom.unbind( window, 'touchmove', setH );\n\t\t\tdom.unbind( window, 'mouseup', fieldUpH );\n\t\t\tdom.unbind( window, 'touchend', fieldUpH );\n\t\t\tonFinish();\n\n\t\t}\n\t\tfunction onBlur() {\n\n\t\t\tvar i = interpret( this.value );\n\t\t\tif ( i !== false ) {\n\n\t\t\t\t_this.__color.__state = i;\n\t\t\t\t_this.setValue( _this.__color.toOriginal() );\n\n\t\t\t} else {\n\n\t\t\t\tthis.value = _this.__color.toString();\n\n\t\t\t}\n\n\t\t}\n\t\tfunction onFinish() {\n\n\t\t\tif ( _this.__onFinishChange ) {\n\n\t\t\t\t_this.__onFinishChange.call( _this, _this.__color.toOriginal() );\n\n\t\t\t}\n\n\t\t}\n\t\t_this2.__saturation_field.appendChild( valueField );\n\t\t_this2.__selector.appendChild( _this2.__field_knob );\n\t\t_this2.__selector.appendChild( _this2.__saturation_field );\n\t\t_this2.__selector.appendChild( _this2.__hue_field );\n\t\t_this2.__hue_field.appendChild( _this2.__hue_knob );\n\t\t_this2.domElement.appendChild( _this2.__input );\n\t\t_this2.domElement.appendChild( _this2.__selector );\n\t\t_this2.updateDisplay();\n\t\tfunction setSV( e ) {\n\n\t\t\tif ( e.type.indexOf( 'touch' ) === - 1 ) {\n\n\t\t\t\te.preventDefault();\n\n\t\t\t}\n\t\t\tvar fieldRect = _this.__saturation_field.getBoundingClientRect();\n\t\t\tvar _ref = e.touches && e.touches[ 0 ] || e,\n\t\t\t\tclientX = _ref.clientX,\n\t\t\t\tclientY = _ref.clientY;\n\t\t\tvar s = ( clientX - fieldRect.left ) / ( fieldRect.right - fieldRect.left );\n\t\t\tvar v = 1 - ( clientY - fieldRect.top ) / ( fieldRect.bottom - fieldRect.top );\n\t\t\tif ( v > 1 ) {\n\n\t\t\t\tv = 1;\n\n\t\t\t} else if ( v < 0 ) {\n\n\t\t\t\tv = 0;\n\n\t\t\t}\n\t\t\tif ( s > 1 ) {\n\n\t\t\t\ts = 1;\n\n\t\t\t} else if ( s < 0 ) {\n\n\t\t\t\ts = 0;\n\n\t\t\t}\n\t\t\t_this.__color.v = v;\n\t\t\t_this.__color.s = s;\n\t\t\t_this.setValue( _this.__color.toOriginal() );\n\t\t\treturn false;\n\n\t\t}\n\t\tfunction setH( e ) {\n\n\t\t\tif ( e.type.indexOf( 'touch' ) === - 1 ) {\n\n\t\t\t\te.preventDefault();\n\n\t\t\t}\n\t\t\tvar fieldRect = _this.__hue_field.getBoundingClientRect();\n\t\t\tvar _ref2 = e.touches && e.touches[ 0 ] || e,\n\t\t\t\tclientY = _ref2.clientY;\n\t\t\tvar h = 1 - ( clientY - fieldRect.top ) / ( fieldRect.bottom - fieldRect.top );\n\t\t\tif ( h > 1 ) {\n\n\t\t\t\th = 1;\n\n\t\t\t} else if ( h < 0 ) {\n\n\t\t\t\th = 0;\n\n\t\t\t}\n\t\t\t_this.__color.h = h * 360;\n\t\t\t_this.setValue( _this.__color.toOriginal() );\n\t\t\treturn false;\n\n\t\t}\n\t\treturn _this2;\n\n\t}\n\tcreateClass( ColorController, [ {\n\t\tkey: 'updateDisplay',\n\t\tvalue: function updateDisplay() {\n\n\t\t\tvar i = interpret( this.getValue() );\n\t\t\tif ( i !== false ) {\n\n\t\t\t\tvar mismatch = false;\n\t\t\t\tCommon.each( Color.COMPONENTS, function ( component ) {\n\n\t\t\t\t\tif ( ! Common.isUndefined( i[ component ] ) && ! Common.isUndefined( this.__color.__state[ component ] ) && i[ component ] !== this.__color.__state[ component ] ) {\n\n\t\t\t\t\t\tmismatch = true;\n\t\t\t\t\t\treturn {};\n\n\t\t\t\t\t}\n\n\t\t\t\t}, this );\n\t\t\t\tif ( mismatch ) {\n\n\t\t\t\t\tCommon.extend( this.__color.__state, i );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t\tCommon.extend( this.__temp.__state, this.__color.__state );\n\t\t\tthis.__temp.a = 1;\n\t\t\tvar flip = this.__color.v < 0.5 || this.__color.s > 0.5 ? 255 : 0;\n\t\t\tvar _flip = 255 - flip;\n\t\t\tCommon.extend( this.__field_knob.style, {\n\t\t\t\tmarginLeft: 100 * this.__color.s - 7 + 'px',\n\t\t\t\tmarginTop: 100 * ( 1 - this.__color.v ) - 7 + 'px',\n\t\t\t\tbackgroundColor: this.__temp.toHexString(),\n\t\t\t\tborder: this.__field_knob_border + 'rgb(' + flip + ',' + flip + ',' + flip + ')'\n\t\t\t} );\n\t\t\tthis.__hue_knob.style.marginTop = ( 1 - this.__color.h / 360 ) * 100 + 'px';\n\t\t\tthis.__temp.s = 1;\n\t\t\tthis.__temp.v = 1;\n\t\t\tlinearGradient( this.__saturation_field, 'left', '#fff', this.__temp.toHexString() );\n\t\t\tthis.__input.value = this.__color.toString();\n\t\t\tCommon.extend( this.__input.style, {\n\t\t\t\tbackgroundColor: this.__color.toHexString(),\n\t\t\t\tcolor: 'rgb(' + flip + ',' + flip + ',' + flip + ')',\n\t\t\t\ttextShadow: this.__input_textShadow + 'rgba(' + _flip + ',' + _flip + ',' + _flip + ',.7)'\n\t\t\t} );\n\n\t\t}\n\t} ] );\n\treturn ColorController;\n\n}( Controller );\nvar vendors = [ '-moz-', '-o-', '-webkit-', '-ms-', '' ];\nfunction linearGradient( elem, x, a, b ) {\n\n\telem.style.background = '';\n\tCommon.each( vendors, function ( vendor ) {\n\n\t\telem.style.cssText += 'background: ' + vendor + 'linear-gradient(' + x + ', ' + a + ' 0%, ' + b + ' 100%); ';\n\n\t} );\n\n}\nfunction hueGradient( elem ) {\n\n\telem.style.background = '';\n\telem.style.cssText += 'background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);';\n\telem.style.cssText += 'background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);';\n\telem.style.cssText += 'background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);';\n\telem.style.cssText += 'background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);';\n\telem.style.cssText += 'background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);';\n\n}\n\nvar css = {\n\tload: function load( url, indoc ) {\n\n\t\tvar doc = indoc || document;\n\t\tvar link = doc.createElement( 'link' );\n\t\tlink.type = 'text/css';\n\t\tlink.rel = 'stylesheet';\n\t\tlink.href = url;\n\t\tdoc.getElementsByTagName( 'head' )[ 0 ].appendChild( link );\n\n\t},\n\tinject: function inject( cssContent, indoc ) {\n\n\t\tvar doc = indoc || document;\n\t\tvar injected = document.createElement( 'style' );\n\t\tinjected.type = 'text/css';\n\t\tinjected.innerHTML = cssContent;\n\t\tvar head = doc.getElementsByTagName( 'head' )[ 0 ];\n\t\ttry {\n\n\t\t\thead.appendChild( injected );\n\n\t\t} catch ( e ) {\n\t\t}\n\n\t}\n};\n\nvar saveDialogContents = \"<div id=\\\"dg-save\\\" class=\\\"dg dialogue\\\">\\n\\n  Here's the new load parameter for your <code>GUI</code>'s constructor:\\n\\n  <textarea id=\\\"dg-new-constructor\\\"></textarea>\\n\\n  <div id=\\\"dg-save-locally\\\">\\n\\n    <input id=\\\"dg-local-storage\\\" type=\\\"checkbox\\\"/> Automatically save\\n    values to <code>localStorage</code> on exit.\\n\\n    <div id=\\\"dg-local-explain\\\">The values saved to <code>localStorage</code> will\\n      override those passed to <code>dat.GUI</code>'s constructor. This makes it\\n      easier to work incrementally, but <code>localStorage</code> is fragile,\\n      and your friends may not see the same values you do.\\n\\n    </div>\\n\\n  </div>\\n\\n</div>\";\n\nvar ControllerFactory = function ControllerFactory( object, property ) {\n\n\tvar initialValue = object[ property ];\n\tif ( Common.isArray( arguments[ 2 ] ) || Common.isObject( arguments[ 2 ] ) ) {\n\n\t\treturn new OptionController( object, property, arguments[ 2 ] );\n\n\t}\n\tif ( Common.isNumber( initialValue ) ) {\n\n\t\tif ( Common.isNumber( arguments[ 2 ] ) && Common.isNumber( arguments[ 3 ] ) ) {\n\n\t\t\tif ( Common.isNumber( arguments[ 4 ] ) ) {\n\n\t\t\t\treturn new NumberControllerSlider( object, property, arguments[ 2 ], arguments[ 3 ], arguments[ 4 ] );\n\n\t\t\t}\n\t\t\treturn new NumberControllerSlider( object, property, arguments[ 2 ], arguments[ 3 ] );\n\n\t\t}\n\t\tif ( Common.isNumber( arguments[ 4 ] ) ) {\n\n\t\t\treturn new NumberControllerBox( object, property, { min: arguments[ 2 ], max: arguments[ 3 ], step: arguments[ 4 ] } );\n\n\t\t}\n\t\treturn new NumberControllerBox( object, property, { min: arguments[ 2 ], max: arguments[ 3 ] } );\n\n\t}\n\tif ( Common.isString( initialValue ) ) {\n\n\t\treturn new StringController( object, property );\n\n\t}\n\tif ( Common.isFunction( initialValue ) ) {\n\n\t\treturn new FunctionController( object, property, '' );\n\n\t}\n\tif ( Common.isBoolean( initialValue ) ) {\n\n\t\treturn new BooleanController( object, property );\n\n\t}\n\treturn null;\n\n};\n\nfunction requestAnimationFrame( callback ) {\n\n\tsetTimeout( callback, 1000 / 60 );\n\n}\nvar requestAnimationFrame$1 = window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame || requestAnimationFrame;\n\nvar CenteredDiv = function () {\n\n\tfunction CenteredDiv() {\n\n\t\tclassCallCheck( this, CenteredDiv );\n\t\tthis.backgroundElement = document.createElement( 'div' );\n\t\tCommon.extend( this.backgroundElement.style, {\n\t\t\tbackgroundColor: 'rgba(0,0,0,0.8)',\n\t\t\ttop: 0,\n\t\t\tleft: 0,\n\t\t\tdisplay: 'none',\n\t\t\tzIndex: '1000',\n\t\t\topacity: 0,\n\t\t\tWebkitTransition: 'opacity 0.2s linear',\n\t\t\ttransition: 'opacity 0.2s linear'\n\t\t} );\n\t\tdom.makeFullscreen( this.backgroundElement );\n\t\tthis.backgroundElement.style.position = 'fixed';\n\t\tthis.domElement = document.createElement( 'div' );\n\t\tCommon.extend( this.domElement.style, {\n\t\t\tposition: 'fixed',\n\t\t\tdisplay: 'none',\n\t\t\tzIndex: '1001',\n\t\t\topacity: 0,\n\t\t\tWebkitTransition: '-webkit-transform 0.2s ease-out, opacity 0.2s linear',\n\t\t\ttransition: 'transform 0.2s ease-out, opacity 0.2s linear'\n\t\t} );\n\t\tdocument.body.appendChild( this.backgroundElement );\n\t\tdocument.body.appendChild( this.domElement );\n\t\tvar _this = this;\n\t\tdom.bind( this.backgroundElement, 'click', function () {\n\n\t\t\t_this.hide();\n\n\t\t} );\n\n\t}\n\tcreateClass( CenteredDiv, [ {\n\t\tkey: 'show',\n\t\tvalue: function show() {\n\n\t\t\tvar _this = this;\n\t\t\tthis.backgroundElement.style.display = 'block';\n\t\t\tthis.domElement.style.display = 'block';\n\t\t\tthis.domElement.style.opacity = 0;\n\t\t\tthis.domElement.style.webkitTransform = 'scale(1.1)';\n\t\t\tthis.layout();\n\t\t\tCommon.defer( function () {\n\n\t\t\t\t_this.backgroundElement.style.opacity = 1;\n\t\t\t\t_this.domElement.style.opacity = 1;\n\t\t\t\t_this.domElement.style.webkitTransform = 'scale(1)';\n\n\t\t\t} );\n\n\t\t}\n\t}, {\n\t\tkey: 'hide',\n\t\tvalue: function hide() {\n\n\t\t\tvar _this = this;\n\t\t\tvar hide = function hide() {\n\n\t\t\t\t_this.domElement.style.display = 'none';\n\t\t\t\t_this.backgroundElement.style.display = 'none';\n\t\t\t\tdom.unbind( _this.domElement, 'webkitTransitionEnd', hide );\n\t\t\t\tdom.unbind( _this.domElement, 'transitionend', hide );\n\t\t\t\tdom.unbind( _this.domElement, 'oTransitionEnd', hide );\n\n\t\t\t};\n\t\t\tdom.bind( this.domElement, 'webkitTransitionEnd', hide );\n\t\t\tdom.bind( this.domElement, 'transitionend', hide );\n\t\t\tdom.bind( this.domElement, 'oTransitionEnd', hide );\n\t\t\tthis.backgroundElement.style.opacity = 0;\n\t\t\tthis.domElement.style.opacity = 0;\n\t\t\tthis.domElement.style.webkitTransform = 'scale(1.1)';\n\n\t\t}\n\t}, {\n\t\tkey: 'layout',\n\t\tvalue: function layout() {\n\n\t\t\tthis.domElement.style.left = window.innerWidth / 2 - dom.getWidth( this.domElement ) / 2 + 'px';\n\t\t\tthis.domElement.style.top = window.innerHeight / 2 - dom.getHeight( this.domElement ) / 2 + 'px';\n\n\t\t}\n\t} ] );\n\treturn CenteredDiv;\n\n}();\n\nvar styleSheet = ___$insertStyle( \".dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1 !important}.dg.main:hover .close-button,.dg.main .close-button.drag{opacity:1}.dg.main .close-button{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear;border:0;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button.close-top{position:relative}.dg.main .close-button.close-bottom{position:absolute}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-y:visible}.dg.a.has-save>ul.close-top{margin-top:0}.dg.a.has-save>ul.close-bottom{margin-top:27px}.dg.a.has-save>ul.closed{margin-top:0}.dg.a .save-row{top:0;z-index:1002}.dg.a .save-row.close-top{position:relative}.dg.a .save-row.close-bottom{position:fixed}.dg li{-webkit-transition:height .1s ease-out;-o-transition:height .1s ease-out;-moz-transition:height .1s ease-out;transition:height .1s ease-out;-webkit-transition:overflow .1s linear;-o-transition:overflow .1s linear;-moz-transition:overflow .1s linear;transition:overflow .1s linear}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid rgba(0,0,0,0)}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li>*{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px;overflow:hidden}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .c{float:left;width:60%;position:relative}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:7px}.dg .c select{margin-top:5px}.dg .cr.function,.dg .cr.function .property-name,.dg .cr.function *,.dg .cr.boolean,.dg .cr.boolean *{cursor:pointer}.dg .cr.color{overflow:visible}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0px 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco, monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px 'Lucida Grande', sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px 4px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid rgba(255,255,255,0.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.color{border-left:3px solid}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2FA1D6}.dg .cr.number input[type=text]{color:#2FA1D6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.function:hover,.dg .cr.boolean:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2FA1D6;max-width:100%}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}\\n\" );\n\ncss.inject( styleSheet );\nvar CSS_NAMESPACE = 'dg';\nvar HIDE_KEY_CODE = 72;\nvar CLOSE_BUTTON_HEIGHT = 20;\nvar DEFAULT_DEFAULT_PRESET_NAME = 'Default';\nvar SUPPORTS_LOCAL_STORAGE = function () {\n\n\ttry {\n\n\t\treturn !! window.localStorage;\n\n\t} catch ( e ) {\n\n\t\treturn false;\n\n\t}\n\n}();\nvar SAVE_DIALOGUE = void 0;\nvar autoPlaceVirgin = true;\nvar autoPlaceContainer = void 0;\nvar hide = false;\nvar hideableGuis = [];\nvar GUI = function GUI( pars ) {\n\n\tvar _this = this;\n\tvar params = pars || {};\n\tthis.domElement = document.createElement( 'div' );\n\tthis.__ul = document.createElement( 'ul' );\n\tthis.domElement.appendChild( this.__ul );\n\tdom.addClass( this.domElement, CSS_NAMESPACE );\n\tthis.__folders = {};\n\tthis.__controllers = [];\n\tthis.__rememberedObjects = [];\n\tthis.__rememberedObjectIndecesToControllers = [];\n\tthis.__listening = [];\n\tparams = Common.defaults( params, {\n\t\tcloseOnTop: false,\n\t\tautoPlace: true,\n\t\twidth: GUI.DEFAULT_WIDTH\n\t} );\n\tparams = Common.defaults( params, {\n\t\tresizable: params.autoPlace,\n\t\thideable: params.autoPlace\n\t} );\n\tif ( ! Common.isUndefined( params.load ) ) {\n\n\t\tif ( params.preset ) {\n\n\t\t\tparams.load.preset = params.preset;\n\n\t\t}\n\n\t} else {\n\n\t\tparams.load = { preset: DEFAULT_DEFAULT_PRESET_NAME };\n\n\t}\n\tif ( Common.isUndefined( params.parent ) && params.hideable ) {\n\n\t\thideableGuis.push( this );\n\n\t}\n\tparams.resizable = Common.isUndefined( params.parent ) && params.resizable;\n\tif ( params.autoPlace && Common.isUndefined( params.scrollable ) ) {\n\n\t\tparams.scrollable = true;\n\n\t}\n\tvar useLocalStorage = SUPPORTS_LOCAL_STORAGE && localStorage.getItem( getLocalStorageHash( this, 'isLocal' ) ) === 'true';\n\tvar saveToLocalStorage = void 0;\n\tvar titleRow = void 0;\n\tObject.defineProperties( this,\n\t\t{\n\t\t\tparent: {\n\t\t\t\tget: function get$$1() {\n\n\t\t\t\t\treturn params.parent;\n\n\t\t\t\t}\n\t\t\t},\n\t\t\tscrollable: {\n\t\t\t\tget: function get$$1() {\n\n\t\t\t\t\treturn params.scrollable;\n\n\t\t\t\t}\n\t\t\t},\n\t\t\tautoPlace: {\n\t\t\t\tget: function get$$1() {\n\n\t\t\t\t\treturn params.autoPlace;\n\n\t\t\t\t}\n\t\t\t},\n\t\t\tcloseOnTop: {\n\t\t\t\tget: function get$$1() {\n\n\t\t\t\t\treturn params.closeOnTop;\n\n\t\t\t\t}\n\t\t\t},\n\t\t\tpreset: {\n\t\t\t\tget: function get$$1() {\n\n\t\t\t\t\tif ( _this.parent ) {\n\n\t\t\t\t\t\treturn _this.getRoot().preset;\n\n\t\t\t\t\t}\n\t\t\t\t\treturn params.load.preset;\n\n\t\t\t\t},\n\t\t\t\tset: function set$$1( v ) {\n\n\t\t\t\t\tif ( _this.parent ) {\n\n\t\t\t\t\t\t_this.getRoot().preset = v;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tparams.load.preset = v;\n\n\t\t\t\t\t}\n\t\t\t\t\tsetPresetSelectIndex( this );\n\t\t\t\t\t_this.revert();\n\n\t\t\t\t}\n\t\t\t},\n\t\t\twidth: {\n\t\t\t\tget: function get$$1() {\n\n\t\t\t\t\treturn params.width;\n\n\t\t\t\t},\n\t\t\t\tset: function set$$1( v ) {\n\n\t\t\t\t\tparams.width = v;\n\t\t\t\t\tsetWidth( _this, v );\n\n\t\t\t\t}\n\t\t\t},\n\t\t\tname: {\n\t\t\t\tget: function get$$1() {\n\n\t\t\t\t\treturn params.name;\n\n\t\t\t\t},\n\t\t\t\tset: function set$$1( v ) {\n\n\t\t\t\t\tparams.name = v;\n\t\t\t\t\tif ( titleRow ) {\n\n\t\t\t\t\t\ttitleRow.innerHTML = params.name;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t},\n\t\t\tclosed: {\n\t\t\t\tget: function get$$1() {\n\n\t\t\t\t\treturn params.closed;\n\n\t\t\t\t},\n\t\t\t\tset: function set$$1( v ) {\n\n\t\t\t\t\tparams.closed = v;\n\t\t\t\t\tif ( params.closed ) {\n\n\t\t\t\t\t\tdom.addClass( _this.__ul, GUI.CLASS_CLOSED );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tdom.removeClass( _this.__ul, GUI.CLASS_CLOSED );\n\n\t\t\t\t\t}\n\t\t\t\t\tthis.onResize();\n\t\t\t\t\tif ( _this.__closeButton ) {\n\n\t\t\t\t\t\t_this.__closeButton.innerHTML = v ? GUI.TEXT_OPEN : GUI.TEXT_CLOSED;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t},\n\t\t\tload: {\n\t\t\t\tget: function get$$1() {\n\n\t\t\t\t\treturn params.load;\n\n\t\t\t\t}\n\t\t\t},\n\t\t\tuseLocalStorage: {\n\t\t\t\tget: function get$$1() {\n\n\t\t\t\t\treturn useLocalStorage;\n\n\t\t\t\t},\n\t\t\t\tset: function set$$1( bool ) {\n\n\t\t\t\t\tif ( SUPPORTS_LOCAL_STORAGE ) {\n\n\t\t\t\t\t\tuseLocalStorage = bool;\n\t\t\t\t\t\tif ( bool ) {\n\n\t\t\t\t\t\t\tdom.bind( window, 'unload', saveToLocalStorage );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tdom.unbind( window, 'unload', saveToLocalStorage );\n\n\t\t\t\t\t\t}\n\t\t\t\t\t\tlocalStorage.setItem( getLocalStorageHash( _this, 'isLocal' ), bool );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\tif ( Common.isUndefined( params.parent ) ) {\n\n\t\tthis.closed = params.closed || false;\n\t\tdom.addClass( this.domElement, GUI.CLASS_MAIN );\n\t\tdom.makeSelectable( this.domElement, false );\n\t\tif ( SUPPORTS_LOCAL_STORAGE ) {\n\n\t\t\tif ( useLocalStorage ) {\n\n\t\t\t\t_this.useLocalStorage = true;\n\t\t\t\tvar savedGui = localStorage.getItem( getLocalStorageHash( this, 'gui' ) );\n\t\t\t\tif ( savedGui ) {\n\n\t\t\t\t\tparams.load = JSON.parse( savedGui );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\t\tthis.__closeButton = document.createElement( 'div' );\n\t\tthis.__closeButton.innerHTML = GUI.TEXT_CLOSED;\n\t\tdom.addClass( this.__closeButton, GUI.CLASS_CLOSE_BUTTON );\n\t\tif ( params.closeOnTop ) {\n\n\t\t\tdom.addClass( this.__closeButton, GUI.CLASS_CLOSE_TOP );\n\t\t\tthis.domElement.insertBefore( this.__closeButton, this.domElement.childNodes[ 0 ] );\n\n\t\t} else {\n\n\t\t\tdom.addClass( this.__closeButton, GUI.CLASS_CLOSE_BOTTOM );\n\t\t\tthis.domElement.appendChild( this.__closeButton );\n\n\t\t}\n\t\tdom.bind( this.__closeButton, 'click', function () {\n\n\t\t\t_this.closed = ! _this.closed;\n\n\t\t} );\n\n\t} else {\n\n\t\tif ( params.closed === undefined ) {\n\n\t\t\tparams.closed = true;\n\n\t\t}\n\t\tvar titleRowName = document.createTextNode( params.name );\n\t\tdom.addClass( titleRowName, 'controller-name' );\n\t\ttitleRow = addRow( _this, titleRowName );\n\t\tvar onClickTitle = function onClickTitle( e ) {\n\n\t\t\te.preventDefault();\n\t\t\t_this.closed = ! _this.closed;\n\t\t\treturn false;\n\n\t\t};\n\t\tdom.addClass( this.__ul, GUI.CLASS_CLOSED );\n\t\tdom.addClass( titleRow, 'title' );\n\t\tdom.bind( titleRow, 'click', onClickTitle );\n\t\tif ( ! params.closed ) {\n\n\t\t\tthis.closed = false;\n\n\t\t}\n\n\t}\n\tif ( params.autoPlace ) {\n\n\t\tif ( Common.isUndefined( params.parent ) ) {\n\n\t\t\tif ( autoPlaceVirgin ) {\n\n\t\t\t\tautoPlaceContainer = document.createElement( 'div' );\n\t\t\t\tdom.addClass( autoPlaceContainer, CSS_NAMESPACE );\n\t\t\t\tdom.addClass( autoPlaceContainer, GUI.CLASS_AUTO_PLACE_CONTAINER );\n\t\t\t\tdocument.body.appendChild( autoPlaceContainer );\n\t\t\t\tautoPlaceVirgin = false;\n\n\t\t\t}\n\t\t\tautoPlaceContainer.appendChild( this.domElement );\n\t\t\tdom.addClass( this.domElement, GUI.CLASS_AUTO_PLACE );\n\n\t\t}\n\t\tif ( ! this.parent ) {\n\n\t\t\tsetWidth( _this, params.width );\n\n\t\t}\n\n\t}\n\tthis.__resizeHandler = function () {\n\n\t\t_this.onResizeDebounced();\n\n\t};\n\tdom.bind( window, 'resize', this.__resizeHandler );\n\tdom.bind( this.__ul, 'webkitTransitionEnd', this.__resizeHandler );\n\tdom.bind( this.__ul, 'transitionend', this.__resizeHandler );\n\tdom.bind( this.__ul, 'oTransitionEnd', this.__resizeHandler );\n\tthis.onResize();\n\tif ( params.resizable ) {\n\n\t\taddResizeHandle( this );\n\n\t}\n\tsaveToLocalStorage = function saveToLocalStorage() {\n\n\t\tif ( SUPPORTS_LOCAL_STORAGE && localStorage.getItem( getLocalStorageHash( _this, 'isLocal' ) ) === 'true' ) {\n\n\t\t\tlocalStorage.setItem( getLocalStorageHash( _this, 'gui' ), JSON.stringify( _this.getSaveObject() ) );\n\n\t\t}\n\n\t};\n\tthis.saveToLocalStorageIfPossible = saveToLocalStorage;\n\tfunction resetWidth() {\n\n\t\tvar root = _this.getRoot();\n\t\troot.width += 1;\n\t\tCommon.defer( function () {\n\n\t\t\troot.width -= 1;\n\n\t\t} );\n\n\t}\n\tif ( ! params.parent ) {\n\n\t\tresetWidth();\n\n\t}\n\n};\nGUI.toggleHide = function () {\n\n\thide = ! hide;\n\tCommon.each( hideableGuis, function ( gui ) {\n\n\t\tgui.domElement.style.display = hide ? 'none' : '';\n\n\t} );\n\n};\nGUI.CLASS_AUTO_PLACE = 'a';\nGUI.CLASS_AUTO_PLACE_CONTAINER = 'ac';\nGUI.CLASS_MAIN = 'main';\nGUI.CLASS_CONTROLLER_ROW = 'cr';\nGUI.CLASS_TOO_TALL = 'taller-than-window';\nGUI.CLASS_CLOSED = 'closed';\nGUI.CLASS_CLOSE_BUTTON = 'close-button';\nGUI.CLASS_CLOSE_TOP = 'close-top';\nGUI.CLASS_CLOSE_BOTTOM = 'close-bottom';\nGUI.CLASS_DRAG = 'drag';\nGUI.DEFAULT_WIDTH = 245;\nGUI.TEXT_CLOSED = 'Close Controls';\nGUI.TEXT_OPEN = 'Open Controls';\nGUI._keydownHandler = function ( e ) {\n\n\tif ( document.activeElement.type !== 'text' && ( e.which === HIDE_KEY_CODE || e.keyCode === HIDE_KEY_CODE ) ) {\n\n\t\tGUI.toggleHide();\n\n\t}\n\n};\ndom.bind( window, 'keydown', GUI._keydownHandler, false );\nCommon.extend( GUI.prototype,\n\t{\n\t\tadd: function add( object, property ) {\n\n\t\t\treturn _add( this, object, property, {\n\t\t\t\tfactoryArgs: Array.prototype.slice.call( arguments, 2 )\n\t\t\t} );\n\n\t\t},\n\t\taddColor: function addColor( object, property ) {\n\n\t\t\treturn _add( this, object, property, {\n\t\t\t\tcolor: true\n\t\t\t} );\n\n\t\t},\n\t\tremove: function remove( controller ) {\n\n\t\t\tthis.__ul.removeChild( controller.__li );\n\t\t\tthis.__controllers.splice( this.__controllers.indexOf( controller ), 1 );\n\t\t\tvar _this = this;\n\t\t\tCommon.defer( function () {\n\n\t\t\t\t_this.onResize();\n\n\t\t\t} );\n\n\t\t},\n\t\tdestroy: function destroy() {\n\n\t\t\tif ( this.parent ) {\n\n\t\t\t\tthrow new Error( 'Only the root GUI should be removed with .destroy(). ' + 'For subfolders, use gui.removeFolder(folder) instead.' );\n\n\t\t\t}\n\t\t\tif ( this.autoPlace ) {\n\n\t\t\t\tautoPlaceContainer.removeChild( this.domElement );\n\n\t\t\t}\n\t\t\tvar _this = this;\n\t\t\tCommon.each( this.__folders, function ( subfolder ) {\n\n\t\t\t\t_this.removeFolder( subfolder );\n\n\t\t\t} );\n\t\t\tdom.unbind( window, 'keydown', GUI._keydownHandler, false );\n\t\t\tremoveListeners( this );\n\n\t\t},\n\t\taddFolder: function addFolder( name ) {\n\n\t\t\tif ( this.__folders[ name ] !== undefined ) {\n\n\t\t\t\tthrow new Error( 'You already have a folder in this GUI by the' + ' name \"' + name + '\"' );\n\n\t\t\t}\n\t\t\tvar newGuiParams = { name: name, parent: this };\n\t\t\tnewGuiParams.autoPlace = this.autoPlace;\n\t\t\tif ( this.load &&\n    this.load.folders &&\n    this.load.folders[ name ] ) {\n\n\t\t\t\tnewGuiParams.closed = this.load.folders[ name ].closed;\n\t\t\t\tnewGuiParams.load = this.load.folders[ name ];\n\n\t\t\t}\n\t\t\tvar gui = new GUI( newGuiParams );\n\t\t\tthis.__folders[ name ] = gui;\n\t\t\tvar li = addRow( this, gui.domElement );\n\t\t\tdom.addClass( li, 'folder' );\n\t\t\treturn gui;\n\n\t\t},\n\t\tremoveFolder: function removeFolder( folder ) {\n\n\t\t\tthis.__ul.removeChild( folder.domElement.parentElement );\n\t\t\tdelete this.__folders[ folder.name ];\n\t\t\tif ( this.load &&\n    this.load.folders &&\n    this.load.folders[ folder.name ] ) {\n\n\t\t\t\tdelete this.load.folders[ folder.name ];\n\n\t\t\t}\n\t\t\tremoveListeners( folder );\n\t\t\tvar _this = this;\n\t\t\tCommon.each( folder.__folders, function ( subfolder ) {\n\n\t\t\t\tfolder.removeFolder( subfolder );\n\n\t\t\t} );\n\t\t\tCommon.defer( function () {\n\n\t\t\t\t_this.onResize();\n\n\t\t\t} );\n\n\t\t},\n\t\topen: function open() {\n\n\t\t\tthis.closed = false;\n\n\t\t},\n\t\tclose: function close() {\n\n\t\t\tthis.closed = true;\n\n\t\t},\n\t\thide: function hide() {\n\n\t\t\tthis.domElement.style.display = 'none';\n\n\t\t},\n\t\tshow: function show() {\n\n\t\t\tthis.domElement.style.display = '';\n\n\t\t},\n\t\tonResize: function onResize() {\n\n\t\t\tvar root = this.getRoot();\n\t\t\tif ( root.scrollable ) {\n\n\t\t\t\tvar top = dom.getOffset( root.__ul ).top;\n\t\t\t\tvar h = 0;\n\t\t\t\tCommon.each( root.__ul.childNodes, function ( node ) {\n\n\t\t\t\t\tif ( ! ( root.autoPlace && node === root.__save_row ) ) {\n\n\t\t\t\t\t\th += dom.getHeight( node );\n\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\t\t\t\tif ( window.innerHeight - top - CLOSE_BUTTON_HEIGHT < h ) {\n\n\t\t\t\t\tdom.addClass( root.domElement, GUI.CLASS_TOO_TALL );\n\t\t\t\t\troot.__ul.style.height = window.innerHeight - top - CLOSE_BUTTON_HEIGHT + 'px';\n\n\t\t\t\t} else {\n\n\t\t\t\t\tdom.removeClass( root.domElement, GUI.CLASS_TOO_TALL );\n\t\t\t\t\troot.__ul.style.height = 'auto';\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t\tif ( root.__resize_handle ) {\n\n\t\t\t\tCommon.defer( function () {\n\n\t\t\t\t\troot.__resize_handle.style.height = root.__ul.offsetHeight + 'px';\n\n\t\t\t\t} );\n\n\t\t\t}\n\t\t\tif ( root.__closeButton ) {\n\n\t\t\t\troot.__closeButton.style.width = root.width + 'px';\n\n\t\t\t}\n\n\t\t},\n\t\tonResizeDebounced: Common.debounce( function () {\n\n\t\t\tthis.onResize();\n\n\t\t}, 50 ),\n\t\tremember: function remember() {\n\n\t\t\tif ( Common.isUndefined( SAVE_DIALOGUE ) ) {\n\n\t\t\t\tSAVE_DIALOGUE = new CenteredDiv();\n\t\t\t\tSAVE_DIALOGUE.domElement.innerHTML = saveDialogContents;\n\n\t\t\t}\n\t\t\tif ( this.parent ) {\n\n\t\t\t\tthrow new Error( 'You can only call remember on a top level GUI.' );\n\n\t\t\t}\n\t\t\tvar _this = this;\n\t\t\tCommon.each( Array.prototype.slice.call( arguments ), function ( object ) {\n\n\t\t\t\tif ( _this.__rememberedObjects.length === 0 ) {\n\n\t\t\t\t\taddSaveMenu( _this );\n\n\t\t\t\t}\n\t\t\t\tif ( _this.__rememberedObjects.indexOf( object ) === - 1 ) {\n\n\t\t\t\t\t_this.__rememberedObjects.push( object );\n\n\t\t\t\t}\n\n\t\t\t} );\n\t\t\tif ( this.autoPlace ) {\n\n\t\t\t\tsetWidth( this, this.width );\n\n\t\t\t}\n\n\t\t},\n\t\tgetRoot: function getRoot() {\n\n\t\t\tvar gui = this;\n\t\t\twhile ( gui.parent ) {\n\n\t\t\t\tgui = gui.parent;\n\n\t\t\t}\n\t\t\treturn gui;\n\n\t\t},\n\t\tgetSaveObject: function getSaveObject() {\n\n\t\t\tvar toReturn = this.load;\n\t\t\ttoReturn.closed = this.closed;\n\t\t\tif ( this.__rememberedObjects.length > 0 ) {\n\n\t\t\t\ttoReturn.preset = this.preset;\n\t\t\t\tif ( ! toReturn.remembered ) {\n\n\t\t\t\t\ttoReturn.remembered = {};\n\n\t\t\t\t}\n\t\t\t\ttoReturn.remembered[ this.preset ] = getCurrentPreset( this );\n\n\t\t\t}\n\t\t\ttoReturn.folders = {};\n\t\t\tCommon.each( this.__folders, function ( element, key ) {\n\n\t\t\t\ttoReturn.folders[ key ] = element.getSaveObject();\n\n\t\t\t} );\n\t\t\treturn toReturn;\n\n\t\t},\n\t\tsave: function save() {\n\n\t\t\tif ( ! this.load.remembered ) {\n\n\t\t\t\tthis.load.remembered = {};\n\n\t\t\t}\n\t\t\tthis.load.remembered[ this.preset ] = getCurrentPreset( this );\n\t\t\tmarkPresetModified( this, false );\n\t\t\tthis.saveToLocalStorageIfPossible();\n\n\t\t},\n\t\tsaveAs: function saveAs( presetName ) {\n\n\t\t\tif ( ! this.load.remembered ) {\n\n\t\t\t\tthis.load.remembered = {};\n\t\t\t\tthis.load.remembered[ DEFAULT_DEFAULT_PRESET_NAME ] = getCurrentPreset( this, true );\n\n\t\t\t}\n\t\t\tthis.load.remembered[ presetName ] = getCurrentPreset( this );\n\t\t\tthis.preset = presetName;\n\t\t\taddPresetOption( this, presetName, true );\n\t\t\tthis.saveToLocalStorageIfPossible();\n\n\t\t},\n\t\trevert: function revert( gui ) {\n\n\t\t\tCommon.each( this.__controllers, function ( controller ) {\n\n\t\t\t\tif ( ! this.getRoot().load.remembered ) {\n\n\t\t\t\t\tcontroller.setValue( controller.initialValue );\n\n\t\t\t\t} else {\n\n\t\t\t\t\trecallSavedValue( gui || this.getRoot(), controller );\n\n\t\t\t\t}\n\t\t\t\tif ( controller.__onFinishChange ) {\n\n\t\t\t\t\tcontroller.__onFinishChange.call( controller, controller.getValue() );\n\n\t\t\t\t}\n\n\t\t\t}, this );\n\t\t\tCommon.each( this.__folders, function ( folder ) {\n\n\t\t\t\tfolder.revert( folder );\n\n\t\t\t} );\n\t\t\tif ( ! gui ) {\n\n\t\t\t\tmarkPresetModified( this.getRoot(), false );\n\n\t\t\t}\n\n\t\t},\n\t\tlisten: function listen( controller ) {\n\n\t\t\tvar init = this.__listening.length === 0;\n\t\t\tthis.__listening.push( controller );\n\t\t\tif ( init ) {\n\n\t\t\t\tupdateDisplays( this.__listening );\n\n\t\t\t}\n\n\t\t},\n\t\tupdateDisplay: function updateDisplay() {\n\n\t\t\tCommon.each( this.__controllers, function ( controller ) {\n\n\t\t\t\tcontroller.updateDisplay();\n\n\t\t\t} );\n\t\t\tCommon.each( this.__folders, function ( folder ) {\n\n\t\t\t\tfolder.updateDisplay();\n\n\t\t\t} );\n\n\t\t}\n\t} );\nfunction addRow( gui, newDom, liBefore ) {\n\n\tvar li = document.createElement( 'li' );\n\tif ( newDom ) {\n\n\t\tli.appendChild( newDom );\n\n\t}\n\tif ( liBefore ) {\n\n\t\tgui.__ul.insertBefore( li, liBefore );\n\n\t} else {\n\n\t\tgui.__ul.appendChild( li );\n\n\t}\n\tgui.onResize();\n\treturn li;\n\n}\nfunction removeListeners( gui ) {\n\n\tdom.unbind( window, 'resize', gui.__resizeHandler );\n\tif ( gui.saveToLocalStorageIfPossible ) {\n\n\t\tdom.unbind( window, 'unload', gui.saveToLocalStorageIfPossible );\n\n\t}\n\n}\nfunction markPresetModified( gui, modified ) {\n\n\tvar opt = gui.__preset_select[ gui.__preset_select.selectedIndex ];\n\tif ( modified ) {\n\n\t\topt.innerHTML = opt.value + '*';\n\n\t} else {\n\n\t\topt.innerHTML = opt.value;\n\n\t}\n\n}\nfunction augmentController( gui, li, controller ) {\n\n\tcontroller.__li = li;\n\tcontroller.__gui = gui;\n\tCommon.extend( controller, {\n\t\toptions: function options( _options ) {\n\n\t\t\tif ( arguments.length > 1 ) {\n\n\t\t\t\tvar nextSibling = controller.__li.nextElementSibling;\n\t\t\t\tcontroller.remove();\n\t\t\t\treturn _add( gui, controller.object, controller.property, {\n\t\t\t\t\tbefore: nextSibling,\n\t\t\t\t\tfactoryArgs: [ Common.toArray( arguments ) ]\n\t\t\t\t} );\n\n\t\t\t}\n\t\t\tif ( Common.isArray( _options ) || Common.isObject( _options ) ) {\n\n\t\t\t\tvar _nextSibling = controller.__li.nextElementSibling;\n\t\t\t\tcontroller.remove();\n\t\t\t\treturn _add( gui, controller.object, controller.property, {\n\t\t\t\t\tbefore: _nextSibling,\n\t\t\t\t\tfactoryArgs: [ _options ]\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t},\n\t\tname: function name( _name ) {\n\n\t\t\tcontroller.__li.firstElementChild.firstElementChild.innerHTML = _name;\n\t\t\treturn controller;\n\n\t\t},\n\t\tlisten: function listen() {\n\n\t\t\tcontroller.__gui.listen( controller );\n\t\t\treturn controller;\n\n\t\t},\n\t\tremove: function remove() {\n\n\t\t\tcontroller.__gui.remove( controller );\n\t\t\treturn controller;\n\n\t\t}\n\t} );\n\tif ( controller instanceof NumberControllerSlider ) {\n\n\t\tvar box = new NumberControllerBox( controller.object, controller.property, { min: controller.__min, max: controller.__max, step: controller.__step } );\n\t\tCommon.each( [ 'updateDisplay', 'onChange', 'onFinishChange', 'step', 'min', 'max' ], function ( method ) {\n\n\t\t\tvar pc = controller[ method ];\n\t\t\tvar pb = box[ method ];\n\t\t\tcontroller[ method ] = box[ method ] = function () {\n\n\t\t\t\tvar args = Array.prototype.slice.call( arguments );\n\t\t\t\tpb.apply( box, args );\n\t\t\t\treturn pc.apply( controller, args );\n\n\t\t\t};\n\n\t\t} );\n\t\tdom.addClass( li, 'has-slider' );\n\t\tcontroller.domElement.insertBefore( box.domElement, controller.domElement.firstElementChild );\n\n\t} else if ( controller instanceof NumberControllerBox ) {\n\n\t\tvar r = function r( returned ) {\n\n\t\t\tif ( Common.isNumber( controller.__min ) && Common.isNumber( controller.__max ) ) {\n\n\t\t\t\tvar oldName = controller.__li.firstElementChild.firstElementChild.innerHTML;\n\t\t\t\tvar wasListening = controller.__gui.__listening.indexOf( controller ) > - 1;\n\t\t\t\tcontroller.remove();\n\t\t\t\tvar newController = _add( gui, controller.object, controller.property, {\n\t\t\t\t\tbefore: controller.__li.nextElementSibling,\n\t\t\t\t\tfactoryArgs: [ controller.__min, controller.__max, controller.__step ]\n\t\t\t\t} );\n\t\t\t\tnewController.name( oldName );\n\t\t\t\tif ( wasListening ) newController.listen();\n\t\t\t\treturn newController;\n\n\t\t\t}\n\t\t\treturn returned;\n\n\t\t};\n\t\tcontroller.min = Common.compose( r, controller.min );\n\t\tcontroller.max = Common.compose( r, controller.max );\n\n\t} else if ( controller instanceof BooleanController ) {\n\n\t\tdom.bind( li, 'click', function () {\n\n\t\t\tdom.fakeEvent( controller.__checkbox, 'click' );\n\n\t\t} );\n\t\tdom.bind( controller.__checkbox, 'click', function ( e ) {\n\n\t\t\te.stopPropagation();\n\n\t\t} );\n\n\t} else if ( controller instanceof FunctionController ) {\n\n\t\tdom.bind( li, 'click', function () {\n\n\t\t\tdom.fakeEvent( controller.__button, 'click' );\n\n\t\t} );\n\t\tdom.bind( li, 'mouseover', function () {\n\n\t\t\tdom.addClass( controller.__button, 'hover' );\n\n\t\t} );\n\t\tdom.bind( li, 'mouseout', function () {\n\n\t\t\tdom.removeClass( controller.__button, 'hover' );\n\n\t\t} );\n\n\t} else if ( controller instanceof ColorController ) {\n\n\t\tdom.addClass( li, 'color' );\n\t\tcontroller.updateDisplay = Common.compose( function ( val ) {\n\n\t\t\tli.style.borderLeftColor = controller.__color.toString();\n\t\t\treturn val;\n\n\t\t}, controller.updateDisplay );\n\t\tcontroller.updateDisplay();\n\n\t}\n\tcontroller.setValue = Common.compose( function ( val ) {\n\n\t\tif ( gui.getRoot().__preset_select && controller.isModified() ) {\n\n\t\t\tmarkPresetModified( gui.getRoot(), true );\n\n\t\t}\n\t\treturn val;\n\n\t}, controller.setValue );\n\n}\nfunction recallSavedValue( gui, controller ) {\n\n\tvar root = gui.getRoot();\n\tvar matchedIndex = root.__rememberedObjects.indexOf( controller.object );\n\tif ( matchedIndex !== - 1 ) {\n\n\t\tvar controllerMap = root.__rememberedObjectIndecesToControllers[ matchedIndex ];\n\t\tif ( controllerMap === undefined ) {\n\n\t\t\tcontrollerMap = {};\n\t\t\troot.__rememberedObjectIndecesToControllers[ matchedIndex ] = controllerMap;\n\n\t\t}\n\t\tcontrollerMap[ controller.property ] = controller;\n\t\tif ( root.load && root.load.remembered ) {\n\n\t\t\tvar presetMap = root.load.remembered;\n\t\t\tvar preset = void 0;\n\t\t\tif ( presetMap[ gui.preset ] ) {\n\n\t\t\t\tpreset = presetMap[ gui.preset ];\n\n\t\t\t} else if ( presetMap[ DEFAULT_DEFAULT_PRESET_NAME ] ) {\n\n\t\t\t\tpreset = presetMap[ DEFAULT_DEFAULT_PRESET_NAME ];\n\n\t\t\t} else {\n\n\t\t\t\treturn;\n\n\t\t\t}\n\t\t\tif ( preset[ matchedIndex ] && preset[ matchedIndex ][ controller.property ] !== undefined ) {\n\n\t\t\t\tvar value = preset[ matchedIndex ][ controller.property ];\n\t\t\t\tcontroller.initialValue = value;\n\t\t\t\tcontroller.setValue( value );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n}\nfunction _add( gui, object, property, params ) {\n\n\tif ( object[ property ] === undefined ) {\n\n\t\tthrow new Error( 'Object \"' + object + '\" has no property \"' + property + '\"' );\n\n\t}\n\tvar controller = void 0;\n\tif ( params.color ) {\n\n\t\tcontroller = new ColorController( object, property );\n\n\t} else {\n\n\t\tvar factoryArgs = [ object, property ].concat( params.factoryArgs );\n\t\tcontroller = ControllerFactory.apply( gui, factoryArgs );\n\n\t}\n\tif ( params.before instanceof Controller ) {\n\n\t\tparams.before = params.before.__li;\n\n\t}\n\trecallSavedValue( gui, controller );\n\tdom.addClass( controller.domElement, 'c' );\n\tvar name = document.createElement( 'span' );\n\tdom.addClass( name, 'property-name' );\n\tname.innerHTML = controller.property;\n\tvar container = document.createElement( 'div' );\n\tcontainer.appendChild( name );\n\tcontainer.appendChild( controller.domElement );\n\tvar li = addRow( gui, container, params.before );\n\tdom.addClass( li, GUI.CLASS_CONTROLLER_ROW );\n\tif ( controller instanceof ColorController ) {\n\n\t\tdom.addClass( li, 'color' );\n\n\t} else {\n\n\t\tdom.addClass( li, _typeof( controller.getValue() ) );\n\n\t}\n\taugmentController( gui, li, controller );\n\tgui.__controllers.push( controller );\n\treturn controller;\n\n}\nfunction getLocalStorageHash( gui, key ) {\n\n\treturn document.location.href + '.' + key;\n\n}\nfunction addPresetOption( gui, name, setSelected ) {\n\n\tvar opt = document.createElement( 'option' );\n\topt.innerHTML = name;\n\topt.value = name;\n\tgui.__preset_select.appendChild( opt );\n\tif ( setSelected ) {\n\n\t\tgui.__preset_select.selectedIndex = gui.__preset_select.length - 1;\n\n\t}\n\n}\nfunction showHideExplain( gui, explain ) {\n\n\texplain.style.display = gui.useLocalStorage ? 'block' : 'none';\n\n}\nfunction addSaveMenu( gui ) {\n\n\tvar div = gui.__save_row = document.createElement( 'li' );\n\tdom.addClass( gui.domElement, 'has-save' );\n\tgui.__ul.insertBefore( div, gui.__ul.firstChild );\n\tdom.addClass( div, 'save-row' );\n\tvar gears = document.createElement( 'span' );\n\tgears.innerHTML = '&nbsp;';\n\tdom.addClass( gears, 'button gears' );\n\tvar button = document.createElement( 'span' );\n\tbutton.innerHTML = 'Save';\n\tdom.addClass( button, 'button' );\n\tdom.addClass( button, 'save' );\n\tvar button2 = document.createElement( 'span' );\n\tbutton2.innerHTML = 'New';\n\tdom.addClass( button2, 'button' );\n\tdom.addClass( button2, 'save-as' );\n\tvar button3 = document.createElement( 'span' );\n\tbutton3.innerHTML = 'Revert';\n\tdom.addClass( button3, 'button' );\n\tdom.addClass( button3, 'revert' );\n\tvar select = gui.__preset_select = document.createElement( 'select' );\n\tif ( gui.load && gui.load.remembered ) {\n\n\t\tCommon.each( gui.load.remembered, function ( value, key ) {\n\n\t\t\taddPresetOption( gui, key, key === gui.preset );\n\n\t\t} );\n\n\t} else {\n\n\t\taddPresetOption( gui, DEFAULT_DEFAULT_PRESET_NAME, false );\n\n\t}\n\tdom.bind( select, 'change', function () {\n\n\t\tfor ( var index = 0; index < gui.__preset_select.length; index ++ ) {\n\n\t\t\tgui.__preset_select[ index ].innerHTML = gui.__preset_select[ index ].value;\n\n\t\t}\n\t\tgui.preset = this.value;\n\n\t} );\n\tdiv.appendChild( select );\n\tdiv.appendChild( gears );\n\tdiv.appendChild( button );\n\tdiv.appendChild( button2 );\n\tdiv.appendChild( button3 );\n\tif ( SUPPORTS_LOCAL_STORAGE ) {\n\n\t\tvar explain = document.getElementById( 'dg-local-explain' );\n\t\tvar localStorageCheckBox = document.getElementById( 'dg-local-storage' );\n\t\tvar saveLocally = document.getElementById( 'dg-save-locally' );\n\t\tsaveLocally.style.display = 'block';\n\t\tif ( localStorage.getItem( getLocalStorageHash( gui, 'isLocal' ) ) === 'true' ) {\n\n\t\t\tlocalStorageCheckBox.setAttribute( 'checked', 'checked' );\n\n\t\t}\n\t\tshowHideExplain( gui, explain );\n\t\tdom.bind( localStorageCheckBox, 'change', function () {\n\n\t\t\tgui.useLocalStorage = ! gui.useLocalStorage;\n\t\t\tshowHideExplain( gui, explain );\n\n\t\t} );\n\n\t}\n\tvar newConstructorTextArea = document.getElementById( 'dg-new-constructor' );\n\tdom.bind( newConstructorTextArea, 'keydown', function ( e ) {\n\n\t\tif ( e.metaKey && ( e.which === 67 || e.keyCode === 67 ) ) {\n\n\t\t\tSAVE_DIALOGUE.hide();\n\n\t\t}\n\n\t} );\n\tdom.bind( gears, 'click', function () {\n\n\t\tnewConstructorTextArea.innerHTML = JSON.stringify( gui.getSaveObject(), undefined, 2 );\n\t\tSAVE_DIALOGUE.show();\n\t\tnewConstructorTextArea.focus();\n\t\tnewConstructorTextArea.select();\n\n\t} );\n\tdom.bind( button, 'click', function () {\n\n\t\tgui.save();\n\n\t} );\n\tdom.bind( button2, 'click', function () {\n\n\t\tvar presetName = prompt( 'Enter a new preset name.' );\n\t\tif ( presetName ) {\n\n\t\t\tgui.saveAs( presetName );\n\n\t\t}\n\n\t} );\n\tdom.bind( button3, 'click', function () {\n\n\t\tgui.revert();\n\n\t} );\n\n}\nfunction addResizeHandle( gui ) {\n\n\tvar pmouseX = void 0;\n\tgui.__resize_handle = document.createElement( 'div' );\n\tCommon.extend( gui.__resize_handle.style, {\n\t\twidth: '6px',\n\t\tmarginLeft: '-3px',\n\t\theight: '200px',\n\t\tcursor: 'ew-resize',\n\t\tposition: 'absolute'\n\t} );\n\tfunction drag( e ) {\n\n\t\te.preventDefault();\n\t\tgui.width += pmouseX - e.clientX;\n\t\tgui.onResize();\n\t\tpmouseX = e.clientX;\n\t\treturn false;\n\n\t}\n\tfunction dragStop() {\n\n\t\tdom.removeClass( gui.__closeButton, GUI.CLASS_DRAG );\n\t\tdom.unbind( window, 'mousemove', drag );\n\t\tdom.unbind( window, 'mouseup', dragStop );\n\n\t}\n\tfunction dragStart( e ) {\n\n\t\te.preventDefault();\n\t\tpmouseX = e.clientX;\n\t\tdom.addClass( gui.__closeButton, GUI.CLASS_DRAG );\n\t\tdom.bind( window, 'mousemove', drag );\n\t\tdom.bind( window, 'mouseup', dragStop );\n\t\treturn false;\n\n\t}\n\tdom.bind( gui.__resize_handle, 'mousedown', dragStart );\n\tdom.bind( gui.__closeButton, 'mousedown', dragStart );\n\tgui.domElement.insertBefore( gui.__resize_handle, gui.domElement.firstElementChild );\n\n}\nfunction setWidth( gui, w ) {\n\n\tgui.domElement.style.width = w + 'px';\n\tif ( gui.__save_row && gui.autoPlace ) {\n\n\t\tgui.__save_row.style.width = w + 'px';\n\n\t}\n\tif ( gui.__closeButton ) {\n\n\t\tgui.__closeButton.style.width = w + 'px';\n\n\t}\n\n}\nfunction getCurrentPreset( gui, useInitialValues ) {\n\n\tvar toReturn = {};\n\tCommon.each( gui.__rememberedObjects, function ( val, index ) {\n\n\t\tvar savedValues = {};\n\t\tvar controllerMap = gui.__rememberedObjectIndecesToControllers[ index ];\n\t\tCommon.each( controllerMap, function ( controller, property ) {\n\n\t\t\tsavedValues[ property ] = useInitialValues ? controller.initialValue : controller.getValue();\n\n\t\t} );\n\t\ttoReturn[ index ] = savedValues;\n\n\t} );\n\treturn toReturn;\n\n}\nfunction setPresetSelectIndex( gui ) {\n\n\tfor ( var index = 0; index < gui.__preset_select.length; index ++ ) {\n\n\t\tif ( gui.__preset_select[ index ].value === gui.preset ) {\n\n\t\t\tgui.__preset_select.selectedIndex = index;\n\n\t\t}\n\n\t}\n\n}\nfunction updateDisplays( controllerArray ) {\n\n\tif ( controllerArray.length !== 0 ) {\n\n\t\trequestAnimationFrame$1.call( window, function () {\n\n\t\t\tupdateDisplays( controllerArray );\n\n\t\t} );\n\n\t}\n\tCommon.each( controllerArray, function ( c ) {\n\n\t\tc.updateDisplay();\n\n\t} );\n\n}\n\nvar color = {\n\tColor: Color,\n\tmath: ColorMath,\n\tinterpret: interpret\n};\nvar controllers = {\n\tController: Controller,\n\tBooleanController: BooleanController,\n\tOptionController: OptionController,\n\tStringController: StringController,\n\tNumberController: NumberController,\n\tNumberControllerBox: NumberControllerBox,\n\tNumberControllerSlider: NumberControllerSlider,\n\tFunctionController: FunctionController,\n\tColorController: ColorController\n};\nvar dom$1 = { dom: dom };\nvar gui = { GUI: GUI };\nvar GUI$1 = GUI;\nvar index = {\n\tcolor: color,\n\tcontrollers: controllers,\n\tdom: dom$1,\n\tgui: gui,\n\tGUI: GUI$1\n};\n\nexport { color, controllers, dom$1 as dom, gui, GUI$1 as GUI };\nexport default index;\n"]}]}