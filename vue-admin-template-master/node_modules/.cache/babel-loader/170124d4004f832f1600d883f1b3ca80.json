{"remainingRequest":"E:\\vue\\vue-admin-template-master\\node_modules\\babel-loader\\lib\\index.js!E:\\vue\\vue-admin-template-master\\node_modules\\eslint-loader\\index.js??ref--13-0!E:\\vue\\vue-admin-template-master\\src\\lib\\EventManager.js","dependencies":[{"path":"E:\\vue\\vue-admin-template-master\\src\\lib\\EventManager.js","mtime":1651482580192},{"path":"E:\\vue\\vue-admin-template-master\\babel.config.js","mtime":1637248914000},{"path":"E:\\vue\\vue-admin-template-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\vue\\vue-admin-template-master\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"E:\\vue\\vue-admin-template-master\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jcmVhdGVDbGFzcyBmcm9tICJFOi92dWUvdnVlLWFkbWluLXRlbXBsYXRlLW1hc3Rlci9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlQ2xhc3MuanMiOwppbXBvcnQgX2NsYXNzQ2FsbENoZWNrIGZyb20gIkU6L3Z1ZS92dWUtYWRtaW4tdGVtcGxhdGUtbWFzdGVyL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jbGFzc0NhbGxDaGVjay5qcyI7CmltcG9ydCBfaW5oZXJpdHMgZnJvbSAiRTovdnVlL3Z1ZS1hZG1pbi10ZW1wbGF0ZS1tYXN0ZXIvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2luaGVyaXRzLmpzIjsKaW1wb3J0IF9jcmVhdGVTdXBlciBmcm9tICJFOi92dWUvdnVlLWFkbWluLXRlbXBsYXRlLW1hc3Rlci9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlU3VwZXIuanMiOwppbXBvcnQgeyBWZWN0b3IyIH0gZnJvbSAidGhyZWUiOwppbXBvcnQgeyBSYXljYXN0ZXIgfSBmcm9tICJ0aHJlZSI7CmltcG9ydCB7IEV2ZW50RGlzcGF0Y2hlciB9IGZyb20gInRocmVlIjsKaW1wb3J0IHsgSW50ZXJzZWN0aW9uIH0gZnJvbSAidGhyZWUiOyAvL+S6i+S7tuWkhOeQhuWFqOWxgOacuuWItgoKdmFyIEV2ZW50TWFuYWdlciA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX0V2ZW50RGlzcGF0Y2hlcikgewogIF9pbmhlcml0cyhFdmVudE1hbmFnZXIsIF9FdmVudERpc3BhdGNoZXIpOwoKICB2YXIgX3N1cGVyID0gX2NyZWF0ZVN1cGVyKEV2ZW50TWFuYWdlcik7CgogIGZ1bmN0aW9uIEV2ZW50TWFuYWdlcihkb20sIHNjZW5lLCBjYW1lcmEsIG9ianMpIHsKICAgIHZhciBfdGhpczsKCiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgRXZlbnRNYW5hZ2VyKTsKCiAgICBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpOwogICAgdmFyIHJheWNhc3RlciA9IG5ldyBSYXljYXN0ZXIoKTsKICAgIHZhciBtb3VzZSA9IG5ldyBWZWN0b3IyKCk7CiAgICB2YXIgY2FjaGVvYmplY3RzID0gbnVsbDsKICAgIF90aGlzLmRvbSA9IGRvbTsKICAgIF90aGlzLnNjZW5lID0gc2NlbmU7CiAgICBfdGhpcy5jYW1lcmEgPSBjYW1lcmE7CiAgICBfdGhpcy5vYmpzID0gb2JqczsKICAgIGRvbS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgcmF5Y2FzdGVyLnNldEZyb21DYW1lcmEobW91c2UsIGNhbWVyYSk7IC8v6Ziy5q2i5o6n5Yi25Zmo6KKr6YCJ5LitCiAgICAgIC8vIHNjZW5lLnJlbW92ZSh0cmFuc2Zvcm1Db250cm9sKTsKCiAgICAgIHZhciBpbnRlcnNlY3Rpb24gPSByYXljYXN0ZXIuaW50ZXJzZWN0T2JqZWN0cyhzY2VuZS5jaGlsZHJlbiwgZmFsc2UpOyAvL+aKiuaJgOacieaciWNoaWxkcmVu55qE5bGP6JS95o6J77yM5Y+v5Lul6Ziy5q2i5a+5aGVscGVy6L+b6KGM5o6n5Yi2CiAgICAgIC8vIHNjZW5lLmFkZCh0cmFuc2Zvcm1Db250cm9sKTsKCiAgICAgIF90aGlzLmRpc3BhdGNoRXZlbnQoewogICAgICAgIHR5cGU6ICdtb3VzZWRvd24nLAogICAgICAgIGludGVyc2VjdGlvbjogaW50ZXJzZWN0aW9uCiAgICAgIH0pOwoKICAgICAgaWYgKGludGVyc2VjdGlvbi5sZW5ndGgpIHsKICAgICAgICB2YXIgb2JqZWN0ID0gaW50ZXJzZWN0aW9uWzBdLm9iamVjdDsKICAgICAgICBvYmplY3QuZGlzcGF0Y2hFdmVudCh7CiAgICAgICAgICB0eXBlOiAnbW91c2Vkb3duJwogICAgICAgIH0pOyAvLyB0cmFuc2Zvcm1Db250cm9sLmF0dGFjaChvYmplY3QpOwogICAgICB9CiAgICB9KTsKICAgIGRvbS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgIHJheWNhc3Rlci5zZXRGcm9tQ2FtZXJhKG1vdXNlLCBfdGhpcy5jYW1lcmEpOyAvL+mYsuatouaOp+WItuWZqOiiq+mAieS4rQogICAgICAvLyBzY2VuZS5yZW1vdmUodHJhbnNmb3JtQ29udHJvbCk7CgogICAgICB2YXIgaW50ZXJzZWN0aW9uID0gcmF5Y2FzdGVyLmludGVyc2VjdE9iamVjdHMoc2NlbmUuY2hpbGRyZW4sIGZhbHNlKTsgLy/miormiYDmnInmnIljaGlsZHJlbueahOWxj+iUveaOie+8jOWPr+S7pemYsuatouWvuWhlbHBlcui/m+ihjOaOp+WItgogICAgICAvLyBzY2VuZS5hZGQodHJhbnNmb3JtQ29udHJvbCk7CgogICAgICBfdGhpcy5kaXNwYXRjaEV2ZW50KHsKICAgICAgICB0eXBlOiAnbW91c2V1cCcsCiAgICAgICAgaW50ZXJzZWN0aW9uOiBpbnRlcnNlY3Rpb24KICAgICAgfSk7CgogICAgICBpZiAoaW50ZXJzZWN0aW9uLmxlbmd0aCkgewogICAgICAgIHZhciBvYmplY3QgPSBpbnRlcnNlY3Rpb25bMF0ub2JqZWN0OwogICAgICAgIG9iamVjdC5kaXNwYXRjaEV2ZW50KHsKICAgICAgICAgIHR5cGU6ICdtb3VzZXVwJwogICAgICAgIH0pOyAvLyB0cmFuc2Zvcm1Db250cm9sLmF0dGFjaChvYmplY3QpOwogICAgICB9CiAgICB9KTsKICAgIGRvbS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgLy9jb25zb2xlLmxvZyhldmVudC5vZmZzZXRYLGV2ZW50Lm9mZnNldFkpOwogICAgICBtb3VzZS54ID0gZXZlbnQub2Zmc2V0WCAvIGRvbS5vZmZzZXRXaWR0aCAqIDIgLSAxOwogICAgICBtb3VzZS55ID0gLWV2ZW50Lm9mZnNldFkgKiAyIC8gZG9tLm9mZnNldEhlaWdodCArIDE7IC8vIGNvbnNvbGUubG9nKG1vdXNlLngsbW91c2UueSk7CgogICAgICByYXljYXN0ZXIuc2V0RnJvbUNhbWVyYShtb3VzZSwgY2FtZXJhKTsgLy/pmLLmraLmjqfliLblmajooqvpgInkuK0KICAgICAgLy8gc2NlbmUucmVtb3ZlKHRyYW5zZm9ybUNvbnRyb2wpOwoKICAgICAgdmFyIGludGVyc2VjdGlvbiA9IHJheWNhc3Rlci5pbnRlcnNlY3RPYmplY3RzKG9ianMsIHRydWUpOyAvL+aKiuaJgOacieaciWNoaWxkcmVu55qE5bGP6JS95o6J77yM5Y+v5Lul6Ziy5q2i5a+5aGVscGVy6L+b6KGM5o6n5Yi2CiAgICAgIC8vIHNjZW5lLmFkZCh0cmFuc2Zvcm1Db250cm9sKTsKCiAgICAgIF90aGlzLmRpc3BhdGNoRXZlbnQoewogICAgICAgIHR5cGU6ICdtb3VzZW1vdmUnLAogICAgICAgIGludGVyc2VjdGlvbjogaW50ZXJzZWN0aW9uCiAgICAgIH0pOwoKICAgICAgaWYgKGludGVyc2VjdGlvbi5sZW5ndGgpIHsKICAgICAgICAvL+WmguaenOaLvuWPluWIsOadkOi0qOeJqeS9kwogICAgICAgIHZhciBvYmplY3QgPSBpbnRlcnNlY3Rpb25bMF0ub2JqZWN0OyAvL+WmguaenOW9k+S4i+eJqeS9k+S4jeaYr+S4iuasoee8k+WtmOeJqeS9k++8jOivtOaYjuaYr+S7juS4jeWQjOeJqeS9k+S4iuenu+WIsOW9k+WJjeeJqeS9k+S4iuinpuWPkW1vdXNlZW50ZXLkuovku7YKCiAgICAgICAgaWYgKG9iamVjdCAhPSBjYWNoZW9iamVjdHMpIHsKICAgICAgICAgIGlmIChjYWNoZW9iamVjdHMpIHsKICAgICAgICAgICAgLy/lvZPpvKDmoIfku47kuIDkuKrniankvZPnp7vliqjliLDlj6bkuIDkuKrniankvZPml7bvvIzlhYjop6blj5HkuYvliY3nvJPlrZjniankvZPnmoRtb3VzZWxlYXZl5pa55rOVCiAgICAgICAgICAgIC8v5YaN6Kem5Y+R5b2T5YmN54mp5L2T55qEbW91c2VlbnRlcuaWueazlQogICAgICAgICAgICBjYWNoZW9iamVjdHMuZGlzcGF0Y2hFdmVudCh7CiAgICAgICAgICAgICAgdHlwZTogJ21vdXNlbGVhdmUnCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQoKICAgICAgICAgIG9iamVjdC5kaXNwYXRjaEV2ZW50KHsKICAgICAgICAgICAgdHlwZTogJ21vdXNlZW50ZXInCiAgICAgICAgICB9KTsKICAgICAgICB9IC8v5aaC5p6c55u4562J6Kem5Y+RbW91c2Vtb3Zl5pa55rOV5b6X5Yiw54mp5L2T5Z2Q5qCHKOm8oOagh+S4gOebtOWcqOeJqeS9k+S4iuenu+WKqCkKICAgICAgICBlbHNlIGlmIChvYmplY3QgPT0gY2FjaGVvYmplY3RzKSB7CiAgICAgICAgICBvYmplY3QuZGlzcGF0Y2hFdmVudCh7CiAgICAgICAgICAgIHR5cGU6ICdtb3VzZW1vdmUnCiAgICAgICAgICB9KTsKICAgICAgICB9CgogICAgICAgIGNhY2hlb2JqZWN0cyA9IG9iamVjdDsKICAgICAgfSBlbHNlIHsKICAgICAgICAvL+W9k+m8oOagh+S7juS4gOS4queJqeS9k+enu+WKqOWIsOWwhOe6v+aLvuWPluWZqOaLvuWPluS4jeWIsOeJqeS9k+aXtuS5n+S8muinpuWPkeS5i+WJjeeahOeJqeS9k+eahG1vdXNlbGVhdmXmlrnms5UKICAgICAgICBpZiAoY2FjaGVvYmplY3RzKSB7CiAgICAgICAgICAvL+W9k+m8oOagh+S7juS4gOS4queJqeS9k+enu+WKqOWIsOWPpuS4gOS4queJqeS9k+aXtu+8jOWFiOinpuWPkeS5i+WJjee8k+WtmOeJqeS9k+eahG1vdXNlbGVhdmXmlrnms5UKICAgICAgICAgIC8v5YaN6Kem5Y+R5b2T5YmN54mp5L2T55qEbW91c2VlbnRlcuaWueazlQogICAgICAgICAgY2FjaGVvYmplY3RzLmRpc3BhdGNoRXZlbnQoewogICAgICAgICAgICB0eXBlOiAnbW91c2VsZWF2ZScKICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgY2FjaGVvYmplY3RzID0gbnVsbDsKICAgICAgfQogICAgfSk7IC8v54mp5L2T5ou+5Y+W5LqL5Lu25aSE55CGCgogICAgZG9tLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgIC8vIGlmKHRyYW5zaW5nKXsKICAgICAgLy8gICAgIHRyYW5zaW5nPWZhbHNlOwogICAgICAvLyAgICAgcmV0dXJuIGZhbHNlOwogICAgICAvLyB9CiAgICAgIHJheWNhc3Rlci5zZXRGcm9tQ2FtZXJhKG1vdXNlLCBjYW1lcmEpOyAvL+mYsuatouaOp+WItuWZqOiiq+mAieS4rQogICAgICAvLyBzY2VuZS5yZW1vdmUodHJhbnNmb3JtQ29udHJvbCk7CgogICAgICB2YXIgaW50ZXJzZWN0aW9uID0gcmF5Y2FzdGVyLmludGVyc2VjdE9iamVjdHMob2JqcywgdHJ1ZSk7CiAgICAgIGNvbnNvbGUubG9nKGludGVyc2VjdGlvbik7IC8v5oqK5omA5pyJ5pyJY2hpbGRyZW7nmoTlsY/olL3mjonvvIzlj6/ku6XpmLLmraLlr7loZWxwZXLov5vooYzmjqfliLYKICAgICAgLy8gc2NlbmUuYWRkKHRyYW5zZm9ybUNvbnRyb2wpOwoKICAgICAgX3RoaXMuZGlzcGF0Y2hFdmVudCh7CiAgICAgICAgdHlwZTogJ2NsaWNrJywKICAgICAgICBpbnRlcnNlY3Rpb246IGludGVyc2VjdGlvbgogICAgICB9KTsKCiAgICAgIGlmIChpbnRlcnNlY3Rpb24ubGVuZ3RoKSB7CiAgICAgICAgdmFyIG9iamVjdCA9IGludGVyc2VjdGlvblswXS5vYmplY3Q7CiAgICAgICAgb2JqZWN0LmRpc3BhdGNoRXZlbnQoewogICAgICAgICAgdHlwZTogJ2NsaWNrJwogICAgICAgIH0pOyAvLyB0cmFuc2Zvcm1Db250cm9sLmF0dGFjaChvYmplY3QpOwogICAgICB9CiAgICB9KTsKICAgIHJldHVybiBfdGhpczsKICB9CgogIHJldHVybiBfY3JlYXRlQ2xhc3MoRXZlbnRNYW5hZ2VyKTsKfShFdmVudERpc3BhdGNoZXIpOwoKZXhwb3J0IHsgRXZlbnRNYW5hZ2VyIH07"},{"version":3,"sources":["E:/vue/vue-admin-template-master/src/lib/EventManager.js"],"names":["Vector2","Raycaster","EventDispatcher","Intersection","EventManager","dom","scene","camera","objs","raycaster","mouse","cacheobjects","addEventListener","event","setFromCamera","intersection","intersectObjects","children","dispatchEvent","type","length","object","x","offsetX","offsetWidth","y","offsetY","offsetHeight","console","log"],"mappings":"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","sourcesContent":["import { Vector2 } from \"three\";\r\nimport { Raycaster } from \"three\";\r\nimport { EventDispatcher } from \"three\";\r\nimport {Intersection} from \"three\";\r\n\r\n//事件处理全局机制\r\nclass EventManager extends EventDispatcher{\r\n    constructor(dom,scene,camera,objs){\r\n        super();\r\n        let raycaster=new Raycaster();\r\n        let mouse=new Vector2();\r\n        let cacheobjects=null;\r\n        this.dom=dom;\r\n        this.scene=scene;\r\n        this.camera=camera;\r\n        this.objs=objs;\r\n        dom.addEventListener('mousedown',(event)=>{\r\n            raycaster.setFromCamera(mouse,camera);\r\n            //防止控制器被选中\r\n            // scene.remove(transformControl);\r\n            const intersection=raycaster.intersectObjects(scene.children,false);\r\n            //把所有有children的屏蔽掉，可以防止对helper进行控制\r\n            // scene.add(transformControl);\r\n            this.dispatchEvent({\r\n                type:'mousedown',\r\n                intersection\r\n            });\r\n            if(intersection.length){\r\n                const object=intersection[0].object;\r\n                object.dispatchEvent({\r\n                    type:'mousedown',\r\n                });\r\n                // transformControl.attach(object);\r\n            }\r\n        });\r\n       dom.addEventListener('mouseup',(event)=>{\r\n            raycaster.setFromCamera(mouse,this.camera);\r\n            //防止控制器被选中\r\n            // scene.remove(transformControl);\r\n            const intersection=raycaster.intersectObjects(scene.children,false);\r\n            //把所有有children的屏蔽掉，可以防止对helper进行控制\r\n            // scene.add(transformControl);\r\n            this.dispatchEvent({\r\n                type:'mouseup',\r\n                intersection\r\n            });\r\n            if(intersection.length){\r\n                const object=intersection[0].object;\r\n                object.dispatchEvent({\r\n                    type:'mouseup',\r\n                });\r\n                // transformControl.attach(object);\r\n            }\r\n        });\r\n\r\n       dom.addEventListener('mousemove',(event)=>{\r\n            //console.log(event.offsetX,event.offsetY);\r\n            mouse.x=(event.offsetX/dom.offsetWidth)*2-1;\r\n            mouse.y=(-event.offsetY*2)/dom.offsetHeight+1;\r\n            // console.log(mouse.x,mouse.y);\r\n            raycaster.setFromCamera(mouse,camera);\r\n            //防止控制器被选中\r\n            // scene.remove(transformControl);\r\n            const intersection=raycaster.intersectObjects(objs,true);\r\n            //把所有有children的屏蔽掉，可以防止对helper进行控制\r\n            // scene.add(transformControl);\r\n            this.dispatchEvent({\r\n                type:'mousemove',\r\n                intersection\r\n            });\r\n            if(intersection.length){\r\n                //如果拾取到材质物体\r\n                const object=intersection[0].object;\r\n                //如果当下物体不是上次缓存物体，说明是从不同物体上移到当前物体上触发mouseenter事件\r\n                if(object!=cacheobjects){\r\n                    if(cacheobjects){\r\n                        //当鼠标从一个物体移动到另一个物体时，先触发之前缓存物体的mouseleave方法\r\n                        //再触发当前物体的mouseenter方法\r\n                        cacheobjects.dispatchEvent({\r\n                    type:'mouseleave'\r\n                });\r\n                    }\r\n                      object.dispatchEvent({\r\n                    type:'mouseenter'\r\n                });\r\n                }//如果相等触发mousemove方法得到物体坐标(鼠标一直在物体上移动)\r\n                else if(object==cacheobjects){\r\n                    object.dispatchEvent({\r\n                    type:'mousemove'\r\n                });\r\n                }\r\n                cacheobjects=object;\r\n            }else{\r\n                //当鼠标从一个物体移动到射线拾取器拾取不到物体时也会触发之前的物体的mouseleave方法\r\n                 if(cacheobjects){\r\n                        //当鼠标从一个物体移动到另一个物体时，先触发之前缓存物体的mouseleave方法\r\n                        //再触发当前物体的mouseenter方法\r\n                        cacheobjects.dispatchEvent({\r\n                    type:'mouseleave'\r\n                });\r\n            }\r\n                cacheobjects=null;\r\n\r\n                \r\n            }  \r\n        });\r\n        //物体拾取事件处理\r\n        dom.addEventListener('click',(event)=>{\r\n            // if(transing){\r\n            //     transing=false;\r\n            //     return false;\r\n            // }\r\n            raycaster.setFromCamera(mouse,camera);\r\n            //防止控制器被选中\r\n            // scene.remove(transformControl);\r\n            const intersection=raycaster.intersectObjects(objs,true);\r\n            console.log(intersection);\r\n            //把所有有children的屏蔽掉，可以防止对helper进行控制\r\n            // scene.add(transformControl);\r\n            this.dispatchEvent({\r\n                type:'click',\r\n                intersection\r\n            });\r\n            if(intersection.length){\r\n                const object=intersection[0].object;\r\n                object.dispatchEvent({\r\n                    type:'click',\r\n                });\r\n                // transformControl.attach(object);\r\n            }\r\n        });\r\n\r\n    }\r\n}\r\nexport {EventManager};"]}]}