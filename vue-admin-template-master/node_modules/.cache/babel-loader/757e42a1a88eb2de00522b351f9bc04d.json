{"remainingRequest":"E:\\wuhanligong-java\\music\\vue-admin-template-master\\node_modules\\babel-loader\\lib\\index.js!E:\\wuhanligong-java\\music\\vue-admin-template-master\\node_modules\\eslint-loader\\index.js??ref--13-0!E:\\wuhanligong-java\\music\\vue-admin-template-master\\src\\lib\\EventManager.js","dependencies":[{"path":"E:\\wuhanligong-java\\music\\vue-admin-template-master\\src\\lib\\EventManager.js","mtime":1652287553743},{"path":"E:\\wuhanligong-java\\music\\vue-admin-template-master\\babel.config.js","mtime":1637248914000},{"path":"E:\\wuhanligong-java\\music\\vue-admin-template-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\wuhanligong-java\\music\\vue-admin-template-master\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"E:\\wuhanligong-java\\music\\vue-admin-template-master\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICJFOi93dWhhbmxpZ29uZy1qYXZhL211c2ljL3Z1ZS1hZG1pbi10ZW1wbGF0ZS1tYXN0ZXIvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NsYXNzQ2FsbENoZWNrLmpzIjsKaW1wb3J0IF9jcmVhdGVDbGFzcyBmcm9tICJFOi93dWhhbmxpZ29uZy1qYXZhL211c2ljL3Z1ZS1hZG1pbi10ZW1wbGF0ZS1tYXN0ZXIvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUNsYXNzLmpzIjsKaW1wb3J0IF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQgZnJvbSAiRTovd3VoYW5saWdvbmctamF2YS9tdXNpYy92dWUtYWRtaW4tdGVtcGxhdGUtbWFzdGVyL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQuanMiOwppbXBvcnQgX2luaGVyaXRzIGZyb20gIkU6L3d1aGFubGlnb25nLWphdmEvbXVzaWMvdnVlLWFkbWluLXRlbXBsYXRlLW1hc3Rlci9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vaW5oZXJpdHMuanMiOwppbXBvcnQgX2NyZWF0ZVN1cGVyIGZyb20gIkU6L3d1aGFubGlnb25nLWphdmEvbXVzaWMvdnVlLWFkbWluLXRlbXBsYXRlLW1hc3Rlci9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlU3VwZXIuanMiOwppbXBvcnQgeyBWZWN0b3IyIH0gZnJvbSAidGhyZWUiOwppbXBvcnQgeyBSYXljYXN0ZXIgfSBmcm9tICJ0aHJlZSI7CmltcG9ydCB7IEV2ZW50RGlzcGF0Y2hlciB9IGZyb20gInRocmVlIjsKaW1wb3J0IHsgSW50ZXJzZWN0aW9uIH0gZnJvbSAidGhyZWUiOyAvL+S6i+S7tuWkhOeQhuWFqOWxgOacuuWItgoKdmFyIF90aGF0OwoKdmFyIEV2ZW50TWFuYWdlciA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX0V2ZW50RGlzcGF0Y2hlcikgewogIF9pbmhlcml0cyhFdmVudE1hbmFnZXIsIF9FdmVudERpc3BhdGNoZXIpOwoKICB2YXIgX3N1cGVyID0gX2NyZWF0ZVN1cGVyKEV2ZW50TWFuYWdlcik7CgogIGZ1bmN0aW9uIEV2ZW50TWFuYWdlcihkb20sIHNjZW5lLCBjYW1lcmEsIG9ianMpIHsKICAgIHZhciBfdGhpczsKCiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgRXZlbnRNYW5hZ2VyKTsKCiAgICBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpOwogICAgX3RoYXQgPSBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKTsKICAgIF90aGlzLnJheWNhc3RlciA9IG5ldyBSYXljYXN0ZXIoKTsKICAgIF90aGlzLm1vdXNlID0gbmV3IFZlY3RvcjIoKTsKICAgIF90aGlzLmNhY2hlb2JqZWN0cyA9IG51bGw7CiAgICBfdGhpcy5kb20gPSBkb207CiAgICBfdGhpcy5zY2VuZSA9IHNjZW5lOwogICAgX3RoaXMuY2FtZXJhID0gY2FtZXJhOwogICAgX3RoaXMub2JqcyA9IG9ianM7CgogICAgX3RoaXMuZG9tLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIF90aGlzLk1vdXNlRG93bik7CgogICAgX3RoaXMuZG9tLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCBfdGhpcy5Nb3VzZVVwKTsKCiAgICBfdGhpcy5kb20uYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgX3RoaXMuTW91c2VNb3ZlKTsgLy/niankvZPmi77lj5bkuovku7blpITnkIYKCgogICAgX3RoaXMuZG9tLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgX3RoaXMuTW91c2VDbGljayk7CgogICAgcmV0dXJuIF90aGlzOwogIH0KCiAgX2NyZWF0ZUNsYXNzKEV2ZW50TWFuYWdlciwgW3sKICAgIGtleTogIk1vdXNlRG93biIsCiAgICB2YWx1ZTogZnVuY3Rpb24gTW91c2VEb3duKGV2ZW50KSB7CiAgICAgIF90aGF0LnJheWNhc3Rlci5zZXRGcm9tQ2FtZXJhKF90aGF0Lm1vdXNlLCBfdGhhdC5jYW1lcmEpOyAvL+mYsuatouaOp+WItuWZqOiiq+mAieS4rQogICAgICAvLyBzY2VuZS5yZW1vdmUodHJhbnNmb3JtQ29udHJvbCk7CgoKICAgICAgdmFyIGludGVyc2VjdGlvbiA9IF90aGF0LnJheWNhc3Rlci5pbnRlcnNlY3RPYmplY3RzKF90aGF0LnNjZW5lLmNoaWxkcmVuLCBmYWxzZSk7IC8v5oqK5omA5pyJ5pyJY2hpbGRyZW7nmoTlsY/olL3mjonvvIzlj6/ku6XpmLLmraLlr7loZWxwZXLov5vooYzmjqfliLYKICAgICAgLy8gc2NlbmUuYWRkKHRyYW5zZm9ybUNvbnRyb2wpOwoKCiAgICAgIF90aGF0LmRpc3BhdGNoRXZlbnQoewogICAgICAgIHR5cGU6ICdtb3VzZWRvd24nLAogICAgICAgIGludGVyc2VjdGlvbjogaW50ZXJzZWN0aW9uCiAgICAgIH0pOwoKICAgICAgaWYgKGludGVyc2VjdGlvbi5sZW5ndGgpIHsKICAgICAgICB2YXIgb2JqZWN0ID0gaW50ZXJzZWN0aW9uWzBdLm9iamVjdDsKICAgICAgICBvYmplY3QuZGlzcGF0Y2hFdmVudCh7CiAgICAgICAgICB0eXBlOiAnbW91c2Vkb3duJwogICAgICAgIH0pOyAvLyB0cmFuc2Zvcm1Db250cm9sLmF0dGFjaChvYmplY3QpOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAiTW91c2VVcCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gTW91c2VVcChldmVudCkgewogICAgICBfdGhhdC5yYXljYXN0ZXIuc2V0RnJvbUNhbWVyYShfdGhhdC5tb3VzZSwgX3RoYXQuY2FtZXJhKTsgLy/pmLLmraLmjqfliLblmajooqvpgInkuK0KICAgICAgLy8gc2NlbmUucmVtb3ZlKHRyYW5zZm9ybUNvbnRyb2wpOwoKCiAgICAgIHZhciBpbnRlcnNlY3Rpb24gPSBfdGhhdC5yYXljYXN0ZXIuaW50ZXJzZWN0T2JqZWN0cyhfdGhhdC5zY2VuZS5jaGlsZHJlbiwgZmFsc2UpOyAvL+aKiuaJgOacieaciWNoaWxkcmVu55qE5bGP6JS95o6J77yM5Y+v5Lul6Ziy5q2i5a+5aGVscGVy6L+b6KGM5o6n5Yi2CiAgICAgIC8vIHNjZW5lLmFkZCh0cmFuc2Zvcm1Db250cm9sKTsKCgogICAgICBfdGhhdC5kaXNwYXRjaEV2ZW50KHsKICAgICAgICB0eXBlOiAnbW91c2V1cCcsCiAgICAgICAgaW50ZXJzZWN0aW9uOiBpbnRlcnNlY3Rpb24KICAgICAgfSk7CgogICAgICBpZiAoaW50ZXJzZWN0aW9uLmxlbmd0aCkgewogICAgICAgIHZhciBvYmplY3QgPSBpbnRlcnNlY3Rpb25bMF0ub2JqZWN0OwogICAgICAgIG9iamVjdC5kaXNwYXRjaEV2ZW50KHsKICAgICAgICAgIHR5cGU6ICdtb3VzZXVwJwogICAgICAgIH0pOyAvLyB0cmFuc2Zvcm1Db250cm9sLmF0dGFjaChvYmplY3QpOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAiTW91c2VNb3ZlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBNb3VzZU1vdmUoZXZlbnQpIHsKICAgICAgdmFyIG5ld29ianMgPSBbXTsKCiAgICAgIGlmIChfdGhhdC5zY2VuZS5jaGlsZHJlbi5sZW5ndGggPiAwKSB7CiAgICAgICAgdmFyIGNoaWxkb2JqOwoKICAgICAgICBmb3IgKHZhciBpID0gX3RoYXQuc2NlbmUuY2hpbGRyZW4ubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHsKICAgICAgICAgIGNoaWxkb2JqID0gX3RoYXQuc2NlbmUuY2hpbGRyZW5baV07CgogICAgICAgICAgaWYgKGNoaWxkb2JqLnR5cGUuaW5kZXhPZignT2JqZWN0M0QnKSAhPSAtMSB8fCBjaGlsZG9iai50eXBlLmluZGV4T2YoJ01lc2gnKSAhPSAtMSB8fCBjaGlsZG9iai50eXBlLmluZGV4T2YoJ0dyb3VwJykgIT0gLTEpIHsKICAgICAgICAgICAgbmV3b2Jqcy5wdXNoKGNoaWxkb2JqKTsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoY2hpbGRvYmoudHlwZS5pbmRleE9mKCdMaWdodCcpICE9IC0xICYmIGNoaWxkb2JqLnR5cGUuaW5kZXhPZignSGVscGVyJykgPT0gLTEpIHsKICAgICAgICAgICAgbmV3b2Jqcy5wdXNoKGNoaWxkb2JqKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0gLy9jb25zb2xlLmxvZyhldmVudC5vZmZzZXRYLGV2ZW50Lm9mZnNldFkpOwoKCiAgICAgIF90aGF0Lm1vdXNlLnggPSBldmVudC5vZmZzZXRYIC8gX3RoYXQuZG9tLm9mZnNldFdpZHRoICogMiAtIDE7CiAgICAgIF90aGF0Lm1vdXNlLnkgPSAtZXZlbnQub2Zmc2V0WSAqIDIgLyBfdGhhdC5kb20ub2Zmc2V0SGVpZ2h0ICsgMTsgLy8gY29uc29sZS5sb2cobW91c2UueCxtb3VzZS55KTsKCiAgICAgIF90aGF0LnJheWNhc3Rlci5zZXRGcm9tQ2FtZXJhKF90aGF0Lm1vdXNlLCBfdGhhdC5jYW1lcmEpOyAvL+mYsuatouaOp+WItuWZqOiiq+mAieS4rQogICAgICAvLyBzY2VuZS5yZW1vdmUodHJhbnNmb3JtQ29udHJvbCk7CgoKICAgICAgdmFyIGludGVyc2VjdGlvbiA9IF90aGF0LnJheWNhc3Rlci5pbnRlcnNlY3RPYmplY3RzKG5ld29ianMsIHRydWUpOyAvL+aKiuaJgOacieaciWNoaWxkcmVu55qE5bGP6JS95o6J77yM5Y+v5Lul6Ziy5q2i5a+5aGVscGVy6L+b6KGM5o6n5Yi2CiAgICAgIC8vIHNjZW5lLmFkZCh0cmFuc2Zvcm1Db250cm9sKTsKCgogICAgICBfdGhhdC5kaXNwYXRjaEV2ZW50KHsKICAgICAgICB0eXBlOiAnbW91c2Vtb3ZlJywKICAgICAgICBpbnRlcnNlY3Rpb246IGludGVyc2VjdGlvbgogICAgICB9KTsKCiAgICAgIGlmIChpbnRlcnNlY3Rpb24ubGVuZ3RoKSB7CiAgICAgICAgLy/lpoLmnpzmi77lj5bliLDmnZDotKjniankvZMKICAgICAgICB2YXIgb2JqZWN0ID0gaW50ZXJzZWN0aW9uWzBdLm9iamVjdDsgLy/lpoLmnpzlvZPkuIvniankvZPkuI3mmK/kuIrmrKHnvJPlrZjniankvZPvvIzor7TmmI7mmK/ku47kuI3lkIzniankvZPkuIrnp7vliLDlvZPliY3niankvZPkuIrop6blj5Ftb3VzZWVudGVy5LqL5Lu2CgogICAgICAgIGlmIChvYmplY3QgIT0gX3RoYXQuY2FjaGVvYmplY3RzKSB7CiAgICAgICAgICBpZiAoX3RoYXQuY2FjaGVvYmplY3RzKSB7CiAgICAgICAgICAgIC8v5b2T6byg5qCH5LuO5LiA5Liq54mp5L2T56e75Yqo5Yiw5Y+m5LiA5Liq54mp5L2T5pe277yM5YWI6Kem5Y+R5LmL5YmN57yT5a2Y54mp5L2T55qEbW91c2VsZWF2ZeaWueazlQogICAgICAgICAgICAvL+WGjeinpuWPkeW9k+WJjeeJqeS9k+eahG1vdXNlZW50ZXLmlrnms5UKICAgICAgICAgICAgX3RoYXQuY2FjaGVvYmplY3RzLmRpc3BhdGNoRXZlbnQoewogICAgICAgICAgICAgIHR5cGU6ICdtb3VzZWxlYXZlJwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KCiAgICAgICAgICBvYmplY3QuZGlzcGF0Y2hFdmVudCh7CiAgICAgICAgICAgIHR5cGU6ICdtb3VzZWVudGVyJwogICAgICAgICAgfSk7CiAgICAgICAgfSAvL+WmguaenOebuOetieinpuWPkW1vdXNlbW92ZeaWueazleW+l+WIsOeJqeS9k+WdkOaghyjpvKDmoIfkuIDnm7TlnKjniankvZPkuIrnp7vliqgpCiAgICAgICAgZWxzZSBpZiAob2JqZWN0ID09IF90aGF0LmNhY2hlb2JqZWN0cykgewogICAgICAgICAgb2JqZWN0LmRpc3BhdGNoRXZlbnQoewogICAgICAgICAgICB0eXBlOiAnbW91c2Vtb3ZlJwogICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICBfdGhhdC5jYWNoZW9iamVjdHMgPSBvYmplY3Q7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy/lvZPpvKDmoIfku47kuIDkuKrniankvZPnp7vliqjliLDlsITnur/mi77lj5blmajmi77lj5bkuI3liLDniankvZPml7bkuZ/kvJrop6blj5HkuYvliY3nmoTniankvZPnmoRtb3VzZWxlYXZl5pa55rOVCiAgICAgICAgaWYgKF90aGF0LmNhY2hlb2JqZWN0cykgewogICAgICAgICAgLy/lvZPpvKDmoIfku47kuIDkuKrniankvZPnp7vliqjliLDlj6bkuIDkuKrniankvZPml7bvvIzlhYjop6blj5HkuYvliY3nvJPlrZjniankvZPnmoRtb3VzZWxlYXZl5pa55rOVCiAgICAgICAgICAvL+WGjeinpuWPkeW9k+WJjeeJqeS9k+eahG1vdXNlZW50ZXLmlrnms5UKICAgICAgICAgIF90aGF0LmNhY2hlb2JqZWN0cy5kaXNwYXRjaEV2ZW50KHsKICAgICAgICAgICAgdHlwZTogJ21vdXNlbGVhdmUnCiAgICAgICAgICB9KTsKICAgICAgICB9CgogICAgICAgIF90aGF0LmNhY2hlb2JqZWN0cyA9IG51bGw7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJNb3VzZUNsaWNrIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBNb3VzZUNsaWNrKGV2ZW50KSB7CiAgICAgIC8vIGlmKHRyYW5zaW5nKXsKICAgICAgLy8gICAgIHRyYW5zaW5nPWZhbHNlOwogICAgICAvLyAgICAgcmV0dXJuIGZhbHNlOwogICAgICAvLyB9CiAgICAgIHZhciBuZXdvYmpzID0gW107CgogICAgICBpZiAoX3RoYXQuc2NlbmUuY2hpbGRyZW4ubGVuZ3RoID4gMCkgewogICAgICAgIHZhciBjaGlsZG9iajsKCiAgICAgICAgZm9yICh2YXIgaSA9IF90aGF0LnNjZW5lLmNoaWxkcmVuLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7CiAgICAgICAgICBjaGlsZG9iaiA9IF90aGF0LnNjZW5lLmNoaWxkcmVuW2ldOwoKICAgICAgICAgIGlmIChjaGlsZG9iai50eXBlLmluZGV4T2YoJ09iamVjdDNEJykgIT0gLTEgfHwgY2hpbGRvYmoudHlwZS5pbmRleE9mKCdNZXNoJykgIT0gLTEgfHwgY2hpbGRvYmoudHlwZS5pbmRleE9mKCdHcm91cCcpICE9IC0xKSB7CiAgICAgICAgICAgIG5ld29ianMucHVzaChjaGlsZG9iaik7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKGNoaWxkb2JqLnR5cGUuaW5kZXhPZignTGlnaHQnKSAhPSAtMSAmJiBjaGlsZG9iai50eXBlLmluZGV4T2YoJ0hlbHBlcicpID09IC0xKSB7CiAgICAgICAgICAgIG5ld29ianMucHVzaChjaGlsZG9iaik7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IC8vIGNvbnNvbGUubG9nKG5ld29ianMpOwoKCiAgICAgIF90aGF0LnJheWNhc3Rlci5zZXRGcm9tQ2FtZXJhKF90aGF0Lm1vdXNlLCBfdGhhdC5jYW1lcmEpOyAvL+mYsuatouaOp+WItuWZqOiiq+mAieS4rQogICAgICAvLyBzY2VuZS5yZW1vdmUodHJhbnNmb3JtQ29udHJvbCk7CgoKICAgICAgdmFyIGludGVyc2VjdGlvbiA9IF90aGF0LnJheWNhc3Rlci5pbnRlcnNlY3RPYmplY3RzKG5ld29ianMsIHRydWUpOwoKICAgICAgY29uc29sZS5sb2coaW50ZXJzZWN0aW9uKTsgLy/miormiYDmnInmnIljaGlsZHJlbueahOWxj+iUveaOie+8jOWPr+S7pemYsuatouWvuWhlbHBlcui/m+ihjOaOp+WItgogICAgICAvLyBzY2VuZS5hZGQodHJhbnNmb3JtQ29udHJvbCk7CgogICAgICBfdGhhdC5kaXNwYXRjaEV2ZW50KHsKICAgICAgICB0eXBlOiAnY2xpY2snLAogICAgICAgIGludGVyc2VjdGlvbjogaW50ZXJzZWN0aW9uCiAgICAgIH0pOwoKICAgICAgaWYgKGludGVyc2VjdGlvbi5sZW5ndGgpIHsKICAgICAgICB2YXIgb2JqZWN0ID0gaW50ZXJzZWN0aW9uWzBdLm9iamVjdDsKICAgICAgICBvYmplY3QuZGlzcGF0Y2hFdmVudCh7CiAgICAgICAgICB0eXBlOiAnY2xpY2snCiAgICAgICAgfSk7IC8vIHRyYW5zZm9ybUNvbnRyb2wuYXR0YWNoKG9iamVjdCk7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJSZW1vdmVFdmVudCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gUmVtb3ZlRXZlbnQoKSB7CiAgICAgIF90aGF0LmRvbS5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIF90aGF0Lk1vdXNlQ2xpY2spOwoKICAgICAgX3RoYXQuZG9tLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIF90aGF0Lk1vdXNlTW92ZSk7CgogICAgICBfdGhhdC5kb20ucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIF90aGF0Lk1vdXNlVXApOwoKICAgICAgX3RoYXQuZG9tLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIF90aGF0Lk1vdXNlRG93bik7CiAgICB9CiAgfV0pOwoKICByZXR1cm4gRXZlbnRNYW5hZ2VyOwp9KEV2ZW50RGlzcGF0Y2hlcik7CgpleHBvcnQgeyBFdmVudE1hbmFnZXIgfTs="},{"version":3,"sources":["E:/wuhanligong-java/music/vue-admin-template-master/src/lib/EventManager.js"],"names":["Vector2","Raycaster","EventDispatcher","Intersection","_that","EventManager","dom","scene","camera","objs","raycaster","mouse","cacheobjects","addEventListener","MouseDown","MouseUp","MouseMove","MouseClick","event","setFromCamera","intersection","intersectObjects","children","dispatchEvent","type","length","object","newobjs","childobj","i","indexOf","push","x","offsetX","offsetWidth","y","offsetY","offsetHeight","console","log","removeEventListener"],"mappings":"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","sourcesContent":["import { Vector2 } from \"three\";\nimport { Raycaster } from \"three\";\nimport { EventDispatcher } from \"three\";\nimport {Intersection} from \"three\";\n\n//事件处理全局机制\nlet _that;\nclass EventManager extends EventDispatcher{\n\n    constructor(dom,scene,camera,objs){\n        super();\n        _that=this;\n        this.raycaster=new Raycaster();\n        this.mouse=new Vector2();\n        this.cacheobjects=null;\n        this.dom=dom;\n        this.scene=scene;\n        this.camera=camera;\n        this.objs=objs;\n        this.dom.addEventListener('mousedown',this.MouseDown);\n       this.dom.addEventListener('mouseup',this.MouseUp);\n\n       this.dom.addEventListener('mousemove',this.MouseMove);\n        //物体拾取事件处理\n        this.dom.addEventListener('click',this.MouseClick);\n\n    }\n    MouseDown(event){\n\n        _that.raycaster.setFromCamera(_that.mouse,_that.camera);\n        //防止控制器被选中\n        // scene.remove(transformControl);\n        const intersection=_that.raycaster.intersectObjects(_that.scene.children,false);\n        //把所有有children的屏蔽掉，可以防止对helper进行控制\n        // scene.add(transformControl);\n        _that.dispatchEvent({\n          type:'mousedown',\n          intersection\n        });\n        if(intersection.length){\n          const object=intersection[0].object;\n          object.dispatchEvent({\n            type:'mousedown',\n          });\n          // transformControl.attach(object);\n        }\n\n    }\n    MouseUp(event){\n\n        _that.raycaster.setFromCamera(_that.mouse,_that.camera);\n        //防止控制器被选中\n        // scene.remove(transformControl);\n        const intersection=_that.raycaster.intersectObjects(_that.scene.children,false);\n        //把所有有children的屏蔽掉，可以防止对helper进行控制\n        // scene.add(transformControl);\n        _that.dispatchEvent({\n          type:'mouseup',\n          intersection\n        });\n        if(intersection.length){\n          const object=intersection[0].object;\n          object.dispatchEvent({\n            type:'mouseup',\n          });\n          // transformControl.attach(object);\n        }\n\n    }\n    MouseMove(event){\n\n        let newobjs=[];\n        if(_that.scene.children.length>0){\n          let childobj;\n          for(var i=_that.scene.children.length-1;i>=0;i--){\n            childobj=_that.scene.children[i];\n            if(childobj.type.indexOf('Object3D')!=-1||childobj.type.indexOf('Mesh')!=-1||childobj.type.indexOf('Group')!=-1){\n              newobjs.push(childobj);\n            }\n            if((childobj.type.indexOf('Light')!=-1&&childobj.type.indexOf('Helper')==-1)){\n              newobjs.push(childobj);\n            }\n          }\n        }\n        //console.log(event.offsetX,event.offsetY);\n      _that.mouse.x=(event.offsetX/ _that.dom.offsetWidth)*2-1;\n      _that.mouse.y=(-event.offsetY*2)/ _that.dom.offsetHeight+1;\n        // console.log(mouse.x,mouse.y);\n      _that.raycaster.setFromCamera(_that.mouse,_that.camera);\n        //防止控制器被选中\n        // scene.remove(transformControl);\n        const intersection=_that.raycaster.intersectObjects(newobjs,true);\n        //把所有有children的屏蔽掉，可以防止对helper进行控制\n        // scene.add(transformControl);\n      _that.dispatchEvent({\n          type:'mousemove',\n          intersection\n        });\n        if(intersection.length){\n          //如果拾取到材质物体\n          const object=intersection[0].object;\n          //如果当下物体不是上次缓存物体，说明是从不同物体上移到当前物体上触发mouseenter事件\n          if(object!=_that.cacheobjects){\n            if(_that.cacheobjects){\n              //当鼠标从一个物体移动到另一个物体时，先触发之前缓存物体的mouseleave方法\n              //再触发当前物体的mouseenter方法\n              _that.cacheobjects.dispatchEvent({\n                type:'mouseleave'\n              });\n            }\n            object.dispatchEvent({\n              type:'mouseenter'\n            });\n          }//如果相等触发mousemove方法得到物体坐标(鼠标一直在物体上移动)\n          else if(object==_that.cacheobjects){\n            object.dispatchEvent({\n              type:'mousemove'\n            });\n          }\n          _that.cacheobjects=object;\n        }else{\n          //当鼠标从一个物体移动到射线拾取器拾取不到物体时也会触发之前的物体的mouseleave方法\n          if(_that.cacheobjects){\n            //当鼠标从一个物体移动到另一个物体时，先触发之前缓存物体的mouseleave方法\n            //再触发当前物体的mouseenter方法\n            _that.cacheobjects.dispatchEvent({\n              type:'mouseleave'\n            });\n          }\n          _that.cacheobjects=null;\n\n\n        }\n\n    }\n    MouseClick(event){\n\n        // if(transing){\n        //     transing=false;\n        //     return false;\n        // }\n        let newobjs=[];\n        if(_that.scene.children.length>0){\n          let childobj;\n          for(var i=_that.scene.children.length-1;i>=0;i--){\n            childobj=_that.scene.children[i];\n            if(childobj.type.indexOf('Object3D')!=-1||childobj.type.indexOf('Mesh')!=-1||childobj.type.indexOf('Group')!=-1){\n              newobjs.push(childobj);\n            }\n            if((childobj.type.indexOf('Light')!=-1&&childobj.type.indexOf('Helper')==-1)){\n              newobjs.push(childobj);\n            }\n          }\n        }\n        // console.log(newobjs);\n      _that.raycaster.setFromCamera(_that.mouse,_that.camera);\n        //防止控制器被选中\n        // scene.remove(transformControl);\n        const intersection=_that.raycaster.intersectObjects(newobjs,true);\n        console.log(intersection);\n        //把所有有children的屏蔽掉，可以防止对helper进行控制\n        // scene.add(transformControl);\n      _that.dispatchEvent({\n          type:'click',\n          intersection\n        });\n        if(intersection.length){\n          const object=intersection[0].object;\n          object.dispatchEvent({\n            type:'click',\n          });\n          // transformControl.attach(object);\n        }\n\n    }\n    RemoveEvent(){\n      _that.dom.removeEventListener('click',_that.MouseClick);\n      _that.dom.removeEventListener('mousemove',_that.MouseMove);\n      _that.dom.removeEventListener('mouseup',_that.MouseUp);\n      _that.dom.removeEventListener('mousedown',_that.MouseDown);\n    }\n}\nexport {EventManager};\n"]}]}